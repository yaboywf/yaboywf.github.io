var aa,Pe,db,Yi,Zp,hb,fb,pb,kh,Dd,Ed,gb,Ms={},mb=[],tS=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,oa=Array.isArray;function An(n,e){for(var t in e)n[t]=e[t];return n}function Fh(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function Ne(n,e,t){var i,r,s,a={};for(s in e)s=="key"?i=e[s]:s=="ref"?r=e[s]:a[s]=e[s];if(arguments.length>2&&(a.children=arguments.length>3?aa.call(arguments,2):t),typeof n=="function"&&n.defaultProps!=null)for(s in n.defaultProps)a[s]===void 0&&(a[s]=n.defaultProps[s]);return Ds(n,a,i,r,null)}function Ds(n,e,t,i,r){var s={type:n,props:e,key:t,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++db,__i:-1,__u:0};return r==null&&Pe.vnode!=null&&Pe.vnode(s),s}function It(n){return n.children}function Zt(n,e){this.props=n,this.context=e}function Vr(n,e){if(e==null)return n.__?Vr(n.__,n.__i+1):null;for(var t;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?Vr(n):null}function yb(n){var e,t;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return yb(n)}}function Sd(n){(!n.__d&&(n.__d=!0)&&Yi.push(n)&&!zo.__r++||Zp!=Pe.debounceRendering)&&((Zp=Pe.debounceRendering)||hb)(zo)}function zo(){for(var n,e,t,i,r,s,a,o=1;Yi.length;)Yi.length>o&&Yi.sort(fb),n=Yi.shift(),o=Yi.length,n.__d&&(t=void 0,i=void 0,r=(i=(e=n).__v).__e,s=[],a=[],e.__P&&((t=An({},i)).__v=i.__v+1,Pe.vnode&&Pe.vnode(t),Ph(e.__P,t,i,e.__n,e.__P.namespaceURI,32&i.__u?[r]:null,s,r??Vr(i),!!(32&i.__u),a),t.__v=i.__v,t.__.__k[t.__i]=t,xb(s,t,a),i.__e=i.__=null,t.__e!=r&&yb(t)));zo.__r=0}function vb(n,e,t,i,r,s,a,o,c,l,u){var d,h,f,p,m,g,y,v=i&&i.__k||mb,b=e.length;for(c=nS(t,e,v,c,b),d=0;d<b;d++)(f=t.__k[d])!=null&&(h=f.__i==-1?Ms:v[f.__i]||Ms,f.__i=d,g=Ph(n,f,h,r,s,a,o,c,l,u),p=f.__e,f.ref&&h.ref!=f.ref&&(h.ref&&Oh(h.ref,null,f),u.push(f.ref,f.__c||p,f)),m==null&&p!=null&&(m=p),(y=!!(4&f.__u))||h.__k===f.__k?c=bb(f,c,n,y):typeof f.type=="function"&&g!==void 0?c=g:p&&(c=p.nextSibling),f.__u&=-7);return t.__e=m,c}function nS(n,e,t,i,r){var s,a,o,c,l,u=t.length,d=u,h=0;for(n.__k=new Array(r),s=0;s<r;s++)(a=e[s])!=null&&typeof a!="boolean"&&typeof a!="function"?(typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?a=n.__k[s]=Ds(null,a,null,null,null):oa(a)?a=n.__k[s]=Ds(It,{children:a},null,null,null):a.constructor==null&&a.__b>0?a=n.__k[s]=Ds(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):n.__k[s]=a,c=s+h,a.__=n,a.__b=n.__b+1,o=null,(l=a.__i=iS(a,t,c,d))!=-1&&(d--,(o=t[l])&&(o.__u|=2)),o==null||o.__v==null?(l==-1&&(r>u?h--:r<u&&h++),typeof a.type!="function"&&(a.__u|=4)):l!=c&&(l==c-1?h--:l==c+1?h++:(l>c?h--:h++,a.__u|=4))):n.__k[s]=null;if(d)for(s=0;s<u;s++)(o=t[s])!=null&&(2&o.__u)==0&&(o.__e==i&&(i=Vr(o)),_b(o,o));return i}function bb(n,e,t,i){var r,s;if(typeof n.type=="function"){for(r=n.__k,s=0;r&&s<r.length;s++)r[s]&&(r[s].__=n,e=bb(r[s],e,t,i));return e}n.__e!=e&&(i&&(e&&n.type&&!e.parentNode&&(e=Vr(n)),t.insertBefore(n.__e,e||null)),e=n.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Hn(n,e){return e=e||[],n==null||typeof n=="boolean"||(oa(n)?n.some(function(t){Hn(t,e)}):e.push(n)),e}function iS(n,e,t,i){var r,s,a,o=n.key,c=n.type,l=e[t],u=l!=null&&(2&l.__u)==0;if(l===null&&o==null||u&&o==l.key&&c==l.type)return t;if(i>(u?1:0)){for(r=t-1,s=t+1;r>=0||s<e.length;)if((l=e[a=r>=0?r--:s++])!=null&&(2&l.__u)==0&&o==l.key&&c==l.type)return a}return-1}function Jp(n,e,t){e[0]=="-"?n.setProperty(e,t??""):n[e]=t==null?"":typeof t!="number"||tS.test(e)?t:t+"px"}function Ea(n,e,t,i,r){var s,a;e:if(e=="style")if(typeof t=="string")n.style.cssText=t;else{if(typeof i=="string"&&(n.style.cssText=i=""),i)for(e in i)t&&e in t||Jp(n.style,e,"");if(t)for(e in t)i&&t[e]==i[e]||Jp(n.style,e,t[e])}else if(e[0]=="o"&&e[1]=="n")s=e!=(e=e.replace(pb,"$1")),a=e.toLowerCase(),e=a in n||e=="onFocusOut"||e=="onFocusIn"?a.slice(2):e.slice(2),n.l||(n.l={}),n.l[e+s]=t,t?i?t.u=i.u:(t.u=kh,n.addEventListener(e,s?Ed:Dd,s)):n.removeEventListener(e,s?Ed:Dd,s);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in n)try{n[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!="-"?n.removeAttribute(e):n.setAttribute(e,e=="popover"&&t==1?"":t))}}function eg(n){return function(e){if(this.l){var t=this.l[e.type+n];if(e.t==null)e.t=kh++;else if(e.t<t.u)return;return t(Pe.event?Pe.event(e):e)}}}function Ph(n,e,t,i,r,s,a,o,c,l){var u,d,h,f,p,m,g,y,v,b,T,x,_,D,w,S,C,O=e.type;if(e.constructor!=null)return null;128&t.__u&&(c=!!(32&t.__u),s=[o=e.__e=t.__e]),(u=Pe.__b)&&u(e);e:if(typeof O=="function")try{if(y=e.props,v="prototype"in O&&O.prototype.render,b=(u=O.contextType)&&i[u.__c],T=u?b?b.props.value:u.__:i,t.__c?g=(d=e.__c=t.__c).__=d.__E:(v?e.__c=d=new O(y,T):(e.__c=d=new Zt(y,T),d.constructor=O,d.render=sS),b&&b.sub(d),d.state||(d.state={}),d.__n=i,h=d.__d=!0,d.__h=[],d._sb=[]),v&&d.__s==null&&(d.__s=d.state),v&&O.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=An({},d.__s)),An(d.__s,O.getDerivedStateFromProps(y,d.__s))),f=d.props,p=d.state,d.__v=e,h)v&&O.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),v&&d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(v&&O.getDerivedStateFromProps==null&&y!==f&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(y,T),e.__v==t.__v||!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(y,d.__s,T)===!1){for(e.__v!=t.__v&&(d.props=y,d.state=d.__s,d.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(I){I&&(I.__=e)}),x=0;x<d._sb.length;x++)d.__h.push(d._sb[x]);d._sb=[],d.__h.length&&a.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(y,d.__s,T),v&&d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(f,p,m)})}if(d.context=T,d.props=y,d.__P=n,d.__e=!1,_=Pe.__r,D=0,v){for(d.state=d.__s,d.__d=!1,_&&_(e),u=d.render(d.props,d.state,d.context),w=0;w<d._sb.length;w++)d.__h.push(d._sb[w]);d._sb=[]}else do d.__d=!1,_&&_(e),u=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++D<25);d.state=d.__s,d.getChildContext!=null&&(i=An(An({},i),d.getChildContext())),v&&!h&&d.getSnapshotBeforeUpdate!=null&&(m=d.getSnapshotBeforeUpdate(f,p)),S=u,u!=null&&u.type===It&&u.key==null&&(S=Tb(u.props.children)),o=vb(n,oa(S)?S:[S],e,t,i,r,s,a,o,c,l),d.base=e.__e,e.__u&=-161,d.__h.length&&a.push(d),g&&(d.__E=d.__=null)}catch(I){if(e.__v=null,c||s!=null)if(I.then){for(e.__u|=c?160:128;o&&o.nodeType==8&&o.nextSibling;)o=o.nextSibling;s[s.indexOf(o)]=null,e.__e=o}else{for(C=s.length;C--;)Fh(s[C]);Ad(e)}else e.__e=t.__e,e.__k=t.__k,I.then||Ad(e);Pe.__e(I,e,t)}else s==null&&e.__v==t.__v?(e.__k=t.__k,e.__e=t.__e):o=e.__e=rS(t.__e,e,t,i,r,s,a,c,l);return(u=Pe.diffed)&&u(e),128&e.__u?void 0:o}function Ad(n){n&&n.__c&&(n.__c.__e=!0),n&&n.__k&&n.__k.forEach(Ad)}function xb(n,e,t){for(var i=0;i<t.length;i++)Oh(t[i],t[++i],t[++i]);Pe.__c&&Pe.__c(e,n),n.some(function(r){try{n=r.__h,r.__h=[],n.some(function(s){s.call(r)})}catch(s){Pe.__e(s,r.__v)}})}function Tb(n){return typeof n!="object"||n==null||n.__b&&n.__b>0?n:oa(n)?n.map(Tb):An({},n)}function rS(n,e,t,i,r,s,a,o,c){var l,u,d,h,f,p,m,g=t.props||Ms,y=e.props,v=e.type;if(v=="svg"?r="http://www.w3.org/2000/svg":v=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),s!=null){for(l=0;l<s.length;l++)if((f=s[l])&&"setAttribute"in f==!!v&&(v?f.localName==v:f.nodeType==3)){n=f,s[l]=null;break}}if(n==null){if(v==null)return document.createTextNode(y);n=document.createElementNS(r,v,y.is&&y),o&&(Pe.__m&&Pe.__m(e,s),o=!1),s=null}if(v==null)g===y||o&&n.data==y||(n.data=y);else{if(s=s&&aa.call(n.childNodes),!o&&s!=null)for(g={},l=0;l<n.attributes.length;l++)g[(f=n.attributes[l]).name]=f.value;for(l in g)if(f=g[l],l!="children"){if(l=="dangerouslySetInnerHTML")d=f;else if(!(l in y)){if(l=="value"&&"defaultValue"in y||l=="checked"&&"defaultChecked"in y)continue;Ea(n,l,null,f,r)}}for(l in y)f=y[l],l=="children"?h=f:l=="dangerouslySetInnerHTML"?u=f:l=="value"?p=f:l=="checked"?m=f:o&&typeof f!="function"||g[l]===f||Ea(n,l,f,g[l],r);if(u)o||d&&(u.__html==d.__html||u.__html==n.innerHTML)||(n.innerHTML=u.__html),e.__k=[];else if(d&&(n.innerHTML=""),vb(e.type=="template"?n.content:n,oa(h)?h:[h],e,t,i,v=="foreignObject"?"http://www.w3.org/1999/xhtml":r,s,a,s?s[0]:t.__k&&Vr(t,0),o,c),s!=null)for(l=s.length;l--;)Fh(s[l]);o||(l="value",v=="progress"&&p==null?n.removeAttribute("value"):p!=null&&(p!==n[l]||v=="progress"&&!p||v=="option"&&p!=g[l])&&Ea(n,l,p,g[l],r),l="checked",m!=null&&m!=n[l]&&Ea(n,l,m,g[l],r))}return n}function Oh(n,e,t){try{if(typeof n=="function"){var i=typeof n.__u=="function";i&&n.__u(),i&&e==null||(n.__u=n(e))}else n.current=e}catch(r){Pe.__e(r,t)}}function _b(n,e,t){var i,r;if(Pe.unmount&&Pe.unmount(n),(i=n.ref)&&(i.current&&i.current!=n.__e||Oh(i,null,e)),(i=n.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(s){Pe.__e(s,e)}i.base=i.__P=null}if(i=n.__k)for(r=0;r<i.length;r++)i[r]&&_b(i[r],e,t||typeof n.type!="function");t||Fh(n.__e),n.__c=n.__=n.__e=void 0}function sS(n,e,t){return this.constructor(n,t)}function Db(n,e,t){var i,r,s,a;e==document&&(e=document.documentElement),Pe.__&&Pe.__(n,e),r=(i=!1)?null:e.__k,s=[],a=[],Ph(e,n=e.__k=Ne(It,null,[n]),r||Ms,Ms,e.namespaceURI,r?null:e.firstChild?aa.call(e.childNodes):null,s,r?r.__e:e.firstChild,i,a),xb(s,n,a)}function aS(n,e,t){var i,r,s,a,o=An({},n.props);for(s in n.type&&n.type.defaultProps&&(a=n.type.defaultProps),e)s=="key"?i=e[s]:s=="ref"?r=e[s]:o[s]=e[s]===void 0&&a!=null?a[s]:e[s];return arguments.length>2&&(o.children=arguments.length>3?aa.call(arguments,2):t),Ds(n.type,o,i||n.key,r||n.ref,null)}function Tt(n){function e(t){var i,r;return this.getChildContext||(i=new Set,(r={})[e.__c]=this,this.getChildContext=function(){return r},this.componentWillUnmount=function(){i=null},this.shouldComponentUpdate=function(s){this.props.value!=s.value&&i.forEach(function(a){a.__e=!0,Sd(a)})},this.sub=function(s){i.add(s);var a=s.componentWillUnmount;s.componentWillUnmount=function(){i&&i.delete(s),a&&a.call(s)}}),t.children}return e.__c="__cC"+gb++,e.__=n,e.Provider=e.__l=(e.Consumer=function(t,i){return t.children(i)}).contextType=e,e}aa=mb.slice,Pe={__e:function(n,e,t,i){for(var r,s,a;e=e.__;)if((r=e.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(n)),a=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(n,i||{}),a=r.__d),a)return r.__E=r}catch(o){n=o}throw n}},db=0,Zt.prototype.setState=function(n,e){var t;t=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=An({},this.state),typeof n=="function"&&(n=n(An({},t),this.props)),n&&An(t,n),n!=null&&this.__v&&(e&&this._sb.push(e),Sd(this))},Zt.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),Sd(this))},Zt.prototype.render=It,Yi=[],hb=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,fb=function(n,e){return n.__v.__b-e.__v.__b},zo.__r=0,pb=/(PointerCapture)$|Capture$/i,kh=0,Dd=eg(!1),Ed=eg(!0),gb=0;var _i,Je,yl,tg,Bs=0,Eb=[],ct=Pe,ng=ct.__b,ig=ct.__r,rg=ct.diffed,sg=ct.__c,ag=ct.unmount,og=ct.__;function Zr(n,e){ct.__h&&ct.__h(Je,n,Bs||e),Bs=0;var t=Je.__H||(Je.__H={__:[],__h:[]});return n>=t.__.length&&t.__.push({}),t.__[n]}function ar(n){return Bs=1,oS(Sb,n)}function oS(n,e,t){var i=Zr(_i++,2);if(i.t=n,!i.__c&&(i.__=[t?t(e):Sb(void 0,e),function(o){var c=i.__N?i.__N[0]:i.__[0],l=i.t(c,o);c!==l&&(i.__N=[l,i.__[1]],i.__c.setState({}))}],i.__c=Je,!Je.__f)){var r=function(o,c,l){if(!i.__c.__H)return!0;var u=i.__c.__H.__.filter(function(h){return!!h.__c});if(u.every(function(h){return!h.__N}))return!s||s.call(this,o,c,l);var d=i.__c.props!==o;return u.forEach(function(h){if(h.__N){var f=h.__[0];h.__=h.__N,h.__N=void 0,f!==h.__[0]&&(d=!0)}}),s&&s.call(this,o,c,l)||d};Je.__f=!0;var s=Je.shouldComponentUpdate,a=Je.componentWillUpdate;Je.componentWillUpdate=function(o,c,l){if(this.__e){var u=s;s=void 0,r(o,c,l),s=u}a&&a.call(this,o,c,l)},Je.shouldComponentUpdate=r}return i.__N||i.__}function Di(n,e){var t=Zr(_i++,3);!ct.__s&&Bh(t.__H,e)&&(t.__=n,t.u=e,Je.__H.__h.push(t))}function Sc(n,e){var t=Zr(_i++,4);!ct.__s&&Bh(t.__H,e)&&(t.__=n,t.u=e,Je.__h.push(t))}function Jt(n){return Bs=5,Et(function(){return{current:n}},[])}function Et(n,e){var t=Zr(_i++,7);return Bh(t.__H,e)&&(t.__=n(),t.__H=e,t.__h=n),t.__}function Ci(n,e){return Bs=8,Et(function(){return n},e)}function Ue(n){var e=Je.context[n.__c],t=Zr(_i++,9);return t.c=n,e?(t.__==null&&(t.__=!0,e.sub(Je)),e.props.value):n.__}function Mh(){var n=Zr(_i++,11);if(!n.__){for(var e=Je.__v;e!==null&&!e.__m&&e.__!==null;)e=e.__;var t=e.__m||(e.__m=[0,0]);n.__="P"+t[0]+"-"+t[1]++}return n.__}function cS(){for(var n;n=Eb.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(ao),n.__H.__h.forEach(wd),n.__H.__h=[]}catch(e){n.__H.__h=[],ct.__e(e,n.__v)}}ct.__b=function(n){Je=null,ng&&ng(n)},ct.__=function(n,e){n&&e.__k&&e.__k.__m&&(n.__m=e.__k.__m),og&&og(n,e)},ct.__r=function(n){ig&&ig(n),_i=0;var e=(Je=n.__c).__H;e&&(yl===Je?(e.__h=[],Je.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0})):(e.__h.forEach(ao),e.__h.forEach(wd),e.__h=[],_i=0)),yl=Je},ct.diffed=function(n){rg&&rg(n);var e=n.__c;e&&e.__H&&(e.__H.__h.length&&(Eb.push(e)!==1&&tg===ct.requestAnimationFrame||((tg=ct.requestAnimationFrame)||lS)(cS)),e.__H.__.forEach(function(t){t.u&&(t.__H=t.u),t.u=void 0})),yl=Je=null},ct.__c=function(n,e){e.some(function(t){try{t.__h.forEach(ao),t.__h=t.__h.filter(function(i){return!i.__||wd(i)})}catch(i){e.some(function(r){r.__h&&(r.__h=[])}),e=[],ct.__e(i,t.__v)}}),sg&&sg(n,e)},ct.unmount=function(n){ag&&ag(n);var e,t=n.__c;t&&t.__H&&(t.__H.__.forEach(function(i){try{ao(i)}catch(r){e=r}}),t.__H=void 0,e&&ct.__e(e,t.__v))};var cg=typeof requestAnimationFrame=="function";function lS(n){var e,t=function(){clearTimeout(i),cg&&cancelAnimationFrame(e),setTimeout(n)},i=setTimeout(t,35);cg&&(e=requestAnimationFrame(t))}function ao(n){var e=Je,t=n.__c;typeof t=="function"&&(n.__c=void 0,t()),Je=e}function wd(n){var e=Je;n.__c=n.__(),Je=e}function Bh(n,e){return!n||n.length!==e.length||e.some(function(t,i){return t!==n[i]})}function Sb(n,e){return typeof e=="function"?e(n):e}function Ab(n,e){for(var t in e)n[t]=e[t];return n}function Id(n,e){for(var t in n)if(t!=="__source"&&!(t in e))return!0;for(var i in e)if(i!=="__source"&&n[i]!==e[i])return!0;return!1}function Nh(n){n()}var wb=Sc;function lg(n,e){this.props=n,this.context=e}function uS(n,e){function t(r){var s=this.props.ref,a=s==r.ref;return!a&&s&&(s.call?s(null):s.current=null),e?!e(this.props,r)||!a:Id(this.props,r)}function i(r){return this.shouldComponentUpdate=t,Ne(n,r)}return i.displayName="Memo("+(n.displayName||n.name)+")",i.prototype.isReactComponent=!0,i.__f=!0,i.type=n,i}(lg.prototype=new Zt).isPureReactComponent=!0,lg.prototype.shouldComponentUpdate=function(n,e){return Id(this.props,n)||Id(this.state,e)};var ug=Pe.__b;Pe.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),ug&&ug(n)};var dS=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Ac(n){function e(t){var i=Ab({},t);return delete i.ref,n(i,t.ref||null)}return e.$$typeof=dS,e.render=n,e.prototype.isReactComponent=e.__f=!0,e.displayName="ForwardRef("+(n.displayName||n.name)+")",e}var dg=function(n,e){return n==null?null:Hn(Hn(n).map(e))},Ib={map:dg,forEach:dg,count:function(n){return n?Hn(n).length:0},only:function(n){var e=Hn(n);if(e.length!==1)throw"Children.only";return e[0]},toArray:Hn},hS=Pe.__e;Pe.__e=function(n,e,t,i){if(n.then){for(var r,s=e;s=s.__;)if((r=s.__c)&&r.__c)return e.__e==null&&(e.__e=t.__e,e.__k=t.__k),r.__c(n,e)}hS(n,e,t,i)};var hg=Pe.unmount;function Cb(n,e,t){return n&&(n.__c&&n.__c.__H&&(n.__c.__H.__.forEach(function(i){typeof i.__c=="function"&&i.__c()}),n.__c.__H=null),(n=Ab({},n)).__c!=null&&(n.__c.__P===t&&(n.__c.__P=e),n.__c.__e=!0,n.__c=null),n.__k=n.__k&&n.__k.map(function(i){return Cb(i,e,t)})),n}function Rb(n,e,t){return n&&t&&(n.__v=null,n.__k=n.__k&&n.__k.map(function(i){return Rb(i,e,t)}),n.__c&&n.__c.__P===e&&(n.__e&&t.appendChild(n.__e),n.__c.__e=!0,n.__c.__P=t)),n}function vl(){this.__u=0,this.o=null,this.__b=null}function Lb(n){var e=n.__.__c;return e&&e.__a&&e.__a(n)}function j6(n){var e,t,i,r=null;function s(a){if(e||(e=n()).then(function(o){o&&(r=o.default||o),i=!0},function(o){t=o,i=!0}),t)throw t;if(!i)throw e;return r?Ne(r,a):null}return s.displayName="Lazy",s.__f=!0,s}function Sa(){this.i=null,this.l=null}Pe.unmount=function(n){var e=n.__c;e&&e.__R&&e.__R(),e&&32&n.__u&&(n.type=null),hg&&hg(n)},(vl.prototype=new Zt).__c=function(n,e){var t=e.__c,i=this;i.o==null&&(i.o=[]),i.o.push(t);var r=Lb(i.__v),s=!1,a=function(){s||(s=!0,t.__R=null,r?r(o):o())};t.__R=a;var o=function(){if(!--i.__u){if(i.state.__a){var c=i.state.__a;i.__v.__k[0]=Rb(c,c.__c.__P,c.__c.__O)}var l;for(i.setState({__a:i.__b=null});l=i.o.pop();)l.forceUpdate()}};i.__u++||32&e.__u||i.setState({__a:i.__b=i.__v.__k[0]}),n.then(a,a)},vl.prototype.componentWillUnmount=function(){this.o=[]},vl.prototype.render=function(n,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=Cb(this.__b,t,i.__O=i.__P)}this.__b=null}var r=e.__a&&Ne(It,null,n.fallback);return r&&(r.__u&=-33),[Ne(It,null,e.__a?null:n.children),r]};var fg=function(n,e,t){if(++t[1]===t[0]&&n.l.delete(e),n.props.revealOrder&&(n.props.revealOrder[0]!=="t"||!n.l.size))for(t=n.i;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;n.i=t=t[2]}};(Sa.prototype=new Zt).__a=function(n){var e=this,t=Lb(e.__v),i=e.l.get(n);return i[0]++,function(r){var s=function(){e.props.revealOrder?(i.push(r),fg(e,n,i)):r()};t?t(s):s()}},Sa.prototype.render=function(n){this.i=null,this.l=new Map;var e=Hn(n.children);n.revealOrder&&n.revealOrder[0]==="b"&&e.reverse();for(var t=e.length;t--;)this.l.set(e[t],this.i=[1,0,this.i]);return n.children},Sa.prototype.componentDidUpdate=Sa.prototype.componentDidMount=function(){var n=this;this.l.forEach(function(e,t){fg(n,t,e)})};var Ub=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,fS=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,pS=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,gS=/[A-Z0-9]/g,mS=typeof document<"u",yS=function(n){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(n)};function vS(n,e,t){return e.__k==null&&(e.textContent=""),Db(n,e),typeof t=="function"&&t(),n?n.__c:null}Zt.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(n){Object.defineProperty(Zt.prototype,n,{configurable:!0,get:function(){return this["UNSAFE_"+n]},set:function(e){Object.defineProperty(this,n,{configurable:!0,writable:!0,value:e})}})});var pg=Pe.event;function bS(){}function xS(){return this.cancelBubble}function TS(){return this.defaultPrevented}Pe.event=function(n){return pg&&(n=pg(n)),n.persist=bS,n.isPropagationStopped=xS,n.isDefaultPrevented=TS,n.nativeEvent=n};var _S={enumerable:!1,configurable:!0,get:function(){return this.class}},gg=Pe.vnode;Pe.vnode=function(n){typeof n.type=="string"&&(function(e){var t=e.props,i=e.type,r={},s=i.indexOf("-")===-1;for(var a in t){var o=t[a];if(!(a==="value"&&"defaultValue"in t&&o==null||mS&&a==="children"&&i==="noscript"||a==="class"||a==="className")){var c=a.toLowerCase();a==="defaultValue"&&"value"in t&&t.value==null?a="value":a==="download"&&o===!0?o="":c==="translate"&&o==="no"?o=!1:c[0]==="o"&&c[1]==="n"?c==="ondoubleclick"?a="ondblclick":c!=="onchange"||i!=="input"&&i!=="textarea"||yS(t.type)?c==="onfocus"?a="onfocusin":c==="onblur"?a="onfocusout":pS.test(a)&&(a=c):c=a="oninput":s&&fS.test(a)?a=a.replace(gS,"-$&").toLowerCase():o===null&&(o=void 0),c==="oninput"&&r[a=c]&&(a="oninputCapture"),r[a]=o}}i=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=Hn(t.children).forEach(function(l){l.props.selected=r.value.indexOf(l.props.value)!=-1})),i=="select"&&r.defaultValue!=null&&(r.value=Hn(t.children).forEach(function(l){l.props.selected=r.multiple?r.defaultValue.indexOf(l.props.value)!=-1:r.defaultValue==l.props.value})),t.class&&!t.className?(r.class=t.class,Object.defineProperty(r,"className",_S)):(t.className&&!t.class||t.class&&t.className)&&(r.class=r.className=t.className),e.props=r})(n),n.$$typeof=Ub,gg&&gg(n)};var mg=Pe.__r;Pe.__r=function(n){mg&&mg(n),n.__c};var yg=Pe.diffed;Pe.diffed=function(n){yg&&yg(n);var e=n.props,t=n.__e;t!=null&&n.type==="textarea"&&"value"in e&&e.value!==t.value&&(t.value=e.value==null?"":e.value)};function $h(n){return!!n&&n.$$typeof===Ub}function DS(n){return $h(n)?aS.apply(null,arguments):n}function ES(n){return!!n.__k&&(Db(null,n),!0)}var K6=It,z6={Fragment:It},SS=0;function Ei(n,e,t,i,r,s){e||(e={});var a,o,c=e;if("ref"in c)for(o in c={},e)o=="ref"?a=e[o]:c[o]=e[o];var l={type:n,props:c,key:t,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--SS,__i:-1,__u:0,__source:r,__self:s};if(typeof n=="function"&&(a=n.defaultProps))for(o in a)c[o]===void 0&&(c[o]=a[o]);return Pe.vnode&&Pe.vnode(l),l}function X6(n){return{render:function(e){vS(e,n)},unmount:function(){ES(n)}}}var vg="popstate";function AS(n={}){function e(r,s){let{pathname:a="/",search:o="",hash:c=""}=ur(r.location.hash.substring(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Cd("",{pathname:a,search:o,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){let a=r.document.querySelector("base"),o="";if(a&&a.getAttribute("href")){let c=r.location.href,l=c.indexOf("#");o=l===-1?c:c.slice(0,l)}return o+"#"+(typeof s=="string"?s:Ns(s))}function i(r,s){nn(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return IS(e,t,i,n)}function st(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function nn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function wS(){return Math.random().toString(36).substring(2,10)}function bg(n,e){return{usr:n.state,key:n.key,idx:e}}function Cd(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?ur(e):e,state:t,key:e&&e.key||i||wS()}}function Ns({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function ur(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function IS(n,e,t,i={}){let{window:r=document.defaultView,v5Compat:s=!1}=i,a=r.history,o="POP",c=null,l=u();l==null&&(l=0,a.replaceState({...a.state,idx:l},""));function u(){return(a.state||{idx:null}).idx}function d(){o="POP";let g=u(),y=g==null?null:g-l;l=g,c&&c({action:o,location:m.location,delta:y})}function h(g,y){o="PUSH";let v=Cd(m.location,g,y);t&&t(v,g),l=u()+1;let b=bg(v,l),T=m.createHref(v);try{a.pushState(b,"",T)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;r.location.assign(T)}s&&c&&c({action:o,location:m.location,delta:1})}function f(g,y){o="REPLACE";let v=Cd(m.location,g,y);t&&t(v,g),l=u();let b=bg(v,l),T=m.createHref(v);a.replaceState(b,"",T),s&&c&&c({action:o,location:m.location,delta:0})}function p(g){return CS(g)}let m={get action(){return o},get location(){return n(r,a)},listen(g){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(vg,d),c=g,()=>{r.removeEventListener(vg,d),c=null}},createHref(g){return e(r,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:f,go(g){return a.go(g)}};return m}function CS(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),st(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Ns(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function kb(n,e,t="/"){return RS(n,e,t,!1)}function RS(n,e,t,i){let r=typeof e=="string"?ur(e):e,s=Kn(r.pathname||"/",t);if(s==null)return null;let a=Fb(n);LS(a);let o=null;for(let c=0;o==null&&c<a.length;++c){let l=VS(s);o=$S(a[c],l,i)}return o}function Fb(n,e=[],t=[],i="",r=!1){let s=(a,o,c=r,l)=>{let u={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(i)&&c)return;st(u.relativePath.startsWith(i),`Absolute route path "${u.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(i.length)}let d=qn([i,u.relativePath]),h=t.concat(u);a.children&&a.children.length>0&&(st(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),Fb(a.children,e,h,d,c)),!(a.path==null&&!a.index)&&e.push({path:d,score:BS(d,a.index),routesMeta:h})};return n.forEach((a,o)=>{if(a.path===""||!a.path?.includes("?"))s(a,o);else for(let c of Pb(a.path))s(a,o,!0,c)}),e}function Pb(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let a=Pb(i.join("/")),o=[];return o.push(...a.map(c=>c===""?s:[s,c].join("/"))),r&&o.push(...a),o.map(c=>n.startsWith("/")&&c===""?"/":c)}function LS(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:NS(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var US=/^:[\w-]+$/,kS=3,FS=2,PS=1,OS=10,MS=-2,xg=n=>n==="*";function BS(n,e){let t=n.split("/"),i=t.length;return t.some(xg)&&(i+=MS),e&&(i+=FS),t.filter(r=>!xg(r)).reduce((r,s)=>r+(US.test(s)?kS:s===""?PS:OS),i)}function NS(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function $S(n,e,t=!1){let{routesMeta:i}=n,r={},s="/",a=[];for(let o=0;o<i.length;++o){let c=i[o],l=o===i.length-1,u=s==="/"?e:e.slice(s.length)||"/",d=Xo({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),h=c.route;if(!d&&l&&t&&!i[i.length-1].route.index&&(d=Xo({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!d)return null;Object.assign(r,d.params),a.push({params:r,pathname:qn([s,d.pathname]),pathnameBase:jS(qn([s,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(s=qn([s,d.pathnameBase]))}return a}function Xo(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=WS(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:i.reduce((l,{paramName:u,isOptional:d},h)=>{if(u==="*"){let p=o[h]||"";a=s.slice(0,s.length-p.length).replace(/(.)\/+$/,"$1")}const f=o[h];return d&&!f?l[u]=void 0:l[u]=(f||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:a,pattern:n}}function WS(n,e=!1,t=!0){nn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,c)=>(i.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function VS(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return nn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Kn(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}var Ob=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,GS=n=>Ob.test(n);function HS(n,e="/"){let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?ur(n):n,s;if(t)if(GS(t))s=t;else{if(t.includes("//")){let a=t;t=t.replace(/\/\/+/g,"/"),nn(!1,`Pathnames cannot have embedded double slashes - normalizing ${a} -> ${t}`)}t.startsWith("/")?s=Tg(t.substring(1),"/"):s=Tg(t,e)}else s=e;return{pathname:s,search:KS(i),hash:zS(r)}}function Tg(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function bl(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function qS(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Mb(n){let e=qS(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function Bb(n,e,t,i=!1){let r;typeof n=="string"?r=ur(n):(r={...n},st(!r.pathname||!r.pathname.includes("?"),bl("?","pathname","search",r)),st(!r.pathname||!r.pathname.includes("#"),bl("#","pathname","hash",r)),st(!r.search||!r.search.includes("#"),bl("#","search","hash",r)));let s=n===""||r.pathname==="",a=s?"/":r.pathname,o;if(a==null)o=t;else{let d=e.length-1;if(!i&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),d-=1;r.pathname=h.join("/")}o=d>=0?e[d]:"/"}let c=HS(r,o),l=a&&a!=="/"&&a.endsWith("/"),u=(s||a===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}var qn=n=>n.join("/").replace(/\/\/+/g,"/"),jS=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),KS=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,zS=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,XS=class{constructor(n,e,t,i=!1){this.status=n,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function YS(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function QS(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Nb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function $b(n,e){let t=n;if(typeof t!="string"||!Ob.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let i=t,r=!1;if(Nb)try{let s=new URL(window.location.href),a=t.startsWith("//")?new URL(s.protocol+t):new URL(t),o=Kn(a.pathname,e);a.origin===s.origin&&o!=null?t=o+a.search+a.hash:r=!0}catch{nn(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:r,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Wb=["POST","PUT","PATCH","DELETE"];new Set(Wb);var ZS=["GET",...Wb];new Set(ZS);var Jr=Tt(null);Jr.displayName="DataRouter";var wc=Tt(null);wc.displayName="DataRouterState";var JS=Tt(!1),Vb=Tt({isTransitioning:!1});Vb.displayName="ViewTransition";var eA=Tt(new Map);eA.displayName="Fetchers";var tA=Tt(null);tA.displayName="Await";var sn=Tt(null);sn.displayName="Navigation";var ca=Tt(null);ca.displayName="Location";var ii=Tt({outlet:null,matches:[],isDataRoute:!1});ii.displayName="Route";var Wh=Tt(null);Wh.displayName="RouteError";var Gb="REACT_ROUTER_ERROR",nA="REDIRECT",iA="ROUTE_ERROR_RESPONSE";function rA(n){if(n.startsWith(`${Gb}:${nA}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function sA(n){if(n.startsWith(`${Gb}:${iA}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new XS(e.status,e.statusText,e.data)}catch{}}function aA(n,{relative:e}={}){st(la(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=Ue(sn),{hash:r,pathname:s,search:a}=ua(n,{relative:e}),o=s;return t!=="/"&&(o=s==="/"?t:qn([t,s])),i.createHref({pathname:o,search:a,hash:r})}function la(){return Ue(ca)!=null}function dr(){return st(la(),"useLocation() may be used only in the context of a <Router> component."),Ue(ca).location}var Hb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function qb(n){Ue(sn).static||Sc(n)}function oA(){let{isDataRoute:n}=Ue(ii);return n?xA():cA()}function cA(){st(la(),"useNavigate() may be used only in the context of a <Router> component.");let n=Ue(Jr),{basename:e,navigator:t}=Ue(sn),{matches:i}=Ue(ii),{pathname:r}=dr(),s=JSON.stringify(Mb(i)),a=Jt(!1);return qb(()=>{a.current=!0}),Ci((c,l={})=>{if(nn(a.current,Hb),!a.current)return;if(typeof c=="number"){t.go(c);return}let u=Bb(c,JSON.parse(s),r,l.relative==="path");n==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:qn([e,u.pathname])),(l.replace?t.replace:t.push)(u,l.state,l)},[e,t,s,r,n])}Tt(null);function ua(n,{relative:e}={}){let{matches:t}=Ue(ii),{pathname:i}=dr(),r=JSON.stringify(Mb(t));return Et(()=>Bb(n,JSON.parse(r),i,e==="path"),[n,r,i,e])}function lA(n,e){return jb(n,e)}function jb(n,e,t,i,r){st(la(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=Ue(sn),{matches:a}=Ue(ii),o=a[a.length-1],c=o?o.params:{},l=o?o.pathname:"/",u=o?o.pathnameBase:"/",d=o&&o.route;{let v=d&&d.path||"";zb(l,!d||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let h=dr(),f;if(e){let v=typeof e=="string"?ur(e):e;st(u==="/"||v.pathname?.startsWith(u),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${v.pathname}" was given in the \`location\` prop.`),f=v}else f=h;let p=f.pathname||"/",m=p;if(u!=="/"){let v=u.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(v.length).join("/")}let g=kb(n,{pathname:m});nn(d||g!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),nn(g==null||g[g.length-1].route.element!==void 0||g[g.length-1].route.Component!==void 0||g[g.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=pA(g&&g.map(v=>Object.assign({},v,{params:Object.assign({},c,v.params),pathname:qn([u,s.encodeLocation?s.encodeLocation(v.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?u:qn([u,s.encodeLocation?s.encodeLocation(v.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:v.pathnameBase])})),a,t,i,r);return e&&y?Ne(ca.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},y):y}function uA(){let n=bA(),e=YS(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",n),a=Ne(It,null,Ne("p",null,"ðŸ’¿ Hey developer ðŸ‘‹"),Ne("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Ne("code",{style:s},"ErrorBoundary")," or"," ",Ne("code",{style:s},"errorElement")," prop on your route.")),Ne(It,null,Ne("h2",null,"Unexpected Application Error!"),Ne("h3",{style:{fontStyle:"italic"}},e),t?Ne("pre",{style:r},t):null,a)}var dA=Ne(uA,null),Kb=class extends Zt{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=sA(n.digest);t&&(n=t)}let e=n!==void 0?Ne(ii.Provider,{value:this.props.routeContext},Ne(Wh.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?Ne(hA,{error:n},e):e}};Kb.contextType=JS;var xl=new WeakMap;function hA({children:n,error:e}){let{basename:t}=Ue(sn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=rA(e.digest);if(i){let r=xl.get(e);if(r)throw r;let s=$b(i.location,t);if(Nb&&!xl.get(e))if(s.isExternal||i.reloadDocument)window.location.href=s.absoluteURL||s.to;else{const a=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(s.to,{replace:i.replace}));throw xl.set(e,a),a}return Ne("meta",{httpEquiv:"refresh",content:`0;url=${s.absoluteURL||s.to}`})}}return n}function fA({routeContext:n,match:e,children:t}){let i=Ue(Jr);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),Ne(ii.Provider,{value:n},t)}function pA(n,e=[],t=null,i=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,a=t?.errors;if(a!=null){let u=s.findIndex(d=>d.route.id&&a?.[d.route.id]!==void 0);st(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,u+1))}let o=!1,c=-1;if(t)for(let u=0;u<s.length;u++){let d=s[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:h,errors:f}=t,p=d.route.loader&&!h.hasOwnProperty(d.route.id)&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){o=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}let l=t&&i?(u,d)=>{i(u,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:QS(t.matches),errorInfo:d})}:void 0;return s.reduceRight((u,d,h)=>{let f,p=!1,m=null,g=null;t&&(f=a&&d.route.id?a[d.route.id]:void 0,m=d.route.errorElement||dA,o&&(c<0&&h===0?(zb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,g=null):c===h&&(p=!0,g=d.route.hydrateFallbackElement||null)));let y=e.concat(s.slice(0,h+1)),v=()=>{let b;return f?b=m:p?b=g:d.route.Component?b=Ne(d.route.Component,null):d.route.element?b=d.route.element:b=u,Ne(fA,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:t!=null},children:b})};return t&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?Ne(Kb,{location:t.location,revalidation:t.revalidation,component:m,error:f,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0},onError:l}):v()},null)}function Vh(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gA(n){let e=Ue(Jr);return st(e,Vh(n)),e}function mA(n){let e=Ue(wc);return st(e,Vh(n)),e}function yA(n){let e=Ue(ii);return st(e,Vh(n)),e}function Gh(n){let e=yA(n),t=e.matches[e.matches.length-1];return st(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function vA(){return Gh("useRouteId")}function bA(){let n=Ue(Wh),e=mA("useRouteError"),t=Gh("useRouteError");return n!==void 0?n:e.errors?.[t]}function xA(){let{router:n}=gA("useNavigate"),e=Gh("useNavigate"),t=Jt(!1);return qb(()=>{t.current=!0}),Ci(async(r,s={})=>{nn(t.current,Hb),t.current&&(typeof r=="number"?await n.navigate(r):await n.navigate(r,{fromRouteId:e,...s}))},[n,e])}var _g={};function zb(n,e,t){!e&&!_g[n]&&(_g[n]=!0,nn(!1,t))}uS(TA);function TA({routes:n,future:e,state:t,onError:i}){return jb(n,void 0,t,i,e)}function _A(n){st(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function DA({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:r,static:s=!1,unstable_useTransitions:a}){st(!la(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),c=Et(()=>({basename:o,navigator:r,static:s,unstable_useTransitions:a,future:{}}),[o,r,s,a]);typeof t=="string"&&(t=ur(t));let{pathname:l="/",search:u="",hash:d="",state:h=null,key:f="default"}=t,p=Et(()=>{let m=Kn(l,o);return m==null?null:{location:{pathname:m,search:u,hash:d,state:h,key:f},navigationType:i}},[o,l,u,d,h,f,i]);return nn(p!=null,`<Router basename="${o}"> is not able to match the URL "${l}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:Ne(sn.Provider,{value:c},Ne(ca.Provider,{children:e,value:p}))}function Y6({children:n,location:e}){return lA(Rd(n),e)}function Rd(n,e=[]){let t=[];return Ib.forEach(n,(i,r)=>{if(!$h(i))return;let s=[...e,r];if(i.type===It){t.push.apply(t,Rd(i.props.children,s));return}st(i.type===_A,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),st(!i.props.index||!i.props.children,"An index route cannot have child routes.");let a={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=Rd(i.props.children,s)),t.push(a)}),t}var oo="get",co="application/x-www-form-urlencoded";function Ic(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function EA(n){return Ic(n)&&n.tagName.toLowerCase()==="button"}function SA(n){return Ic(n)&&n.tagName.toLowerCase()==="form"}function AA(n){return Ic(n)&&n.tagName.toLowerCase()==="input"}function wA(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function IA(n,e){return n.button===0&&(!e||e==="_self")&&!wA(n)}var Aa=null;function CA(){if(Aa===null)try{new FormData(document.createElement("form"),0),Aa=!1}catch{Aa=!0}return Aa}var RA=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Tl(n){return n!=null&&!RA.has(n)?(nn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${co}"`),null):n}function LA(n,e){let t,i,r,s,a;if(SA(n)){let o=n.getAttribute("action");i=o?Kn(o,e):null,t=n.getAttribute("method")||oo,r=Tl(n.getAttribute("enctype"))||co,s=new FormData(n)}else if(EA(n)||AA(n)&&(n.type==="submit"||n.type==="image")){let o=n.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=n.getAttribute("formaction")||o.getAttribute("action");if(i=c?Kn(c,e):null,t=n.getAttribute("formmethod")||o.getAttribute("method")||oo,r=Tl(n.getAttribute("formenctype"))||Tl(o.getAttribute("enctype"))||co,s=new FormData(o,n),!CA()){let{name:l,type:u,value:d}=n;if(u==="image"){let h=l?`${l}.`:"";s.append(`${h}x`,"0"),s.append(`${h}y`,"0")}else l&&s.append(l,d)}}else{if(Ic(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=oo,i=null,r=co,a=n}return s&&r==="text/plain"&&(a=s,s=void 0),{action:i,method:t.toLowerCase(),encType:r,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Hh(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function UA(n,e,t){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&Kn(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function kA(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function FA(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function PA(n,e,t){let i=await Promise.all(n.map(async r=>{let s=e.routes[r.route.id];if(s){let a=await kA(s,t);return a.links?a.links():[]}return[]}));return NA(i.flat(1).filter(FA).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function Dg(n,e,t,i,r,s){let a=(c,l)=>t[l]?c.route.id!==t[l].route.id:!0,o=(c,l)=>t[l].pathname!==c.pathname||t[l].route.path?.endsWith("*")&&t[l].params["*"]!==c.params["*"];return s==="assets"?e.filter((c,l)=>a(c,l)||o(c,l)):s==="data"?e.filter((c,l)=>{let u=i.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(a(c,l)||o(c,l))return!0;if(c.route.shouldRevalidate){let d=c.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function OA(n,e,{includeHydrateFallback:t}={}){return MA(n.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function MA(n){return[...new Set(n)]}function BA(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function NA(n,e){let t=new Set;return new Set(e),n.reduce((i,r)=>{let s=JSON.stringify(BA(r));return t.has(s)||(t.add(s),i.push({key:s,link:r})),i},[])}function Xb(){let n=Ue(Jr);return Hh(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function $A(){let n=Ue(wc);return Hh(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var qh=Tt(void 0);qh.displayName="FrameworkContext";function Yb(){let n=Ue(qh);return Hh(n,"You must render this element inside a <HydratedRouter> element"),n}function WA(n,e){let t=Ue(qh),[i,r]=ar(!1),[s,a]=ar(!1),{onFocus:o,onBlur:c,onMouseEnter:l,onMouseLeave:u,onTouchStart:d}=e,h=Jt(null);Di(()=>{if(n==="render"&&a(!0),n==="viewport"){let m=y=>{y.forEach(v=>{a(v.isIntersecting)})},g=new IntersectionObserver(m,{threshold:.5});return h.current&&g.observe(h.current),()=>{g.disconnect()}}},[n]),Di(()=>{if(i){let m=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(m)}}},[i]);let f=()=>{r(!0)},p=()=>{r(!1),a(!1)};return t?n!=="intent"?[s,h,{}]:[s,h,{onFocus:cs(o,f),onBlur:cs(c,p),onMouseEnter:cs(l,f),onMouseLeave:cs(u,p),onTouchStart:cs(d,f)}]:[!1,h,{}]}function cs(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function VA({page:n,...e}){let{router:t}=Xb(),i=Et(()=>kb(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?Ne(HA,{page:n,matches:i,...e}):null}function GA(n){let{manifest:e,routeModules:t}=Yb(),[i,r]=ar([]);return Di(()=>{let s=!1;return PA(n,e,t).then(a=>{s||r(a)}),()=>{s=!0}},[n,e,t]),i}function HA({page:n,matches:e,...t}){let i=dr(),{manifest:r,routeModules:s}=Yb(),{basename:a}=Xb(),{loaderData:o,matches:c}=$A(),l=Et(()=>Dg(n,e,c,r,i,"data"),[n,e,c,r,i]),u=Et(()=>Dg(n,e,c,r,i,"assets"),[n,e,c,r,i]),d=Et(()=>{if(n===i.pathname+i.search+i.hash)return[];let p=new Set,m=!1;if(e.forEach(y=>{let v=r.routes[y.route.id];!v||!v.hasLoader||(!l.some(b=>b.route.id===y.route.id)&&y.route.id in o&&s[y.route.id]?.shouldRevalidate||v.hasClientLoader?m=!0:p.add(y.route.id))}),p.size===0)return[];let g=UA(n,a,"data");return m&&p.size>0&&g.searchParams.set("_routes",e.filter(y=>p.has(y.route.id)).map(y=>y.route.id).join(",")),[g.pathname+g.search]},[a,o,i,r,l,e,n,s]),h=Et(()=>OA(u,r),[u,r]),f=GA(u);return Ne(It,null,d.map(p=>Ne("link",{key:p,rel:"prefetch",as:"fetch",href:p,...t})),h.map(p=>Ne("link",{key:p,rel:"modulepreload",href:p,...t})),f.map(({key:p,link:m})=>Ne("link",{key:p,nonce:t.nonce,...m})))}function qA(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var jA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{jA&&(window.__reactRouterVersion="7.11.0")}catch{}function Q6({basename:n,children:e,unstable_useTransitions:t,window:i}){let r=Jt();r.current==null&&(r.current=AS({window:i,v5Compat:!0}));let s=r.current,[a,o]=ar({action:s.action,location:s.location}),c=Ci(l=>{t===!1?o(l):Nh(()=>o(l))},[t]);return Sc(()=>s.listen(c),[s,c]),Ne(DA,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:s,unstable_useTransitions:t})}var Qb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zb=Ac(function({onClick:e,discover:t="render",prefetch:i="none",relative:r,reloadDocument:s,replace:a,state:o,target:c,to:l,preventScrollReset:u,viewTransition:d,unstable_defaultShouldRevalidate:h,...f},p){let{basename:m,unstable_useTransitions:g}=Ue(sn),y=typeof l=="string"&&Qb.test(l),v=$b(l,m);l=v.to;let b=aA(l,{relative:r}),[T,x,_]=WA(i,f),D=YA(l,{replace:a,state:o,target:c,preventScrollReset:u,relative:r,viewTransition:d,unstable_defaultShouldRevalidate:h,unstable_useTransitions:g});function w(C){e&&e(C),C.defaultPrevented||D(C)}let S=Ne("a",{...f,..._,href:v.absoluteURL||b,onClick:v.isExternal||s?e:w,ref:qA(p,x),target:c,"data-discover":!y&&t==="render"?"true":void 0});return T&&!y?Ne(It,null,S,Ne(VA,{page:b})):S});Zb.displayName="Link";var KA=Ac(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:r=!1,style:s,to:a,viewTransition:o,children:c,...l},u){let d=ua(a,{relative:l.relative}),h=dr(),f=Ue(wc),{navigator:p,basename:m}=Ue(sn),g=f!=null&&tw(d)&&o===!0,y=p.encodeLocation?p.encodeLocation(d).pathname:d.pathname,v=h.pathname,b=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;t||(v=v.toLowerCase(),b=b?b.toLowerCase():null,y=y.toLowerCase()),b&&m&&(b=Kn(b,m)||b);const T=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let x=v===y||!r&&v.startsWith(y)&&v.charAt(T)==="/",_=b!=null&&(b===y||!r&&b.startsWith(y)&&b.charAt(y.length)==="/"),D={isActive:x,isPending:_,isTransitioning:g},w=x?e:void 0,S;typeof i=="function"?S=i(D):S=[i,x?"active":null,_?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let C=typeof s=="function"?s(D):s;return Ne(Zb,{...l,"aria-current":w,className:S,ref:u,style:C,to:a,viewTransition:o},typeof c=="function"?c(D):c)});KA.displayName="NavLink";var zA=Ac(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:r,state:s,method:a=oo,action:o,onSubmit:c,relative:l,preventScrollReset:u,viewTransition:d,unstable_defaultShouldRevalidate:h,...f},p)=>{let{unstable_useTransitions:m}=Ue(sn),g=JA(),y=ew(o,{relative:l}),v=a.toLowerCase()==="get"?"get":"post",b=typeof o=="string"&&Qb.test(o);return Ne("form",{ref:p,method:v,action:y,onSubmit:i?c:x=>{if(c&&c(x),x.defaultPrevented)return;x.preventDefault();let _=x.nativeEvent.submitter,D=_?.getAttribute("formmethod")||a,w=()=>g(_||x.currentTarget,{fetcherKey:e,method:D,navigate:t,replace:r,state:s,relative:l,preventScrollReset:u,viewTransition:d,unstable_defaultShouldRevalidate:h});m&&t!==!1?Nh(()=>w()):w()},...f,"data-discover":!b&&n==="render"?"true":void 0})});zA.displayName="Form";function XA(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Jb(n){let e=Ue(Jr);return st(e,XA(n)),e}function YA(n,{target:e,replace:t,state:i,preventScrollReset:r,relative:s,viewTransition:a,unstable_defaultShouldRevalidate:o,unstable_useTransitions:c}={}){let l=oA(),u=dr(),d=ua(n,{relative:s});return Ci(h=>{if(IA(h,e)){h.preventDefault();let f=t!==void 0?t:Ns(u)===Ns(d),p=()=>l(n,{replace:f,state:i,preventScrollReset:r,relative:s,viewTransition:a,unstable_defaultShouldRevalidate:o});c?Nh(()=>p()):p()}},[u,l,d,t,i,e,n,r,s,a,o,c])}var QA=0,ZA=()=>`__${String(++QA)}__`;function JA(){let{router:n}=Jb("useSubmit"),{basename:e}=Ue(sn),t=vA(),i=n.fetch,r=n.navigate;return Ci(async(s,a={})=>{let{action:o,method:c,encType:l,formData:u,body:d}=LA(s,e);if(a.navigate===!1){let h=a.fetcherKey||ZA();await i(h,t,a.action||o,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:u,body:d,formMethod:a.method||c,formEncType:a.encType||l,flushSync:a.flushSync})}else await r(a.action||o,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:u,body:d,formMethod:a.method||c,formEncType:a.encType||l,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[i,r,e,t])}function ew(n,{relative:e}={}){let{basename:t}=Ue(sn),i=Ue(ii);st(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),s={...ua(n||".",{relative:e})},a=dr();if(n==null){s.search=a.search;let o=new URLSearchParams(s.search),c=o.getAll("index");if(c.some(u=>u==="")){o.delete("index"),c.filter(d=>d).forEach(d=>o.append("index",d));let u=o.toString();s.search=u?`?${u}`:""}}return(!n||n===".")&&r.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:qn([t,s.pathname])),Ns(s)}function tw(n,{relative:e}={}){let t=Ue(Vb);st(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Jb("useViewTransitionState"),r=ua(n,{relative:e});if(!t.isTransitioning)return!1;let s=Kn(t.currentLocation.pathname,i)||t.currentLocation.pathname,a=Kn(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Xo(r.pathname,a)!=null||Xo(r.pathname,s)!=null}var vi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nw(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function i(){var r=!1;try{r=this instanceof i}catch{}return r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}function Es(n){let e=n[0],t=n[1],i=n[2];return Math.sqrt(e*e+t*t+i*i)}function Ld(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n}function iw(n,e,t,i){return n[0]=e,n[1]=t,n[2]=i,n}function Eg(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n}function Sg(n,e,t){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n}function rw(n,e,t){return n[0]=e[0]*t[0],n[1]=e[1]*t[1],n[2]=e[2]*t[2],n}function sw(n,e,t){return n[0]=e[0]/t[0],n[1]=e[1]/t[1],n[2]=e[2]/t[2],n}function _l(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n}function aw(n,e){let t=e[0]-n[0],i=e[1]-n[1],r=e[2]-n[2];return Math.sqrt(t*t+i*i+r*r)}function ow(n,e){let t=e[0]-n[0],i=e[1]-n[1],r=e[2]-n[2];return t*t+i*i+r*r}function Ag(n){let e=n[0],t=n[1],i=n[2];return e*e+t*t+i*i}function cw(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n}function lw(n,e){return n[0]=1/e[0],n[1]=1/e[1],n[2]=1/e[2],n}function Ud(n,e){let t=e[0],i=e[1],r=e[2],s=t*t+i*i+r*r;return s>0&&(s=1/Math.sqrt(s)),n[0]=e[0]*s,n[1]=e[1]*s,n[2]=e[2]*s,n}function ex(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function wg(n,e,t){let i=e[0],r=e[1],s=e[2],a=t[0],o=t[1],c=t[2];return n[0]=r*c-s*o,n[1]=s*a-i*c,n[2]=i*o-r*a,n}function uw(n,e,t,i){let r=e[0],s=e[1],a=e[2];return n[0]=r+i*(t[0]-r),n[1]=s+i*(t[1]-s),n[2]=a+i*(t[2]-a),n}function dw(n,e,t,i,r){const s=Math.exp(-i*r);let a=e[0],o=e[1],c=e[2];return n[0]=t[0]+(a-t[0])*s,n[1]=t[1]+(o-t[1])*s,n[2]=t[2]+(c-t[2])*s,n}function hw(n,e,t){let i=e[0],r=e[1],s=e[2],a=t[3]*i+t[7]*r+t[11]*s+t[15];return a=a||1,n[0]=(t[0]*i+t[4]*r+t[8]*s+t[12])/a,n[1]=(t[1]*i+t[5]*r+t[9]*s+t[13])/a,n[2]=(t[2]*i+t[6]*r+t[10]*s+t[14])/a,n}function fw(n,e,t){let i=e[0],r=e[1],s=e[2],a=t[3]*i+t[7]*r+t[11]*s+t[15];return a=a||1,n[0]=(t[0]*i+t[4]*r+t[8]*s)/a,n[1]=(t[1]*i+t[5]*r+t[9]*s)/a,n[2]=(t[2]*i+t[6]*r+t[10]*s)/a,n}function pw(n,e,t){let i=e[0],r=e[1],s=e[2];return n[0]=i*t[0]+r*t[3]+s*t[6],n[1]=i*t[1]+r*t[4]+s*t[7],n[2]=i*t[2]+r*t[5]+s*t[8],n}function gw(n,e,t){let i=e[0],r=e[1],s=e[2],a=t[0],o=t[1],c=t[2],l=t[3],u=o*s-c*r,d=c*i-a*s,h=a*r-o*i,f=o*h-c*d,p=c*u-a*h,m=a*d-o*u,g=l*2;return u*=g,d*=g,h*=g,f*=2,p*=2,m*=2,n[0]=i+u+f,n[1]=r+d+p,n[2]=s+h+m,n}const mw=(function(){const n=[0,0,0],e=[0,0,0];return function(t,i){Ld(n,t),Ld(e,i),Ud(n,n),Ud(e,e);let r=ex(n,e);return r>1?0:r<-1?Math.PI:Math.acos(r)}})();function yw(n,e){return n[0]===e[0]&&n[1]===e[1]&&n[2]===e[2]}class ht extends Array{constructor(e=0,t=e,i=e){return super(e,t,i),this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this[0]=e}set y(e){this[1]=e}set z(e){this[2]=e}set(e,t=e,i=e){return e.length?this.copy(e):(iw(this,e,t,i),this)}copy(e){return Ld(this,e),this}add(e,t){return t?Eg(this,e,t):Eg(this,this,e),this}sub(e,t){return t?Sg(this,e,t):Sg(this,this,e),this}multiply(e){return e.length?rw(this,this,e):_l(this,this,e),this}divide(e){return e.length?sw(this,this,e):_l(this,this,1/e),this}inverse(e=this){return lw(this,e),this}len(){return Es(this)}distance(e){return e?aw(this,e):Es(this)}squaredLen(){return Ag(this)}squaredDistance(e){return e?ow(this,e):Ag(this)}negate(e=this){return cw(this,e),this}cross(e,t){return t?wg(this,e,t):wg(this,this,e),this}scale(e){return _l(this,this,e),this}normalize(){return Ud(this,this),this}dot(e){return ex(this,e)}equals(e){return yw(this,e)}applyMatrix3(e){return pw(this,this,e),this}applyMatrix4(e){return hw(this,this,e),this}scaleRotateMatrix4(e){return fw(this,this,e),this}applyQuaternion(e){return gw(this,this,e),this}angle(e){return mw(this,e)}lerp(e,t){return uw(this,this,e,t),this}smoothLerp(e,t,i){return dw(this,this,e,t,i),this}clone(){return new ht(this[0],this[1],this[2])}fromArray(e,t=0){return this[0]=e[t],this[1]=e[t+1],this[2]=e[t+2],this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}transformDirection(e){const t=this[0],i=this[1],r=this[2];return this[0]=e[0]*t+e[4]*i+e[8]*r,this[1]=e[1]*t+e[5]*i+e[9]*r,this[2]=e[2]*t+e[6]*i+e[10]*r,this.normalize()}}const Ig=new ht;let vw=1,bw=1,Cg=!1;class xw{constructor(e,t={}){e.canvas||console.error("gl not passed as first argument to Geometry"),this.gl=e,this.attributes=t,this.id=vw++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state;for(let i in t)this.addAttribute(i,t[i])}addAttribute(e,t){if(this.attributes[e]=t,t.id=bw++,t.size=t.size||1,t.type=t.type||(t.data.constructor===Float32Array?this.gl.FLOAT:t.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),t.target=e==="index"?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,t.normalized=t.normalized||!1,t.stride=t.stride||0,t.offset=t.offset||0,t.count=t.count||(t.stride?t.data.byteLength/t.stride:t.data.length/t.size),t.divisor=t.instanced||0,t.needsUpdate=!1,t.usage=t.usage||this.gl.STATIC_DRAW,t.buffer||this.updateAttribute(t),t.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==t.count*t.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,t.count*t.divisor);this.instancedCount=t.count*t.divisor}else e==="index"?this.drawRange.count=t.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,t.count))}updateAttribute(e){const t=!e.buffer;t&&(e.buffer=this.gl.createBuffer()),this.glState.boundBuffer!==e.buffer&&(this.gl.bindBuffer(e.target,e.buffer),this.glState.boundBuffer=e.buffer),t?this.gl.bufferData(e.target,e.data,e.usage):this.gl.bufferSubData(e.target,0,e.data),e.needsUpdate=!1}setIndex(e){this.addAttribute("index",e)}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}setInstancedCount(e){this.instancedCount=e}createVAO(e){this.VAOs[e.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.bindAttributes(e)}bindAttributes(e){e.attributeLocations.forEach((t,{name:i,type:r})=>{if(!this.attributes[i]){console.warn(`active attribute ${i} not being supplied`);return}const s=this.attributes[i];this.gl.bindBuffer(s.target,s.buffer),this.glState.boundBuffer=s.buffer;let a=1;r===35674&&(a=2),r===35675&&(a=3),r===35676&&(a=4);const o=s.size/a,c=a===1?0:a*a*4,l=a===1?0:a*4;for(let u=0;u<a;u++)this.gl.vertexAttribPointer(t+u,o,s.type,s.normalized,s.stride+c,s.offset+u*l),this.gl.enableVertexAttribArray(t+u),this.gl.renderer.vertexAttribDivisor(t+u,s.divisor)}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw({program:e,mode:t=this.gl.TRIANGLES}){this.gl.renderer.currentGeometry!==`${this.id}_${e.attributeOrder}`&&(this.VAOs[e.attributeOrder]||this.createVAO(e),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.gl.renderer.currentGeometry=`${this.id}_${e.attributeOrder}`),e.attributeLocations.forEach((r,{name:s})=>{const a=this.attributes[s];a.needsUpdate&&this.updateAttribute(a)});let i=2;this.attributes.index?.type===this.gl.UNSIGNED_INT&&(i=4),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(t,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*i,this.instancedCount):this.gl.renderer.drawArraysInstanced(t,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(t,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*i):this.gl.drawArrays(t,this.drawRange.start,this.drawRange.count)}getPosition(){const e=this.attributes.position;if(e.data)return e;if(!Cg)return console.warn("No position buffer data found to compute bounds"),Cg=!0}computeBoundingBox(e){e||(e=this.getPosition());const t=e.data,i=e.size;this.bounds||(this.bounds={min:new ht,max:new ht,center:new ht,scale:new ht,radius:1/0});const r=this.bounds.min,s=this.bounds.max,a=this.bounds.center,o=this.bounds.scale;r.set(1/0),s.set(-1/0);for(let c=0,l=t.length;c<l;c+=i){const u=t[c],d=t[c+1],h=t[c+2];r.x=Math.min(u,r.x),r.y=Math.min(d,r.y),r.z=Math.min(h,r.z),s.x=Math.max(u,s.x),s.y=Math.max(d,s.y),s.z=Math.max(h,s.z)}o.sub(s,r),a.add(r,s).divide(2)}computeBoundingSphere(e){e||(e=this.getPosition());const t=e.data,i=e.size;this.bounds||this.computeBoundingBox(e);let r=0;for(let s=0,a=t.length;s<a;s+=i)Ig.fromArray(t,s),r=Math.max(r,this.bounds.center.squaredDistance(Ig));this.bounds.radius=Math.sqrt(r)}remove(){for(let e in this.VAOs)this.gl.renderer.deleteVertexArray(this.VAOs[e]),delete this.VAOs[e];for(let e in this.attributes)this.gl.deleteBuffer(this.attributes[e].buffer),delete this.attributes[e]}}let Tw=1;const Rg={};class Z6{constructor(e,{vertex:t,fragment:i,uniforms:r={},transparent:s=!1,cullFace:a=e.BACK,frontFace:o=e.CCW,depthTest:c=!0,depthWrite:l=!0,depthFunc:u=e.LEQUAL}={}){e.canvas||console.error("gl not passed as first argument to Program"),this.gl=e,this.uniforms=r,this.id=Tw++,t||console.warn("vertex shader not supplied"),i||console.warn("fragment shader not supplied"),this.transparent=s,this.cullFace=a,this.frontFace=o,this.depthTest=c,this.depthWrite=l,this.depthFunc=u,this.blendFunc={},this.blendEquation={},this.stencilFunc={},this.stencilOp={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)),this.vertexShader=e.createShader(e.VERTEX_SHADER),this.fragmentShader=e.createShader(e.FRAGMENT_SHADER),this.program=e.createProgram(),e.attachShader(this.program,this.vertexShader),e.attachShader(this.program,this.fragmentShader),this.setShaders({vertex:t,fragment:i})}setShaders({vertex:e,fragment:t}){if(e&&(this.gl.shaderSource(this.vertexShader,e),this.gl.compileShader(this.vertexShader),this.gl.getShaderInfoLog(this.vertexShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.vertexShader)}
Vertex Shader
${Lg(e)}`)),t&&(this.gl.shaderSource(this.fragmentShader,t),this.gl.compileShader(this.fragmentShader),this.gl.getShaderInfoLog(this.fragmentShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.fragmentShader)}
Fragment Shader
${Lg(t)}`)),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))return console.warn(this.gl.getProgramInfoLog(this.program));this.uniformLocations=new Map;let i=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS);for(let a=0;a<i;a++){let o=this.gl.getActiveUniform(this.program,a);this.uniformLocations.set(o,this.gl.getUniformLocation(this.program,o.name));const c=o.name.match(/(\w+)/g);o.uniformName=c[0],o.nameComponents=c.slice(1)}this.attributeLocations=new Map;const r=[],s=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES);for(let a=0;a<s;a++){const o=this.gl.getActiveAttrib(this.program,a),c=this.gl.getAttribLocation(this.program,o.name);c!==-1&&(r[c]=o.name,this.attributeLocations.set(o,c))}this.attributeOrder=r.join("")}setBlendFunc(e,t,i,r){this.blendFunc.src=e,this.blendFunc.dst=t,this.blendFunc.srcAlpha=i,this.blendFunc.dstAlpha=r,e&&(this.transparent=!0)}setBlendEquation(e,t){this.blendEquation.modeRGB=e,this.blendEquation.modeAlpha=t}setStencilFunc(e,t,i){this.stencilRef=t,this.stencilFunc.func=e,this.stencilFunc.ref=t,this.stencilFunc.mask=i}setStencilOp(e,t,i){this.stencilOp.stencilFail=e,this.stencilOp.depthFail=t,this.stencilOp.depthPass=i}applyState(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha),this.stencilFunc.func||this.stencilOp.stencilFail?this.gl.renderer.enable(this.gl.STENCIL_TEST):this.gl.renderer.disable(this.gl.STENCIL_TEST),this.gl.renderer.setStencilFunc(this.stencilFunc.func,this.stencilFunc.ref,this.stencilFunc.mask),this.gl.renderer.setStencilOp(this.stencilOp.stencilFail,this.stencilOp.depthFail,this.stencilOp.depthPass)}use({flipFaces:e=!1}={}){let t=-1;this.gl.renderer.state.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.state.currentProgram=this.id),this.uniformLocations.forEach((r,s)=>{let a=this.uniforms[s.uniformName];for(const o of s.nameComponents){if(!a)break;if(o in a)a=a[o];else{if(Array.isArray(a.value))break;a=void 0;break}}if(!a)return Ug(`Active uniform ${s.name} has not been supplied`);if(a&&a.value===void 0)return Ug(`${s.name} uniform is missing a value parameter`);if(a.value.texture)return t=t+1,a.value.update(t),Dl(this.gl,s.type,r,t);if(a.value.length&&a.value[0].texture){const o=[];return a.value.forEach(c=>{t=t+1,c.update(t),o.push(t)}),Dl(this.gl,s.type,r,o)}Dl(this.gl,s.type,r,a.value)}),this.applyState(),e&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}remove(){this.gl.deleteProgram(this.program)}}function Dl(n,e,t,i){i=i.length?_w(i):i;const r=n.renderer.state.uniformLocations.get(t);if(i.length)if(r===void 0||r.length!==i.length)n.renderer.state.uniformLocations.set(t,i.slice(0));else{if(Dw(r,i))return;r.set?r.set(i):Ew(r,i),n.renderer.state.uniformLocations.set(t,r)}else{if(r===i)return;n.renderer.state.uniformLocations.set(t,i)}switch(e){case 5126:return i.length?n.uniform1fv(t,i):n.uniform1f(t,i);case 35664:return n.uniform2fv(t,i);case 35665:return n.uniform3fv(t,i);case 35666:return n.uniform4fv(t,i);case 35670:case 5124:case 35678:case 36306:case 35680:case 36289:return i.length?n.uniform1iv(t,i):n.uniform1i(t,i);case 35671:case 35667:return n.uniform2iv(t,i);case 35672:case 35668:return n.uniform3iv(t,i);case 35673:case 35669:return n.uniform4iv(t,i);case 35674:return n.uniformMatrix2fv(t,!1,i);case 35675:return n.uniformMatrix3fv(t,!1,i);case 35676:return n.uniformMatrix4fv(t,!1,i)}}function Lg(n){let e=n.split(`
`);for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join(`
`)}function _w(n){const e=n.length,t=n[0].length;if(t===void 0)return n;const i=e*t;let r=Rg[i];r||(Rg[i]=r=new Float32Array(i));for(let s=0;s<e;s++)r.set(n[s],s*t);return r}function Dw(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Ew(n,e){for(let t=0,i=n.length;t<i;t++)n[t]=e[t]}let El=0;function Ug(n){El>100||(console.warn(n),El++,El>100&&console.warn("More than 100 program warnings - stopping logs."))}const Sl=new ht;let Sw=1;class J6{constructor({canvas:e=document.createElement("canvas"),width:t=300,height:i=150,dpr:r=1,alpha:s=!1,depth:a=!0,stencil:o=!1,antialias:c=!1,premultipliedAlpha:l=!1,preserveDrawingBuffer:u=!1,powerPreference:d="default",autoClear:h=!0,webgl:f=2}={}){const p={alpha:s,depth:a,stencil:o,antialias:c,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:d};this.dpr=r,this.alpha=s,this.color=!0,this.depth=a,this.stencil=o,this.premultipliedAlpha=l,this.autoClear=h,this.id=Sw++,f===2&&(this.gl=e.getContext("webgl2",p)),this.isWebgl2=!!this.gl,this.gl||(this.gl=e.getContext("webgl",p)),this.gl||console.error("unable to create webgl context"),this.gl.renderer=this,this.setSize(t,i),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=!1,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LEQUAL,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={x:0,y:0,width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.state.currentProgram=null,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.getExtension("WEBGL_compressed_texture_astc"),this.getExtension("EXT_texture_compression_bptc"),this.getExtension("WEBGL_compressed_texture_s3tc"),this.getExtension("WEBGL_compressed_texture_etc1"),this.getExtension("WEBGL_compressed_texture_pvrtc"),this.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}setSize(e,t){this.width=e,this.height=t,this.gl.canvas.width=e*this.dpr,this.gl.canvas.height=t*this.dpr,this.gl.canvas.style&&Object.assign(this.gl.canvas.style,{width:e+"px",height:t+"px"})}setViewport(e,t,i=0,r=0){this.state.viewport.width===e&&this.state.viewport.height===t||(this.state.viewport.width=e,this.state.viewport.height=t,this.state.viewport.x=i,this.state.viewport.y=r,this.gl.viewport(i,r,e,t))}setScissor(e,t,i=0,r=0){this.gl.scissor(i,r,e,t)}enable(e){this.state[e]!==!0&&(this.gl.enable(e),this.state[e]=!0)}disable(e){this.state[e]!==!1&&(this.gl.disable(e),this.state[e]=!1)}setBlendFunc(e,t,i,r){this.state.blendFunc.src===e&&this.state.blendFunc.dst===t&&this.state.blendFunc.srcAlpha===i&&this.state.blendFunc.dstAlpha===r||(this.state.blendFunc.src=e,this.state.blendFunc.dst=t,this.state.blendFunc.srcAlpha=i,this.state.blendFunc.dstAlpha=r,i!==void 0?this.gl.blendFuncSeparate(e,t,i,r):this.gl.blendFunc(e,t))}setBlendEquation(e,t){e=e||this.gl.FUNC_ADD,!(this.state.blendEquation.modeRGB===e&&this.state.blendEquation.modeAlpha===t)&&(this.state.blendEquation.modeRGB=e,this.state.blendEquation.modeAlpha=t,t!==void 0?this.gl.blendEquationSeparate(e,t):this.gl.blendEquation(e))}setCullFace(e){this.state.cullFace!==e&&(this.state.cullFace=e,this.gl.cullFace(e))}setFrontFace(e){this.state.frontFace!==e&&(this.state.frontFace=e,this.gl.frontFace(e))}setDepthMask(e){this.state.depthMask!==e&&(this.state.depthMask=e,this.gl.depthMask(e))}setDepthFunc(e){this.state.depthFunc!==e&&(this.state.depthFunc=e,this.gl.depthFunc(e))}setStencilMask(e){this.state.stencilMask!==e&&(this.state.stencilMask=e,this.gl.stencilMask(e))}setStencilFunc(e,t,i){this.state.stencilFunc===e&&this.state.stencilRef===t&&this.state.stencilFuncMask===i||(this.state.stencilFunc=e||this.gl.ALWAYS,this.state.stencilRef=t||0,this.state.stencilFuncMask=i||0,this.gl.stencilFunc(e||this.gl.ALWAYS,t||0,i||0))}setStencilOp(e,t,i){this.state.stencilFail===e&&this.state.stencilDepthFail===t&&this.state.stencilDepthPass===i||(this.state.stencilFail=e,this.state.stencilDepthFail=t,this.state.stencilDepthPass=i,this.gl.stencilOp(e,t,i))}activeTexture(e){this.state.activeTextureUnit!==e&&(this.state.activeTextureUnit=e,this.gl.activeTexture(this.gl.TEXTURE0+e))}bindFramebuffer({target:e=this.gl.FRAMEBUFFER,buffer:t=null}={}){this.state.framebuffer!==t&&(this.state.framebuffer=t,this.gl.bindFramebuffer(e,t))}getExtension(e,t,i){return t&&this.gl[t]?this.gl[t].bind(this.gl):(this.extensions[e]||(this.extensions[e]=this.gl.getExtension(e)),t?this.extensions[e]?this.extensions[e][i].bind(this.extensions[e]):null:this.extensions[e])}sortOpaque(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program.id!==t.program.id?e.program.id-t.program.id:e.zDepth!==t.zDepth?e.zDepth-t.zDepth:t.id-e.id}sortTransparent(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.zDepth!==t.zDepth?t.zDepth-e.zDepth:t.id-e.id}sortUI(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program.id!==t.program.id?e.program.id-t.program.id:t.id-e.id}getRenderList({scene:e,camera:t,frustumCull:i,sort:r}){let s=[];if(t&&i&&t.updateFrustum(),e.traverse(a=>{if(!a.visible)return!0;a.draw&&(i&&a.frustumCulled&&t&&!t.frustumIntersectsMesh(a)||s.push(a))}),r){const a=[],o=[],c=[];s.forEach(l=>{l.program.transparent?l.program.depthTest?o.push(l):c.push(l):a.push(l),l.zDepth=0,!(l.renderOrder!==0||!l.program.depthTest||!t)&&(l.worldMatrix.getTranslation(Sl),Sl.applyMatrix4(t.projectionViewMatrix),l.zDepth=Sl.z)}),a.sort(this.sortOpaque),o.sort(this.sortTransparent),c.sort(this.sortUI),s=a.concat(o,c)}return s}render({scene:e,camera:t,target:i=null,update:r=!0,sort:s=!0,frustumCull:a=!0,clear:o}){i===null?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(i),this.setViewport(i.width,i.height)),(o||this.autoClear&&o!==!1)&&(this.depth&&(!i||i.depth)&&(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),(this.stencil||!i||i.stencil)&&(this.enable(this.gl.STENCIL_TEST),this.setStencilMask(255)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),r&&e.updateMatrixWorld(),t&&t.updateMatrixWorld(),this.getRenderList({scene:e,camera:t,frustumCull:a,sort:s}).forEach(l=>{l.draw({camera:t})})}}function Aw(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n}function ww(n,e,t,i,r){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n}function Iw(n,e){let t=e[0],i=e[1],r=e[2],s=e[3],a=t*t+i*i+r*r+s*s;return a>0&&(a=1/Math.sqrt(a)),n[0]=t*a,n[1]=i*a,n[2]=r*a,n[3]=s*a,n}function Cw(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]+n[3]*e[3]}function Rw(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n}function Lw(n,e,t){t=t*.5;let i=Math.sin(t);return n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=Math.cos(t),n}function kg(n,e,t){let i=e[0],r=e[1],s=e[2],a=e[3],o=t[0],c=t[1],l=t[2],u=t[3];return n[0]=i*u+a*o+r*l-s*c,n[1]=r*u+a*c+s*o-i*l,n[2]=s*u+a*l+i*c-r*o,n[3]=a*u-i*o-r*c-s*l,n}function Uw(n,e,t){t*=.5;let i=e[0],r=e[1],s=e[2],a=e[3],o=Math.sin(t),c=Math.cos(t);return n[0]=i*c+a*o,n[1]=r*c+s*o,n[2]=s*c-r*o,n[3]=a*c-i*o,n}function kw(n,e,t){t*=.5;let i=e[0],r=e[1],s=e[2],a=e[3],o=Math.sin(t),c=Math.cos(t);return n[0]=i*c-s*o,n[1]=r*c+a*o,n[2]=s*c+i*o,n[3]=a*c-r*o,n}function Fw(n,e,t){t*=.5;let i=e[0],r=e[1],s=e[2],a=e[3],o=Math.sin(t),c=Math.cos(t);return n[0]=i*c+r*o,n[1]=r*c-i*o,n[2]=s*c+a*o,n[3]=a*c-s*o,n}function Pw(n,e,t,i){let r=e[0],s=e[1],a=e[2],o=e[3],c=t[0],l=t[1],u=t[2],d=t[3],h,f,p,m,g;return f=r*c+s*l+a*u+o*d,f<0&&(f=-f,c=-c,l=-l,u=-u,d=-d),1-f>1e-6?(h=Math.acos(f),p=Math.sin(h),m=Math.sin((1-i)*h)/p,g=Math.sin(i*h)/p):(m=1-i,g=i),n[0]=m*r+g*c,n[1]=m*s+g*l,n[2]=m*a+g*u,n[3]=m*o+g*d,n}function Ow(n,e){let t=e[0],i=e[1],r=e[2],s=e[3],a=t*t+i*i+r*r+s*s,o=a?1/a:0;return n[0]=-t*o,n[1]=-i*o,n[2]=-r*o,n[3]=s*o,n}function Mw(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[3]=e[3],n}function Bw(n,e){let t=e[0]+e[4]+e[8],i;if(t>0)i=Math.sqrt(t+1),n[3]=.5*i,i=.5/i,n[0]=(e[5]-e[7])*i,n[1]=(e[6]-e[2])*i,n[2]=(e[1]-e[3])*i;else{let r=0;e[4]>e[0]&&(r=1),e[8]>e[r*3+r]&&(r=2);let s=(r+1)%3,a=(r+2)%3;i=Math.sqrt(e[r*3+r]-e[s*3+s]-e[a*3+a]+1),n[r]=.5*i,i=.5/i,n[3]=(e[s*3+a]-e[a*3+s])*i,n[s]=(e[s*3+r]+e[r*3+s])*i,n[a]=(e[a*3+r]+e[r*3+a])*i}return n}function Nw(n,e,t="YXZ"){let i=Math.sin(e[0]*.5),r=Math.cos(e[0]*.5),s=Math.sin(e[1]*.5),a=Math.cos(e[1]*.5),o=Math.sin(e[2]*.5),c=Math.cos(e[2]*.5);return t==="XYZ"?(n[0]=i*a*c+r*s*o,n[1]=r*s*c-i*a*o,n[2]=r*a*o+i*s*c,n[3]=r*a*c-i*s*o):t==="YXZ"?(n[0]=i*a*c+r*s*o,n[1]=r*s*c-i*a*o,n[2]=r*a*o-i*s*c,n[3]=r*a*c+i*s*o):t==="ZXY"?(n[0]=i*a*c-r*s*o,n[1]=r*s*c+i*a*o,n[2]=r*a*o+i*s*c,n[3]=r*a*c-i*s*o):t==="ZYX"?(n[0]=i*a*c-r*s*o,n[1]=r*s*c+i*a*o,n[2]=r*a*o-i*s*c,n[3]=r*a*c+i*s*o):t==="YZX"?(n[0]=i*a*c+r*s*o,n[1]=r*s*c+i*a*o,n[2]=r*a*o-i*s*c,n[3]=r*a*c-i*s*o):t==="XZY"&&(n[0]=i*a*c-r*s*o,n[1]=r*s*c-i*a*o,n[2]=r*a*o+i*s*c,n[3]=r*a*c+i*s*o),n}const $w=Aw,Ww=ww,Vw=Cw,Gw=Iw;class Hw extends Array{constructor(e=0,t=0,i=0,r=1){super(e,t,i,r),this.onChange=()=>{},this._target=this;const s=["0","1","2","3"];return new Proxy(this,{set(a,o){const c=Reflect.set(...arguments);return c&&s.includes(o)&&a.onChange(),c}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}get w(){return this[3]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set w(e){this._target[3]=e,this.onChange()}identity(){return Rw(this._target),this.onChange(),this}set(e,t,i,r){return e.length?this.copy(e):(Ww(this._target,e,t,i,r),this.onChange(),this)}rotateX(e){return Uw(this._target,this._target,e),this.onChange(),this}rotateY(e){return kw(this._target,this._target,e),this.onChange(),this}rotateZ(e){return Fw(this._target,this._target,e),this.onChange(),this}inverse(e=this._target){return Ow(this._target,e),this.onChange(),this}conjugate(e=this._target){return Mw(this._target,e),this.onChange(),this}copy(e){return $w(this._target,e),this.onChange(),this}normalize(e=this._target){return Gw(this._target,e),this.onChange(),this}multiply(e,t){return t?kg(this._target,e,t):kg(this._target,this._target,e),this.onChange(),this}dot(e){return Vw(this._target,e)}fromMatrix3(e){return Bw(this._target,e),this.onChange(),this}fromEuler(e,t){return Nw(this._target,e,e.order),t||this.onChange(),this}fromAxisAngle(e,t){return Lw(this._target,e,t),this.onChange(),this}slerp(e,t){return Pw(this._target,this._target,e,t),this.onChange(),this}fromArray(e,t=0){return this._target[0]=e[t],this._target[1]=e[t+1],this._target[2]=e[t+2],this._target[3]=e[t+3],this.onChange(),this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e}}const qw=1e-6;function jw(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function Kw(n,e,t,i,r,s,a,o,c,l,u,d,h,f,p,m,g){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n[4]=s,n[5]=a,n[6]=o,n[7]=c,n[8]=l,n[9]=u,n[10]=d,n[11]=h,n[12]=f,n[13]=p,n[14]=m,n[15]=g,n}function zw(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function Xw(n,e){let t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],c=e[6],l=e[7],u=e[8],d=e[9],h=e[10],f=e[11],p=e[12],m=e[13],g=e[14],y=e[15],v=t*o-i*a,b=t*c-r*a,T=t*l-s*a,x=i*c-r*o,_=i*l-s*o,D=r*l-s*c,w=u*m-d*p,S=u*g-h*p,C=u*y-f*p,O=d*g-h*m,I=d*y-f*m,L=h*y-f*g,E=v*L-b*I+T*O+x*C-_*S+D*w;return E?(E=1/E,n[0]=(o*L-c*I+l*O)*E,n[1]=(r*I-i*L-s*O)*E,n[2]=(m*D-g*_+y*x)*E,n[3]=(h*_-d*D-f*x)*E,n[4]=(c*C-a*L-l*S)*E,n[5]=(t*L-r*C+s*S)*E,n[6]=(g*T-p*D-y*b)*E,n[7]=(u*D-h*T+f*b)*E,n[8]=(a*I-o*C+l*w)*E,n[9]=(i*C-t*I-s*w)*E,n[10]=(p*_-m*T+y*v)*E,n[11]=(d*T-u*_-f*v)*E,n[12]=(o*S-a*O-c*w)*E,n[13]=(t*O-i*S+r*w)*E,n[14]=(m*b-p*x-g*v)*E,n[15]=(u*x-d*b+h*v)*E,n):null}function tx(n){let e=n[0],t=n[1],i=n[2],r=n[3],s=n[4],a=n[5],o=n[6],c=n[7],l=n[8],u=n[9],d=n[10],h=n[11],f=n[12],p=n[13],m=n[14],g=n[15],y=e*a-t*s,v=e*o-i*s,b=e*c-r*s,T=t*o-i*a,x=t*c-r*a,_=i*c-r*o,D=l*p-u*f,w=l*m-d*f,S=l*g-h*f,C=u*m-d*p,O=u*g-h*p,I=d*g-h*m;return y*I-v*O+b*C+T*S-x*w+_*D}function Fg(n,e,t){let i=e[0],r=e[1],s=e[2],a=e[3],o=e[4],c=e[5],l=e[6],u=e[7],d=e[8],h=e[9],f=e[10],p=e[11],m=e[12],g=e[13],y=e[14],v=e[15],b=t[0],T=t[1],x=t[2],_=t[3];return n[0]=b*i+T*o+x*d+_*m,n[1]=b*r+T*c+x*h+_*g,n[2]=b*s+T*l+x*f+_*y,n[3]=b*a+T*u+x*p+_*v,b=t[4],T=t[5],x=t[6],_=t[7],n[4]=b*i+T*o+x*d+_*m,n[5]=b*r+T*c+x*h+_*g,n[6]=b*s+T*l+x*f+_*y,n[7]=b*a+T*u+x*p+_*v,b=t[8],T=t[9],x=t[10],_=t[11],n[8]=b*i+T*o+x*d+_*m,n[9]=b*r+T*c+x*h+_*g,n[10]=b*s+T*l+x*f+_*y,n[11]=b*a+T*u+x*p+_*v,b=t[12],T=t[13],x=t[14],_=t[15],n[12]=b*i+T*o+x*d+_*m,n[13]=b*r+T*c+x*h+_*g,n[14]=b*s+T*l+x*f+_*y,n[15]=b*a+T*u+x*p+_*v,n}function Yw(n,e,t){let i=t[0],r=t[1],s=t[2],a,o,c,l,u,d,h,f,p,m,g,y;return e===n?(n[12]=e[0]*i+e[4]*r+e[8]*s+e[12],n[13]=e[1]*i+e[5]*r+e[9]*s+e[13],n[14]=e[2]*i+e[6]*r+e[10]*s+e[14],n[15]=e[3]*i+e[7]*r+e[11]*s+e[15]):(a=e[0],o=e[1],c=e[2],l=e[3],u=e[4],d=e[5],h=e[6],f=e[7],p=e[8],m=e[9],g=e[10],y=e[11],n[0]=a,n[1]=o,n[2]=c,n[3]=l,n[4]=u,n[5]=d,n[6]=h,n[7]=f,n[8]=p,n[9]=m,n[10]=g,n[11]=y,n[12]=a*i+u*r+p*s+e[12],n[13]=o*i+d*r+m*s+e[13],n[14]=c*i+h*r+g*s+e[14],n[15]=l*i+f*r+y*s+e[15]),n}function Qw(n,e,t){let i=t[0],r=t[1],s=t[2];return n[0]=e[0]*i,n[1]=e[1]*i,n[2]=e[2]*i,n[3]=e[3]*i,n[4]=e[4]*r,n[5]=e[5]*r,n[6]=e[6]*r,n[7]=e[7]*r,n[8]=e[8]*s,n[9]=e[9]*s,n[10]=e[10]*s,n[11]=e[11]*s,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function Zw(n,e,t,i){let r=i[0],s=i[1],a=i[2],o=Math.hypot(r,s,a),c,l,u,d,h,f,p,m,g,y,v,b,T,x,_,D,w,S,C,O,I,L,E,$;return Math.abs(o)<qw?null:(o=1/o,r*=o,s*=o,a*=o,c=Math.sin(t),l=Math.cos(t),u=1-l,d=e[0],h=e[1],f=e[2],p=e[3],m=e[4],g=e[5],y=e[6],v=e[7],b=e[8],T=e[9],x=e[10],_=e[11],D=r*r*u+l,w=s*r*u+a*c,S=a*r*u-s*c,C=r*s*u-a*c,O=s*s*u+l,I=a*s*u+r*c,L=r*a*u+s*c,E=s*a*u-r*c,$=a*a*u+l,n[0]=d*D+m*w+b*S,n[1]=h*D+g*w+T*S,n[2]=f*D+y*w+x*S,n[3]=p*D+v*w+_*S,n[4]=d*C+m*O+b*I,n[5]=h*C+g*O+T*I,n[6]=f*C+y*O+x*I,n[7]=p*C+v*O+_*I,n[8]=d*L+m*E+b*$,n[9]=h*L+g*E+T*$,n[10]=f*L+y*E+x*$,n[11]=p*L+v*E+_*$,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n)}function Jw(n,e){return n[0]=e[12],n[1]=e[13],n[2]=e[14],n}function nx(n,e){let t=e[0],i=e[1],r=e[2],s=e[4],a=e[5],o=e[6],c=e[8],l=e[9],u=e[10];return n[0]=Math.hypot(t,i,r),n[1]=Math.hypot(s,a,o),n[2]=Math.hypot(c,l,u),n}function eI(n){let e=n[0],t=n[1],i=n[2],r=n[4],s=n[5],a=n[6],o=n[8],c=n[9],l=n[10];const u=e*e+t*t+i*i,d=r*r+s*s+a*a,h=o*o+c*c+l*l;return Math.sqrt(Math.max(u,d,h))}const ix=(function(){const n=[1,1,1];return function(e,t){let i=n;nx(i,t);let r=1/i[0],s=1/i[1],a=1/i[2],o=t[0]*r,c=t[1]*s,l=t[2]*a,u=t[4]*r,d=t[5]*s,h=t[6]*a,f=t[8]*r,p=t[9]*s,m=t[10]*a,g=o+d+m,y=0;return g>0?(y=Math.sqrt(g+1)*2,e[3]=.25*y,e[0]=(h-p)/y,e[1]=(f-l)/y,e[2]=(c-u)/y):o>d&&o>m?(y=Math.sqrt(1+o-d-m)*2,e[3]=(h-p)/y,e[0]=.25*y,e[1]=(c+u)/y,e[2]=(f+l)/y):d>m?(y=Math.sqrt(1+d-o-m)*2,e[3]=(f-l)/y,e[0]=(c+u)/y,e[1]=.25*y,e[2]=(h+p)/y):(y=Math.sqrt(1+m-o-d)*2,e[3]=(c-u)/y,e[0]=(f+l)/y,e[1]=(h+p)/y,e[2]=.25*y),e}})();function tI(n,e,t,i){let r=Es([n[0],n[1],n[2]]);const s=Es([n[4],n[5],n[6]]),a=Es([n[8],n[9],n[10]]);tx(n)<0&&(r=-r),t[0]=n[12],t[1]=n[13],t[2]=n[14];const c=n.slice(),l=1/r,u=1/s,d=1/a;c[0]*=l,c[1]*=l,c[2]*=l,c[4]*=u,c[5]*=u,c[6]*=u,c[8]*=d,c[9]*=d,c[10]*=d,ix(e,c),i[0]=r,i[1]=s,i[2]=a}function nI(n,e,t,i){const r=n,s=e[0],a=e[1],o=e[2],c=e[3],l=s+s,u=a+a,d=o+o,h=s*l,f=s*u,p=s*d,m=a*u,g=a*d,y=o*d,v=c*l,b=c*u,T=c*d,x=i[0],_=i[1],D=i[2];return r[0]=(1-(m+y))*x,r[1]=(f+T)*x,r[2]=(p-b)*x,r[3]=0,r[4]=(f-T)*_,r[5]=(1-(h+y))*_,r[6]=(g+v)*_,r[7]=0,r[8]=(p+b)*D,r[9]=(g-v)*D,r[10]=(1-(h+m))*D,r[11]=0,r[12]=t[0],r[13]=t[1],r[14]=t[2],r[15]=1,r}function iI(n,e){let t=e[0],i=e[1],r=e[2],s=e[3],a=t+t,o=i+i,c=r+r,l=t*a,u=i*a,d=i*o,h=r*a,f=r*o,p=r*c,m=s*a,g=s*o,y=s*c;return n[0]=1-d-p,n[1]=u+y,n[2]=h-g,n[3]=0,n[4]=u-y,n[5]=1-l-p,n[6]=f+m,n[7]=0,n[8]=h+g,n[9]=f-m,n[10]=1-l-d,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function rI(n,e,t,i,r){let s=1/Math.tan(e/2),a=1/(i-r);return n[0]=s/t,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=s,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=(r+i)*a,n[11]=-1,n[12]=0,n[13]=0,n[14]=2*r*i*a,n[15]=0,n}function sI(n,e,t,i,r,s,a){let o=1/(e-t),c=1/(i-r),l=1/(s-a);return n[0]=-2*o,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*c,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*l,n[11]=0,n[12]=(e+t)*o,n[13]=(r+i)*c,n[14]=(a+s)*l,n[15]=1,n}function aI(n,e,t,i){let r=e[0],s=e[1],a=e[2],o=i[0],c=i[1],l=i[2],u=r-t[0],d=s-t[1],h=a-t[2],f=u*u+d*d+h*h;f===0?h=1:(f=1/Math.sqrt(f),u*=f,d*=f,h*=f);let p=c*h-l*d,m=l*u-o*h,g=o*d-c*u;return f=p*p+m*m+g*g,f===0&&(l?o+=1e-6:c?l+=1e-6:c+=1e-6,p=c*h-l*d,m=l*u-o*h,g=o*d-c*u,f=p*p+m*m+g*g),f=1/Math.sqrt(f),p*=f,m*=f,g*=f,n[0]=p,n[1]=m,n[2]=g,n[3]=0,n[4]=d*g-h*m,n[5]=h*p-u*g,n[6]=u*m-d*p,n[7]=0,n[8]=u,n[9]=d,n[10]=h,n[11]=0,n[12]=r,n[13]=s,n[14]=a,n[15]=1,n}function Pg(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3],n[4]=e[4]+t[4],n[5]=e[5]+t[5],n[6]=e[6]+t[6],n[7]=e[7]+t[7],n[8]=e[8]+t[8],n[9]=e[9]+t[9],n[10]=e[10]+t[10],n[11]=e[11]+t[11],n[12]=e[12]+t[12],n[13]=e[13]+t[13],n[14]=e[14]+t[14],n[15]=e[15]+t[15],n}function Og(n,e,t){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2],n[3]=e[3]-t[3],n[4]=e[4]-t[4],n[5]=e[5]-t[5],n[6]=e[6]-t[6],n[7]=e[7]-t[7],n[8]=e[8]-t[8],n[9]=e[9]-t[9],n[10]=e[10]-t[10],n[11]=e[11]-t[11],n[12]=e[12]-t[12],n[13]=e[13]-t[13],n[14]=e[14]-t[14],n[15]=e[15]-t[15],n}function oI(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n[4]=e[4]*t,n[5]=e[5]*t,n[6]=e[6]*t,n[7]=e[7]*t,n[8]=e[8]*t,n[9]=e[9]*t,n[10]=e[10]*t,n[11]=e[11]*t,n[12]=e[12]*t,n[13]=e[13]*t,n[14]=e[14]*t,n[15]=e[15]*t,n}class bi extends Array{constructor(e=1,t=0,i=0,r=0,s=0,a=1,o=0,c=0,l=0,u=0,d=1,h=0,f=0,p=0,m=0,g=1){return super(e,t,i,r,s,a,o,c,l,u,d,h,f,p,m,g),this}get x(){return this[12]}get y(){return this[13]}get z(){return this[14]}get w(){return this[15]}set x(e){this[12]=e}set y(e){this[13]=e}set z(e){this[14]=e}set w(e){this[15]=e}set(e,t,i,r,s,a,o,c,l,u,d,h,f,p,m,g){return e.length?this.copy(e):(Kw(this,e,t,i,r,s,a,o,c,l,u,d,h,f,p,m,g),this)}translate(e,t=this){return Yw(this,t,e),this}rotate(e,t,i=this){return Zw(this,i,e,t),this}scale(e,t=this){return Qw(this,t,typeof e=="number"?[e,e,e]:e),this}add(e,t){return t?Pg(this,e,t):Pg(this,this,e),this}sub(e,t){return t?Og(this,e,t):Og(this,this,e),this}multiply(e,t){return e.length?t?Fg(this,e,t):Fg(this,this,e):oI(this,this,e),this}identity(){return zw(this),this}copy(e){return jw(this,e),this}fromPerspective({fov:e,aspect:t,near:i,far:r}={}){return rI(this,e,t,i,r),this}fromOrthogonal({left:e,right:t,bottom:i,top:r,near:s,far:a}){return sI(this,e,t,i,r,s,a),this}fromQuaternion(e){return iI(this,e),this}setPosition(e){return this.x=e[0],this.y=e[1],this.z=e[2],this}inverse(e=this){return Xw(this,e),this}compose(e,t,i){return nI(this,e,t,i),this}decompose(e,t,i){return tI(this,e,t,i),this}getRotation(e){return ix(e,this),this}getTranslation(e){return Jw(e,this),this}getScaling(e){return nx(e,this),this}getMaxScaleOnAxis(){return eI(this)}lookAt(e,t,i){return aI(this,e,t,i),this}determinant(){return tx(this)}fromArray(e,t=0){return this[0]=e[t],this[1]=e[t+1],this[2]=e[t+2],this[3]=e[t+3],this[4]=e[t+4],this[5]=e[t+5],this[6]=e[t+6],this[7]=e[t+7],this[8]=e[t+8],this[9]=e[t+9],this[10]=e[t+10],this[11]=e[t+11],this[12]=e[t+12],this[13]=e[t+13],this[14]=e[t+14],this[15]=e[t+15],this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e[t+4]=this[4],e[t+5]=this[5],e[t+6]=this[6],e[t+7]=this[7],e[t+8]=this[8],e[t+9]=this[9],e[t+10]=this[10],e[t+11]=this[11],e[t+12]=this[12],e[t+13]=this[13],e[t+14]=this[14],e[t+15]=this[15],e}}function cI(n,e,t="YXZ"){return t==="XYZ"?(n[1]=Math.asin(Math.min(Math.max(e[8],-1),1)),Math.abs(e[8])<.99999?(n[0]=Math.atan2(-e[9],e[10]),n[2]=Math.atan2(-e[4],e[0])):(n[0]=Math.atan2(e[6],e[5]),n[2]=0)):t==="YXZ"?(n[0]=Math.asin(-Math.min(Math.max(e[9],-1),1)),Math.abs(e[9])<.99999?(n[1]=Math.atan2(e[8],e[10]),n[2]=Math.atan2(e[1],e[5])):(n[1]=Math.atan2(-e[2],e[0]),n[2]=0)):t==="ZXY"?(n[0]=Math.asin(Math.min(Math.max(e[6],-1),1)),Math.abs(e[6])<.99999?(n[1]=Math.atan2(-e[2],e[10]),n[2]=Math.atan2(-e[4],e[5])):(n[1]=0,n[2]=Math.atan2(e[1],e[0]))):t==="ZYX"?(n[1]=Math.asin(-Math.min(Math.max(e[2],-1),1)),Math.abs(e[2])<.99999?(n[0]=Math.atan2(e[6],e[10]),n[2]=Math.atan2(e[1],e[0])):(n[0]=0,n[2]=Math.atan2(-e[4],e[5]))):t==="YZX"?(n[2]=Math.asin(Math.min(Math.max(e[1],-1),1)),Math.abs(e[1])<.99999?(n[0]=Math.atan2(-e[9],e[5]),n[1]=Math.atan2(-e[2],e[0])):(n[0]=0,n[1]=Math.atan2(e[8],e[10]))):t==="XZY"&&(n[2]=Math.asin(-Math.min(Math.max(e[4],-1),1)),Math.abs(e[4])<.99999?(n[0]=Math.atan2(e[6],e[5]),n[1]=Math.atan2(e[8],e[0])):(n[0]=Math.atan2(-e[9],e[10]),n[1]=0)),n}const Mg=new bi;class lI extends Array{constructor(e=0,t=e,i=e,r="YXZ"){super(e,t,i),this.order=r,this.onChange=()=>{},this._target=this;const s=["0","1","2"];return new Proxy(this,{set(a,o){const c=Reflect.set(...arguments);return c&&s.includes(o)&&a.onChange(),c}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set(e,t=e,i=e){return e.length?this.copy(e):(this._target[0]=e,this._target[1]=t,this._target[2]=i,this.onChange(),this)}copy(e){return this._target[0]=e[0],this._target[1]=e[1],this._target[2]=e[2],this.onChange(),this}reorder(e){return this._target.order=e,this.onChange(),this}fromRotationMatrix(e,t=this.order){return cI(this._target,e,t),this.onChange(),this}fromQuaternion(e,t=this.order,i){return Mg.fromQuaternion(e),this._target.fromRotationMatrix(Mg,t),i||this.onChange(),this}fromArray(e,t=0){return this._target[0]=e[t],this._target[1]=e[t+1],this._target[2]=e[t+2],this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}}class rx{constructor(){this.parent=null,this.children=[],this.visible=!0,this.matrix=new bi,this.worldMatrix=new bi,this.matrixAutoUpdate=!0,this.worldMatrixNeedsUpdate=!1,this.position=new ht,this.quaternion=new Hw,this.scale=new ht(1),this.rotation=new lI,this.up=new ht(0,1,0),this.rotation._target.onChange=()=>this.quaternion.fromEuler(this.rotation,!0),this.quaternion._target.onChange=()=>this.rotation.fromQuaternion(this.quaternion,void 0,!0)}setParent(e,t=!0){this.parent&&e!==this.parent&&this.parent.removeChild(this,!1),this.parent=e,t&&e&&e.addChild(this,!1)}addChild(e,t=!0){~this.children.indexOf(e)||this.children.push(e),t&&e.setParent(this,!1)}removeChild(e,t=!0){~this.children.indexOf(e)&&this.children.splice(this.children.indexOf(e),1),t&&e.setParent(null,!1)}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||e)&&(this.parent===null?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,e=!0);for(let t=0,i=this.children.length;t<i;t++)this.children[t].updateMatrixWorld(e)}updateMatrix(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}traverse(e){if(!e(this))for(let t=0,i=this.children.length;t<i;t++)this.children[t].traverse(e)}decompose(){this.matrix.decompose(this.quaternion._target,this.position,this.scale),this.rotation.fromQuaternion(this.quaternion)}lookAt(e,t=!1){t?this.matrix.lookAt(this.position,e,this.up):this.matrix.lookAt(e,this.position,this.up),this.matrix.getRotation(this.quaternion._target),this.rotation.fromQuaternion(this.quaternion)}}const uI=new bi,dI=new ht,hI=new ht;class e4 extends rx{constructor(e,{near:t=.1,far:i=100,fov:r=45,aspect:s=1,left:a,right:o,bottom:c,top:l,zoom:u=1}={}){super(),Object.assign(this,{near:t,far:i,fov:r,aspect:s,left:a,right:o,bottom:c,top:l,zoom:u}),this.projectionMatrix=new bi,this.viewMatrix=new bi,this.projectionViewMatrix=new bi,this.worldPosition=new ht,this.type=a||o?"orthographic":"perspective",this.type==="orthographic"?this.orthographic():this.perspective()}perspective({near:e=this.near,far:t=this.far,fov:i=this.fov,aspect:r=this.aspect}={}){return Object.assign(this,{near:e,far:t,fov:i,aspect:r}),this.projectionMatrix.fromPerspective({fov:i*(Math.PI/180),aspect:r,near:e,far:t}),this.type="perspective",this}orthographic({near:e=this.near,far:t=this.far,left:i=this.left||-1,right:r=this.right||1,bottom:s=this.bottom||-1,top:a=this.top||1,zoom:o=this.zoom}={}){return Object.assign(this,{near:e,far:t,left:i,right:r,bottom:s,top:a,zoom:o}),i/=o,r/=o,s/=o,a/=o,this.projectionMatrix.fromOrthogonal({left:i,right:r,bottom:s,top:a,near:e,far:t}),this.type="orthographic",this}updateMatrixWorld(){return super.updateMatrixWorld(),this.viewMatrix.inverse(this.worldMatrix),this.worldMatrix.getTranslation(this.worldPosition),this.projectionViewMatrix.multiply(this.projectionMatrix,this.viewMatrix),this}updateProjectionMatrix(){return this.type==="perspective"?this.perspective():this.orthographic()}lookAt(e){return super.lookAt(e,!0),this}project(e){return e.applyMatrix4(this.viewMatrix),e.applyMatrix4(this.projectionMatrix),this}unproject(e){return e.applyMatrix4(uI.inverse(this.projectionMatrix)),e.applyMatrix4(this.worldMatrix),this}updateFrustum(){this.frustum||(this.frustum=[new ht,new ht,new ht,new ht,new ht,new ht]);const e=this.projectionViewMatrix;this.frustum[0].set(e[3]-e[0],e[7]-e[4],e[11]-e[8]).constant=e[15]-e[12],this.frustum[1].set(e[3]+e[0],e[7]+e[4],e[11]+e[8]).constant=e[15]+e[12],this.frustum[2].set(e[3]+e[1],e[7]+e[5],e[11]+e[9]).constant=e[15]+e[13],this.frustum[3].set(e[3]-e[1],e[7]-e[5],e[11]-e[9]).constant=e[15]-e[13],this.frustum[4].set(e[3]-e[2],e[7]-e[6],e[11]-e[10]).constant=e[15]-e[14],this.frustum[5].set(e[3]+e[2],e[7]+e[6],e[11]+e[10]).constant=e[15]+e[14];for(let t=0;t<6;t++){const i=1/this.frustum[t].distance();this.frustum[t].multiply(i),this.frustum[t].constant*=i}}frustumIntersectsMesh(e,t=e.worldMatrix){if(!e.geometry.attributes.position||((!e.geometry.bounds||e.geometry.bounds.radius===1/0)&&e.geometry.computeBoundingSphere(),!e.geometry.bounds))return!0;const i=dI;i.copy(e.geometry.bounds.center),i.applyMatrix4(t);const r=e.geometry.bounds.radius*t.getMaxScaleOnAxis();return this.frustumIntersectsSphere(i,r)}frustumIntersectsSphere(e,t){const i=hI;for(let r=0;r<6;r++){const s=this.frustum[r];if(i.copy(s).dot(e)+s.constant<-t)return!1}return!0}}function fI(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[4],n[4]=e[5],n[5]=e[6],n[6]=e[8],n[7]=e[9],n[8]=e[10],n}function pI(n,e){let t=e[0],i=e[1],r=e[2],s=e[3],a=t+t,o=i+i,c=r+r,l=t*a,u=i*a,d=i*o,h=r*a,f=r*o,p=r*c,m=s*a,g=s*o,y=s*c;return n[0]=1-d-p,n[3]=u-y,n[6]=h+g,n[1]=u+y,n[4]=1-l-p,n[7]=f-m,n[2]=h-g,n[5]=f+m,n[8]=1-l-d,n}function gI(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n}function mI(n,e,t,i,r,s,a,o,c,l){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n[4]=s,n[5]=a,n[6]=o,n[7]=c,n[8]=l,n}function yI(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n}function vI(n,e){let t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],c=e[6],l=e[7],u=e[8],d=u*a-o*l,h=-u*s+o*c,f=l*s-a*c,p=t*d+i*h+r*f;return p?(p=1/p,n[0]=d*p,n[1]=(-u*i+r*l)*p,n[2]=(o*i-r*a)*p,n[3]=h*p,n[4]=(u*t-r*c)*p,n[5]=(-o*t+r*s)*p,n[6]=f*p,n[7]=(-l*t+i*c)*p,n[8]=(a*t-i*s)*p,n):null}function Bg(n,e,t){let i=e[0],r=e[1],s=e[2],a=e[3],o=e[4],c=e[5],l=e[6],u=e[7],d=e[8],h=t[0],f=t[1],p=t[2],m=t[3],g=t[4],y=t[5],v=t[6],b=t[7],T=t[8];return n[0]=h*i+f*a+p*l,n[1]=h*r+f*o+p*u,n[2]=h*s+f*c+p*d,n[3]=m*i+g*a+y*l,n[4]=m*r+g*o+y*u,n[5]=m*s+g*c+y*d,n[6]=v*i+b*a+T*l,n[7]=v*r+b*o+T*u,n[8]=v*s+b*c+T*d,n}function bI(n,e,t){let i=e[0],r=e[1],s=e[2],a=e[3],o=e[4],c=e[5],l=e[6],u=e[7],d=e[8],h=t[0],f=t[1];return n[0]=i,n[1]=r,n[2]=s,n[3]=a,n[4]=o,n[5]=c,n[6]=h*i+f*a+l,n[7]=h*r+f*o+u,n[8]=h*s+f*c+d,n}function xI(n,e,t){let i=e[0],r=e[1],s=e[2],a=e[3],o=e[4],c=e[5],l=e[6],u=e[7],d=e[8],h=Math.sin(t),f=Math.cos(t);return n[0]=f*i+h*a,n[1]=f*r+h*o,n[2]=f*s+h*c,n[3]=f*a-h*i,n[4]=f*o-h*r,n[5]=f*c-h*s,n[6]=l,n[7]=u,n[8]=d,n}function TI(n,e,t){let i=t[0],r=t[1];return n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=r*e[3],n[4]=r*e[4],n[5]=r*e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n}function _I(n,e){let t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],c=e[6],l=e[7],u=e[8],d=e[9],h=e[10],f=e[11],p=e[12],m=e[13],g=e[14],y=e[15],v=t*o-i*a,b=t*c-r*a,T=t*l-s*a,x=i*c-r*o,_=i*l-s*o,D=r*l-s*c,w=u*m-d*p,S=u*g-h*p,C=u*y-f*p,O=d*g-h*m,I=d*y-f*m,L=h*y-f*g,E=v*L-b*I+T*O+x*C-_*S+D*w;return E?(E=1/E,n[0]=(o*L-c*I+l*O)*E,n[1]=(c*C-a*L-l*S)*E,n[2]=(a*I-o*C+l*w)*E,n[3]=(r*I-i*L-s*O)*E,n[4]=(t*L-r*C+s*S)*E,n[5]=(i*C-t*I-s*w)*E,n[6]=(m*D-g*_+y*x)*E,n[7]=(g*T-p*D-y*b)*E,n[8]=(p*_-m*T+y*v)*E,n):null}class DI extends Array{constructor(e=1,t=0,i=0,r=0,s=1,a=0,o=0,c=0,l=1){return super(e,t,i,r,s,a,o,c,l),this}set(e,t,i,r,s,a,o,c,l){return e.length?this.copy(e):(mI(this,e,t,i,r,s,a,o,c,l),this)}translate(e,t=this){return bI(this,t,e),this}rotate(e,t=this){return xI(this,t,e),this}scale(e,t=this){return TI(this,t,e),this}multiply(e,t){return t?Bg(this,e,t):Bg(this,this,e),this}identity(){return yI(this),this}copy(e){return gI(this,e),this}fromMatrix4(e){return fI(this,e),this}fromQuaternion(e){return pI(this,e),this}fromBasis(e,t,i){return this.set(e[0],e[1],e[2],t[0],t[1],t[2],i[0],i[1],i[2]),this}inverse(e=this){return vI(this,e),this}getNormalMatrix(e){return _I(this,e),this}}let EI=0;class t4 extends rx{constructor(e,{geometry:t,program:i,mode:r=e.TRIANGLES,frustumCulled:s=!0,renderOrder:a=0}={}){super(),e.canvas||console.error("gl not passed as first argument to Mesh"),this.gl=e,this.id=EI++,this.geometry=t,this.program=i,this.mode=r,this.frustumCulled=s,this.renderOrder=a,this.modelViewMatrix=new bi,this.normalMatrix=new DI,this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[]}onBeforeRender(e){return this.beforeRenderCallbacks.push(e),this}onAfterRender(e){return this.afterRenderCallbacks.push(e),this}draw({camera:e}={}){e&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=e.projectionMatrix,this.program.uniforms.cameraPosition.value=e.worldPosition,this.program.uniforms.viewMatrix.value=e.viewMatrix,this.modelViewMatrix.multiply(e.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix),this.beforeRenderCallbacks.forEach(i=>i&&i({mesh:this,camera:e}));let t=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:t}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach(i=>i&&i({mesh:this,camera:e}))}}const Ng={black:"#000000",white:"#ffffff",red:"#ff0000",green:"#00ff00",blue:"#0000ff",fuchsia:"#ff00ff",cyan:"#00ffff",yellow:"#ffff00",orange:"#ff8000"};function $g(n){n.length===4&&(n=n[0]+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]);const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return e||console.warn(`Unable to convert hex string ${n} to rgb values`),[parseInt(e[1],16)/255,parseInt(e[2],16)/255,parseInt(e[3],16)/255]}function SI(n){return n=parseInt(n),[(n>>16&255)/255,(n>>8&255)/255,(n&255)/255]}function Wg(n){return n===void 0?[0,0,0]:arguments.length===3?arguments:isNaN(n)?n[0]==="#"?$g(n):Ng[n.toLowerCase()]?$g(Ng[n.toLowerCase()]):(console.warn("Color format not recognised"),[0,0,0]):SI(n)}class n4 extends Array{constructor(e){return Array.isArray(e)?super(...e):super(...Wg(...arguments))}get r(){return this[0]}get g(){return this[1]}get b(){return this[2]}set r(e){this[0]=e}set g(e){this[1]=e}set b(e){this[2]=e}set(e){return Array.isArray(e)?this.copy(e):this.copy(Wg(...arguments))}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this}}class i4 extends xw{constructor(e,{attributes:t={}}={}){Object.assign(t,{position:{size:2,data:new Float32Array([-1,-1,3,-1,-1,3])},uv:{size:2,data:new Float32Array([0,0,2,0,0,2])}}),super(e,t)}}const jh=Tt({});function da(n){const e=Jt(null);return e.current===null&&(e.current=n()),e.current}const Kh=typeof window<"u",zh=Kh?Sc:Di,Cc=Tt(null);function Xh(n,e){n.indexOf(e)===-1&&n.push(e)}function Yh(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const zn=(n,e,t)=>t>e?e:t<n?n:t;let Qh=()=>{};const Xn={},sx=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function ax(n){return typeof n=="object"&&n!==null}const ox=n=>/^0[^.\s]+$/u.test(n);function Zh(n){let e;return()=>(e===void 0&&(e=n()),e)}const en=n=>n,AI=(n,e)=>t=>e(n(t)),ha=(...n)=>n.reduce(AI),$s=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i};class Jh{constructor(){this.subscriptions=[]}add(e){return Xh(this.subscriptions,e),()=>Yh(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let s=0;s<r;s++){const a=this.subscriptions[s];a&&a(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const In=n=>n*1e3,Qt=n=>n/1e3;function cx(n,e){return e?n*(1e3/e):0}const lx=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,wI=1e-7,II=12;function CI(n,e,t,i,r){let s,a,o=0;do a=e+(t-e)/2,s=lx(a,i,r)-n,s>0?t=a:e=a;while(Math.abs(s)>wI&&++o<II);return a}function fa(n,e,t,i){if(n===e&&t===i)return en;const r=s=>CI(s,0,1,n,t);return s=>s===0||s===1?s:lx(r(s),e,i)}const ux=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,dx=n=>e=>1-n(1-e),hx=fa(.33,1.53,.69,.99),ef=dx(hx),fx=ux(ef),px=n=>(n*=2)<1?.5*ef(n):.5*(2-Math.pow(2,-10*(n-1))),tf=n=>1-Math.sin(Math.acos(n)),gx=dx(tf),mx=ux(tf),RI=fa(.42,0,1,1),LI=fa(0,0,.58,1),yx=fa(.42,0,.58,1),UI=n=>Array.isArray(n)&&typeof n[0]!="number",vx=n=>Array.isArray(n)&&typeof n[0]=="number",kI={linear:en,easeIn:RI,easeInOut:yx,easeOut:LI,circIn:tf,circInOut:mx,circOut:gx,backIn:ef,backInOut:fx,backOut:hx,anticipate:px},FI=n=>typeof n=="string",Vg=n=>{if(vx(n)){Qh(n.length===4);const[e,t,i,r]=n;return fa(e,t,i,r)}else if(FI(n))return kI[n];return n},wa=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function PI(n,e){let t=new Set,i=new Set,r=!1,s=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function c(u){a.has(u)&&(l.schedule(u),n()),u(o)}const l={schedule:(u,d=!1,h=!1)=>{const p=h&&r?t:i;return d&&a.add(u),p.has(u)||p.add(u),u},cancel:u=>{i.delete(u),a.delete(u)},process:u=>{if(o=u,r){s=!0;return}r=!0,[t,i]=[i,t],t.forEach(c),t.clear(),r=!1,s&&(s=!1,l.process(u))}};return l}const OI=40;function bx(n,e){let t=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,a=wa.reduce((b,T)=>(b[T]=PI(s),b),{}),{setup:o,read:c,resolveKeyframes:l,preUpdate:u,update:d,preRender:h,render:f,postRender:p}=a,m=()=>{const b=Xn.useManualTiming?r.timestamp:performance.now();t=!1,Xn.useManualTiming||(r.delta=i?1e3/60:Math.max(Math.min(b-r.timestamp,OI),1)),r.timestamp=b,r.isProcessing=!0,o.process(r),c.process(r),l.process(r),u.process(r),d.process(r),h.process(r),f.process(r),p.process(r),r.isProcessing=!1,t&&e&&(i=!1,n(m))},g=()=>{t=!0,i=!0,r.isProcessing||n(m)};return{schedule:wa.reduce((b,T)=>{const x=a[T];return b[T]=(_,D=!1,w=!1)=>(t||g(),x.schedule(_,D,w)),b},{}),cancel:b=>{for(let T=0;T<wa.length;T++)a[wa[T]].cancel(b)},state:r,steps:a}}const{schedule:et,cancel:Yn,state:_t,steps:Al}=bx(typeof requestAnimationFrame<"u"?requestAnimationFrame:en,!0);let lo;function MI(){lo=void 0}const Nt={now:()=>(lo===void 0&&Nt.set(_t.isProcessing||Xn.useManualTiming?_t.timestamp:performance.now()),lo),set:n=>{lo=n,queueMicrotask(MI)}},xx=n=>e=>typeof e=="string"&&e.startsWith(n),Tx=xx("--"),BI=xx("var(--"),nf=n=>BI(n)?NI.test(n.split("/*")[0].trim()):!1,NI=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,es={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Ws={...es,transform:n=>zn(0,1,n)},Ia={...es,default:1},Ss=n=>Math.round(n*1e5)/1e5,rf=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function $I(n){return n==null}const WI=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,sf=(n,e)=>t=>!!(typeof t=="string"&&WI.test(t)&&t.startsWith(n)||e&&!$I(t)&&Object.prototype.hasOwnProperty.call(t,e)),_x=(n,e,t)=>i=>{if(typeof i!="string")return i;const[r,s,a,o]=i.match(rf);return{[n]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},VI=n=>zn(0,255,n),wl={...es,transform:n=>Math.round(VI(n))},Qi={test:sf("rgb","red"),parse:_x("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+wl.transform(n)+", "+wl.transform(e)+", "+wl.transform(t)+", "+Ss(Ws.transform(i))+")"};function GI(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const kd={test:sf("#"),parse:GI,transform:Qi.transform},pa=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),di=pa("deg"),Cn=pa("%"),Ie=pa("px"),HI=pa("vh"),qI=pa("vw"),Gg={...Cn,parse:n=>Cn.parse(n)/100,transform:n=>Cn.transform(n*100)},wr={test:sf("hsl","hue"),parse:_x("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+Cn.transform(Ss(e))+", "+Cn.transform(Ss(t))+", "+Ss(Ws.transform(i))+")"},dt={test:n=>Qi.test(n)||kd.test(n)||wr.test(n),parse:n=>Qi.test(n)?Qi.parse(n):wr.test(n)?wr.parse(n):kd.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Qi.transform(n):wr.transform(n),getAnimatableNone:n=>{const e=dt.parse(n);return e.alpha=0,dt.transform(e)}},jI=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function KI(n){return isNaN(n)&&typeof n=="string"&&(n.match(rf)?.length||0)+(n.match(jI)?.length||0)>0}const Dx="number",Ex="color",zI="var",XI="var(",Hg="${}",YI=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Vs(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},r=[];let s=0;const o=e.replace(YI,c=>(dt.test(c)?(i.color.push(s),r.push(Ex),t.push(dt.parse(c))):c.startsWith(XI)?(i.var.push(s),r.push(zI),t.push(c)):(i.number.push(s),r.push(Dx),t.push(parseFloat(c))),++s,Hg)).split(Hg);return{values:t,split:o,indexes:i,types:r}}function Sx(n){return Vs(n).values}function Ax(n){const{split:e,types:t}=Vs(n),i=e.length;return r=>{let s="";for(let a=0;a<i;a++)if(s+=e[a],r[a]!==void 0){const o=t[a];o===Dx?s+=Ss(r[a]):o===Ex?s+=dt.transform(r[a]):s+=r[a]}return s}}const QI=n=>typeof n=="number"?0:dt.test(n)?dt.getAnimatableNone(n):n;function ZI(n){const e=Sx(n);return Ax(n)(e.map(QI))}const Si={test:KI,parse:Sx,createTransformer:Ax,getAnimatableNone:ZI};function Il(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function JI({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,s=0,a=0;if(!e)r=s=a=t;else{const o=t<.5?t*(1+e):t+e-t*e,c=2*t-o;r=Il(c,o,n+1/3),s=Il(c,o,n),a=Il(c,o,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:i}}function Yo(n,e){return t=>t>0?e:n}const rt=(n,e,t)=>n+(e-n)*t,Cl=(n,e,t)=>{const i=n*n,r=t*(e*e-i)+i;return r<0?0:Math.sqrt(r)},eC=[kd,Qi,wr],tC=n=>eC.find(e=>e.test(n));function qg(n){const e=tC(n);if(!e)return!1;let t=e.parse(n);return e===wr&&(t=JI(t)),t}const jg=(n,e)=>{const t=qg(n),i=qg(e);if(!t||!i)return Yo(n,e);const r={...t};return s=>(r.red=Cl(t.red,i.red,s),r.green=Cl(t.green,i.green,s),r.blue=Cl(t.blue,i.blue,s),r.alpha=rt(t.alpha,i.alpha,s),Qi.transform(r))},Fd=new Set(["none","hidden"]);function nC(n,e){return Fd.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function iC(n,e){return t=>rt(n,e,t)}function af(n){return typeof n=="number"?iC:typeof n=="string"?nf(n)?Yo:dt.test(n)?jg:aC:Array.isArray(n)?wx:typeof n=="object"?dt.test(n)?jg:rC:Yo}function wx(n,e){const t=[...n],i=t.length,r=n.map((s,a)=>af(s)(s,e[a]));return s=>{for(let a=0;a<i;a++)t[a]=r[a](s);return t}}function rC(n,e){const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=af(n[r])(n[r],e[r]));return r=>{for(const s in i)t[s]=i[s](r);return t}}function sC(n,e){const t=[],i={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const s=e.types[r],a=n.indexes[s][i[s]],o=n.values[a]??0;t[r]=o,i[s]++}return t}const aC=(n,e)=>{const t=Si.createTransformer(e),i=Vs(n),r=Vs(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?Fd.has(n)&&!r.values.length||Fd.has(e)&&!i.values.length?nC(n,e):ha(wx(sC(i,r),r.values),t):Yo(n,e)};function Ix(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?rt(n,e,t):af(n)(n,e)}const oC=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>et.update(e,t),stop:()=>Yn(e),now:()=>_t.isProcessing?_t.timestamp:Nt.now()}},Cx=(n,e,t=10)=>{let i="";const r=Math.max(Math.round(e/t),2);for(let s=0;s<r;s++)i+=Math.round(n(s/(r-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Qo=2e4;function of(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<Qo;)e+=t,i=n.next(e);return e>=Qo?1/0:e}function cC(n,e=100,t){const i=t({...n,keyframes:[0,e]}),r=Math.min(of(i),Qo);return{type:"keyframes",ease:s=>i.next(r*s).value/e,duration:Qt(r)}}const lC=5;function Rx(n,e,t){const i=Math.max(e-lC,0);return cx(t-n(i),e-i)}const ot={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Rl=.001;function uC({duration:n=ot.duration,bounce:e=ot.bounce,velocity:t=ot.velocity,mass:i=ot.mass}){let r,s,a=1-e;a=zn(ot.minDamping,ot.maxDamping,a),n=zn(ot.minDuration,ot.maxDuration,Qt(n)),a<1?(r=l=>{const u=l*a,d=u*n,h=u-t,f=Pd(l,a),p=Math.exp(-d);return Rl-h/f*p},s=l=>{const d=l*a*n,h=d*t+t,f=Math.pow(a,2)*Math.pow(l,2)*n,p=Math.exp(-d),m=Pd(Math.pow(l,2),a);return(-r(l)+Rl>0?-1:1)*((h-f)*p)/m}):(r=l=>{const u=Math.exp(-l*n),d=(l-t)*n+1;return-Rl+u*d},s=l=>{const u=Math.exp(-l*n),d=(t-l)*(n*n);return u*d});const o=5/n,c=hC(r,s,o);if(n=In(n),isNaN(c))return{stiffness:ot.stiffness,damping:ot.damping,duration:n};{const l=Math.pow(c,2)*i;return{stiffness:l,damping:a*2*Math.sqrt(i*l),duration:n}}}const dC=12;function hC(n,e,t){let i=t;for(let r=1;r<dC;r++)i=i-n(i)/e(i);return i}function Pd(n,e){return n*Math.sqrt(1-e*e)}const fC=["duration","bounce"],pC=["stiffness","damping","mass"];function Kg(n,e){return e.some(t=>n[t]!==void 0)}function gC(n){let e={velocity:ot.velocity,stiffness:ot.stiffness,damping:ot.damping,mass:ot.mass,isResolvedFromDuration:!1,...n};if(!Kg(n,pC)&&Kg(n,fC))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),r=i*i,s=2*zn(.05,1,1-(n.bounce||0))*Math.sqrt(r);e={...e,mass:ot.mass,stiffness:r,damping:s}}else{const t=uC(n);e={...e,...t,mass:ot.mass},e.isResolvedFromDuration=!0}return e}function Zo(n=ot.visualDuration,e=ot.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:r}=t;const s=t.keyframes[0],a=t.keyframes[t.keyframes.length-1],o={done:!1,value:s},{stiffness:c,damping:l,mass:u,duration:d,velocity:h,isResolvedFromDuration:f}=gC({...t,velocity:-Qt(t.velocity||0)}),p=h||0,m=l/(2*Math.sqrt(c*u)),g=a-s,y=Qt(Math.sqrt(c/u)),v=Math.abs(g)<5;i||(i=v?ot.restSpeed.granular:ot.restSpeed.default),r||(r=v?ot.restDelta.granular:ot.restDelta.default);let b;if(m<1){const x=Pd(y,m);b=_=>{const D=Math.exp(-m*y*_);return a-D*((p+m*y*g)/x*Math.sin(x*_)+g*Math.cos(x*_))}}else if(m===1)b=x=>a-Math.exp(-y*x)*(g+(p+y*g)*x);else{const x=y*Math.sqrt(m*m-1);b=_=>{const D=Math.exp(-m*y*_),w=Math.min(x*_,300);return a-D*((p+m*y*g)*Math.sinh(w)+x*g*Math.cosh(w))/x}}const T={calculatedDuration:f&&d||null,next:x=>{const _=b(x);if(f)o.done=x>=d;else{let D=x===0?p:0;m<1&&(D=x===0?In(p):Rx(b,x,_));const w=Math.abs(D)<=i,S=Math.abs(a-_)<=r;o.done=w&&S}return o.value=o.done?a:_,o},toString:()=>{const x=Math.min(of(T),Qo),_=Cx(D=>T.next(x*D).value,x,30);return x+"ms "+_},toTransition:()=>{}};return T}Zo.applyToOptions=n=>{const e=cC(n,100,Zo);return n.ease=e.ease,n.duration=In(e.duration),n.type="keyframes",n};function Od({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:c,restDelta:l=.5,restSpeed:u}){const d=n[0],h={done:!1,value:d},f=w=>o!==void 0&&w<o||c!==void 0&&w>c,p=w=>o===void 0?c:c===void 0||Math.abs(o-w)<Math.abs(c-w)?o:c;let m=t*e;const g=d+m,y=a===void 0?g:a(g);y!==g&&(m=y-d);const v=w=>-m*Math.exp(-w/i),b=w=>y+v(w),T=w=>{const S=v(w),C=b(w);h.done=Math.abs(S)<=l,h.value=h.done?y:C};let x,_;const D=w=>{f(h.value)&&(x=w,_=Zo({keyframes:[h.value,p(h.value)],velocity:Rx(b,w,h.value),damping:r,stiffness:s,restDelta:l,restSpeed:u}))};return D(0),{calculatedDuration:null,next:w=>{let S=!1;return!_&&x===void 0&&(S=!0,T(w),D(w)),x!==void 0&&w>=x?_.next(w-x):(!S&&T(w),h)}}}function mC(n,e,t){const i=[],r=t||Xn.mix||Ix,s=n.length-1;for(let a=0;a<s;a++){let o=r(n[a],n[a+1]);if(e){const c=Array.isArray(e)?e[a]||en:e;o=ha(c,o)}i.push(o)}return i}function Lx(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const s=n.length;if(Qh(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=mC(e,i,r),c=o.length,l=u=>{if(a&&u<n[0])return e[0];let d=0;if(c>1)for(;d<n.length-2&&!(u<n[d+1]);d++);const h=$s(n[d],n[d+1],u);return o[d](h)};return t?u=>l(zn(n[0],n[s-1],u)):l}function yC(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=$s(0,e,i);n.push(rt(t,1,r))}}function vC(n){const e=[0];return yC(e,n.length-1),e}function bC(n,e){return n.map(t=>t*e)}function xC(n,e){return n.map(()=>e||yx).splice(0,n.length-1)}function As({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=UI(i)?i.map(Vg):Vg(i),s={done:!1,value:e[0]},a=bC(t&&t.length===e.length?t:vC(e),n),o=Lx(a,e,{ease:Array.isArray(r)?r:xC(e,r)});return{calculatedDuration:n,next:c=>(s.value=o(c),s.done=c>=n,s)}}const TC=n=>n!==null;function cf(n,{repeat:e,repeatType:t="loop"},i,r=1){const s=n.filter(TC),o=r<0||e&&t!=="loop"&&e%2===1?0:s.length-1;return!o||i===void 0?s[o]:i}const _C={decay:Od,inertia:Od,tween:As,keyframes:As,spring:Zo};function Ux(n){typeof n.type=="string"&&(n.type=_C[n.type])}class lf{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const DC=n=>n/100;class uf extends lf{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==Nt.now()&&this.tick(Nt.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Ux(e);const{type:t=As,repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:a=0}=e;let{keyframes:o}=e;const c=t||As;c!==As&&typeof o[0]!="number"&&(this.mixKeyframes=ha(DC,Ix(o[0],o[1])),o=[0,100]);const l=c({...e,keyframes:o});s==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...o].reverse(),velocity:-a})),l.calculatedDuration===null&&(l.calculatedDuration=of(l));const{calculatedDuration:u}=l;this.calculatedDuration=u,this.resolvedDuration=u+r,this.totalDuration=this.resolvedDuration*(i+1)-r,this.generator=l}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:i,totalDuration:r,mixKeyframes:s,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:c}=this;if(this.startTime===null)return i.next(0);const{delay:l=0,keyframes:u,repeat:d,repeatType:h,repeatDelay:f,type:p,onUpdate:m,finalKeyframe:g}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const y=this.currentTime-l*(this.playbackSpeed>=0?1:-1),v=this.playbackSpeed>=0?y<0:y>r;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let b=this.currentTime,T=i;if(d){const w=Math.min(this.currentTime,r)/o;let S=Math.floor(w),C=w%1;!C&&w>=1&&(C=1),C===1&&S--,S=Math.min(S,d+1),S%2&&(h==="reverse"?(C=1-C,f&&(C-=f/o)):h==="mirror"&&(T=a)),b=zn(0,1,C)*o}const x=v?{done:!1,value:u[0]}:T.next(b);s&&(x.value=s(x.value));let{done:_}=x;!v&&c!==null&&(_=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&_);return D&&p!==Od&&(x.value=cf(u,this.options,g,this.speed)),m&&m(x.value),D&&this.finish(),x}then(e,t){return this.finished.then(e,t)}get duration(){return Qt(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Qt(e)}get time(){return Qt(this.currentTime)}set time(e){e=In(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Nt.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Qt(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=oC,startTime:t}=this.options;this.driver||(this.driver=e(r=>this.tick(r))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=t??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Nt.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function EC(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Zi=n=>n*180/Math.PI,Md=n=>{const e=Zi(Math.atan2(n[1],n[0]));return Bd(e)},SC={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:Md,rotateZ:Md,skewX:n=>Zi(Math.atan(n[1])),skewY:n=>Zi(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},Bd=n=>(n=n%360,n<0&&(n+=360),n),zg=Md,Xg=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),Yg=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),AC={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Xg,scaleY:Yg,scale:n=>(Xg(n)+Yg(n))/2,rotateX:n=>Bd(Zi(Math.atan2(n[6],n[5]))),rotateY:n=>Bd(Zi(Math.atan2(-n[2],n[0]))),rotateZ:zg,rotate:zg,skewX:n=>Zi(Math.atan(n[4])),skewY:n=>Zi(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function Nd(n){return n.includes("scale")?1:0}function $d(n,e){if(!n||n==="none")return Nd(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,r;if(t)i=AC,r=t;else{const o=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=SC,r=o}if(!r)return Nd(e);const s=i[e],a=r[1].split(",").map(IC);return typeof s=="function"?s(a):a[s]}const wC=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return $d(t,e)};function IC(n){return parseFloat(n.trim())}const ts=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ns=new Set(ts),Qg=n=>n===es||n===Ie,CC=new Set(["x","y","z"]),RC=ts.filter(n=>!CC.has(n));function LC(n){const e=[];return RC.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const er={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>$d(e,"x"),y:(n,{transform:e})=>$d(e,"y")};er.translateX=er.x;er.translateY=er.y;const tr=new Set;let Wd=!1,Vd=!1,Gd=!1;function kx(){if(Vd){const n=Array.from(tr).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const r=LC(i);r.length&&(t.set(i,r),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=t.get(i);r&&r.forEach(([s,a])=>{i.getValue(s)?.set(a)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Vd=!1,Wd=!1,tr.forEach(n=>n.complete(Gd)),tr.clear()}function Fx(){tr.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Vd=!0)})}function UC(){Gd=!0,Fx(),kx(),Gd=!1}class df{constructor(e,t,i,r,s,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=r,this.element=s,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(tr.add(this),Wd||(Wd=!0,et.read(Fx),et.resolveKeyframes(kx))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:r}=this;if(e[0]===null){const s=r?.get(),a=e[e.length-1];if(s!==void 0)e[0]=s;else if(i&&t){const o=i.readValue(t,a);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=a),r&&s===void 0&&r.set(e[0])}EC(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),tr.delete(this)}cancel(){this.state==="scheduled"&&(tr.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const kC=n=>n.startsWith("--");function FC(n,e,t){kC(e)?n.style.setProperty(e,t):n.style[e]=t}const PC=Zh(()=>window.ScrollTimeline!==void 0),OC={};function MC(n,e){const t=Zh(n);return()=>OC[e]??t()}const Px=MC(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ts=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,Zg={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ts([0,.65,.55,1]),circOut:Ts([.55,0,1,.45]),backIn:Ts([.31,.01,.66,-.59]),backOut:Ts([.33,1.53,.69,.99])};function Ox(n,e){if(n)return typeof n=="function"?Px()?Cx(n,e):"ease-out":vx(n)?Ts(n):Array.isArray(n)?n.map(t=>Ox(t,e)||Zg.easeOut):Zg[n]}function BC(n,e,t,{delay:i=0,duration:r=300,repeat:s=0,repeatType:a="loop",ease:o="easeOut",times:c}={},l=void 0){const u={[e]:t};c&&(u.offset=c);const d=Ox(o,r);Array.isArray(d)&&(u.easing=d);const h={delay:i,duration:r,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"};return l&&(h.pseudoElement=l),n.animate(u,h)}function Mx(n){return typeof n=="function"&&"applyToOptions"in n}function NC({type:n,...e}){return Mx(n)&&Px()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class $C extends lf{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:i,keyframes:r,pseudoElement:s,allowFlatten:a=!1,finalKeyframe:o,onComplete:c}=e;this.isPseudoElement=!!s,this.allowFlatten=a,this.options=e,Qh(typeof e.type!="string");const l=NC(e);this.animation=BC(t,i,r,l,s),l.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const u=cf(r,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(u):FC(t,i,u),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Qt(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Qt(e)}get time(){return Qt(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=In(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&PC()?(this.animation.timeline=e,en):t(this)}}const Bx={anticipate:px,backInOut:fx,circInOut:mx};function WC(n){return n in Bx}function VC(n){typeof n.ease=="string"&&WC(n.ease)&&(n.ease=Bx[n.ease])}const Jg=10;class GC extends $C{constructor(e){VC(e),Ux(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:i,onComplete:r,element:s,...a}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const o=new uf({...a,autoplay:!1}),c=In(this.finishedTime??this.time);t.setWithVelocity(o.sample(c-Jg).value,o.sample(c).value,Jg),o.stop()}}const em=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Si.test(n)||n==="0")&&!n.startsWith("url("));function HC(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function qC(n,e,t,i){const r=n[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],a=em(r,e),o=em(s,e);return!a||!o?!1:HC(n)||(t==="spring"||Mx(t))&&i}function Hd(n){n.duration=0,n.type="keyframes"}const jC=new Set(["opacity","clipPath","filter","transform"]),KC=Zh(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function zC(n){const{motionValue:e,name:t,repeatDelay:i,repeatType:r,damping:s,type:a}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:l}=e.owner.getProps();return KC()&&t&&jC.has(t)&&(t!=="transform"||!l)&&!c&&!i&&r!=="mirror"&&s!==0&&a!=="inertia"}const XC=40;class YC extends lf{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:a="loop",keyframes:o,name:c,motionValue:l,element:u,...d}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Nt.now();const h={autoplay:e,delay:t,type:i,repeat:r,repeatDelay:s,repeatType:a,name:c,motionValue:l,element:u,...d},f=u?.KeyframeResolver||df;this.keyframeResolver=new f(o,(p,m,g)=>this.onKeyframesResolved(p,m,h,!g),c,l,u),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,i,r){this.keyframeResolver=void 0;const{name:s,type:a,velocity:o,delay:c,isHandoff:l,onUpdate:u}=i;this.resolvedAt=Nt.now(),qC(e,s,a,o)||((Xn.instantAnimations||!c)&&u?.(cf(e,i,t)),e[0]=e[e.length-1],Hd(i),i.repeat=0);const h={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>XC?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...i,keyframes:e},f=!l&&zC(h)?new GC({...h,element:h.motionValue.owner.current}):new uf(h);f.finished.then(()=>this.notifyFinished()).catch(en),this.pendingTimeline&&(this.stopTimeline=f.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=f}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),UC()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const QC=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function ZC(n){const e=QC.exec(n);if(!e)return[,];const[,t,i,r]=e;return[`--${t??i}`,r]}function Nx(n,e,t=1){const[i,r]=ZC(n);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const a=s.trim();return sx(a)?parseFloat(a):a}return nf(r)?Nx(r,e,t+1):r}function hf(n,e){return n?.[e]??n?.default??n}const $x=new Set(["width","height","top","left","right","bottom",...ts]),JC={test:n=>n==="auto",parse:n=>n},Wx=n=>e=>e.test(n),Vx=[es,Ie,Cn,di,qI,HI,JC],tm=n=>Vx.find(Wx(n));function eR(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||ox(n):!0}const tR=new Set(["brightness","contrast","saturate","opacity"]);function nR(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(rf)||[];if(!i)return n;const r=t.replace(i,"");let s=tR.has(e)?1:0;return i!==t&&(s*=100),e+"("+s+r+")"}const iR=/\b([a-z-]*)\(.*?\)/gu,qd={...Si,getAnimatableNone:n=>{const e=n.match(iR);return e?e.map(nR).join(" "):n}},nm={...es,transform:Math.round},rR={rotate:di,rotateX:di,rotateY:di,rotateZ:di,scale:Ia,scaleX:Ia,scaleY:Ia,scaleZ:Ia,skew:di,skewX:di,skewY:di,distance:Ie,translateX:Ie,translateY:Ie,translateZ:Ie,x:Ie,y:Ie,z:Ie,perspective:Ie,transformPerspective:Ie,opacity:Ws,originX:Gg,originY:Gg,originZ:Ie},ff={borderWidth:Ie,borderTopWidth:Ie,borderRightWidth:Ie,borderBottomWidth:Ie,borderLeftWidth:Ie,borderRadius:Ie,radius:Ie,borderTopLeftRadius:Ie,borderTopRightRadius:Ie,borderBottomRightRadius:Ie,borderBottomLeftRadius:Ie,width:Ie,maxWidth:Ie,height:Ie,maxHeight:Ie,top:Ie,right:Ie,bottom:Ie,left:Ie,padding:Ie,paddingTop:Ie,paddingRight:Ie,paddingBottom:Ie,paddingLeft:Ie,margin:Ie,marginTop:Ie,marginRight:Ie,marginBottom:Ie,marginLeft:Ie,backgroundPositionX:Ie,backgroundPositionY:Ie,...rR,zIndex:nm,fillOpacity:Ws,strokeOpacity:Ws,numOctaves:nm},sR={...ff,color:dt,backgroundColor:dt,outlineColor:dt,fill:dt,stroke:dt,borderColor:dt,borderTopColor:dt,borderRightColor:dt,borderBottomColor:dt,borderLeftColor:dt,filter:qd,WebkitFilter:qd},Gx=n=>sR[n];function Hx(n,e){let t=Gx(n);return t!==qd&&(t=Si),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const aR=new Set(["auto","none","0"]);function oR(n,e,t){let i=0,r;for(;i<n.length&&!r;){const s=n[i];typeof s=="string"&&!aR.has(s)&&Vs(s).values.length&&(r=n[i]),i++}if(r&&t)for(const s of e)n[s]=Hx(t,r)}class cR extends df{constructor(e,t,i,r,s){super(e,t,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let l=e[c];if(typeof l=="string"&&(l=l.trim(),nf(l))){const u=Nx(l,t.current);u!==void 0&&(e[c]=u),c===e.length-1&&(this.finalKeyframe=l)}}if(this.resolveNoneKeyframes(),!$x.has(i)||e.length!==2)return;const[r,s]=e,a=tm(r),o=tm(s);if(a!==o)if(Qg(a)&&Qg(o))for(let c=0;c<e.length;c++){const l=e[c];typeof l=="string"&&(e[c]=parseFloat(l))}else er[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let r=0;r<e.length;r++)(e[r]===null||eR(e[r]))&&i.push(r);i.length&&oR(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=er[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const r=e.getValue(t);r&&r.jump(this.measuredOrigin,!1);const s=i.length-1,a=i[s];i[s]=er[t](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),this.removedTransforms?.length&&this.removedTransforms.forEach(([o,c])=>{e.getValue(o).set(c)}),this.resolveNoneKeyframes()}}function lR(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let i=document;const r=t?.[n]??i.querySelectorAll(n);return r?Array.from(r):[]}return Array.from(n)}const qx=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function jx(n){return ax(n)&&"offsetHeight"in n}const im=30,uR=n=>!isNaN(parseFloat(n)),ws={current:void 0};class dR{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const r=Nt.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Nt.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=uR(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Jh);const i=this.events[e].add(t);return e==="change"?()=>{i(),et.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return ws.current&&ws.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Nt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>im)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,im);return cx(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function or(n,e){return new dR(n,e)}const{schedule:pf}=bx(queueMicrotask,!1),hn={x:!1,y:!1};function Kx(){return hn.x||hn.y}function hR(n){return n==="x"||n==="y"?hn[n]?null:(hn[n]=!0,()=>{hn[n]=!1}):hn.x||hn.y?null:(hn.x=hn.y=!0,()=>{hn.x=hn.y=!1})}function zx(n,e){const t=lR(n),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[t,r,()=>i.abort()]}function rm(n){return!(n.pointerType==="touch"||Kx())}function fR(n,e,t={}){const[i,r,s]=zx(n,t),a=o=>{if(!rm(o))return;const{target:c}=o,l=e(c,o);if(typeof l!="function"||!c)return;const u=d=>{rm(d)&&(l(d),c.removeEventListener("pointerleave",u))};c.addEventListener("pointerleave",u,r)};return i.forEach(o=>{o.addEventListener("pointerenter",a,r)}),s}const Xx=(n,e)=>e?n===e?!0:Xx(n,e.parentElement):!1,gf=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,pR=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function gR(n){return pR.has(n.tagName)||n.tabIndex!==-1}const uo=new WeakSet;function sm(n){return e=>{e.key==="Enter"&&n(e)}}function Ll(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const mR=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=sm(()=>{if(uo.has(t))return;Ll(t,"down");const r=sm(()=>{Ll(t,"up")}),s=()=>Ll(t,"cancel");t.addEventListener("keyup",r,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function am(n){return gf(n)&&!Kx()}function yR(n,e,t={}){const[i,r,s]=zx(n,t),a=o=>{const c=o.currentTarget;if(!am(o))return;uo.add(c);const l=e(c,o),u=(f,p)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",h),uo.has(c)&&uo.delete(c),am(f)&&typeof l=="function"&&l(f,{success:p})},d=f=>{u(f,c===window||c===document||t.useGlobalTarget||Xx(c,f.target))},h=f=>{u(f,!1)};window.addEventListener("pointerup",d,r),window.addEventListener("pointercancel",h,r)};return i.forEach(o=>{(t.useGlobalTarget?window:o).addEventListener("pointerdown",a,r),jx(o)&&(o.addEventListener("focus",l=>mR(l,r)),!gR(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),s}function Yx(n){return ax(n)&&"ownerSVGElement"in n}function vR(n){return Yx(n)&&n.tagName==="svg"}function bR(...n){const e=!Array.isArray(n[0]),t=e?0:-1,i=n[0+t],r=n[1+t],s=n[2+t],a=n[3+t],o=Lx(r,s,a);return e?o(i):o}const wt=n=>!!(n&&n.getVelocity),xR=[...Vx,dt,Si],TR=n=>xR.find(Wx(n)),Rc=Tt({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function om(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function _R(...n){return e=>{let t=!1;const i=n.map(r=>{const s=om(r,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let r=0;r<i.length;r++){const s=i[r];typeof s=="function"?s():om(n[r],null)}}}}function DR(...n){return Ci(_R(...n),n)}class ER extends Zt{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const i=t.offsetParent,r=jx(i)&&i.offsetWidth||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=r-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function SR({children:n,isPresent:e,anchorX:t,root:i}){const r=Mh(),s=Jt(null),a=Jt({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=Ue(Rc),c=DR(s,n?.ref);return wb(()=>{const{width:l,height:u,top:d,left:h,right:f}=a.current;if(e||!s.current||!l||!u)return;const p=t==="left"?`left: ${h}`:`right: ${f}`;s.current.dataset.motionPopId=r;const m=document.createElement("style");o&&(m.nonce=o);const g=i??document.head;return g.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${u}px !important;
            ${p}px !important;
            top: ${d}px !important;
          }
        `),()=>{g.contains(m)&&g.removeChild(m)}},[e]),Ei(ER,{isPresent:e,childRef:s,sizeRef:a,children:DS(n,{ref:c})})}const AR=({children:n,initial:e,isPresent:t,onExitComplete:i,custom:r,presenceAffectsLayout:s,mode:a,anchorX:o,root:c})=>{const l=da(wR),u=Mh();let d=!0,h=Et(()=>(d=!1,{id:u,initial:e,isPresent:t,custom:r,onExitComplete:f=>{l.set(f,!0);for(const p of l.values())if(!p)return;i&&i()},register:f=>(l.set(f,!1),()=>l.delete(f))}),[t,l,i]);return s&&d&&(h={...h}),Et(()=>{l.forEach((f,p)=>l.set(p,!1))},[t]),Di(()=>{!t&&!l.size&&i&&i()},[t]),a==="popLayout"&&(n=Ei(SR,{isPresent:t,anchorX:o,root:c,children:n})),Ei(Cc.Provider,{value:h,children:n})};function wR(){return new Map}function Qx(n=!0){const e=Ue(Cc);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:r}=e,s=Mh();Di(()=>{if(n)return r(s)},[n]);const a=Ci(()=>n&&i&&i(s),[s,i,n]);return!t&&i?[!1,a]:[!0]}const Ca=n=>n.key||"";function cm(n){const e=[];return Ib.forEach(n,t=>{$h(t)&&e.push(t)}),e}const r4=({children:n,custom:e,initial:t=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:s="sync",propagate:a=!1,anchorX:o="left",root:c})=>{const[l,u]=Qx(a),d=Et(()=>cm(n),[n]),h=a&&!l?[]:d.map(Ca),f=Jt(!0),p=Jt(d),m=da(()=>new Map),[g,y]=ar(d),[v,b]=ar(d);zh(()=>{f.current=!1,p.current=d;for(let _=0;_<v.length;_++){const D=Ca(v[_]);h.includes(D)?m.delete(D):m.get(D)!==!0&&m.set(D,!1)}},[v,h.length,h.join("-")]);const T=[];if(d!==g){let _=[...d];for(let D=0;D<v.length;D++){const w=v[D],S=Ca(w);h.includes(S)||(_.splice(D,0,w),T.push(w))}return s==="wait"&&T.length&&(_=T),b(cm(_)),y(d),null}const{forceRender:x}=Ue(jh);return Ei(It,{children:v.map(_=>{const D=Ca(_),w=a&&!l?!1:d===v||h.includes(D),S=()=>{if(m.has(D))m.set(D,!0);else return;let C=!0;m.forEach(O=>{O||(C=!1)}),C&&(x?.(),b(p.current),a&&u?.(),i&&i())};return Ei(AR,{isPresent:w,initial:!f.current||t?void 0:!1,custom:e,presenceAffectsLayout:r,mode:s,root:c,onExitComplete:w?void 0:S,anchorX:o,children:_},D)})})},Zx=Tt({strict:!1}),lm={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Gr={};for(const n in lm)Gr[n]={isEnabled:e=>lm[n].some(t=>!!e[t])};function IR(n){for(const e in n)Gr[e]={...Gr[e],...n[e]}}const CR=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Jo(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||CR.has(n)}let Jx=n=>!Jo(n);function RR(n){typeof n=="function"&&(Jx=e=>e.startsWith("on")?!Jo(e):n(e))}try{RR(require("@emotion/is-prop-valid").default)}catch{}function LR(n,e,t){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(Jx(r)||t===!0&&Jo(r)||!e&&!Jo(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}const Lc=Tt({});function Uc(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Gs(n){return typeof n=="string"||Array.isArray(n)}const mf=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],yf=["initial",...mf];function kc(n){return Uc(n.animate)||yf.some(e=>Gs(n[e]))}function eT(n){return!!(kc(n)||n.variants)}function UR(n,e){if(kc(n)){const{initial:t,animate:i}=n;return{initial:t===!1||Gs(t)?t:void 0,animate:Gs(i)?i:void 0}}return n.inherit!==!1?e:{}}function kR(n){const{initial:e,animate:t}=UR(n,Ue(Lc));return Et(()=>({initial:e,animate:t}),[um(e),um(t)])}function um(n){return Array.isArray(n)?n.join(" "):n}function dm(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const ls={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Ie.test(n))n=parseFloat(n);else return n;const t=dm(n,e.target.x),i=dm(n,e.target.y);return`${t}% ${i}%`}},FR={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,r=Si.parse(n);if(r.length>5)return i;const s=Si.createTransformer(n),a=typeof r[0]!="number"?1:0,o=t.x.scale*e.x,c=t.y.scale*e.y;r[0+a]/=o,r[1+a]/=c;const l=rt(o,c,.5);return typeof r[2+a]=="number"&&(r[2+a]/=l),typeof r[3+a]=="number"&&(r[3+a]/=l),s(r)}},jd={borderRadius:{...ls,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ls,borderTopRightRadius:ls,borderBottomLeftRadius:ls,borderBottomRightRadius:ls,boxShadow:FR};function tT(n,{layout:e,layoutId:t}){return ns.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!jd[n]||n==="opacity")}const PR={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},OR=ts.length;function MR(n,e,t){let i="",r=!0;for(let s=0;s<OR;s++){const a=ts[s],o=n[a];if(o===void 0)continue;let c=!0;if(typeof o=="number"?c=o===(a.startsWith("scale")?1:0):c=parseFloat(o)===0,!c||t){const l=qx(o,ff[a]);if(!c){r=!1;const u=PR[a]||a;i+=`${u}(${l}) `}t&&(e[a]=l)}}return i=i.trim(),t?i=t(e,r?"":i):r&&(i="none"),i}function vf(n,e,t){const{style:i,vars:r,transformOrigin:s}=n;let a=!1,o=!1;for(const c in e){const l=e[c];if(ns.has(c)){a=!0;continue}else if(Tx(c)){r[c]=l;continue}else{const u=qx(l,ff[c]);c.startsWith("origin")?(o=!0,s[c]=u):i[c]=u}}if(e.transform||(a||t?i.transform=MR(e,n.transform,t):i.transform&&(i.transform="none")),o){const{originX:c="50%",originY:l="50%",originZ:u=0}=s;i.transformOrigin=`${c} ${l} ${u}`}}const bf=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function nT(n,e,t){for(const i in e)!wt(e[i])&&!tT(i,t)&&(n[i]=e[i])}function BR({transformTemplate:n},e){return Et(()=>{const t=bf();return vf(t,e,n),Object.assign({},t.vars,t.style)},[e])}function NR(n,e){const t=n.style||{},i={};return nT(i,t,n),Object.assign(i,BR(n,e)),i}function $R(n,e){const t={},i=NR(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}const WR={offset:"stroke-dashoffset",array:"stroke-dasharray"},VR={offset:"strokeDashoffset",array:"strokeDasharray"};function GR(n,e,t=1,i=0,r=!0){n.pathLength=1;const s=r?WR:VR;n[s.offset]=Ie.transform(-i);const a=Ie.transform(e),o=Ie.transform(t);n[s.array]=`${a} ${o}`}function iT(n,{attrX:e,attrY:t,attrScale:i,pathLength:r,pathSpacing:s=1,pathOffset:a=0,...o},c,l,u){if(vf(n,o,l),c){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:d,style:h}=n;d.transform&&(h.transform=d.transform,delete d.transform),(h.transform||d.transformOrigin)&&(h.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),h.transform&&(h.transformBox=u?.transformBox??"fill-box",delete d.transformBox),e!==void 0&&(d.x=e),t!==void 0&&(d.y=t),i!==void 0&&(d.scale=i),r!==void 0&&GR(d,r,s,a,!1)}const rT=()=>({...bf(),attrs:{}}),sT=n=>typeof n=="string"&&n.toLowerCase()==="svg";function HR(n,e,t,i){const r=Et(()=>{const s=rT();return iT(s,e,sT(i),n.transformTemplate,n.style),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};nT(s,n.style,n),r.style={...s,...r.style}}return r}const qR=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function xf(n){return typeof n!="string"||n.includes("-")?!1:!!(qR.indexOf(n)>-1||/[A-Z]/u.test(n))}function jR(n,e,t,{latestValues:i},r,s=!1){const o=(xf(n)?HR:$R)(e,i,r,n),c=LR(e,typeof n=="string",s),l=n!==It?{...c,...o,ref:t}:{},{children:u}=e,d=Et(()=>wt(u)?u.get():u,[u]);return Ne(n,{...l,children:d})}function hm(n){const e=[{},{}];return n?.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function Tf(n,e,t,i){if(typeof e=="function"){const[r,s]=hm(i);e=e(t!==void 0?t:n.custom,r,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[r,s]=hm(i);e=e(t!==void 0?t:n.custom,r,s)}return e}function ho(n){return wt(n)?n.get():n}function KR({scrapeMotionValuesFromProps:n,createRenderState:e},t,i,r){return{latestValues:zR(t,i,r,n),renderState:e()}}function zR(n,e,t,i){const r={},s=i(n,{});for(const h in s)r[h]=ho(s[h]);let{initial:a,animate:o}=n;const c=kc(n),l=eT(n);e&&l&&!c&&n.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let u=t?t.initial===!1:!1;u=u||a===!1;const d=u?o:a;if(d&&typeof d!="boolean"&&!Uc(d)){const h=Array.isArray(d)?d:[d];for(let f=0;f<h.length;f++){const p=Tf(n,h[f]);if(p){const{transitionEnd:m,transition:g,...y}=p;for(const v in y){let b=y[v];if(Array.isArray(b)){const T=u?b.length-1:0;b=b[T]}b!==null&&(r[v]=b)}for(const v in m)r[v]=m[v]}}}return r}const aT=n=>(e,t)=>{const i=Ue(Lc),r=Ue(Cc),s=()=>KR(n,e,i,r);return t?s():da(s)};function _f(n,e,t){const{style:i}=n,r={};for(const s in i)(wt(i[s])||e.style&&wt(e.style[s])||tT(s,n)||t?.getValue(s)?.liveStyle!==void 0)&&(r[s]=i[s]);return r}const XR=aT({scrapeMotionValuesFromProps:_f,createRenderState:bf});function oT(n,e,t){const i=_f(n,e,t);for(const r in n)if(wt(n[r])||wt(e[r])){const s=ts.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=n[r]}return i}const YR=aT({scrapeMotionValuesFromProps:oT,createRenderState:rT}),QR=Symbol.for("motionComponentSymbol");function Ir(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function ZR(n,e,t){return Ci(i=>{i&&n.onMount&&n.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):Ir(t)&&(t.current=i))},[e])}const Df=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),JR="framerAppearId",cT="data-"+Df(JR),lT=Tt({});function eL(n,e,t,i,r){const{visualElement:s}=Ue(Lc),a=Ue(Zx),o=Ue(Cc),c=Ue(Rc).reducedMotion,l=Jt(null);i=i||a.renderer,!l.current&&i&&(l.current=i(n,{visualState:e,parent:s,props:t,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:c}));const u=l.current,d=Ue(lT);u&&!u.projection&&r&&(u.type==="html"||u.type==="svg")&&tL(l.current,t,r,d);const h=Jt(!1);wb(()=>{u&&h.current&&u.update(t,o)});const f=t[cT],p=Jt(!!f&&!window.MotionHandoffIsComplete?.(f)&&window.MotionHasOptimisedAnimation?.(f));return zh(()=>{u&&(h.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),p.current&&u.animationState&&u.animationState.animateChanges())}),Di(()=>{u&&(!p.current&&u.animationState&&u.animationState.animateChanges(),p.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(f)}),p.current=!1),u.enteringChildren=void 0)}),u}function tL(n,e,t,i){const{layoutId:r,layout:s,drag:a,dragConstraints:o,layoutScroll:c,layoutRoot:l,layoutCrossfade:u}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:uT(n.parent)),n.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!a||o&&Ir(o),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,crossfade:u,layoutScroll:c,layoutRoot:l})}function uT(n){if(n)return n.options.allowProjection!==!1?n.projection:uT(n.parent)}function Ul(n,{forwardMotionProps:e=!1}={},t,i){t&&IR(t);const r=xf(n)?YR:XR;function s(o,c){let l;const u={...Ue(Rc),...o,layoutId:nL(o)},{isStatic:d}=u,h=kR(o),f=r(o,d);if(!d&&Kh){iL();const p=rL(u);l=p.MeasureLayout,h.visualElement=eL(n,f,u,i,p.ProjectionNode)}return Ei(Lc.Provider,{value:h,children:[l&&h.visualElement?Ei(l,{visualElement:h.visualElement,...u}):null,jR(n,o,ZR(f,h.visualElement,c),f,d,e)]})}s.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const a=Ac(s);return a[QR]=n,a}function nL({layoutId:n}){const e=Ue(jh).id;return e&&n!==void 0?e+"-"+n:n}function iL(n,e){Ue(Zx).strict}function rL(n){const{drag:e,layout:t}=Gr;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function sL(n,e){if(typeof Proxy>"u")return Ul;const t=new Map,i=(s,a)=>Ul(s,a,n,e),r=(s,a)=>i(s,a);return new Proxy(r,{get:(s,a)=>a==="create"?i:(t.has(a)||t.set(a,Ul(a,void 0,n,e)),t.get(a))})}function dT({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function aL({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function oL(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function kl(n){return n===void 0||n===1}function Kd({scale:n,scaleX:e,scaleY:t}){return!kl(n)||!kl(e)||!kl(t)}function Ki(n){return Kd(n)||hT(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function hT(n){return fm(n.x)||fm(n.y)}function fm(n){return n&&n!=="0%"}function ec(n,e,t){const i=n-t,r=e*i;return t+r}function pm(n,e,t,i,r){return r!==void 0&&(n=ec(n,r,i)),ec(n,t,i)+e}function zd(n,e=0,t=1,i,r){n.min=pm(n.min,e,t,i,r),n.max=pm(n.max,e,t,i,r)}function fT(n,{x:e,y:t}){zd(n.x,e.translate,e.scale,e.originPoint),zd(n.y,t.translate,t.scale,t.originPoint)}const gm=.999999999999,mm=1.0000000000001;function cL(n,e,t,i=!1){const r=t.length;if(!r)return;e.x=e.y=1;let s,a;for(let o=0;o<r;o++){s=t[o],a=s.projectionDelta;const{visualElement:c}=s.options;c&&c.props.style&&c.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Rr(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,fT(n,a)),i&&Ki(s.latestValues)&&Rr(n,s.latestValues))}e.x<mm&&e.x>gm&&(e.x=1),e.y<mm&&e.y>gm&&(e.y=1)}function Cr(n,e){n.min=n.min+e,n.max=n.max+e}function ym(n,e,t,i,r=.5){const s=rt(n.min,n.max,r);zd(n,e,t,s,i)}function Rr(n,e){ym(n.x,e.x,e.scaleX,e.scale,e.originX),ym(n.y,e.y,e.scaleY,e.scale,e.originY)}function pT(n,e){return dT(oL(n.getBoundingClientRect(),e))}function lL(n,e,t){const i=pT(n,t),{scroll:r}=e;return r&&(Cr(i.x,r.offset.x),Cr(i.y,r.offset.y)),i}const vm=()=>({translate:0,scale:1,origin:0,originPoint:0}),Lr=()=>({x:vm(),y:vm()}),bm=()=>({min:0,max:0}),ft=()=>({x:bm(),y:bm()}),Xd={current:null},gT={current:!1};function uL(){if(gT.current=!0,!!Kh)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Xd.current=n.matches;n.addEventListener("change",e),e()}else Xd.current=!1}const dL=new WeakMap;function hL(n,e,t){for(const i in e){const r=e[i],s=t[i];if(wt(r))n.addValue(i,r);else if(wt(s))n.addValue(i,or(r,{owner:n}));else if(s!==r)if(n.hasValue(i)){const a=n.getValue(i);a.liveStyle===!0?a.jump(r):a.hasAnimated||a.set(r)}else{const a=n.getStaticValue(i);n.addValue(i,or(a!==void 0?a:r,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const xm=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class fL{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=df,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=Nt.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,et.render(this.render,!1,!0))};const{latestValues:c,renderState:l}=a;this.latestValues=c,this.baseTarget={...c},this.initialValues=t.initial?{...c}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=kc(t),this.isVariantNode=eT(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(t,{},this);for(const h in d){const f=d[h];c[h]!==void 0&&wt(f)&&f.set(c[h])}}mount(e){this.current=e,dL.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),gT.current||uL(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Xd.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Yn(this.notifyUpdate),Yn(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=ns.has(e);i&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&et.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),s&&s(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Gr){const t=Gr[e];if(!t)continue;const{isEnabled:i,Feature:r}=t;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ft()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<xm.length;i++){const r=xm[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,a=e[s];a&&(this.propEventSubscriptions[r]=this.on(r,a))}this.prevMotionValues=hL(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=or(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(sx(i)||ox(i))?i=parseFloat(i):!TR(i)&&Si.test(t)&&(i=Hx(e,t)),this.setBaseTarget(e,wt(i)?i.get():i)),wt(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let i;if(typeof t=="string"||typeof t=="object"){const s=Tf(this.props,t,this.presenceContext?.custom);s&&(i=s[e])}if(t&&i!==void 0)return i;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!wt(r)?r:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Jh),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){pf.render(this.render)}}class mT extends fL{constructor(){super(...arguments),this.KeyframeResolver=cR}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;wt(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function yT(n,{style:e,vars:t},i,r){const s=n.style;let a;for(a in e)s[a]=e[a];r?.applyProjectionStyles(s,i);for(a in t)s.setProperty(a,t[a])}function pL(n){return window.getComputedStyle(n)}class gL extends mT{constructor(){super(...arguments),this.type="html",this.renderInstance=yT}readValueFromInstance(e,t){if(ns.has(t))return this.projection?.isProjecting?Nd(t):wC(e,t);{const i=pL(e),r=(Tx(t)?i.getPropertyValue(t):i[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return pT(e,t)}build(e,t,i){vf(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return _f(e,t,i)}}const vT=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function mL(n,e,t,i){yT(n,e,void 0,i);for(const r in e.attrs)n.setAttribute(vT.has(r)?r:Df(r),e.attrs[r])}class yL extends mT{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ft}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(ns.has(t)){const i=Gx(t);return i&&i.default||0}return t=vT.has(t)?t:Df(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return oT(e,t,i)}build(e,t,i){iT(e,t,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,t,i,r){mL(e,t,i,r)}mount(e){this.isSVGTag=sT(e.tagName),super.mount(e)}}const vL=(n,e)=>xf(n)?new yL(e):new gL(e,{allowProjection:n!==It});function kr(n,e,t){const i=n.getProps();return Tf(i,e,t!==void 0?t:i.custom,n)}const Yd=n=>Array.isArray(n);function bL(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,or(t))}function xL(n){return Yd(n)?n[n.length-1]||0:n}function TL(n,e){const t=kr(n,e);let{transitionEnd:i={},transition:r={},...s}=t||{};s={...s,...i};for(const a in s){const o=xL(s[a]);bL(n,a,o)}}function _L(n){return!!(wt(n)&&n.add)}function Qd(n,e){const t=n.getValue("willChange");if(_L(t))return t.add(e);if(!t&&Xn.WillChange){const i=new Xn.WillChange("auto");n.addValue("willChange",i),i.add(e)}}function bT(n){return n.props[cT]}const DL=n=>n!==null;function EL(n,{repeat:e,repeatType:t="loop"},i){const r=n.filter(DL),s=e&&t!=="loop"&&e%2===1?0:r.length-1;return r[s]}const SL={type:"spring",stiffness:500,damping:25,restSpeed:10},AL=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),wL={type:"keyframes",duration:.8},IL={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},CL=(n,{keyframes:e})=>e.length>2?wL:ns.has(n)?n.startsWith("scale")?AL(e[1]):SL:IL;function RL({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:a,repeatDelay:o,from:c,elapsed:l,...u}){return!!Object.keys(u).length}const Ef=(n,e,t,i={},r,s)=>a=>{const o=hf(i,n)||{},c=o.delay||i.delay||0;let{elapsed:l=0}=i;l=l-In(c);const u={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-l,onUpdate:h=>{e.set(h),o.onUpdate&&o.onUpdate(h)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:n,motionValue:e,element:s?void 0:r};RL(o)||Object.assign(u,CL(n,u)),u.duration&&(u.duration=In(u.duration)),u.repeatDelay&&(u.repeatDelay=In(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(Hd(u),u.delay===0&&(d=!0)),(Xn.instantAnimations||Xn.skipAnimations)&&(d=!0,Hd(u),u.delay=0),u.allowFlatten=!o.type&&!o.ease,d&&!s&&e.get()!==void 0){const h=EL(u.keyframes,o);if(h!==void 0){et.update(()=>{u.onUpdate(h),u.onComplete()});return}}return o.isSync?new uf(u):new YC(u)};function LL({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function xT(n,e,{delay:t=0,transitionOverride:i,type:r}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:a,...o}=e;i&&(s=i);const c=[],l=r&&n.animationState&&n.animationState.getState()[r];for(const u in o){const d=n.getValue(u,n.latestValues[u]??null),h=o[u];if(h===void 0||l&&LL(l,u))continue;const f={delay:t,...hf(s||{},u)},p=d.get();if(p!==void 0&&!d.isAnimating&&!Array.isArray(h)&&h===p&&!f.velocity)continue;let m=!1;if(window.MotionHandoffAnimation){const y=bT(n);if(y){const v=window.MotionHandoffAnimation(y,u,et);v!==null&&(f.startTime=v,m=!0)}}Qd(n,u),d.start(Ef(u,d,h,n.shouldReduceMotion&&$x.has(u)?{type:!1}:f,n,m));const g=d.animation;g&&c.push(g)}return a&&Promise.all(c).then(()=>{et.update(()=>{a&&TL(n,a)})}),c}function TT(n,e,t,i=0,r=1){const s=Array.from(n).sort((l,u)=>l.sortNodePosition(u)).indexOf(e),a=n.size,o=(a-1)*i;return typeof t=="function"?t(s,a):r===1?s*i:o-s*i}function Zd(n,e,t={}){const i=kr(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:r=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(r=t.transitionOverride);const s=i?()=>Promise.all(xT(n,i,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(c=0)=>{const{delayChildren:l=0,staggerChildren:u,staggerDirection:d}=r;return UL(n,e,c,l,u,d,t)}:()=>Promise.resolve(),{when:o}=r;if(o){const[c,l]=o==="beforeChildren"?[s,a]:[a,s];return c().then(()=>l())}else return Promise.all([s(),a(t.delay)])}function UL(n,e,t=0,i=0,r=0,s=1,a){const o=[];for(const c of n.variantChildren)c.notify("AnimationStart",e),o.push(Zd(c,e,{...a,delay:t+(typeof i=="function"?0:i)+TT(n.variantChildren,c,i,r,s)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(o)}function kL(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>Zd(n,s,t));i=Promise.all(r)}else if(typeof e=="string")i=Zd(n,e,t);else{const r=typeof e=="function"?kr(n,e,t.custom):e;i=Promise.all(xT(n,r,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}function _T(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}const FL=yf.length;function DT(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?DT(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<FL;t++){const i=yf[t],r=n.props[i];(Gs(r)||r===!1)&&(e[i]=r)}return e}const PL=[...mf].reverse(),OL=mf.length;function ML(n){return e=>Promise.all(e.map(({animation:t,options:i})=>kL(n,t,i)))}function BL(n){let e=ML(n),t=Tm(),i=!0;const r=c=>(l,u)=>{const d=kr(n,u,c==="exit"?n.presenceContext?.custom:void 0);if(d){const{transition:h,transitionEnd:f,...p}=d;l={...l,...p,...f}}return l};function s(c){e=c(n)}function a(c){const{props:l}=n,u=DT(n.parent)||{},d=[],h=new Set;let f={},p=1/0;for(let g=0;g<OL;g++){const y=PL[g],v=t[y],b=l[y]!==void 0?l[y]:u[y],T=Gs(b),x=y===c?v.isActive:null;x===!1&&(p=g);let _=b===u[y]&&b!==l[y]&&T;if(_&&i&&n.manuallyAnimateOnMount&&(_=!1),v.protectedKeys={...f},!v.isActive&&x===null||!b&&!v.prevProp||Uc(b)||typeof b=="boolean")continue;const D=NL(v.prevProp,b);let w=D||y===c&&v.isActive&&!_&&T||g>p&&T,S=!1;const C=Array.isArray(b)?b:[b];let O=C.reduce(r(y),{});x===!1&&(O={});const{prevResolvedValues:I={}}=v,L={...I,...O},E=F=>{w=!0,h.has(F)&&(S=!0,h.delete(F)),v.needsAnimating[F]=!0;const G=n.getValue(F);G&&(G.liveStyle=!1)};for(const F in L){const G=O[F],W=I[F];if(f.hasOwnProperty(F))continue;let Y=!1;Yd(G)&&Yd(W)?Y=!_T(G,W):Y=G!==W,Y?G!=null?E(F):h.add(F):G!==void 0&&h.has(F)?E(F):v.protectedKeys[F]=!0}v.prevProp=b,v.prevResolvedValues=O,v.isActive&&(f={...f,...O}),i&&n.blockInitialAnimation&&(w=!1);const $=_&&D;w&&(!$||S)&&d.push(...C.map(F=>{const G={type:y};if(typeof F=="string"&&i&&!$&&n.manuallyAnimateOnMount&&n.parent){const{parent:W}=n,Y=kr(W,F);if(W.enteringChildren&&Y){const{delayChildren:P}=Y.transition||{};G.delay=TT(W.enteringChildren,n,P)}}return{animation:F,options:G}}))}if(h.size){const g={};if(typeof l.initial!="boolean"){const y=kr(n,Array.isArray(l.initial)?l.initial[0]:l.initial);y&&y.transition&&(g.transition=y.transition)}h.forEach(y=>{const v=n.getBaseTarget(y),b=n.getValue(y);b&&(b.liveStyle=!0),g[y]=v??null}),d.push({animation:g})}let m=!!d.length;return i&&(l.initial===!1||l.initial===l.animate)&&!n.manuallyAnimateOnMount&&(m=!1),i=!1,m?e(d):Promise.resolve()}function o(c,l){if(t[c].isActive===l)return Promise.resolve();n.variantChildren?.forEach(d=>d.animationState?.setActive(c,l)),t[c].isActive=l;const u=a(c);for(const d in t)t[d].protectedKeys={};return u}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>t,reset:()=>{t=Tm()}}}function NL(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!_T(e,n):!1}function Wi(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Tm(){return{animate:Wi(!0),whileInView:Wi(),whileHover:Wi(),whileTap:Wi(),whileDrag:Wi(),whileFocus:Wi(),exit:Wi()}}class Ri{constructor(e){this.isMounted=!1,this.node=e}update(){}}class $L extends Ri{constructor(e){super(e),e.animationState||(e.animationState=BL(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Uc(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let WL=0;class VL extends Ri{constructor(){super(...arguments),this.id=WL++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const GL={animation:{Feature:$L},exit:{Feature:VL}};function Hs(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function ga(n){return{point:{x:n.pageX,y:n.pageY}}}const HL=n=>e=>gf(e)&&n(e,ga(e));function Is(n,e,t,i){return Hs(n,e,HL(t),i)}const ET=1e-4,qL=1-ET,jL=1+ET,ST=.01,KL=0-ST,zL=0+ST;function Lt(n){return n.max-n.min}function XL(n,e,t){return Math.abs(n-e)<=t}function _m(n,e,t,i=.5){n.origin=i,n.originPoint=rt(e.min,e.max,n.origin),n.scale=Lt(t)/Lt(e),n.translate=rt(t.min,t.max,n.origin)-n.originPoint,(n.scale>=qL&&n.scale<=jL||isNaN(n.scale))&&(n.scale=1),(n.translate>=KL&&n.translate<=zL||isNaN(n.translate))&&(n.translate=0)}function Cs(n,e,t,i){_m(n.x,e.x,t.x,i?i.originX:void 0),_m(n.y,e.y,t.y,i?i.originY:void 0)}function Dm(n,e,t){n.min=t.min+e.min,n.max=n.min+Lt(e)}function YL(n,e,t){Dm(n.x,e.x,t.x),Dm(n.y,e.y,t.y)}function Em(n,e,t){n.min=e.min-t.min,n.max=n.min+Lt(e)}function tc(n,e,t){Em(n.x,e.x,t.x),Em(n.y,e.y,t.y)}function Yt(n){return[n("x"),n("y")]}const AT=({current:n})=>n?n.ownerDocument.defaultView:null,Sm=(n,e)=>Math.abs(n-e);function QL(n,e){const t=Sm(n.x,e.x),i=Sm(n.y,e.y);return Math.sqrt(t**2+i**2)}class wT{constructor(e,t,{transformPagePoint:i,contextWindow:r=window,dragSnapToOrigin:s=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Pl(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=QL(h.offset,{x:0,y:0})>=this.distanceThreshold;if(!f&&!p)return;const{point:m}=h,{timestamp:g}=_t;this.history.push({...m,timestamp:g});const{onStart:y,onMove:v}=this.handlers;f||(y&&y(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Fl(f,this.transformPagePoint),et.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:p,onSessionEnd:m,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=Pl(h.type==="pointercancel"?this.lastMoveEventInfo:Fl(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(h,y),m&&m(h,y)},!gf(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=i,this.distanceThreshold=a,this.contextWindow=r||window;const o=ga(e),c=Fl(o,this.transformPagePoint),{point:l}=c,{timestamp:u}=_t;this.history=[{...l,timestamp:u}];const{onSessionStart:d}=t;d&&d(e,Pl(c,this.history)),this.removeListeners=ha(Is(this.contextWindow,"pointermove",this.handlePointerMove),Is(this.contextWindow,"pointerup",this.handlePointerUp),Is(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Yn(this.updatePoint)}}function Fl(n,e){return e?{point:e(n.point)}:n}function Am(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Pl({point:n},e){return{point:n,delta:Am(n,IT(e)),offset:Am(n,ZL(e)),velocity:JL(e,.1)}}function ZL(n){return n[0]}function IT(n){return n[n.length-1]}function JL(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const r=IT(n);for(;t>=0&&(i=n[t],!(r.timestamp-i.timestamp>In(e)));)t--;if(!i)return{x:0,y:0};const s=Qt(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const a={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function eU(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?rt(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?rt(t,n,i.max):Math.min(n,t)),n}function wm(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function tU(n,{top:e,left:t,bottom:i,right:r}){return{x:wm(n.x,t,r),y:wm(n.y,e,i)}}function Im(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function nU(n,e){return{x:Im(n.x,e.x),y:Im(n.y,e.y)}}function iU(n,e){let t=.5;const i=Lt(n),r=Lt(e);return r>i?t=$s(e.min,e.max-i,n.min):i>r&&(t=$s(n.min,n.max-r,e.min)),zn(0,1,t)}function rU(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Jd=.35;function sU(n=Jd){return n===!1?n=0:n===!0&&(n=Jd),{x:Cm(n,"left","right"),y:Cm(n,"top","bottom")}}function Cm(n,e,t){return{min:Rm(n,e),max:Rm(n,t)}}function Rm(n,e){return typeof n=="number"?n:n[e]||0}const aU=new WeakMap;class oU{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ft(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:i}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(ga(d).point)},a=(d,h)=>{const{drag:f,dragPropagation:p,onDragStart:m}=this.getProps();if(f&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=hR(f),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=h,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Yt(y=>{let v=this.getAxisMotionValue(y).get()||0;if(Cn.test(v)){const{projection:b}=this.visualElement;if(b&&b.layout){const T=b.layout.layoutBox[y];T&&(v=Lt(T)*(parseFloat(v)/100))}}this.originPoint[y]=v}),m&&et.postRender(()=>m(d,h)),Qd(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},o=(d,h)=>{this.latestPointerEvent=d,this.latestPanInfo=h;const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:m,onDrag:g}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:y}=h;if(p&&this.currentDirection===null){this.currentDirection=cU(y),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",h.point,y),this.updateAxis("y",h.point,y),this.visualElement.render(),g&&g(d,h)},c=(d,h)=>{this.latestPointerEvent=d,this.latestPanInfo=h,this.stop(d,h),this.latestPointerEvent=null,this.latestPanInfo=null},l=()=>Yt(d=>this.getAnimationState(d)==="paused"&&this.getAxisMotionValue(d).animation?.play()),{dragSnapToOrigin:u}=this.getProps();this.panSession=new wT(e,{onSessionStart:s,onStart:a,onMove:o,onSessionEnd:c,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:i,contextWindow:AT(this.visualElement)})}stop(e,t){const i=e||this.latestPointerEvent,r=t||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!r||!i)return;const{velocity:a}=r;this.startAnimation(a);const{onDragEnd:o}=this.getProps();o&&et.postRender(()=>o(i,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:r}=this.getProps();if(!i||!Ra(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=eU(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;e&&Ir(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=tU(i.layoutBox,e):this.constraints=!1,this.elastic=sU(t),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Yt(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=rU(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Ir(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=lL(i,r.root,this.visualElement.getTransformPagePoint());let a=nU(r.layout.layoutBox,s);if(t){const o=t(aL(a));this.hasMutatedConstraints=!!o,o&&(a=dT(o))}return a}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},l=Yt(u=>{if(!Ra(u,t,this.currentDirection))return;let d=c&&c[u]||{};a&&(d={min:0,max:0});const h=r?200:1e6,f=r?40:1e7,p={type:"inertia",velocity:i?e[u]:0,bounceStiffness:h,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(u,p)});return Promise.all(l).then(o)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return Qd(this.visualElement,e),i.start(Ef(e,i,0,t,this.visualElement,!1))}stopAnimation(){Yt(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Yt(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[t];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Yt(t=>{const{drag:i}=this.getProps();if(!Ra(t,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:a,max:o}=r.layout.layoutBox[t];s.set(e[t]-rt(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!Ir(t)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Yt(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const c=o.get();r[a]=iU({min:c,max:c},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Yt(a=>{if(!Ra(a,e,null))return;const o=this.getAxisMotionValue(a),{min:c,max:l}=this.constraints[a];o.set(rt(c,l,r[a]))})}addListeners(){if(!this.visualElement.current)return;aU.set(this.visualElement,this);const e=this.visualElement.current,t=Is(e,"pointerdown",c=>{const{drag:l,dragListener:u=!0}=this.getProps();l&&u&&this.start(c)}),i=()=>{const{dragConstraints:c}=this.getProps();Ir(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),et.read(i);const a=Hs(window,"resize",()=>this.scalePositionWithinConstraints()),o=r.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:l})=>{this.isDragging&&l&&(Yt(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=c[u].translate,d.set(d.get()+c[u].translate))}),this.visualElement.render())}));return()=>{a(),t(),s(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:a=Jd,dragMomentum:o=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function Ra(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function cU(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class lU extends Ri{constructor(e){super(e),this.removeGroupControls=en,this.removeListeners=en,this.controls=new oU(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||en}unmount(){this.removeGroupControls(),this.removeListeners()}}const Lm=n=>(e,t)=>{n&&et.postRender(()=>n(e,t))};class uU extends Ri{constructor(){super(...arguments),this.removePointerDownListener=en}onPointerDown(e){this.session=new wT(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:AT(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:Lm(e),onStart:Lm(t),onMove:i,onEnd:(s,a)=>{delete this.session,r&&et.postRender(()=>r(s,a))}}}mount(){this.removePointerDownListener=Is(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const fo={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let Ol=!1;class dU extends Zt{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;s&&(t.group&&t.group.add(s),i&&i.register&&r&&i.register(s),Ol&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),fo.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:r,isPresent:s}=this.props,{projection:a}=i;return a&&(a.isPresent=s,Ol=!0,r||e.layoutDependency!==t||t===void 0||e.isPresent!==s?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||et.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),pf.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;Ol=!0,r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function CT(n){const[e,t]=Qx(),i=Ue(jh);return Ei(dU,{...n,layoutGroup:i,switchLayoutGroup:Ue(lT),isPresent:e,safeToRemove:t})}function hU(n,e,t){const i=wt(n)?n:or(n);return i.start(Ef("",i,e,t)),i.animation}const fU=(n,e)=>n.depth-e.depth;class pU{constructor(){this.children=[],this.isDirty=!1}add(e){Xh(this.children,e),this.isDirty=!0}remove(e){Yh(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(fU),this.isDirty=!1,this.children.forEach(e)}}function gU(n,e){const t=Nt.now(),i=({timestamp:r})=>{const s=r-t;s>=e&&(Yn(i),n(s-e))};return et.setup(i,!0),()=>Yn(i)}const RT=["TopLeft","TopRight","BottomLeft","BottomRight"],mU=RT.length,Um=n=>typeof n=="string"?parseFloat(n):n,km=n=>typeof n=="number"||Ie.test(n);function yU(n,e,t,i,r,s){r?(n.opacity=rt(0,t.opacity??1,vU(i)),n.opacityExit=rt(e.opacity??1,0,bU(i))):s&&(n.opacity=rt(e.opacity??1,t.opacity??1,i));for(let a=0;a<mU;a++){const o=`border${RT[a]}Radius`;let c=Fm(e,o),l=Fm(t,o);if(c===void 0&&l===void 0)continue;c||(c=0),l||(l=0),c===0||l===0||km(c)===km(l)?(n[o]=Math.max(rt(Um(c),Um(l),i),0),(Cn.test(l)||Cn.test(c))&&(n[o]+="%")):n[o]=l}(e.rotate||t.rotate)&&(n.rotate=rt(e.rotate||0,t.rotate||0,i))}function Fm(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const vU=LT(0,.5,gx),bU=LT(.5,.95,en);function LT(n,e,t){return i=>i<n?0:i>e?1:t($s(n,e,i))}function Pm(n,e){n.min=e.min,n.max=e.max}function cn(n,e){Pm(n.x,e.x),Pm(n.y,e.y)}function Om(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function Mm(n,e,t,i,r){return n-=e,n=ec(n,1/t,i),r!==void 0&&(n=ec(n,1/r,i)),n}function xU(n,e=0,t=1,i=.5,r,s=n,a=n){if(Cn.test(e)&&(e=parseFloat(e),e=rt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=rt(s.min,s.max,i);n===s&&(o-=e),n.min=Mm(n.min,e,t,o,r),n.max=Mm(n.max,e,t,o,r)}function Bm(n,e,[t,i,r],s,a){xU(n,e[t],e[i],e[r],e.scale,s,a)}const TU=["x","scaleX","originX"],_U=["y","scaleY","originY"];function Nm(n,e,t,i){Bm(n.x,e,TU,t?t.x:void 0,i?i.x:void 0),Bm(n.y,e,_U,t?t.y:void 0,i?i.y:void 0)}function $m(n){return n.translate===0&&n.scale===1}function UT(n){return $m(n.x)&&$m(n.y)}function Wm(n,e){return n.min===e.min&&n.max===e.max}function DU(n,e){return Wm(n.x,e.x)&&Wm(n.y,e.y)}function Vm(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function kT(n,e){return Vm(n.x,e.x)&&Vm(n.y,e.y)}function Gm(n){return Lt(n.x)/Lt(n.y)}function Hm(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class EU{constructor(){this.members=[]}add(e){Xh(this.members,e),e.scheduleRender()}remove(e){if(Yh(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let i;for(let r=t;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function SU(n,e,t){let i="";const r=n.x.translate/e.x,s=n.y.translate/e.y,a=t?.z||0;if((r||s||a)&&(i=`translate3d(${r}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:l,rotate:u,rotateX:d,rotateY:h,skewX:f,skewY:p}=t;l&&(i=`perspective(${l}px) ${i}`),u&&(i+=`rotate(${u}deg) `),d&&(i+=`rotateX(${d}deg) `),h&&(i+=`rotateY(${h}deg) `),f&&(i+=`skewX(${f}deg) `),p&&(i+=`skewY(${p}deg) `)}const o=n.x.scale*e.x,c=n.y.scale*e.y;return(o!==1||c!==1)&&(i+=`scale(${o}, ${c})`),i||"none"}const Ml=["","X","Y","Z"],AU=1e3;let wU=0;function Bl(n,e,t,i){const{latestValues:r}=e;r[n]&&(t[n]=r[n],e.setStaticValue(n,0),i&&(i[n]=0))}function FT(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=bT(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:r,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",et,!(r||s))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&FT(i)}function PT({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(a={},o=e?.()){this.id=wU++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(RU),this.nodes.forEach(FU),this.nodes.forEach(PU),this.nodes.forEach(LU)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new pU)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new Jh),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const c=this.eventHandlers.get(a);c&&c.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=Yx(a)&&!vR(a),this.instance=a;const{layoutId:o,layout:c,visualElement:l}=this.options;if(l&&!l.current&&l.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||o)&&(this.isLayoutDirty=!0),n){let u,d=0;const h=()=>this.root.updateBlockedByResize=!1;et.read(()=>{d=window.innerWidth}),n(a,()=>{const f=window.innerWidth;f!==d&&(d=f,this.root.updateBlockedByResize=!0,u&&u(),u=gU(h,250),fo.hasAnimatedSinceResize&&(fo.hasAnimatedSinceResize=!1,this.nodes.forEach(Km)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&l&&(o||c)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:d,hasRelativeLayoutChanged:h,layout:f})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||l.getDefaultTransition()||$U,{onLayoutAnimationStart:m,onLayoutAnimationComplete:g}=l.getProps(),y=!this.targetLayout||!kT(this.targetLayout,f),v=!d&&h;if(this.options.layoutRoot||this.resumeFrom||v||d&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const b={...hf(p,"layout"),onPlay:m,onComplete:g};(l.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b),this.setAnimationOrigin(u,v)}else d||Km(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=f})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Yn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(OU),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&FT(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const l=this.getTransformTemplate();this.prevTransformTemplateValue=l?l(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(qm);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(jm);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(kU),this.nodes.forEach(IU),this.nodes.forEach(CU)):this.nodes.forEach(jm),this.clearAllSnapshots();const o=Nt.now();_t.delta=zn(0,1e3/60,o-_t.timestamp),_t.timestamp=o,_t.isProcessing=!0,Al.update.process(_t),Al.preRender.process(_t),Al.render.process(_t),_t.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,pf.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(UU),this.sharedNodes.forEach(MU)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,et.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){et.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Lt(this.snapshot.measuredBox.x)&&!Lt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=ft(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o&&this.instance){const c=i(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!UT(this.projectionDelta),c=this.getTransformTemplate(),l=c?c(this.latestValues,""):void 0,u=l!==this.prevTransformTemplateValue;a&&this.instance&&(o||Ki(this.latestValues)||u)&&(r(this.instance,l),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return a&&(c=this.removeTransform(c)),WU(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return ft();const o=a.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(VU))){const{scroll:l}=this.root;l&&(Cr(o.x,l.offset.x),Cr(o.y,l.offset.y))}return o}removeElementScroll(a){const o=ft();if(cn(o,a),this.scroll?.wasRoot)return o;for(let c=0;c<this.path.length;c++){const l=this.path[c],{scroll:u,options:d}=l;l!==this.root&&u&&d.layoutScroll&&(u.wasRoot&&cn(o,a),Cr(o.x,u.offset.x),Cr(o.y,u.offset.y))}return o}applyTransform(a,o=!1){const c=ft();cn(c,a);for(let l=0;l<this.path.length;l++){const u=this.path[l];!o&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Rr(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Ki(u.latestValues)&&Rr(c,u.latestValues)}return Ki(this.latestValues)&&Rr(c,this.latestValues),c}removeTransform(a){const o=ft();cn(o,a);for(let c=0;c<this.path.length;c++){const l=this.path[c];if(!l.instance||!Ki(l.latestValues))continue;Kd(l.latestValues)&&l.updateSnapshot();const u=ft(),d=l.measurePageBox();cn(u,d),Nm(o,l.latestValues,l.snapshot?l.snapshot.layoutBox:void 0,u)}return Ki(this.latestValues)&&Nm(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==_t.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==o;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:d}=this.options;if(!this.layout||!(u||d))return;this.resolvedRelativeTargetAt=_t.timestamp;const h=this.getClosestProjectingParent();h&&this.linkedParentVersion!==h.layoutVersion&&!h.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(h&&h.layout?this.createRelativeTarget(h,this.layout.layoutBox,h.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ft(),this.targetWithTransforms=ft()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),YL(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):cn(this.target,this.layout.layoutBox),fT(this.target,this.targetDelta)):cn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?this.createRelativeTarget(h,this.target,h.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Kd(this.parent.latestValues)||hT(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(a,o,c){this.relativeParent=a,this.linkedParentVersion=a.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ft(),this.relativeTargetOrigin=ft(),tc(this.relativeTargetOrigin,o,c),cn(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const a=this.getLead(),o=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===_t.timestamp&&(c=!1),c)return;const{layout:l,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(l||u))return;cn(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,h=this.treeScale.y;cL(this.layoutCorrected,this.treeScale,this.path,o),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=ft());const{target:f}=a;if(!f){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Om(this.prevProjectionDelta.x,this.projectionDelta.x),Om(this.prevProjectionDelta.y,this.projectionDelta.y)),Cs(this.projectionDelta,this.layoutCorrected,f,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==h||!Hm(this.projectionDelta.x,this.prevProjectionDelta.x)||!Hm(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",f))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.visualElement?.scheduleRender(),a){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Lr(),this.projectionDelta=Lr(),this.projectionDeltaWithTransform=Lr()}setAnimationOrigin(a,o=!1){const c=this.snapshot,l=c?c.latestValues:{},u={...this.latestValues},d=Lr();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=ft(),f=c?c.source:void 0,p=this.layout?this.layout.source:void 0,m=f!==p,g=this.getStack(),y=!g||g.members.length<=1,v=!!(m&&!y&&this.options.crossfade===!0&&!this.path.some(NU));this.animationProgress=0;let b;this.mixTargetDelta=T=>{const x=T/1e3;zm(d.x,a.x,x),zm(d.y,a.y,x),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(tc(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),BU(this.relativeTarget,this.relativeTargetOrigin,h,x),b&&DU(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=ft()),cn(b,this.relativeTarget)),m&&(this.animationValues=u,yU(u,l,this.latestValues,x,v,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=x},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Yn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=et.update(()=>{fo.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=or(0)),this.currentAnimation=hU(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(AU),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:c,layout:l,latestValues:u}=a;if(!(!o||!c||!l)){if(this!==a&&this.layout&&l&&OT(this.options.animationType,this.layout.layoutBox,l.layoutBox)){c=this.target||ft();const d=Lt(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+d;const h=Lt(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+h}cn(o,c),Rr(o,u),Cs(this.projectionDeltaWithTransform,this.layoutCorrected,o,u)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new EU),this.sharedNodes.get(a).add(o);const l=o.options.initialPromotionConfig;o.promote({transition:l?l.transition:void 0,preserveFollowOpacity:l&&l.shouldPreserveFollowOpacity?l.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){const{layoutId:a}=this.options;return a?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:a}=this.options;return a?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:c}={}){const l=this.getStack();l&&l.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(o=!0),!o)return;const l={};c.z&&Bl("z",a,l,this.animationValues);for(let u=0;u<Ml.length;u++)Bl(`rotate${Ml[u]}`,a,l,this.animationValues),Bl(`skew${Ml[u]}`,a,l,this.animationValues);a.render();for(const u in l)a.setStaticValue(u,l[u]),this.animationValues&&(this.animationValues[u]=l[u]);a.scheduleRender()}applyProjectionStyles(a,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=ho(o?.pointerEvents)||"",a.transform=c?c(this.latestValues,""):"none";return}const l=this.getLead();if(!this.projectionDelta||!this.layout||!l.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=ho(o?.pointerEvents)||""),this.hasProjected&&!Ki(this.latestValues)&&(a.transform=c?c({},""):"none",this.hasProjected=!1);return}a.visibility="";const u=l.animationValues||l.latestValues;this.applyTransformsToTarget();let d=SU(this.projectionDeltaWithTransform,this.treeScale,u);c&&(d=c(u,d)),a.transform=d;const{x:h,y:f}=this.projectionDelta;a.transformOrigin=`${h.origin*100}% ${f.origin*100}% 0`,l.animationValues?a.opacity=l===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:a.opacity=l===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const p in jd){if(u[p]===void 0)continue;const{correct:m,applyTo:g,isCSSVariable:y}=jd[p],v=d==="none"?u[p]:m(u[p],l);if(g){const b=g.length;for(let T=0;T<b;T++)a[g[T]]=v}else y?this.options.visualElement.renderState.vars[p]=v:a[p]=v}this.options.layoutId&&(a.pointerEvents=l===this?ho(o?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>a.currentAnimation?.stop()),this.root.nodes.forEach(qm),this.root.sharedNodes.clear()}}}function IU(n){n.updateLayout()}function CU(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:i}=n.layout,{animationType:r}=n.options,s=e.source!==n.layout.source;r==="size"?Yt(u=>{const d=s?e.measuredBox[u]:e.layoutBox[u],h=Lt(d);d.min=t[u].min,d.max=d.min+h}):OT(r,e.layoutBox,t)&&Yt(u=>{const d=s?e.measuredBox[u]:e.layoutBox[u],h=Lt(t[u]);d.max=d.min+h,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[u].max=n.relativeTarget[u].min+h)});const a=Lr();Cs(a,t,e.layoutBox);const o=Lr();s?Cs(o,n.applyTransform(i,!0),e.measuredBox):Cs(o,t,e.layoutBox);const c=!UT(a);let l=!1;if(!n.resumeFrom){const u=n.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:d,layout:h}=u;if(d&&h){const f=ft();tc(f,e.layoutBox,d.layoutBox);const p=ft();tc(p,t,h.layoutBox),kT(f,p)||(l=!0),u.options.layoutRoot&&(n.relativeTarget=p,n.relativeTargetOrigin=f,n.relativeParent=u)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:o,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:l})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function RU(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function LU(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function UU(n){n.clearSnapshot()}function qm(n){n.clearMeasurements()}function jm(n){n.isLayoutDirty=!1}function kU(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function Km(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function FU(n){n.resolveTargetDelta()}function PU(n){n.calcProjection()}function OU(n){n.resetSkewAndRotation()}function MU(n){n.removeLeadSnapshot()}function zm(n,e,t){n.translate=rt(e.translate,0,t),n.scale=rt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function Xm(n,e,t,i){n.min=rt(e.min,t.min,i),n.max=rt(e.max,t.max,i)}function BU(n,e,t,i){Xm(n.x,e.x,t.x,i),Xm(n.y,e.y,t.y,i)}function NU(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const $U={duration:.45,ease:[.4,0,.1,1]},Ym=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),Qm=Ym("applewebkit/")&&!Ym("chrome/")?Math.round:en;function Zm(n){n.min=Qm(n.min),n.max=Qm(n.max)}function WU(n){Zm(n.x),Zm(n.y)}function OT(n,e,t){return n==="position"||n==="preserve-aspect"&&!XL(Gm(e),Gm(t),.2)}function VU(n){return n!==n.root&&n.scroll?.wasRoot}const GU=PT({attachResizeListener:(n,e)=>Hs(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Nl={current:void 0},MT=PT({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Nl.current){const n=new GU({});n.mount(window),n.setOptions({layoutScroll:!0}),Nl.current=n}return Nl.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),HU={pan:{Feature:uU},drag:{Feature:lU,ProjectionNode:MT,MeasureLayout:CT}};function Jm(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const r="onHover"+t,s=i[r];s&&et.postRender(()=>s(e,ga(e)))}class qU extends Ri{mount(){const{current:e}=this.node;e&&(this.unmount=fR(e,(t,i)=>(Jm(this.node,i,"Start"),r=>Jm(this.node,r,"End"))))}unmount(){}}class jU extends Ri{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ha(Hs(this.node.current,"focus",()=>this.onFocus()),Hs(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function e0(n,e,t){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const r="onTap"+(t==="End"?"":t),s=i[r];s&&et.postRender(()=>s(e,ga(e)))}class KU extends Ri{mount(){const{current:e}=this.node;e&&(this.unmount=yR(e,(t,i)=>(e0(this.node,i,"Start"),(r,{success:s})=>e0(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const eh=new WeakMap,$l=new WeakMap,zU=n=>{const e=eh.get(n.target);e&&e(n)},XU=n=>{n.forEach(zU)};function YU({root:n,...e}){const t=n||document;$l.has(t)||$l.set(t,{});const i=$l.get(t),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(XU,{root:n,...e})),i[r]}function QU(n,e,t){const i=YU(e);return eh.set(n,t),i.observe(n),()=>{eh.delete(n),i.unobserve(n)}}const ZU={some:0,all:1};class JU extends Ri{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:r="some",once:s}=e,a={root:t?t.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:ZU[r]},o=c=>{const{isIntersecting:l}=c;if(this.isInView===l||(this.isInView=l,s&&!l&&this.hasEnteredView))return;l&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",l);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),h=l?u:d;h&&h(c)};return QU(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(ek(e,t))&&this.startObserver()}unmount(){}}function ek({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const tk={inView:{Feature:JU},tap:{Feature:KU},focus:{Feature:jU},hover:{Feature:qU}},nk={layout:{ProjectionNode:MT,MeasureLayout:CT}},ik={...GL,...tk,...HU,...nk},a4=sL(ik,vL);function rk(n){const e=da(()=>or(n)),{isStatic:t}=Ue(Rc);if(t){const[,i]=ar(n);Di(()=>e.on("change",i),[])}return e}function BT(n,e){const t=rk(e()),i=()=>t.set(e());return i(),zh(()=>{const r=()=>et.preRender(i,!1,!0),s=n.map(a=>a.on("change",r));return()=>{s.forEach(a=>a()),Yn(i)}}),t}function sk(n){ws.current=[],n();const e=BT(ws.current,n);return ws.current=void 0,e}function o4(n,e,t,i){if(typeof n=="function")return sk(n);const r=typeof e=="function"?e:bR(e,t,i);return Array.isArray(n)?t0(n,r):t0([n],([s])=>r(s))}function t0(n,e){const t=da(()=>[]);return BT(n,()=>{t.length=0;const i=n.length;for(let r=0;r<i;r++)t[r]=n[r].get();return e(t)})}const ak=()=>{};var n0={};const NT=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},ok=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=n[t++],a=n[t++],o=n[t++],c=((r&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{const s=n[t++],a=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return e.join("")},$T={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const s=n[r],a=r+1<n.length,o=a?n[r+1]:0,c=r+2<n.length,l=c?n[r+2]:0,u=s>>2,d=(s&3)<<4|o>>4;let h=(o&15)<<2|l>>6,f=l&63;c||(f=64,a||(h=64)),i.push(t[u],t[d],t[h],t[f])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(NT(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):ok(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const s=t[n.charAt(r++)],o=r<n.length?t[n.charAt(r)]:0;++r;const l=r<n.length?t[n.charAt(r)]:64;++r;const d=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||o==null||l==null||d==null)throw new ck;const h=s<<2|o>>4;if(i.push(h),l!==64){const f=o<<4&240|l>>2;if(i.push(f),d!==64){const p=l<<6&192|d;i.push(p)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class ck extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lk=function(n){const e=NT(n);return $T.encodeByteArray(e,!0)},WT=function(n){return lk(n).replace(/\./g,"")},VT=function(n){try{return $T.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function uk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const dk=()=>uk().__FIREBASE_DEFAULTS__,hk=()=>{if(typeof process>"u"||typeof n0>"u")return;const n=n0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},fk=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&VT(n[1]);return e&&JSON.parse(e)},Sf=()=>{try{return ak()||dk()||hk()||fk()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},pk=n=>Sf()?.emulatorHosts?.[n],GT=()=>Sf()?.config,HT=n=>Sf()?.[`_${n}`];class gk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function Fc(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function mk(n){return(await fetch(n,{credentials:"include"})).ok}const Rs={};function yk(){const n={prod:[],emulator:[]};for(const e of Object.keys(Rs))Rs[e]?n.emulator.push(e):n.prod.push(e);return n}function vk(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let i0=!1;function bk(n,e){if(typeof window>"u"||typeof document>"u"||!Fc(window.location.host)||Rs[n]===e||Rs[n]||i0)return;Rs[n]=e;function t(h){return`__firebase__banner__${h}`}const i="__firebase__banner",s=yk().prod.length>0;function a(){const h=document.getElementById(i);h&&h.remove()}function o(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function c(h,f){h.setAttribute("width","24"),h.setAttribute("id",f),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function l(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{i0=!0,a()},h}function u(h,f){h.setAttribute("id",f),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function d(){const h=vk(i),f=t("text"),p=document.getElementById(f)||document.createElement("span"),m=t("learnmore"),g=document.getElementById(m)||document.createElement("a"),y=t("preprendIcon"),v=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const b=h.element;o(b),u(g,m);const T=l();c(v,y),b.append(v,p,g,T),document.body.appendChild(b)}s?(p.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,p.innerText="Preview backend running in this workspace."),p.setAttribute("id",f)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function kt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kt())}function Tk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function _k(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Dk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ek(){const n=kt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Sk(){try{return typeof indexedDB=="object"}catch{return!1}}function Ak(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(t){e(t)}})}const wk="FirebaseError";class Li extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=wk,Object.setPrototypeOf(this,Li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ma.prototype.create)}}class ma{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],a=s?Ik(s,i):"Error",o=`${this.serviceName}: ${a} (${r}).`;return new Li(r,o,i)}}function Ik(n,e){return n.replace(Ck,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const Ck=/\{\$([^}]+)}/g;function Rk(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Hr(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const s=n[r],a=e[r];if(r0(s)&&r0(a)){if(!Hr(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function r0(n){return n!==null&&typeof n=="object"}function ya(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Lk(n,e){const t=new Uk(n,e);return t.subscribe.bind(t)}class Uk{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");kk(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=Wl),r.error===void 0&&(r.error=Wl),r.complete===void 0&&(r.complete=Wl);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kk(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Wl(){}function hr(n){return n&&n._delegate?n._delegate:n}class qr{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const zi="[DEFAULT]";class Fk{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new gk;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ok(e))try{this.getOrInitializeService({instanceIdentifier:zi})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=zi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zi){return this.instances.has(e)}getOptions(e=zi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);i===o&&a.resolve(r)}return r}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Pk(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=zi){return this.component?this.component.multipleInstances?e:zi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Pk(n){return n===zi?void 0:n}function Ok(n){return n.instantiationMode==="EAGER"}class Mk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Fk(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var ze;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ze||(ze={}));const Bk={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},Nk=ze.INFO,$k={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},Wk=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=$k[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let qT=class{constructor(e){this.name=e,this._logLevel=Nk,this._logHandler=Wk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Bk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}};const Vk=(n,e)=>e.some(t=>n instanceof t);let s0,a0;function Gk(){return s0||(s0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Hk(){return a0||(a0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jT=new WeakMap,th=new WeakMap,KT=new WeakMap,Vl=new WeakMap,Af=new WeakMap;function qk(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(xi(n.result)),r()},a=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&jT.set(t,n)}).catch(()=>{}),Af.set(e,n),e}function jk(n){if(th.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),r()},a=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});th.set(n,e)}let nh={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return th.get(n);if(e==="objectStoreNames")return n.objectStoreNames||KT.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return xi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Kk(n){nh=n(nh)}function zk(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Gl(this),e,...t);return KT.set(i,e.sort?e.sort():[e]),xi(i)}:Hk().includes(n)?function(...e){return n.apply(Gl(this),e),xi(jT.get(this))}:function(...e){return xi(n.apply(Gl(this),e))}}function Xk(n){return typeof n=="function"?zk(n):(n instanceof IDBTransaction&&jk(n),Vk(n,Gk())?new Proxy(n,nh):n)}function xi(n){if(n instanceof IDBRequest)return qk(n);if(Vl.has(n))return Vl.get(n);const e=Xk(n);return e!==n&&(Vl.set(n,e),Af.set(e,n)),e}const Gl=n=>Af.get(n);function Yk(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(n,e),o=xi(a);return i&&a.addEventListener("upgradeneeded",c=>{i(xi(a.result),c.oldVersion,c.newVersion,xi(a.transaction),c)}),t&&a.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),o.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",l=>r(l.oldVersion,l.newVersion,l))}).catch(()=>{}),o}const Qk=["get","getKey","getAll","getAllKeys","count"],Zk=["put","add","delete","clear"],Hl=new Map;function o0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Hl.get(e))return Hl.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=Zk.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||Qk.includes(t)))return;const s=async function(a,...o){const c=this.transaction(a,r?"readwrite":"readonly");let l=c.store;return i&&(l=l.index(o.shift())),(await Promise.all([l[t](...o),r&&c.done]))[0]};return Hl.set(e,s),s}Kk(n=>({...n,get:(e,t,i)=>o0(e,t)||n.get(e,t,i),has:(e,t)=>!!o0(e,t)||n.has(e,t)}));class Jk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(eF(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function eF(n){return n.getComponent()?.type==="VERSION"}const ih="@firebase/app",c0="0.14.6";const Qn=new qT("@firebase/app"),tF="@firebase/app-compat",nF="@firebase/analytics-compat",iF="@firebase/analytics",rF="@firebase/app-check-compat",sF="@firebase/app-check",aF="@firebase/auth",oF="@firebase/auth-compat",cF="@firebase/database",lF="@firebase/data-connect",uF="@firebase/database-compat",dF="@firebase/functions",hF="@firebase/functions-compat",fF="@firebase/installations",pF="@firebase/installations-compat",gF="@firebase/messaging",mF="@firebase/messaging-compat",yF="@firebase/performance",vF="@firebase/performance-compat",bF="@firebase/remote-config",xF="@firebase/remote-config-compat",TF="@firebase/storage",_F="@firebase/storage-compat",DF="@firebase/firestore",EF="@firebase/ai",SF="@firebase/firestore-compat",AF="firebase",wF="12.6.0";const rh="[DEFAULT]",IF={[ih]:"fire-core",[tF]:"fire-core-compat",[iF]:"fire-analytics",[nF]:"fire-analytics-compat",[sF]:"fire-app-check",[rF]:"fire-app-check-compat",[aF]:"fire-auth",[oF]:"fire-auth-compat",[cF]:"fire-rtdb",[lF]:"fire-data-connect",[uF]:"fire-rtdb-compat",[dF]:"fire-fn",[hF]:"fire-fn-compat",[fF]:"fire-iid",[pF]:"fire-iid-compat",[gF]:"fire-fcm",[mF]:"fire-fcm-compat",[yF]:"fire-perf",[vF]:"fire-perf-compat",[bF]:"fire-rc",[xF]:"fire-rc-compat",[TF]:"fire-gcs",[_F]:"fire-gcs-compat",[DF]:"fire-fst",[SF]:"fire-fst-compat",[EF]:"fire-vertex","fire-js":"fire-js",[AF]:"fire-js-all"};const nc=new Map,CF=new Map,sh=new Map;function l0(n,e){try{n.container.addComponent(e)}catch(t){Qn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function qs(n){const e=n.name;if(sh.has(e))return Qn.debug(`There were multiple attempts to register component ${e}.`),!1;sh.set(e,n);for(const t of nc.values())l0(t,n);for(const t of CF.values())l0(t,n);return!0}function zT(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Sn(n){return n==null?!1:n.settings!==void 0}const RF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ti=new ma("app","Firebase",RF);class LF{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new qr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ti.create("app-deleted",{appName:this._name})}}const va=wF;function UF(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:rh,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw Ti.create("bad-app-name",{appName:String(r)});if(t||(t=GT()),!t)throw Ti.create("no-options");const s=nc.get(r);if(s){if(Hr(t,s.options)&&Hr(i,s.config))return s;throw Ti.create("duplicate-app",{appName:r})}const a=new Mk(r);for(const c of sh.values())a.addComponent(c);const o=new LF(t,i,a);return nc.set(r,o),o}function kF(n=rh){const e=nc.get(n);if(!e&&n===rh&&GT())return UF();if(!e)throw Ti.create("no-app",{appName:n});return e}function Ls(n,e,t){let i=IF[n]??n;t&&(i+=`-${t}`);const r=i.match(/\s|\//),s=e.match(/\s|\//);if(r||s){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qn.warn(a.join(" "));return}qs(new qr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const FF="firebase-heartbeat-database",PF=1,js="firebase-heartbeat-store";let ql=null;function XT(){return ql||(ql=Yk(FF,PF,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(js)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ti.create("idb-open",{originalErrorMessage:n.message})})),ql}async function OF(n){try{const t=(await XT()).transaction(js),i=await t.objectStore(js).get(YT(n));return await t.done,i}catch(e){if(e instanceof Li)Qn.warn(e.message);else{const t=Ti.create("idb-get",{originalErrorMessage:e?.message});Qn.warn(t.message)}}}async function u0(n,e){try{const i=(await XT()).transaction(js,"readwrite");await i.objectStore(js).put(e,YT(n)),await i.done}catch(t){if(t instanceof Li)Qn.warn(t.message);else{const i=Ti.create("idb-set",{originalErrorMessage:t?.message});Qn.warn(i.message)}}}function YT(n){return`${n.name}!${n.options.appId}`}const MF=1024,BF=30;class NF{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new WF(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=d0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>BF){const r=VF(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Qn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=d0(),{heartbeatsToSend:t,unsentEntries:i}=$F(this._heartbeatsCache.heartbeats),r=WT(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return Qn.warn(e),""}}}function d0(){return new Date().toISOString().substring(0,10)}function $F(n,e=MF){const t=[];let i=n.slice();for(const r of n){const s=t.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),h0(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),h0(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class WF{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Sk()?Ak().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await OF(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return u0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return u0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function h0(n){return WT(JSON.stringify({version:2,heartbeats:n})).length}function VF(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}function GF(n){qs(new qr("platform-logger",e=>new Jk(e),"PRIVATE")),qs(new qr("heartbeat",e=>new NF(e),"PRIVATE")),Ls(ih,c0,n),Ls(ih,c0,"esm2020"),Ls("fire-js","")}GF("");function QT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const HF=QT,ZT=new ma("auth","Firebase",QT());const ic=new qT("@firebase/auth");function qF(n,...e){ic.logLevel<=ze.WARN&&ic.warn(`Auth (${va}): ${n}`,...e)}function po(n,...e){ic.logLevel<=ze.ERROR&&ic.error(`Auth (${va}): ${n}`,...e)}function Ln(n,...e){throw If(n,...e)}function mn(n,...e){return If(n,...e)}function wf(n,e,t){const i={...HF(),[e]:t};return new ma("auth","Firebase",i).create(e,{appName:n.name})}function nr(n){return wf(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jF(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Ln(n,"argument-error"),wf(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function If(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return ZT.create(n,...e)}function Ae(n,e,...t){if(!n)throw If(e,...t)}function Vn(n){const e="INTERNAL ASSERTION FAILED: "+n;throw po(e),new Error(e)}function Zn(n,e){n||Vn(e)}function ah(){return typeof self<"u"&&self.location?.href||""}function KF(){return f0()==="http:"||f0()==="https:"}function f0(){return typeof self<"u"&&self.location?.protocol||null}function zF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(KF()||_k()||"connection"in navigator)?navigator.onLine:!0}function XF(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class ba{constructor(e,t){this.shortDelay=e,this.longDelay=t,Zn(t>e,"Short delay should be less than long delay!"),this.isMobile=xk()||Dk()}get(){return zF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Cf(n,e){Zn(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class JT{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const YF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const QF=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ZF=new ba(3e4,6e4);function Rf(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function is(n,e,t,i,r={}){return e2(n,r,async()=>{let s={},a={};i&&(e==="GET"?a=i:s={body:JSON.stringify(i)});const o=ya({key:n.config.apiKey,...a}).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const l={method:e,headers:c,...s};return Tk()||(l.referrerPolicy="no-referrer"),n.emulatorConfig&&Fc(n.emulatorConfig.host)&&(l.credentials="include"),JT.fetch()(await t2(n,n.config.apiHost,t,o),l)})}async function e2(n,e,t){n._canInitEmulator=!1;const i={...YF,...e};try{const r=new eP(n),s=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw La(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[c,l]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw La(n,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw La(n,"email-already-in-use",a);if(c==="USER_DISABLED")throw La(n,"user-disabled",a);const u=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw wf(n,u,l);Ln(n,u)}}catch(r){if(r instanceof Li)throw r;Ln(n,"network-request-failed",{message:String(r)})}}async function JF(n,e,t,i,r={}){const s=await is(n,e,t,i,r);return"mfaPendingCredential"in s&&Ln(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function t2(n,e,t,i){const r=`${e}${t}?${i}`,s=n,a=s.config.emulator?Cf(n.config,r):`${n.config.apiScheme}://${r}`;return QF.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}class eP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(mn(this.auth,"network-request-failed")),ZF.get())})}}function La(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=mn(n,e,i);return r.customData._tokenResponse=t,r}async function tP(n,e){return is(n,"POST","/v1/accounts:delete",e)}async function rc(n,e){return is(n,"POST","/v1/accounts:lookup",e)}function Us(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function nP(n,e=!1){const t=hr(n),i=await t.getIdToken(e),r=Lf(i);Ae(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s?.sign_in_provider;return{claims:r,token:i,authTime:Us(jl(r.auth_time)),issuedAtTime:Us(jl(r.iat)),expirationTime:Us(jl(r.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}function jl(n){return Number(n)*1e3}function Lf(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return po("JWT malformed, contained fewer than 3 sections"),null;try{const r=VT(t);return r?JSON.parse(r):(po("Failed to decode base64 JWT payload"),null)}catch(r){return po("Caught error parsing JWT payload as JSON",r?.toString()),null}}function p0(n){const e=Lf(n);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ks(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Li&&iP(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function iP({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class rP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class oh{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Us(this.lastLoginAt),this.creationTime=Us(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function sc(n){const e=n.auth,t=await n.getIdToken(),i=await Ks(n,rc(e,{idToken:t}));Ae(i?.users.length,e,"internal-error");const r=i.users[0];n._notifyReloadListener(r);const s=r.providerUserInfo?.length?n2(r.providerUserInfo):[],a=aP(n.providerData,s),o=n.isAnonymous,c=!(n.email&&r.passwordHash)&&!a?.length,l=o?c:!1,u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new oh(r.createdAt,r.lastLoginAt),isAnonymous:l};Object.assign(n,u)}async function sP(n){const e=hr(n);await sc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function aP(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function n2(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function oP(n,e){const t=await e2(n,{},async()=>{const i=ya({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,a=await t2(n,r,"/v1/token",`key=${s}`),o=await n._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:i};return n.emulatorConfig&&Fc(n.emulatorConfig.host)&&(c.credentials="include"),JT.fetch()(a,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function cP(n,e){return is(n,"POST","/v2/accounts:revokeToken",Rf(n,e))}class Fr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):p0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const t=p0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:r,expiresIn:s}=await oP(e,t);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:s}=t,a=new Fr;return i&&(Ae(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(Ae(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),s&&(Ae(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fr,this.toJSON())}_performRefresh(){return Vn("not implemented")}}function si(n,e){Ae(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class pn{constructor({uid:e,auth:t,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new rP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new oh(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await Ks(this,this.stsTokenManager.getToken(this.auth,e));return Ae(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return nP(this,e)}reload(){return sP(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new pn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await sc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Sn(this.auth.app))return Promise.reject(nr(this.auth));const e=await this.getIdToken();return await Ks(this,tP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,r=t.email??void 0,s=t.phoneNumber??void 0,a=t.photoURL??void 0,o=t.tenantId??void 0,c=t._redirectEventId??void 0,l=t.createdAt??void 0,u=t.lastLoginAt??void 0,{uid:d,emailVerified:h,isAnonymous:f,providerData:p,stsTokenManager:m}=t;Ae(d&&m,e,"internal-error");const g=Fr.fromJSON(this.name,m);Ae(typeof d=="string",e,"internal-error"),si(i,e.name),si(r,e.name),Ae(typeof h=="boolean",e,"internal-error"),Ae(typeof f=="boolean",e,"internal-error"),si(s,e.name),si(a,e.name),si(o,e.name),si(c,e.name),si(l,e.name),si(u,e.name);const y=new pn({uid:d,auth:e,email:r,emailVerified:h,displayName:i,isAnonymous:f,photoURL:a,phoneNumber:s,tenantId:o,stsTokenManager:g,createdAt:l,lastLoginAt:u});return p&&Array.isArray(p)&&(y.providerData=p.map(v=>({...v}))),c&&(y._redirectEventId=c),y}static async _fromIdTokenResponse(e,t,i=!1){const r=new Fr;r.updateFromServerResponse(t);const s=new pn({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await sc(s),s}static async _fromGetAccountInfoResponse(e,t,i){const r=t.users[0];Ae(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?n2(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!s?.length,o=new Fr;o.updateFromIdToken(i);const c=new pn({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:a}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new oh(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(c,l),c}}const g0=new Map;function Gn(n){Zn(n instanceof Function,"Expected a class definition");let e=g0.get(n);return e?(Zn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,g0.set(n,e),e)}class i2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}i2.type="NONE";const m0=i2;function go(n,e,t){return`firebase:${n}:${e}:${t}`}class Pr{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=go(this.userKey,r.apiKey,s),this.fullPersistenceKey=go("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await rc(this.auth,{idToken:e}).catch(()=>{});return t?pn._fromGetAccountInfoResponse(this.auth,t,e):null}return pn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Pr(Gn(m0),e,i);const r=(await Promise.all(t.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=r[0]||Gn(m0);const a=go(i,e.config.apiKey,e.name);let o=null;for(const l of t)try{const u=await l._get(a);if(u){let d;if(typeof u=="string"){const h=await rc(e,{idToken:u}).catch(()=>{});if(!h)break;d=await pn._fromGetAccountInfoResponse(e,h,u)}else d=pn._fromJSON(e,u);l!==s&&(o=d),s=l;break}}catch{}const c=r.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Pr(s,e,i):(s=c[0],o&&await s._set(a,o.toJSON()),await Promise.all(t.map(async l=>{if(l!==s)try{await l._remove(a)}catch{}})),new Pr(s,e,i))}}function y0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(o2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(r2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(l2(e))return"Blackberry";if(u2(e))return"Webos";if(s2(e))return"Safari";if((e.includes("chrome/")||a2(e))&&!e.includes("edge/"))return"Chrome";if(c2(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function r2(n=kt()){return/firefox\//i.test(n)}function s2(n=kt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function a2(n=kt()){return/crios\//i.test(n)}function o2(n=kt()){return/iemobile/i.test(n)}function c2(n=kt()){return/android/i.test(n)}function l2(n=kt()){return/blackberry/i.test(n)}function u2(n=kt()){return/webos/i.test(n)}function Uf(n=kt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function lP(n=kt()){return Uf(n)&&!!window.navigator?.standalone}function uP(){return Ek()&&document.documentMode===10}function d2(n=kt()){return Uf(n)||c2(n)||u2(n)||l2(n)||/windows phone/i.test(n)||o2(n)}function h2(n,e=[]){let t;switch(n){case"Browser":t=y0(kt());break;case"Worker":t=`${y0(kt())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${va}/${i}`}class dP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=s=>new Promise((a,o)=>{try{const c=e(s);a(c)}catch(c){o(c)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function hP(n,e={}){return is(n,"GET","/v2/passwordPolicy",Rf(n,e))}const fP=6;class pP{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??fP,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class gP{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new v0(this),this.idTokenSubscription=new v0(this),this.beforeStateQueue=new dP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ZT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Gn(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Pr.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await rc(this,{idToken:e}),i=await pn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Sn(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=this.redirectUser?._redirectEventId,a=i?._redirectEventId,o=await this.tryRedirectSignIn(e);(!s||s===a)&&o?.user&&(i=o.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await sc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=XF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Sn(this.app))return Promise.reject(nr(this));const t=e?hr(e):null;return t&&Ae(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Sn(this.app)?Promise.reject(nr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Sn(this.app)?Promise.reject(nr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await hP(this),t=new pP(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ma("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await cP(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Gn(e)||this._popupRedirectResolver;Ae(t,this,"argument-error"),this.redirectPersistenceManager=await Pr.create(this,[Gn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,i,r);return()=>{a=!0,c()}}else{const c=e.addObserver(t);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=h2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Sn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&qF(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Pc(n){return hr(n)}class v0{constructor(e){this.auth=e,this.observer=null,this.addObserver=Lk(t=>this.observer=t)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let kf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mP(n){kf=n}function yP(n){return kf.loadJS(n)}function vP(){return kf.gapiScript}function bP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function xP(n,e){const t=zT(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),s=t.getOptions();if(Hr(s,e??{}))return r;Ln(r,"already-initialized")}return t.initialize({options:e})}function TP(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Gn);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function _P(n,e,t){const i=Pc(n);Ae(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=f2(e),{host:a,port:o}=DP(e),c=o===null?"":`:${o}`,l={url:`${s}//${a}${c}/`},u=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Ae(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ae(Hr(l,i.config.emulator)&&Hr(u,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=l,i.emulatorConfig=u,i.settings.appVerificationDisabledForTesting=!0,Fc(a)?(mk(`${s}//${a}${c}`),bk("Auth",!0)):EP()}function f2(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function DP(n){const e=f2(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:b0(i.substr(s.length+1))}}else{const[s,a]=i.split(":");return{host:s,port:b0(a)}}}function b0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function EP(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class p2{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Vn("not implemented")}_getIdTokenResponse(e){return Vn("not implemented")}_linkToIdToken(e,t){return Vn("not implemented")}_getReauthenticationResolver(e){return Vn("not implemented")}}async function Or(n,e){return JF(n,"POST","/v1/accounts:signInWithIdp",Rf(n,e))}const SP="http://localhost";class Jn extends p2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Jn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ln("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...s}=t;if(!i||!r)return null;const a=new Jn(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return Or(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Or(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Or(e,t)}buildRequest(){const e={requestUri:SP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ya(t)}return e}}class Ff{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class rs extends Ff{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class mo extends rs{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return Ae("providerId"in t&&"signInMethod"in t,"argument-error"),Jn._fromParams(t)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return Ae(e.idToken||e.accessToken,"argument-error"),Jn._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return mo.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return mo.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i,oauthTokenSecret:r,pendingToken:s,nonce:a,providerId:o}=e;if(!i&&!r&&!t&&!s||!o)return null;try{return new mo(o)._credential({idToken:t,accessToken:i,nonce:a,pendingToken:s})}catch{return null}}}class pi extends rs{constructor(){super("facebook.com")}static credential(e){return Jn._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pi.credential(e.oauthAccessToken)}catch{return null}}}pi.FACEBOOK_SIGN_IN_METHOD="facebook.com";pi.PROVIDER_ID="facebook.com";class gi extends rs{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Jn._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return gi.credential(t,i)}catch{return null}}}gi.GOOGLE_SIGN_IN_METHOD="google.com";gi.PROVIDER_ID="google.com";class mi extends rs{constructor(){super("github.com")}static credential(e){return Jn._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mi.credentialFromTaggedObject(e)}static credentialFromError(e){return mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mi.credential(e.oauthAccessToken)}catch{return null}}}mi.GITHUB_SIGN_IN_METHOD="github.com";mi.PROVIDER_ID="github.com";class yi extends rs{constructor(){super("twitter.com")}static credential(e,t){return Jn._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return yi.credential(t,i)}catch{return null}}}yi.TWITTER_SIGN_IN_METHOD="twitter.com";yi.PROVIDER_ID="twitter.com";class jr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){const s=await pn._fromIdTokenResponse(e,i,r),a=x0(i);return new jr({user:s,providerId:a,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const r=x0(i);return new jr({user:e,providerId:r,_tokenResponse:i,operationType:t})}}function x0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class ac extends Li{constructor(e,t,i,r){super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,ac.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new ac(e,t,i,r)}}function g2(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ac._fromErrorAndOperation(n,s,e,i):s})}async function AP(n,e,t=!1){const i=await Ks(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return jr._forOperation(n,"link",i)}async function wP(n,e,t=!1){const{auth:i}=n;if(Sn(i.app))return Promise.reject(nr(i));const r="reauthenticate";try{const s=await Ks(n,g2(i,r,e,n),t);Ae(s.idToken,i,"internal-error");const a=Lf(s.idToken);Ae(a,i,"internal-error");const{sub:o}=a;return Ae(n.uid===o,i,"user-mismatch"),jr._forOperation(n,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&Ln(i,"user-mismatch"),s}}async function IP(n,e,t=!1){if(Sn(n.app))return Promise.reject(nr(n));const i="signIn",r=await g2(n,i,e),s=await jr._fromIdTokenResponse(n,i,r);return t||await n._updateCurrentUser(s.user),s}function CP(n,e,t,i){return hr(n).onIdTokenChanged(e,t,i)}function RP(n,e,t){return hr(n).beforeAuthStateChanged(e,t)}function l4(n,e,t,i){return hr(n).onAuthStateChanged(e,t,i)}const oc="__sak";class m2{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(oc,"1"),this.storage.removeItem(oc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const LP=1e3,UP=10;class y2 extends m2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=d2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),r=this.localCache[t];i!==r&&e(t,r,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,o,c)=>{this.notifyListeners(a,c)});return}const i=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!t&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);uP()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,UP):r()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},LP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}y2.type="LOCAL";const kP=y2;class v2 extends m2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}v2.type="SESSION";const b2=v2;function FP(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Oc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const i=new Oc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:r,data:s}=t.data,a=this.handlersMap[r];if(!a?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const o=Array.from(a).map(async l=>l(t.origin,s)),c=await FP(o);t.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Oc.receivers=[];function Pf(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}class PP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((o,c)=>{const l=Pf("",20);r.port1.start();const u=setTimeout(()=>{c(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(d){const h=d;if(h.data.eventId===l)switch(h.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(h.data.response);break;default:clearTimeout(u),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}function Rn(){return window}function OP(n){Rn().location.href=n}function x2(){return typeof Rn().WorkerGlobalScope<"u"&&typeof Rn().importScripts=="function"}async function MP(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function BP(){return navigator?.serviceWorker?.controller||null}function NP(){return x2()?self:null}const T2="firebaseLocalStorageDb",$P=1,cc="firebaseLocalStorage",_2="fbase_key";class xa{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Mc(n,e){return n.transaction([cc],e?"readwrite":"readonly").objectStore(cc)}function WP(){const n=indexedDB.deleteDatabase(T2);return new xa(n).toPromise()}function ch(){const n=indexedDB.open(T2,$P);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(cc,{keyPath:_2})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(cc)?e(i):(i.close(),await WP(),e(await ch()))})})}async function T0(n,e,t){const i=Mc(n,!0).put({[_2]:e,value:t});return new xa(i).toPromise()}async function VP(n,e){const t=Mc(n,!1).get(e),i=await new xa(t).toPromise();return i===void 0?null:i.value}function _0(n,e){const t=Mc(n,!0).delete(e);return new xa(t).toPromise()}const GP=800,HP=3;class D2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ch(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>HP)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return x2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Oc._getInstance(NP()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await MP(),!this.activeServiceWorker)return;this.sender=new PP(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||BP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ch();return await T0(e,oc,"1"),await _0(e,oc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>T0(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>VP(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>_0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=Mc(r,!1).getAll();return new xa(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),GP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}D2.type="LOCAL";const qP=D2;new ba(3e4,6e4);function E2(n,e){return e?Gn(e):(Ae(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class Of extends p2{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Or(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Or(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Or(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function jP(n){return IP(n.auth,new Of(n),n.bypassAuthState)}function KP(n){const{auth:e,user:t}=n;return Ae(t,e,"internal-error"),wP(t,new Of(n),n.bypassAuthState)}async function zP(n){const{auth:e,user:t}=n;return Ae(t,e,"internal-error"),AP(t,new Of(n),n.bypassAuthState)}class S2{constructor(e,t,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:r,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:t,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jP;case"linkViaPopup":case"linkViaRedirect":return zP;case"reauthViaPopup":case"reauthViaRedirect":return KP;default:Ln(this.auth,"internal-error")}}resolve(e){Zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const XP=new ba(2e3,1e4);async function u4(n,e,t){if(Sn(n.app))return Promise.reject(mn(n,"operation-not-supported-in-this-environment"));const i=Pc(n);jF(n,e,Ff);const r=E2(i,t);return new Ji(i,"signInViaPopup",e,r).executeNotNull()}class Ji extends S2{constructor(e,t,i,r,s){super(e,t,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Ji.currentPopupAction&&Ji.currentPopupAction.cancel(),Ji.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){Zn(this.filter.length===1,"Popup operations only handle one event");const e=Pf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(mn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(mn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ji.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,XP.get())};e()}}Ji.currentPopupAction=null;const YP="pendingRedirect",yo=new Map;class QP extends S2{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=yo.get(this.auth._key());if(!e){try{const i=await ZP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}yo.set(this.auth._key(),e)}return this.bypassAuthState||yo.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ZP(n,e){const t=t3(e),i=e3(n);if(!await i._isAvailable())return!1;const r=await i._get(t)==="true";return await i._remove(t),r}function JP(n,e){yo.set(n._key(),e)}function e3(n){return Gn(n._redirectPersistence)}function t3(n){return go(YP,n.config.apiKey,n.name)}async function n3(n,e,t=!1){if(Sn(n.app))return Promise.reject(nr(n));const i=Pc(n),r=E2(i,e),a=await new QP(i,r,t).execute();return a&&!t&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}const i3=600*1e3;class r3{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!s3(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!A2(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(mn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=i3&&this.cachedEventUids.clear(),this.cachedEventUids.has(D0(e))}saveEventToCache(e){this.cachedEventUids.add(D0(e)),this.lastProcessedEventTime=Date.now()}}function D0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function A2({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function s3(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return A2(n);default:return!1}}async function a3(n,e={}){return is(n,"GET","/v1/projects",e)}const o3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,c3=/^https?/;async function l3(n){if(n.config.emulator)return;const{authorizedDomains:e}=await a3(n);for(const t of e)try{if(u3(t))return}catch{}Ln(n,"unauthorized-domain")}function u3(n){const e=ah(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===i}if(!c3.test(t))return!1;if(o3.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const d3=new ba(3e4,6e4);function E0(){const n=Rn().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function h3(n){return new Promise((e,t)=>{function i(){E0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{E0(),t(mn(n,"network-request-failed"))},timeout:d3.get()})}if(Rn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Rn().gapi?.load)i();else{const r=bP("iframefcb");return Rn()[r]=()=>{gapi.load?i():t(mn(n,"network-request-failed"))},yP(`${vP()}?onload=${r}`).catch(s=>t(s))}}).catch(e=>{throw vo=null,e})}let vo=null;function f3(n){return vo=vo||h3(n),vo}const p3=new ba(5e3,15e3),g3="__/auth/iframe",m3="emulator/auth/iframe",y3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},v3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function b3(n){const e=n.config;Ae(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Cf(e,m3):`https://${n.config.authDomain}/${g3}`,i={apiKey:e.apiKey,appName:n.name,v:va},r=v3.get(n.config.apiHost);r&&(i.eid=r);const s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${t}?${ya(i).slice(1)}`}async function x3(n){const e=await f3(n),t=Rn().gapi;return Ae(t,n,"internal-error"),e.open({where:document.body,url:b3(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:y3,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const a=mn(n,"network-request-failed"),o=Rn().setTimeout(()=>{s(a)},p3.get());function c(){Rn().clearTimeout(o),r(i)}i.ping(c).then(c,()=>{s(a)})}))}const T3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_3=500,D3=600,E3="_blank",S3="http://localhost";class S0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function A3(n,e,t,i=_3,r=D3){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let o="";const c={...T3,width:i.toString(),height:r.toString(),top:s,left:a},l=kt().toLowerCase();t&&(o=a2(l)?E3:t),r2(l)&&(e=e||S3,c.scrollbars="yes");const u=Object.entries(c).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(lP(l)&&o!=="_self")return w3(e||"",o),new S0(null);const d=window.open(e||"",o,u);Ae(d,n,"popup-blocked");try{d.focus()}catch{}return new S0(d)}function w3(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const I3="__/auth/handler",C3="emulator/auth/handler",R3=encodeURIComponent("fac");async function A0(n,e,t,i,r,s){Ae(n.config.authDomain,n,"auth-domain-config-required"),Ae(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:va,eventId:r};if(e instanceof Ff){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",Rk(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries({}))a[u]=d}if(e instanceof rs){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(a.scopes=u.join(","))}n.tenantId&&(a.tid=n.tenantId);const o=a;for(const u of Object.keys(o))o[u]===void 0&&delete o[u];const c=await n._getAppCheckToken(),l=c?`#${R3}=${encodeURIComponent(c)}`:"";return`${L3(n)}?${ya(o).slice(1)}${l}`}function L3({config:n}){return n.emulator?Cf(n,C3):`https://${n.authDomain}/${I3}`}const Kl="webStorageSupport";class U3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=b2,this._completeRedirectFn=n3,this._overrideRedirectResult=JP}async _openPopup(e,t,i,r){Zn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const s=await A0(e,t,i,ah(),r);return A3(e,s,Pf())}async _openRedirect(e,t,i,r){await this._originValidation(e);const s=await A0(e,t,i,ah(),r);return OP(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(Zn(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await x3(e),i=new r3(e);return t.register("authEvent",r=>(Ae(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Kl,{type:Kl},r=>{const s=r?.[0]?.[Kl];s!==void 0&&t(!!s),Ln(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=l3(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return d2()||s2()||Uf()}}const k3=U3;var w0="@firebase/auth",I0="1.12.0";class F3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function P3(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function O3(n){qs(new qr("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=i.options;Ae(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const c={apiKey:a,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:h2(n)},l=new gP(i,r,s,c);return TP(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),qs(new qr("auth-internal",e=>{const t=Pc(e.getProvider("auth").getImmediate());return(i=>new F3(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ls(w0,I0,P3(n)),Ls(w0,I0,"esm2020")}const M3=300,B3=HT("authIdTokenMaxAge")||M3;let C0=null;const N3=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>B3)return;const r=t?.token;C0!==r&&(C0=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function d4(n=kF()){const e=zT(n,"auth");if(e.isInitialized())return e.getImmediate();const t=xP(n,{popupRedirectResolver:k3,persistence:[qP,kP,b2]}),i=HT("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const a=N3(s.toString());RP(t,a,()=>a(t.currentUser)),CP(t,o=>a(o))}}const r=pk("auth");return r&&_P(t,`http://${r}`),t}function $3(){return document.getElementsByTagName("head")?.[0]??document}mP({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const s=mn("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",$3().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});O3("Browser");const h4=(function n(e){function t(r,s,a){var o,c={};if(Array.isArray(r))return r.concat(s);for(o in r)c[a?o.toLowerCase():o]=r[o];for(o in s){var l=a?o.toLowerCase():o,u=s[o];c[l]=l in c&&typeof u=="object"?t(c[l],u,l=="headers"):u}return c}function i(r,s,a,o,c){var l=typeof r!="string"?(s=r).url:r,u={config:s},d=t(e,s),h={};o=o||d.data,(d.transformRequest||[]).map(function(f){o=f(o,d.headers)||o}),d.auth&&(h.authorization=d.auth),o&&typeof o=="object"&&typeof o.append!="function"&&typeof o.text!="function"&&(o=JSON.stringify(o),h["content-type"]="application/json");try{h[d.xsrfHeaderName]=decodeURIComponent(document.cookie.match(RegExp("(^|; )"+d.xsrfCookieName+"=([^;]*)"))[2])}catch{}return d.baseURL&&(l=l.replace(/^(?!.*\/\/)\/?/,d.baseURL+"/")),d.params&&(l+=(~l.indexOf("?")?"&":"?")+(d.paramsSerializer?d.paramsSerializer(d.params):new URLSearchParams(d.params))),(d.fetch||fetch)(l,{method:(a||d.method||"get").toUpperCase(),body:o,headers:t(d.headers,h,!0),credentials:d.withCredentials?"include":c}).then(function(f){for(var p in f)typeof f[p]!="function"&&(u[p]=f[p]);return d.responseType=="stream"?(u.data=f.body,u):f[d.responseType||"text"]().then(function(m){u.data=m,u.data=JSON.parse(m)}).catch(Object).then(function(){return(d.validateStatus?d.validateStatus(f.status):f.ok)?u:Promise.reject(u)})})}return e=e||{},i.request=i,i.get=function(r,s){return i(r,s,"get")},i.delete=function(r,s){return i(r,s,"delete")},i.head=function(r,s){return i(r,s,"head")},i.options=function(r,s){return i(r,s,"options")},i.post=function(r,s,a){return i(r,a,"post",s)},i.put=function(r,s,a){return i(r,a,"put",s)},i.patch=function(r,s,a){return i(r,a,"patch",s)},i.all=Promise.all.bind(Promise),i.spread=function(r){return r.apply.bind(r,r)},i.CancelToken=typeof AbortController=="function"?AbortController:Object,i.defaults=e,i.create=n,i})();var zt={},Mf="1.13.7",R0=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},Bc=Array.prototype,Bf=Object.prototype,L0=typeof Symbol<"u"?Symbol.prototype:null,W3=Bc.push,Ta=Bc.slice,zs=Bf.toString,V3=Bf.hasOwnProperty,w2=typeof ArrayBuffer<"u",G3=typeof DataView<"u",H3=Array.isArray,U0=Object.keys,k0=Object.create,F0=w2&&ArrayBuffer.isView,q3=isNaN,j3=isFinite,I2=!{toString:null}.propertyIsEnumerable("toString"),P0=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],K3=Math.pow(2,53)-1;function Ft(n,e){return e=e==null?n.length-1:+e,function(){for(var t=Math.max(arguments.length-e,0),i=Array(t),r=0;r<t;r++)i[r]=arguments[r+e];switch(e){case 0:return n.call(this,i);case 1:return n.call(this,arguments[0],i);case 2:return n.call(this,arguments[0],arguments[1],i)}var s=Array(e+1);for(r=0;r<e;r++)s[r]=arguments[r];return s[e]=i,n.apply(this,s)}}function Ui(n){var e=typeof n;return e==="function"||e==="object"&&!!n}function C2(n){return n===null}function Nf(n){return n===void 0}function $f(n){return n===!0||n===!1||zs.call(n)==="[object Boolean]"}function R2(n){return!!(n&&n.nodeType===1)}function Rt(n){var e="[object "+n+"]";return function(t){return zs.call(t)===e}}const Nc=Rt("String"),Wf=Rt("Number"),L2=Rt("Date"),U2=Rt("RegExp"),k2=Rt("Error"),Vf=Rt("Symbol"),Gf=Rt("ArrayBuffer");var F2=Rt("Function"),z3=R0.document&&R0.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof z3!="function"&&(F2=function(n){return typeof n=="function"||!1});const Ct=F2,P2=Rt("Object");var O2=G3&&(!/\[native code\]/.test(String(DataView))||P2(new DataView(new ArrayBuffer(8)))),Hf=typeof Map<"u"&&P2(new Map),X3=Rt("DataView");function Y3(n){return n!=null&&Ct(n.getInt8)&&Gf(n.buffer)}const Xs=O2?Y3:X3,ki=H3||Rt("Array");function Fi(n,e){return n!=null&&V3.call(n,e)}var lh=Rt("Arguments");(function(){lh(arguments)||(lh=function(n){return Fi(n,"callee")})})();const $c=lh;function M2(n){return!Vf(n)&&j3(n)&&!isNaN(parseFloat(n))}function qf(n){return Wf(n)&&q3(n)}function jf(n){return function(){return n}}function B2(n){return function(e){var t=n(e);return typeof t=="number"&&t>=0&&t<=K3}}function N2(n){return function(e){return e?.[n]}}const lc=N2("byteLength"),Q3=B2(lc);var Z3=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function J3(n){return F0?F0(n)&&!Xs(n):Q3(n)&&Z3.test(zs.call(n))}const Kf=w2?J3:jf(!1),Wt=N2("length");function eO(n){for(var e={},t=n.length,i=0;i<t;++i)e[n[i]]=!0;return{contains:function(r){return e[r]===!0},push:function(r){return e[r]=!0,n.push(r)}}}function $2(n,e){e=eO(e);var t=P0.length,i=n.constructor,r=Ct(i)&&i.prototype||Bf,s="constructor";for(Fi(n,s)&&!e.contains(s)&&e.push(s);t--;)s=P0[t],s in n&&n[s]!==r[s]&&!e.contains(s)&&e.push(s)}function mt(n){if(!Ui(n))return[];if(U0)return U0(n);var e=[];for(var t in n)Fi(n,t)&&e.push(t);return I2&&$2(n,e),e}function W2(n){if(n==null)return!0;var e=Wt(n);return typeof e=="number"&&(ki(n)||Nc(n)||$c(n))?e===0:Wt(mt(n))===0}function zf(n,e){var t=mt(e),i=t.length;if(n==null)return!i;for(var r=Object(n),s=0;s<i;s++){var a=t[s];if(e[a]!==r[a]||!(a in r))return!1}return!0}function He(n){if(n instanceof He)return n;if(!(this instanceof He))return new He(n);this._wrapped=n}He.VERSION=Mf;He.prototype.value=function(){return this._wrapped};He.prototype.valueOf=He.prototype.toJSON=He.prototype.value;He.prototype.toString=function(){return String(this._wrapped)};function O0(n){return new Uint8Array(n.buffer||n,n.byteOffset||0,lc(n))}var M0="[object DataView]";function uh(n,e,t,i){if(n===e)return n!==0||1/n===1/e;if(n==null||e==null)return!1;if(n!==n)return e!==e;var r=typeof n;return r!=="function"&&r!=="object"&&typeof e!="object"?!1:V2(n,e,t,i)}function V2(n,e,t,i){n instanceof He&&(n=n._wrapped),e instanceof He&&(e=e._wrapped);var r=zs.call(n);if(r!==zs.call(e))return!1;if(O2&&r=="[object Object]"&&Xs(n)){if(!Xs(e))return!1;r=M0}switch(r){case"[object RegExp]":case"[object String]":return""+n==""+e;case"[object Number]":return+n!=+n?+e!=+e:+n==0?1/+n===1/e:+n==+e;case"[object Date]":case"[object Boolean]":return+n==+e;case"[object Symbol]":return L0.valueOf.call(n)===L0.valueOf.call(e);case"[object ArrayBuffer]":case M0:return V2(O0(n),O0(e),t,i)}var s=r==="[object Array]";if(!s&&Kf(n)){var a=lc(n);if(a!==lc(e))return!1;if(n.buffer===e.buffer&&n.byteOffset===e.byteOffset)return!0;s=!0}if(!s){if(typeof n!="object"||typeof e!="object")return!1;var o=n.constructor,c=e.constructor;if(o!==c&&!(Ct(o)&&o instanceof o&&Ct(c)&&c instanceof c)&&"constructor"in n&&"constructor"in e)return!1}t=t||[],i=i||[];for(var l=t.length;l--;)if(t[l]===n)return i[l]===e;if(t.push(n),i.push(e),s){if(l=n.length,l!==e.length)return!1;for(;l--;)if(!uh(n[l],e[l],t,i))return!1}else{var u=mt(n),d;if(l=u.length,mt(e).length!==l)return!1;for(;l--;)if(d=u[l],!(Fi(e,d)&&uh(n[d],e[d],t,i)))return!1}return t.pop(),i.pop(),!0}function G2(n,e){return uh(n,e)}function ss(n){if(!Ui(n))return[];var e=[];for(var t in n)e.push(t);return I2&&$2(n,e),e}function Xf(n){var e=Wt(n);return function(t){if(t==null)return!1;var i=ss(t);if(Wt(i))return!1;for(var r=0;r<e;r++)if(!Ct(t[n[r]]))return!1;return n!==j2||!Ct(t[Yf])}}var Yf="forEach",H2="has",Qf=["clear","delete"],q2=["get",H2,"set"],tO=Qf.concat(Yf,q2),j2=Qf.concat(q2),nO=["add"].concat(Qf,Yf,H2);const K2=Hf?Xf(tO):Rt("Map"),z2=Hf?Xf(j2):Rt("WeakMap"),X2=Hf?Xf(nO):Rt("Set"),Y2=Rt("WeakSet");function fr(n){for(var e=mt(n),t=e.length,i=Array(t),r=0;r<t;r++)i[r]=n[e[r]];return i}function Q2(n){for(var e=mt(n),t=e.length,i=Array(t),r=0;r<t;r++)i[r]=[e[r],n[e[r]]];return i}function Zf(n){for(var e={},t=mt(n),i=0,r=t.length;i<r;i++)e[n[t[i]]]=t[i];return e}function Ys(n){var e=[];for(var t in n)Ct(n[t])&&e.push(t);return e.sort()}function Jf(n,e){return function(t){var i=arguments.length;if(e&&(t=Object(t)),i<2||t==null)return t;for(var r=1;r<i;r++)for(var s=arguments[r],a=n(s),o=a.length,c=0;c<o;c++){var l=a[c];(!e||t[l]===void 0)&&(t[l]=s[l])}return t}}const ep=Jf(ss),Kr=Jf(mt),tp=Jf(ss,!0);function iO(){return function(){}}function Z2(n){if(!Ui(n))return{};if(k0)return k0(n);var e=iO();e.prototype=n;var t=new e;return e.prototype=null,t}function J2(n,e){var t=Z2(n);return e&&Kr(t,e),t}function e_(n){return Ui(n)?ki(n)?n.slice():ep({},n):n}function t_(n,e){return e(n),n}function np(n){return ki(n)?n:[n]}He.toPath=np;function _a(n){return He.toPath(n)}function ip(n,e){for(var t=e.length,i=0;i<t;i++){if(n==null)return;n=n[e[i]]}return t?n:void 0}function rp(n,e,t){var i=ip(n,_a(e));return Nf(i)?t:i}function n_(n,e){e=_a(e);for(var t=e.length,i=0;i<t;i++){var r=e[i];if(!Fi(n,r))return!1;n=n[r]}return!!t}function Wc(n){return n}function cr(n){return n=Kr({},n),function(e){return zf(e,n)}}function Vc(n){return n=_a(n),function(e){return ip(e,n)}}function Da(n,e,t){if(e===void 0)return n;switch(t??3){case 1:return function(i){return n.call(e,i)};case 3:return function(i,r,s){return n.call(e,i,r,s)};case 4:return function(i,r,s,a){return n.call(e,i,r,s,a)}}return function(){return n.apply(e,arguments)}}function i_(n,e,t){return n==null?Wc:Ct(n)?Da(n,e,t):Ui(n)&&!ki(n)?cr(n):Vc(n)}function Gc(n,e){return i_(n,e,1/0)}He.iteratee=Gc;function Vt(n,e,t){return He.iteratee!==Gc?He.iteratee(n,e):i_(n,e,t)}function r_(n,e,t){e=Vt(e,t);for(var i=mt(n),r=i.length,s={},a=0;a<r;a++){var o=i[a];s[o]=e(n[o],o,n)}return s}function sp(){}function s_(n){return n==null?sp:function(e){return rp(n,e)}}function a_(n,e,t){var i=Array(Math.max(0,n));e=Da(e,t,1);for(var r=0;r<n;r++)i[r]=e(r);return i}function uc(n,e){return e==null&&(e=n,n=0),n+Math.floor(Math.random()*(e-n+1))}const zr=Date.now||function(){return new Date().getTime()};function o_(n){var e=function(s){return n[s]},t="(?:"+mt(n).join("|")+")",i=RegExp(t),r=RegExp(t,"g");return function(s){return s=s==null?"":""+s,i.test(s)?s.replace(r,e):s}}const c_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},l_=o_(c_),rO=Zf(c_),u_=o_(rO),d_=He.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var zl=/(.)^/,sO={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},aO=/\\|'|\r|\n|\u2028|\u2029/g;function oO(n){return"\\"+sO[n]}var cO=/^\s*(\w|\$)+\s*$/;function h_(n,e,t){!e&&t&&(e=t),e=tp({},e,He.templateSettings);var i=RegExp([(e.escape||zl).source,(e.interpolate||zl).source,(e.evaluate||zl).source].join("|")+"|$","g"),r=0,s="__p+='";n.replace(i,function(l,u,d,h,f){return s+=n.slice(r,f).replace(aO,oO),r=f+l.length,u?s+=`'+
((__t=(`+u+`))==null?'':_.escape(__t))+
'`:d?s+=`'+
((__t=(`+d+`))==null?'':__t)+
'`:h&&(s+=`';
`+h+`
__p+='`),l}),s+=`';
`;var a=e.variable;if(a){if(!cO.test(a))throw new Error("variable is not a bare identifier: "+a)}else s=`with(obj||{}){
`+s+`}
`,a="obj";s=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+s+`return __p;
`;var o;try{o=new Function(a,"_",s)}catch(l){throw l.source=s,l}var c=function(l){return o.call(this,l,He)};return c.source="function("+a+`){
`+s+"}",c}function f_(n,e,t){e=_a(e);var i=e.length;if(!i)return Ct(t)?t.call(n):t;for(var r=0;r<i;r++){var s=n?.[e[r]];s===void 0&&(s=t,r=i),n=Ct(s)?s.call(n):s}return n}var lO=0;function p_(n){var e=++lO+"";return n?n+e:e}function g_(n){var e=He(n);return e._chain=!0,e}function m_(n,e,t,i,r){if(!(i instanceof e))return n.apply(t,r);var s=Z2(n.prototype),a=n.apply(s,r);return Ui(a)?a:s}var pr=Ft(function(n,e){var t=pr.placeholder,i=function(){for(var r=0,s=e.length,a=Array(s),o=0;o<s;o++)a[o]=e[o]===t?arguments[r++]:e[o];for(;r<arguments.length;)a.push(arguments[r++]);return m_(n,i,this,this,a)};return i});pr.placeholder=He;const ap=Ft(function(n,e,t){if(!Ct(n))throw new TypeError("Bind must be called on a function");var i=Ft(function(r){return m_(n,i,e,this,t.concat(r))});return i}),Kt=B2(Wt);function gr(n,e,t,i){if(i=i||[],!e&&e!==0)e=1/0;else if(e<=0)return i.concat(n);for(var r=i.length,s=0,a=Wt(n);s<a;s++){var o=n[s];if(Kt(o)&&(ki(o)||$c(o)))if(e>1)gr(o,e-1,t,i),r=i.length;else for(var c=0,l=o.length;c<l;)i[r++]=o[c++];else t||(i[r++]=o)}return i}const y_=Ft(function(n,e){e=gr(e,!1,!1);var t=e.length;if(t<1)throw new Error("bindAll must be passed function names");for(;t--;){var i=e[t];n[i]=ap(n[i],n)}return n});function v_(n,e){var t=function(i){var r=t.cache,s=""+(e?e.apply(this,arguments):i);return Fi(r,s)||(r[s]=n.apply(this,arguments)),r[s]};return t.cache={},t}const op=Ft(function(n,e,t){return setTimeout(function(){return n.apply(null,t)},e)}),b_=pr(op,He,1);function x_(n,e,t){var i,r,s,a,o=0;t||(t={});var c=function(){o=t.leading===!1?0:zr(),i=null,a=n.apply(r,s),i||(r=s=null)},l=function(){var u=zr();!o&&t.leading===!1&&(o=u);var d=e-(u-o);return r=this,s=arguments,d<=0||d>e?(i&&(clearTimeout(i),i=null),o=u,a=n.apply(r,s),i||(r=s=null)):!i&&t.trailing!==!1&&(i=setTimeout(c,d)),a};return l.cancel=function(){clearTimeout(i),o=0,i=r=s=null},l}function T_(n,e,t){var i,r,s,a,o,c=function(){var u=zr()-r;e>u?i=setTimeout(c,e-u):(i=null,t||(a=n.apply(o,s)),i||(s=o=null))},l=Ft(function(u){return o=this,s=u,r=zr(),i||(i=setTimeout(c,e),t&&(a=n.apply(o,s))),a});return l.cancel=function(){clearTimeout(i),i=s=o=null},l}function __(n,e){return pr(e,n)}function Hc(n){return function(){return!n.apply(this,arguments)}}function D_(){var n=arguments,e=n.length-1;return function(){for(var t=e,i=n[e].apply(this,arguments);t--;)i=n[t].call(this,i);return i}}function E_(n,e){return function(){if(--n<1)return e.apply(this,arguments)}}function cp(n,e){var t;return function(){return--n>0&&(t=e.apply(this,arguments)),n<=1&&(e=null),t}}const S_=pr(cp,2);function lp(n,e,t){e=Vt(e,t);for(var i=mt(n),r,s=0,a=i.length;s<a;s++)if(r=i[s],e(n[r],r,n))return r}function A_(n){return function(e,t,i){t=Vt(t,i);for(var r=Wt(e),s=n>0?0:r-1;s>=0&&s<r;s+=n)if(t(e[s],s,e))return s;return-1}}const qc=A_(1),up=A_(-1);function dp(n,e,t,i){t=Vt(t,i,1);for(var r=t(e),s=0,a=Wt(n);s<a;){var o=Math.floor((s+a)/2);t(n[o])<r?s=o+1:a=o}return s}function w_(n,e,t){return function(i,r,s){var a=0,o=Wt(i);if(typeof s=="number")n>0?a=s>=0?s:Math.max(s+o,a):o=s>=0?Math.min(s+1,o):s+o+1;else if(t&&s&&o)return s=t(i,r),i[s]===r?s:-1;if(r!==r)return s=e(Ta.call(i,a,o),qf),s>=0?s+a:-1;for(s=n>0?a:o-1;s>=0&&s<o;s+=n)if(i[s]===r)return s;return-1}}const hp=w_(1,qc,dp),I_=w_(-1,up);function Qs(n,e,t){var i=Kt(n)?qc:lp,r=i(n,e,t);if(r!==void 0&&r!==-1)return n[r]}function C_(n,e){return Qs(n,cr(e))}function yn(n,e,t){e=Da(e,t);var i,r;if(Kt(n))for(i=0,r=n.length;i<r;i++)e(n[i],i,n);else{var s=mt(n);for(i=0,r=s.length;i<r;i++)e(n[s[i]],s[i],n)}return n}function ei(n,e,t){e=Vt(e,t);for(var i=!Kt(n)&&mt(n),r=(i||n).length,s=Array(r),a=0;a<r;a++){var o=i?i[a]:a;s[a]=e(n[o],o,n)}return s}function R_(n){var e=function(t,i,r,s){var a=!Kt(t)&&mt(t),o=(a||t).length,c=n>0?0:o-1;for(s||(r=t[a?a[c]:c],c+=n);c>=0&&c<o;c+=n){var l=a?a[c]:c;r=i(r,t[l],l,t)}return r};return function(t,i,r,s){var a=arguments.length>=3;return e(t,Da(i,s,4),r,a)}}const Mr=R_(1),dc=R_(-1);function Ai(n,e,t){var i=[];return e=Vt(e,t),yn(n,function(r,s,a){e(r,s,a)&&i.push(r)}),i}function L_(n,e,t){return Ai(n,Hc(Vt(e)),t)}function hc(n,e,t){e=Vt(e,t);for(var i=!Kt(n)&&mt(n),r=(i||n).length,s=0;s<r;s++){var a=i?i[s]:s;if(!e(n[a],a,n))return!1}return!0}function fc(n,e,t){e=Vt(e,t);for(var i=!Kt(n)&&mt(n),r=(i||n).length,s=0;s<r;s++){var a=i?i[s]:s;if(e(n[a],a,n))return!0}return!1}function tn(n,e,t,i){return Kt(n)||(n=fr(n)),(typeof t!="number"||i)&&(t=0),hp(n,e,t)>=0}const U_=Ft(function(n,e,t){var i,r;return Ct(e)?r=e:(e=_a(e),i=e.slice(0,-1),e=e[e.length-1]),ei(n,function(s){var a=r;if(!a){if(i&&i.length&&(s=ip(s,i)),s==null)return;a=s[e]}return a==null?a:a.apply(s,t)})});function jc(n,e){return ei(n,Vc(e))}function k_(n,e){return Ai(n,cr(e))}function fp(n,e,t){var i=-1/0,r=-1/0,s,a;if(e==null||typeof e=="number"&&typeof n[0]!="object"&&n!=null){n=Kt(n)?n:fr(n);for(var o=0,c=n.length;o<c;o++)s=n[o],s!=null&&s>i&&(i=s)}else e=Vt(e,t),yn(n,function(l,u,d){a=e(l,u,d),(a>r||a===-1/0&&i===-1/0)&&(i=l,r=a)});return i}function F_(n,e,t){var i=1/0,r=1/0,s,a;if(e==null||typeof e=="number"&&typeof n[0]!="object"&&n!=null){n=Kt(n)?n:fr(n);for(var o=0,c=n.length;o<c;o++)s=n[o],s!=null&&s<i&&(i=s)}else e=Vt(e,t),yn(n,function(l,u,d){a=e(l,u,d),(a<r||a===1/0&&i===1/0)&&(i=l,r=a)});return i}var uO=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function pp(n){return n?ki(n)?Ta.call(n):Nc(n)?n.match(uO):Kt(n)?ei(n,Wc):fr(n):[]}function gp(n,e,t){if(e==null||t)return Kt(n)||(n=fr(n)),n[uc(n.length-1)];var i=pp(n),r=Wt(i);e=Math.max(Math.min(e,r),0);for(var s=r-1,a=0;a<e;a++){var o=uc(a,s),c=i[a];i[a]=i[o],i[o]=c}return i.slice(0,e)}function P_(n){return gp(n,1/0)}function O_(n,e,t){var i=0;return e=Vt(e,t),jc(ei(n,function(r,s,a){return{value:r,index:i++,criteria:e(r,s,a)}}).sort(function(r,s){var a=r.criteria,o=s.criteria;if(a!==o){if(a>o||a===void 0)return 1;if(a<o||o===void 0)return-1}return r.index-s.index}),"value")}function Kc(n,e){return function(t,i,r){var s=e?[[],[]]:{};return i=Vt(i,r),yn(t,function(a,o){var c=i(a,o,t);n(s,a,c)}),s}}const M_=Kc(function(n,e,t){Fi(n,t)?n[t].push(e):n[t]=[e]}),B_=Kc(function(n,e,t){n[t]=e}),N_=Kc(function(n,e,t){Fi(n,t)?n[t]++:n[t]=1}),$_=Kc(function(n,e,t){n[t?0:1].push(e)},!0);function W_(n){return n==null?0:Kt(n)?n.length:mt(n).length}function dO(n,e,t){return e in t}const mp=Ft(function(n,e){var t={},i=e[0];if(n==null)return t;Ct(i)?(e.length>1&&(i=Da(i,e[1])),e=ss(n)):(i=dO,e=gr(e,!1,!1),n=Object(n));for(var r=0,s=e.length;r<s;r++){var a=e[r],o=n[a];i(o,a,n)&&(t[a]=o)}return t}),V_=Ft(function(n,e){var t=e[0],i;return Ct(t)?(t=Hc(t),e.length>1&&(i=e[1])):(e=ei(gr(e,!1,!1),String),t=function(r,s){return!tn(e,s)}),mp(n,t,i)});function yp(n,e,t){return Ta.call(n,0,Math.max(0,n.length-(e==null||t?1:e)))}function Br(n,e,t){return n==null||n.length<1?e==null||t?void 0:[]:e==null||t?n[0]:yp(n,n.length-e)}function ir(n,e,t){return Ta.call(n,e==null||t?1:e)}function G_(n,e,t){return n==null||n.length<1?e==null||t?void 0:[]:e==null||t?n[n.length-1]:ir(n,Math.max(0,n.length-e))}function H_(n){return Ai(n,Boolean)}function q_(n,e){return gr(n,e,!1)}const vp=Ft(function(n,e){return e=gr(e,!0,!0),Ai(n,function(t){return!tn(e,t)})}),j_=Ft(function(n,e){return vp(n,e)});function Zs(n,e,t,i){$f(e)||(i=t,t=e,e=!1),t!=null&&(t=Vt(t,i));for(var r=[],s=[],a=0,o=Wt(n);a<o;a++){var c=n[a],l=t?t(c,a,n):c;e&&!t?((!a||s!==l)&&r.push(c),s=l):t?tn(s,l)||(s.push(l),r.push(c)):tn(r,c)||r.push(c)}return r}const K_=Ft(function(n){return Zs(gr(n,!0,!0))});function z_(n){for(var e=[],t=arguments.length,i=0,r=Wt(n);i<r;i++){var s=n[i];if(!tn(e,s)){var a;for(a=1;a<t&&tn(arguments[a],s);a++);a===t&&e.push(s)}}return e}function Js(n){for(var e=n&&fp(n,Wt).length||0,t=Array(e),i=0;i<e;i++)t[i]=jc(n,i);return t}const X_=Ft(Js);function Y_(n,e){for(var t={},i=0,r=Wt(n);i<r;i++)e?t[n[i]]=e[i]:t[n[i][0]]=n[i][1];return t}function Q_(n,e,t){e==null&&(e=n||0,n=0),t||(t=e<n?-1:1);for(var i=Math.max(Math.ceil((e-n)/t),0),r=Array(i),s=0;s<i;s++,n+=t)r[s]=n;return r}function Z_(n,e){if(e==null||e<1)return[];for(var t=[],i=0,r=n.length;i<r;)t.push(Ta.call(n,i,i+=e));return t}function bp(n,e){return n._chain?He(e).chain():e}function xp(n){return yn(Ys(n),function(e){var t=He[e]=n[e];He.prototype[e]=function(){var i=[this._wrapped];return W3.apply(i,arguments),bp(this,t.apply(He,i))}}),He}yn(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var e=Bc[n];He.prototype[n]=function(){var t=this._wrapped;return t!=null&&(e.apply(t,arguments),(n==="shift"||n==="splice")&&t.length===0&&delete t[0]),bp(this,t)}});yn(["concat","join","slice"],function(n){var e=Bc[n];He.prototype[n]=function(){var t=this._wrapped;return t!=null&&(t=e.apply(t,arguments)),bp(this,t)}});const hO=Object.freeze(Object.defineProperty({__proto__:null,VERSION:Mf,after:E_,all:hc,allKeys:ss,any:fc,assign:Kr,before:cp,bind:ap,bindAll:y_,chain:g_,chunk:Z_,clone:e_,collect:ei,compact:H_,compose:D_,constant:jf,contains:tn,countBy:N_,create:J2,debounce:T_,default:He,defaults:tp,defer:b_,delay:op,detect:Qs,difference:vp,drop:ir,each:yn,escape:l_,every:hc,extend:ep,extendOwn:Kr,filter:Ai,find:Qs,findIndex:qc,findKey:lp,findLastIndex:up,findWhere:C_,first:Br,flatten:q_,foldl:Mr,foldr:dc,forEach:yn,functions:Ys,get:rp,groupBy:M_,has:n_,head:Br,identity:Wc,include:tn,includes:tn,indexBy:B_,indexOf:hp,initial:yp,inject:Mr,intersection:z_,invert:Zf,invoke:U_,isArguments:$c,isArray:ki,isArrayBuffer:Gf,isBoolean:$f,isDataView:Xs,isDate:L2,isElement:R2,isEmpty:W2,isEqual:G2,isError:k2,isFinite:M2,isFunction:Ct,isMap:K2,isMatch:zf,isNaN:qf,isNull:C2,isNumber:Wf,isObject:Ui,isRegExp:U2,isSet:X2,isString:Nc,isSymbol:Vf,isTypedArray:Kf,isUndefined:Nf,isWeakMap:z2,isWeakSet:Y2,iteratee:Gc,keys:mt,last:G_,lastIndexOf:I_,map:ei,mapObject:r_,matcher:cr,matches:cr,max:fp,memoize:v_,methods:Ys,min:F_,mixin:xp,negate:Hc,noop:sp,now:zr,object:Y_,omit:V_,once:S_,pairs:Q2,partial:pr,partition:$_,pick:mp,pluck:jc,property:Vc,propertyOf:s_,random:uc,range:Q_,reduce:Mr,reduceRight:dc,reject:L_,rest:ir,restArguments:Ft,result:f_,sample:gp,select:Ai,shuffle:P_,size:W_,some:fc,sortBy:O_,sortedIndex:dp,tail:ir,take:Br,tap:t_,template:h_,templateSettings:d_,throttle:x_,times:a_,toArray:pp,toPath:np,transpose:Js,unescape:u_,union:K_,uniq:Zs,unique:Zs,uniqueId:p_,unzip:Js,values:fr,where:k_,without:j_,wrap:__,zip:X_},Symbol.toStringTag,{value:"Module"}));var dh=xp(hO);dh._=dh;const fO=Object.freeze(Object.defineProperty({__proto__:null,VERSION:Mf,after:E_,all:hc,allKeys:ss,any:fc,assign:Kr,before:cp,bind:ap,bindAll:y_,chain:g_,chunk:Z_,clone:e_,collect:ei,compact:H_,compose:D_,constant:jf,contains:tn,countBy:N_,create:J2,debounce:T_,default:dh,defaults:tp,defer:b_,delay:op,detect:Qs,difference:vp,drop:ir,each:yn,escape:l_,every:hc,extend:ep,extendOwn:Kr,filter:Ai,find:Qs,findIndex:qc,findKey:lp,findLastIndex:up,findWhere:C_,first:Br,flatten:q_,foldl:Mr,foldr:dc,forEach:yn,functions:Ys,get:rp,groupBy:M_,has:n_,head:Br,identity:Wc,include:tn,includes:tn,indexBy:B_,indexOf:hp,initial:yp,inject:Mr,intersection:z_,invert:Zf,invoke:U_,isArguments:$c,isArray:ki,isArrayBuffer:Gf,isBoolean:$f,isDataView:Xs,isDate:L2,isElement:R2,isEmpty:W2,isEqual:G2,isError:k2,isFinite:M2,isFunction:Ct,isMap:K2,isMatch:zf,isNaN:qf,isNull:C2,isNumber:Wf,isObject:Ui,isRegExp:U2,isSet:X2,isString:Nc,isSymbol:Vf,isTypedArray:Kf,isUndefined:Nf,isWeakMap:z2,isWeakSet:Y2,iteratee:Gc,keys:mt,last:G_,lastIndexOf:I_,map:ei,mapObject:r_,matcher:cr,matches:cr,max:fp,memoize:v_,methods:Ys,min:F_,mixin:xp,negate:Hc,noop:sp,now:zr,object:Y_,omit:V_,once:S_,pairs:Q2,partial:pr,partition:$_,pick:mp,pluck:jc,property:Vc,propertyOf:s_,random:uc,range:Q_,reduce:Mr,reduceRight:dc,reject:L_,rest:ir,restArguments:Ft,result:f_,sample:gp,select:Ai,shuffle:P_,size:W_,some:fc,sortBy:O_,sortedIndex:dp,tail:ir,take:Br,tap:t_,template:h_,templateSettings:d_,throttle:x_,times:a_,toArray:pp,toPath:np,transpose:Js,unescape:u_,union:K_,uniq:Zs,unique:Zs,uniqueId:p_,unzip:Js,values:fr,where:k_,without:j_,wrap:__,zip:X_},Symbol.toStringTag,{value:"Module"})),ut=nw(fO);var Ua={},Xt={},Xl={exports:{}},ka={exports:{}},B0;function as(){if(B0)return ka.exports;B0=1;var n=(function(){return this===void 0})();if(n)ka.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(u,d){var h=Object.getOwnPropertyDescriptor(u,d);return!!(!h||h.writable||h.set)}};else{var e={}.hasOwnProperty,t={}.toString,i={}.constructor.prototype,r=function(u){var d=[];for(var h in u)e.call(u,h)&&d.push(h);return d},s=function(u,d){return{value:u[d]}},a=function(u,d,h){return u[d]=h.value,u},o=function(u){return u},c=function(u){try{return Object(u).constructor.prototype}catch{return i}},l=function(u){try{return t.call(u)==="[object Array]"}catch{return!1}};ka.exports={isArray:l,keys:r,names:r,defineProperty:a,getDescriptor:s,freeze:o,getPrototypeOf:c,isES5:n,propertyIsWritable:function(){return!0}}}return ka.exports}var us,N0;function Qe(){if(N0)return us;N0=1;var n={},e=as(),t=typeof navigator>"u",i={e:{}},r,s=typeof self<"u"?self:typeof window<"u"?window:typeof vi<"u"?vi:us!==void 0?us:null;function a(){try{var j=r;return r=null,j.apply(this,arguments)}catch(te){return i.e=te,i}}function o(j){return r=j,a}var c=function(j,te){var ne={}.hasOwnProperty;function ue(){this.constructor=j,this.constructor$=te;for(var he in te.prototype)ne.call(te.prototype,he)&&he.charAt(he.length-1)!=="$"&&(this[he+"$"]=te.prototype[he])}return ue.prototype=te.prototype,j.prototype=new ue,j.prototype};function l(j){return j==null||j===!0||j===!1||typeof j=="string"||typeof j=="number"}function u(j){return typeof j=="function"||typeof j=="object"&&j!==null}function d(j){return l(j)?new Error(D(j)):j}function h(j,te){var ne=j.length,ue=new Array(ne+1),he;for(he=0;he<ne;++he)ue[he]=j[he];return ue[he]=te,ue}function f(j,te,ne){if(e.isES5){var ue=Object.getOwnPropertyDescriptor(j,te);if(ue!=null)return ue.get==null&&ue.set==null?ue.value:ne}else return{}.hasOwnProperty.call(j,te)?j[te]:void 0}function p(j,te,ne){if(l(j))return j;var ue={value:ne,configurable:!0,enumerable:!1,writable:!0};return e.defineProperty(j,te,ue),j}function m(j){throw j}var g=(function(){var j=[Array.prototype,Object.prototype,Function.prototype],te=function(he){for(var fe=0;fe<j.length;++fe)if(j[fe]===he)return!0;return!1};if(e.isES5){var ne=Object.getOwnPropertyNames;return function(he){for(var fe=[],me=Object.create(null);he!=null&&!te(he);){var ve;try{ve=ne(he)}catch{return fe}for(var De=0;De<ve.length;++De){var Oe=ve[De];if(!me[Oe]){me[Oe]=!0;var We=Object.getOwnPropertyDescriptor(he,Oe);We!=null&&We.get==null&&We.set==null&&fe.push(Oe)}}he=e.getPrototypeOf(he)}return fe}}else{var ue={}.hasOwnProperty;return function(he){if(te(he))return[];var fe=[];e:for(var me in he)if(ue.call(he,me))fe.push(me);else{for(var ve=0;ve<j.length;++ve)if(ue.call(j[ve],me))continue e;fe.push(me)}return fe}}})(),y=/this\s*\.\s*\S+\s*=/;function v(j){try{if(typeof j=="function"){var te=e.names(j.prototype),ne=e.isES5&&te.length>1,ue=te.length>0&&!(te.length===1&&te[0]==="constructor"),he=y.test(j+"")&&e.names(j).length>0;if(ne||ue||he)return!0}return!1}catch{return!1}}function b(j){return j}var T=/^[a-z$_][a-z$_0-9]*$/i;function x(j){return T.test(j)}function _(j,te,ne){for(var ue=new Array(j),he=0;he<j;++he)ue[he]=te+he+ne;return ue}function D(j){try{return j+""}catch{return"[no string representation]"}}function w(j){return j!==null&&typeof j=="object"&&typeof j.message=="string"&&typeof j.name=="string"}function S(j){try{p(j,"isOperational",!0)}catch{}}function C(j){return j==null?!1:j instanceof Error.__BluebirdErrorTypes__.OperationalError||j.isOperational===!0}function O(j){return w(j)&&e.propertyIsWritable(j,"stack")}var I=(function(){return"stack"in new Error?function(j){return O(j)?j:new Error(D(j))}:function(j){if(O(j))return j;try{throw new Error(D(j))}catch(te){return te}}})();function L(j){return{}.toString.call(j)}function E(j,te,ne){for(var ue=e.names(j),he=0;he<ue.length;++he){var fe=ue[he];if(ne(fe))try{e.defineProperty(te,fe,e.getDescriptor(j,fe))}catch{}}}var $=function(j){return e.isArray(j)?j:null};if(typeof Symbol<"u"&&Symbol.iterator){var U=typeof Array.from=="function"?function(j){return Array.from(j)}:function(j){for(var te=[],ne=j[Symbol.iterator](),ue;!(ue=ne.next()).done;)te.push(ue.value);return te};$=function(j){return e.isArray(j)?j:j!=null&&typeof j[Symbol.iterator]=="function"?U(j):null}}var F=typeof process<"u"&&L(process).toLowerCase()==="[object process]",G=typeof process<"u"&&typeof n<"u";function W(j){return G?n[j]:void 0}function Y(){if(typeof Promise=="function")try{var j=new Promise(function(){});if({}.toString.call(j)==="[object Promise]")return Promise}catch{}}function P(j,te){return j.bind(te)}var V={isClass:v,isIdentifier:x,inheritedDataKeys:g,getDataPropertyOrDefault:f,thrower:m,isArray:e.isArray,asArray:$,notEnumerableProp:p,isPrimitive:l,isObject:u,isError:w,canEvaluate:t,errorObj:i,tryCatch:o,inherits:c,withAppended:h,maybeWrapAsError:d,toFastProperties:b,filledRange:_,toString:D,canAttachTrace:O,ensureErrorObject:I,originatesFromRejection:C,markAsOriginatingFromRejection:S,classString:L,copyDescriptors:E,hasDevTools:typeof chrome<"u"&&chrome&&typeof chrome.loadTimes=="function",isNode:F,hasEnvVariables:G,env:W,global:s,getNativePromise:Y,domainBind:P};V.isRecentNode=V.isNode&&(function(){var j=process.versions.node.split(".").map(Number);return j[0]===0&&j[1]>10||j[0]>0})(),V.isNode&&V.toFastProperties(process);try{throw new Error}catch(j){V.lastLineError=j}return us=V,us}var Fa={exports:{}},Yl,$0;function pO(){if($0)return Yl;$0=1;var n=Qe(),e,t=function(){throw new Error(`No async scheduler available

    See http://goo.gl/MqrFmX
`)},i=n.getNativePromise();if(n.isNode&&typeof MutationObserver>"u"){var r=vi.setImmediate,s=process.nextTick;e=n.isRecentNode?function(o){r.call(vi,o)}:function(o){s.call(process,o)}}else if(typeof i=="function"&&typeof i.resolve=="function"){var a=i.resolve();e=function(o){a.then(o)}}else typeof MutationObserver<"u"&&!(typeof window<"u"&&window.navigator&&(window.navigator.standalone||window.cordova))?e=(function(){var o=document.createElement("div"),c={attributes:!0},l=!1,u=document.createElement("div"),d=new MutationObserver(function(){o.classList.toggle("foo"),l=!1});d.observe(u,c);var h=function(){l||(l=!0,u.classList.toggle("foo"))};return function(p){var m=new MutationObserver(function(){m.disconnect(),p()});m.observe(o,c),h()}})():typeof setImmediate<"u"?e=function(o){setImmediate(o)}:typeof setTimeout<"u"?e=function(o){setTimeout(o,0)}:e=t;return Yl=e,Yl}var Ql,W0;function gO(){if(W0)return Ql;W0=1;function n(t,i,r,s,a){for(var o=0;o<a;++o)r[o+s]=t[o+i],t[o+i]=void 0}function e(t){this._capacity=t,this._length=0,this._front=0}return e.prototype._willBeOverCapacity=function(t){return this._capacity<t},e.prototype._pushOne=function(t){var i=this.length();this._checkCapacity(i+1);var r=this._front+i&this._capacity-1;this[r]=t,this._length=i+1},e.prototype.push=function(t,i,r){var s=this.length()+3;if(this._willBeOverCapacity(s)){this._pushOne(t),this._pushOne(i),this._pushOne(r);return}var a=this._front+s-3;this._checkCapacity(s);var o=this._capacity-1;this[a+0&o]=t,this[a+1&o]=i,this[a+2&o]=r,this._length=s},e.prototype.shift=function(){var t=this._front,i=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,i},e.prototype.length=function(){return this._length},e.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},e.prototype._resizeTo=function(t){var i=this._capacity;this._capacity=t;var r=this._front,s=this._length,a=r+s&i-1;n(this,0,this,i,a)},Ql=e,Ql}var V0;function mO(){if(V0)return Fa.exports;V0=1;var n;try{throw new Error}catch(c){n=c}var e=pO(),t=gO(),i=Qe();function r(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new t(16),this._normalQueue=new t(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var c=this;this.drainQueues=function(){c._drainQueues()},this._schedule=e}r.prototype.setScheduler=function(c){var l=this._schedule;return this._schedule=c,this._customScheduler=!0,l},r.prototype.hasCustomScheduler=function(){return this._customScheduler},r.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},r.prototype.disableTrampolineIfNecessary=function(){i.hasDevTools&&(this._trampolineEnabled=!1)},r.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},r.prototype.fatalError=function(c,l){l?(process.stderr.write("Fatal "+(c instanceof Error?c.stack:c)+`
`),process.exit(2)):this.throwLater(c)},r.prototype.throwLater=function(c,l){if(arguments.length===1&&(l=c,c=function(){throw l}),typeof setTimeout<"u")setTimeout(function(){c(l)},0);else try{this._schedule(function(){c(l)})}catch{throw new Error(`No async scheduler available

    See http://goo.gl/MqrFmX
`)}};function s(c,l,u){this._lateQueue.push(c,l,u),this._queueTick()}function a(c,l,u){this._normalQueue.push(c,l,u),this._queueTick()}function o(c){this._normalQueue._pushOne(c),this._queueTick()}return i.hasDevTools?(r.prototype.invokeLater=function(c,l,u){this._trampolineEnabled?s.call(this,c,l,u):this._schedule(function(){setTimeout(function(){c.call(l,u)},100)})},r.prototype.invoke=function(c,l,u){this._trampolineEnabled?a.call(this,c,l,u):this._schedule(function(){c.call(l,u)})},r.prototype.settlePromises=function(c){this._trampolineEnabled?o.call(this,c):this._schedule(function(){c._settlePromises()})}):(r.prototype.invokeLater=s,r.prototype.invoke=a,r.prototype.settlePromises=o),r.prototype._drainQueue=function(c){for(;c.length()>0;){var l=c.shift();if(typeof l!="function"){l._settlePromises();continue}var u=c.shift(),d=c.shift();l.call(u,d)}},r.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},r.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},r.prototype._reset=function(){this._isTickUsed=!1},Fa.exports=r,Fa.exports.firstLineError=n,Fa.exports}var Zl,G0;function wi(){if(G0)return Zl;G0=1;var n=as(),e=n.freeze,t=Qe(),i=t.inherits,r=t.notEnumerableProp;function s(y,v){function b(T){if(!(this instanceof b))return new b(T);r(this,"message",typeof T=="string"?T:v),r(this,"name",y),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return i(b,Error),b}var a,o,c=s("Warning","warning"),l=s("CancellationError","cancellation error"),u=s("TimeoutError","timeout error"),d=s("AggregateError","aggregate error");try{a=TypeError,o=RangeError}catch{a=s("TypeError","type error"),o=s("RangeError","range error")}for(var h="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),f=0;f<h.length;++f)typeof Array.prototype[h[f]]=="function"&&(d.prototype[h[f]]=Array.prototype[h[f]]);n.defineProperty(d.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),d.prototype.isOperational=!0;var p=0;d.prototype.toString=function(){var y=Array(p*4+1).join(" "),v=`
`+y+`AggregateError of:
`;p++,y=Array(p*4+1).join(" ");for(var b=0;b<this.length;++b){for(var T=this[b]===this?"[Circular AggregateError]":this[b]+"",x=T.split(`
`),_=0;_<x.length;++_)x[_]=y+x[_];T=x.join(`
`),v+=T+`
`}return p--,v};function m(y){if(!(this instanceof m))return new m(y);r(this,"name","OperationalError"),r(this,"message",y),this.cause=y,this.isOperational=!0,y instanceof Error?(r(this,"message",y.message),r(this,"stack",y.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}i(m,Error);var g=Error.__BluebirdErrorTypes__;return g||(g=e({CancellationError:l,TimeoutError:u,OperationalError:m,RejectionError:m,AggregateError:d}),n.defineProperty(Error,"__BluebirdErrorTypes__",{value:g,writable:!1,enumerable:!1,configurable:!1})),Zl={Error,TypeError:a,RangeError:o,CancellationError:g.CancellationError,OperationalError:g.OperationalError,TimeoutError:g.TimeoutError,AggregateError:g.AggregateError,Warning:c},Zl}var Jl,H0;function yO(){return H0||(H0=1,Jl=function(n,e){var t=Qe(),i=t.errorObj,r=t.isObject;function s(d,h){if(r(d)){if(d instanceof n)return d;var f=o(d);if(f===i){h&&h._pushContext();var p=n.reject(f.e);return h&&h._popContext(),p}else if(typeof f=="function"){if(l(d)){var p=new n(e);return d._then(p._fulfill,p._reject,void 0,p,null),p}return u(d,f,h)}}return d}function a(d){return d.then}function o(d){try{return a(d)}catch(h){return i.e=h,i}}var c={}.hasOwnProperty;function l(d){try{return c.call(d,"_promise0")}catch{return!1}}function u(d,h,f){var p=new n(e),m=p;f&&f._pushContext(),p._captureStackTrace(),f&&f._popContext();var g=!0,y=t.tryCatch(h).call(d,v,b);g=!1,p&&y===i&&(p._rejectCallback(y.e,!0,!0),p=null);function v(T){p&&(p._resolveCallback(T),p=null)}function b(T){p&&(p._rejectCallback(T,g,!0),p=null)}return m}return s}),Jl}var eu,q0;function vO(){return q0||(q0=1,eu=function(n,e,t,i,r){var s=Qe();s.isArray;function a(c){switch(c){case-2:return[];case-3:return{}}}function o(c){var l=this._promise=new n(e);c instanceof n&&l._propagateFrom(c,3),l._setOnCancel(this),this._values=c,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return s.inherits(o,r),o.prototype.length=function(){return this._length},o.prototype.promise=function(){return this._promise},o.prototype._init=function c(l,u){var d=t(this._values,this._promise);if(d instanceof n){d=d._target();var h=d._bitField;if(this._values=d,(h&50397184)===0)return this._promise._setAsyncGuaranteed(),d._then(c,this._reject,void 0,this,u);if((h&33554432)!==0)d=d._value();else return(h&16777216)!==0?this._reject(d._reason()):this._cancel()}if(d=s.asArray(d),d===null){var f=i("expecting an array or an iterable object but got "+s.classString(d)).reason();this._promise._rejectCallback(f,!1);return}if(d.length===0){u===-5?this._resolveEmptyArray():this._resolve(a(u));return}this._iterate(d)},o.prototype._iterate=function(c){var l=this.getActualLength(c.length);this._length=l,this._values=this.shouldCopyValues()?new Array(l):this._values;for(var u=this._promise,d=!1,h=null,f=0;f<l;++f){var p=t(c[f],u);p instanceof n?(p=p._target(),h=p._bitField):h=null,d?h!==null&&p.suppressUnhandledRejections():h!==null?(h&50397184)===0?(p._proxy(this,f),this._values[f]=p):(h&33554432)!==0?d=this._promiseFulfilled(p._value(),f):(h&16777216)!==0?d=this._promiseRejected(p._reason(),f):d=this._promiseCancelled(f):d=this._promiseFulfilled(p,f)}d||u._setAsyncGuaranteed()},o.prototype._isResolved=function(){return this._values===null},o.prototype._resolve=function(c){this._values=null,this._promise._fulfill(c)},o.prototype._cancel=function(){this._isResolved()||!this._promise._isCancellable()||(this._values=null,this._promise._cancel())},o.prototype._reject=function(c){this._values=null,this._promise._rejectCallback(c,!1)},o.prototype._promiseFulfilled=function(c,l){this._values[l]=c;var u=++this._totalResolved;return u>=this._length?(this._resolve(this._values),!0):!1},o.prototype._promiseCancelled=function(){return this._cancel(),!0},o.prototype._promiseRejected=function(c){return this._totalResolved++,this._reject(c),!0},o.prototype._resultCancelled=function(){if(!this._isResolved()){var c=this._values;if(this._cancel(),c instanceof n)c.cancel();else for(var l=0;l<c.length;++l)c[l]instanceof n&&c[l].cancel()}},o.prototype.shouldCopyValues=function(){return!0},o.prototype.getActualLength=function(c){return c},o}),eu}var tu,j0;function bO(){return j0||(j0=1,tu=function(n){var e=!1,t=[];n.prototype._promiseCreated=function(){},n.prototype._pushContext=function(){},n.prototype._popContext=function(){return null},n._peekContext=n.prototype._peekContext=function(){};function i(){this._trace=new i.CapturedTrace(s())}i.prototype._pushContext=function(){this._trace!==void 0&&(this._trace._promiseCreated=null,t.push(this._trace))},i.prototype._popContext=function(){if(this._trace!==void 0){var a=t.pop(),o=a._promiseCreated;return a._promiseCreated=null,o}return null};function r(){if(e)return new i}function s(){var a=t.length-1;if(a>=0)return t[a]}return i.CapturedTrace=null,i.create=r,i.deactivateLongStackTraces=function(){},i.activateLongStackTraces=function(){var a=n.prototype._pushContext,o=n.prototype._popContext,c=n._peekContext,l=n.prototype._peekContext,u=n.prototype._promiseCreated;i.deactivateLongStackTraces=function(){n.prototype._pushContext=a,n.prototype._popContext=o,n._peekContext=c,n.prototype._peekContext=l,n.prototype._promiseCreated=u,e=!1},e=!0,n.prototype._pushContext=i.prototype._pushContext,n.prototype._popContext=i.prototype._popContext,n._peekContext=n.prototype._peekContext=s,n.prototype._promiseCreated=function(){var d=this._peekContext();d&&d._promiseCreated==null&&(d._promiseCreated=this)}},i}),tu}var nu,K0;function xO(){return K0||(K0=1,nu=function(n,e){var t=n._getDomain,i=n._async,r=wi().Warning,s=Qe(),a=s.canAttachTrace,o,c,l=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,u=/\((?:timers\.js):\d+:\d+\)/,d=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,h=null,f=null,p=!1,m,g=!!(s.env("BLUEBIRD_DEBUG")!=0&&(s.env("BLUEBIRD_DEBUG")||s.env("NODE_ENV")==="development")),y=!!(s.env("BLUEBIRD_WARNINGS")!=0&&(g||s.env("BLUEBIRD_WARNINGS"))),v=!!(s.env("BLUEBIRD_LONG_STACK_TRACES")!=0&&(g||s.env("BLUEBIRD_LONG_STACK_TRACES"))),b=s.env("BLUEBIRD_W_FORGOTTEN_RETURN")!=0&&(y||!!s.env("BLUEBIRD_W_FORGOTTEN_RETURN"));n.prototype.suppressUnhandledRejections=function(){var H=this._target();H._bitField=H._bitField&-1048577|524288},n.prototype._ensurePossibleRejectionHandled=function(){(this._bitField&524288)===0&&(this._setRejectionIsUnhandled(),i.invokeLater(this._notifyUnhandledRejection,this,void 0))},n.prototype._notifyUnhandledRejectionIsHandled=function(){Oe("rejectionHandled",o,void 0,this)},n.prototype._setReturnedNonUndefined=function(){this._bitField=this._bitField|268435456},n.prototype._returnedNonUndefined=function(){return(this._bitField&268435456)!==0},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var H=this._settledValue();this._setUnhandledRejectionIsNotified(),Oe("unhandledRejection",c,H,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=this._bitField|262144},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&-262145},n.prototype._isUnhandledRejectionNotified=function(){return(this._bitField&262144)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=this._bitField|1048576},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&-1048577,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(this._bitField&1048576)>0},n.prototype._warn=function(H,X,ee){return te(H,X,ee||this)},n.onPossiblyUnhandledRejection=function(H){var X=t();c=typeof H=="function"?X===null?H:s.domainBind(X,H):void 0},n.onUnhandledRejectionHandled=function(H){var X=t();o=typeof H=="function"?X===null?H:s.domainBind(X,H):void 0};var T=function(){};n.longStackTraces=function(){if(i.haveItemsQueued()&&!Q.longStackTraces)throw new Error(`cannot enable long stack traces after promises have been created

    See http://goo.gl/MqrFmX
`);if(!Q.longStackTraces&&Z()){var H=n.prototype._captureStackTrace,X=n.prototype._attachExtraTrace;Q.longStackTraces=!0,T=function(){if(i.haveItemsQueued()&&!Q.longStackTraces)throw new Error(`cannot enable long stack traces after promises have been created

    See http://goo.gl/MqrFmX
`);n.prototype._captureStackTrace=H,n.prototype._attachExtraTrace=X,e.deactivateLongStackTraces(),i.enableTrampoline(),Q.longStackTraces=!1},n.prototype._captureStackTrace=Y,n.prototype._attachExtraTrace=P,e.activateLongStackTraces(),i.disableTrampolineIfNecessary()}},n.hasLongStackTraces=function(){return Q.longStackTraces&&Z()};var x=(function(){try{if(typeof CustomEvent=="function"){var H=new CustomEvent("CustomEvent");return s.global.dispatchEvent(H),function(X,ee){var ae=new CustomEvent(X.toLowerCase(),{detail:ee,cancelable:!0});return!s.global.dispatchEvent(ae)}}else if(typeof Event=="function"){var H=new Event("CustomEvent");return s.global.dispatchEvent(H),function(ee,ae){var pe=new Event(ee.toLowerCase(),{cancelable:!0});return pe.detail=ae,!s.global.dispatchEvent(pe)}}else{var H=document.createEvent("CustomEvent");return H.initCustomEvent("testingtheevent",!1,!0,{}),s.global.dispatchEvent(H),function(ee,ae){var pe=document.createEvent("CustomEvent");return pe.initCustomEvent(ee.toLowerCase(),!1,!0,ae),!s.global.dispatchEvent(pe)}}}catch{}return function(){return!1}})(),_=(function(){return s.isNode?function(){return process.emit.apply(process,arguments)}:s.global?function(H){var X="on"+H.toLowerCase(),ee=s.global[X];return ee?(ee.apply(s.global,[].slice.call(arguments,1)),!0):!1}:function(){return!1}})();function D(H,X){return{promise:X}}var w={promiseCreated:D,promiseFulfilled:D,promiseRejected:D,promiseResolved:D,promiseCancelled:D,promiseChained:function(H,X,ee){return{promise:X,child:ee}},warning:function(H,X){return{warning:X}},unhandledRejection:function(H,X,ee){return{reason:X,promise:ee}},rejectionHandled:D},S=function(H){var X=!1;try{X=_.apply(null,arguments)}catch(ae){i.throwLater(ae),X=!0}var ee=!1;try{ee=x(H,w[H].apply(null,arguments))}catch(ae){i.throwLater(ae),ee=!0}return ee||X};n.config=function(H){if(H=Object(H),"longStackTraces"in H&&(H.longStackTraces?n.longStackTraces():!H.longStackTraces&&n.hasLongStackTraces()&&T()),"warnings"in H){var X=H.warnings;Q.warnings=!!X,b=Q.warnings,s.isObject(X)&&"wForgottenReturn"in X&&(b=!!X.wForgottenReturn)}if("cancellation"in H&&H.cancellation&&!Q.cancellation){if(i.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");n.prototype._clearCancellationData=$,n.prototype._propagateFrom=U,n.prototype._onCancel=L,n.prototype._setOnCancel=E,n.prototype._attachCancellationCallback=I,n.prototype._execute=O,G=U,Q.cancellation=!0}return"monitoring"in H&&(H.monitoring&&!Q.monitoring?(Q.monitoring=!0,n.prototype._fireEvent=S):!H.monitoring&&Q.monitoring&&(Q.monitoring=!1,n.prototype._fireEvent=C)),n};function C(){return!1}n.prototype._fireEvent=C,n.prototype._execute=function(H,X,ee){try{H(X,ee)}catch(ae){return ae}},n.prototype._onCancel=function(){},n.prototype._setOnCancel=function(H){},n.prototype._attachCancellationCallback=function(H){},n.prototype._captureStackTrace=function(){},n.prototype._attachExtraTrace=function(){},n.prototype._clearCancellationData=function(){},n.prototype._propagateFrom=function(H,X){};function O(H,X,ee){var ae=this;try{H(X,ee,function(pe){if(typeof pe!="function")throw new TypeError("onCancel must be a function, got: "+s.toString(pe));ae._attachCancellationCallback(pe)})}catch(pe){return pe}}function I(H){if(!this._isCancellable())return this;var X=this._onCancel();X!==void 0?s.isArray(X)?X.push(H):this._setOnCancel([X,H]):this._setOnCancel(H)}function L(){return this._onCancelField}function E(H){this._onCancelField=H}function $(){this._cancellationParent=void 0,this._onCancelField=void 0}function U(H,X){if((X&1)!==0){this._cancellationParent=H;var ee=H._branchesRemainingToCancel;ee===void 0&&(ee=0),H._branchesRemainingToCancel=ee+1}(X&2)!==0&&H._isBound()&&this._setBoundTo(H._boundTo)}function F(H,X){(X&2)!==0&&H._isBound()&&this._setBoundTo(H._boundTo)}var G=F;function W(){var H=this._boundTo;return H!==void 0&&H instanceof n?H.isFulfilled()?H.value():void 0:H}function Y(){this._trace=new se(this._peekContext())}function P(H,X){if(a(H)){var ee=this._trace;if(ee!==void 0&&X&&(ee=ee._parent),ee!==void 0)ee.attachExtraTrace(H);else if(!H.__stackCleaned__){var ae=ve(H);s.notEnumerableProp(H,"stack",ae.message+`
`+ae.stack.join(`
`)),s.notEnumerableProp(H,"__stackCleaned__",!0)}}}function V(H,X,ee,ae,pe){if(H===void 0&&X!==null&&b){if(pe!==void 0&&pe._returnedNonUndefined()||(ae._bitField&65535)===0)return;ee&&(ee=ee+" ");var Te="",Ce="";if(X._trace){for(var Se=X._trace.stack.split(`
`),we=fe(Se),Ve=we.length-1;Ve>=0;--Ve){var J=we[Ve];if(!u.test(J)){var de=J.match(d);de&&(Te="at "+de[1]+":"+de[2]+":"+de[3]+" ");break}}if(we.length>0){for(var be=we[0],Ve=0;Ve<Se.length;++Ve)if(Se[Ve]===be){Ve>0&&(Ce=`
`+Se[Ve-1]);break}}}var Ee="a promise was created in a "+ee+"handler "+Te+"but was not returned from it, see http://goo.gl/rRqMUw"+Ce;ae._warn(Ee,!0,X)}}function j(H,X){var ee=H+" is deprecated and will be removed in a future version.";return X&&(ee+=" Use "+X+" instead."),te(ee)}function te(H,X,ee){if(Q.warnings){var ae=new r(H),pe;if(X)ee._attachExtraTrace(ae);else if(Q.longStackTraces&&(pe=n._peekContext()))pe.attachExtraTrace(ae);else{var Te=ve(ae);ae.stack=Te.message+`
`+Te.stack.join(`
`)}S("warning",ae)||De(ae,"",!0)}}function ne(H,X){for(var ee=0;ee<X.length-1;++ee)X[ee].push("From previous event:"),X[ee]=X[ee].join(`
`);return ee<X.length&&(X[ee]=X[ee].join(`
`)),H+`
`+X.join(`
`)}function ue(H){for(var X=0;X<H.length;++X)(H[X].length===0||X+1<H.length&&H[X][0]===H[X+1][0])&&(H.splice(X,1),X--)}function he(H){for(var X=H[0],ee=1;ee<H.length;++ee){for(var ae=H[ee],pe=X.length-1,Te=X[pe],Ce=-1,Se=ae.length-1;Se>=0;--Se)if(ae[Se]===Te){Ce=Se;break}for(var Se=Ce;Se>=0;--Se){var we=ae[Se];if(X[pe]===we)X.pop(),pe--;else break}X=ae}}function fe(H){for(var X=[],ee=0;ee<H.length;++ee){var ae=H[ee],pe=ae==="    (No stack trace)"||h.test(ae),Te=pe&&q(ae);pe&&!Te&&(p&&ae.charAt(0)!==" "&&(ae="    "+ae),X.push(ae))}return X}function me(H){for(var X=H.stack.replace(/\s+$/g,"").split(`
`),ee=0;ee<X.length;++ee){var ae=X[ee];if(ae==="    (No stack trace)"||h.test(ae))break}return ee>0&&H.name!="SyntaxError"&&(X=X.slice(ee)),X}function ve(H){var X=H.stack,ee=H.toString();return X=typeof X=="string"&&X.length>0?me(H):["    (No stack trace)"],{message:ee,stack:H.name=="SyntaxError"?X:fe(X)}}function De(H,X,ee){if(typeof console<"u"){var ae;if(s.isObject(H)){var pe=H.stack;ae=X+f(pe,H)}else ae=X+String(H);typeof m=="function"?m(ae,ee):(typeof console.log=="function"||typeof console.log=="object")&&console.log(ae)}}function Oe(H,X,ee,ae){var pe=!1;try{typeof X=="function"&&(pe=!0,H==="rejectionHandled"?X(ae):X(ee,ae))}catch(Te){i.throwLater(Te)}H==="unhandledRejection"?!S(H,ee,ae)&&!pe&&De(ee,"Unhandled rejection "):S(H,ae)}function We(H){var X;if(typeof H=="function")X="[function "+(H.name||"anonymous")+"]";else{X=H&&typeof H.toString=="function"?H.toString():s.toString(H);var ee=/\[object [a-zA-Z0-9$_]+\]/;if(ee.test(X))try{var ae=JSON.stringify(H);X=ae}catch{}X.length===0&&(X="(empty array)")}return"(<"+A(X)+">, no stack trace)"}function A(H){var X=41;return H.length<X?H:H.substr(0,X-3)+"..."}function Z(){return typeof ce=="function"}var q=function(){return!1},N=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function B(H){var X=H.match(N);if(X)return{fileName:X[1],line:parseInt(X[2],10)}}function z(H,X){if(Z()){for(var ee=H.stack.split(`
`),ae=X.stack.split(`
`),pe=-1,Te=-1,Ce,Se,we=0;we<ee.length;++we){var Ve=B(ee[we]);if(Ve){Ce=Ve.fileName,pe=Ve.line;break}}for(var we=0;we<ae.length;++we){var Ve=B(ae[we]);if(Ve){Se=Ve.fileName,Te=Ve.line;break}}pe<0||Te<0||!Ce||!Se||Ce!==Se||pe>=Te||(q=function(J){if(l.test(J))return!0;var de=B(J);return!!(de&&de.fileName===Ce&&pe<=de.line&&de.line<=Te)})}}function se(H){this._parent=H,this._promisesCreated=0;var X=this._length=1+(H===void 0?0:H._length);ce(this,se),X>32&&this.uncycle()}s.inherits(se,Error),e.CapturedTrace=se,se.prototype.uncycle=function(){var H=this._length;if(!(H<2)){for(var X=[],ee={},ae=0,pe=this;pe!==void 0;++ae)X.push(pe),pe=pe._parent;H=this._length=ae;for(var ae=H-1;ae>=0;--ae){var Te=X[ae].stack;ee[Te]===void 0&&(ee[Te]=ae)}for(var ae=0;ae<H;++ae){var Ce=X[ae].stack,Se=ee[Ce];if(Se!==void 0&&Se!==ae){Se>0&&(X[Se-1]._parent=void 0,X[Se-1]._length=1),X[ae]._parent=void 0,X[ae]._length=1;var we=ae>0?X[ae-1]:this;Se<H-1?(we._parent=X[Se+1],we._parent.uncycle(),we._length=we._parent._length+1):(we._parent=void 0,we._length=1);for(var Ve=we._length+1,J=ae-2;J>=0;--J)X[J]._length=Ve,Ve++;return}}}},se.prototype.attachExtraTrace=function(H){if(!H.__stackCleaned__){this.uncycle();for(var X=ve(H),ee=X.message,ae=[X.stack],pe=this;pe!==void 0;)ae.push(fe(pe.stack.split(`
`))),pe=pe._parent;he(ae),ue(ae),s.notEnumerableProp(H,"stack",ne(ee,ae)),s.notEnumerableProp(H,"__stackCleaned__",!0)}};var ce=(function(){var X=/^\s*at\s*/,ee=function(Ce,Se){return typeof Ce=="string"?Ce:Se.name!==void 0&&Se.message!==void 0?Se.toString():We(Se)};if(typeof Error.stackTraceLimit=="number"&&typeof Error.captureStackTrace=="function"){Error.stackTraceLimit+=6,h=X,f=ee;var ae=Error.captureStackTrace;return q=function(Ce){return l.test(Ce)},function(Ce,Se){Error.stackTraceLimit+=6,ae(Ce,Se),Error.stackTraceLimit-=6}}var pe=new Error;if(typeof pe.stack=="string"&&pe.stack.split(`
`)[0].indexOf("stackDetection@")>=0)return h=/@/,f=ee,p=!0,function(Se){Se.stack=new Error().stack};var Te;try{throw new Error}catch(Ce){Te="stack"in Ce}return!("stack"in pe)&&Te&&typeof Error.stackTraceLimit=="number"?(h=X,f=ee,function(Se){Error.stackTraceLimit+=6;try{throw new Error}catch(we){Se.stack=we.stack}Error.stackTraceLimit-=6}):(f=function(Ce,Se){return typeof Ce=="string"?Ce:(typeof Se=="object"||typeof Se=="function")&&Se.name!==void 0&&Se.message!==void 0?Se.toString():We(Se)},null)})();typeof console<"u"&&typeof console.warn<"u"&&(m=function(H){console.warn(H)},s.isNode&&process.stderr.isTTY?m=function(H,X){var ee=X?"\x1B[33m":"\x1B[31m";console.warn(ee+H+`\x1B[0m
`)}:!s.isNode&&typeof new Error().stack=="string"&&(m=function(H,X){console.warn("%c"+H,X?"color: darkorange":"color: red")}));var Q={warnings:y,longStackTraces:!1,cancellation:!1,monitoring:!1};return v&&n.longStackTraces(),{longStackTraces:function(){return Q.longStackTraces},warnings:function(){return Q.warnings},cancellation:function(){return Q.cancellation},monitoring:function(){return Q.monitoring},propagateFromFunction:function(){return G},boundValueFunction:function(){return W},checkForgottenReturns:V,setBounds:z,warn:te,deprecated:j,CapturedTrace:se,fireDomEvent:x,fireGlobalEvent:_}}),nu}var iu,z0;function TO(){return z0||(z0=1,iu=function(n,e){var t=Qe(),i=n.CancellationError,r=t.errorObj;function s(d,h,f){this.promise=d,this.type=h,this.handler=f,this.called=!1,this.cancelPromise=null}s.prototype.isFinallyHandler=function(){return this.type===0};function a(d){this.finallyHandler=d}a.prototype._resultCancelled=function(){o(this.finallyHandler)};function o(d,h){return d.cancelPromise!=null?(arguments.length>1?d.cancelPromise._reject(h):d.cancelPromise._cancel(),d.cancelPromise=null,!0):!1}function c(){return u.call(this,this.promise._target()._settledValue())}function l(d){if(!o(this,d))return r.e=d,r}function u(d){var h=this.promise,f=this.handler;if(!this.called){this.called=!0;var p=this.isFinallyHandler()?f.call(h._boundValue()):f.call(h._boundValue(),d);if(p!==void 0){h._setReturnedNonUndefined();var m=e(p,h);if(m instanceof n){if(this.cancelPromise!=null)if(m._isCancelled()){var g=new i("late cancellation observer");return h._attachExtraTrace(g),r.e=g,r}else m.isPending()&&m._attachCancellationCallback(new a(this));return m._then(c,l,void 0,this,void 0)}}}return h.isRejected()?(o(this),r.e=d,r):(o(this),d)}return n.prototype._passThrough=function(d,h,f,p){return typeof d!="function"?this.then():this._then(f,p,void 0,new s(this,h,d),void 0)},n.prototype.lastly=n.prototype.finally=function(d){return this._passThrough(d,0,u,u)},n.prototype.tap=function(d){return this._passThrough(d,1,u)},s}),iu}var ru,X0;function _O(){return X0||(X0=1,ru=function(n){var e=Qe(),t=as().keys,i=e.tryCatch,r=e.errorObj;function s(a,o,c){return function(l){var u=c._boundValue();e:for(var d=0;d<a.length;++d){var h=a[d];if(h===Error||h!=null&&h.prototype instanceof Error){if(l instanceof h)return i(o).call(u,l)}else if(typeof h=="function"){var f=i(h).call(u,l);if(f===r)return f;if(f)return i(o).call(u,l)}else if(e.isObject(l)){for(var p=t(h),m=0;m<p.length;++m){var g=p[m];if(h[g]!=l[g])continue e}return i(o).call(u,l)}}return n}}return s}),ru}var su,Y0;function J_(){if(Y0)return su;Y0=1;var n=Qe(),e=n.maybeWrapAsError,t=wi(),i=t.OperationalError,r=as();function s(l){return l instanceof Error&&r.getPrototypeOf(l)===Error.prototype}var a=/^(?:name|message|stack|cause)$/;function o(l){var u;if(s(l)){u=new i(l),u.name=l.name,u.message=l.message,u.stack=l.stack;for(var d=r.keys(l),h=0;h<d.length;++h){var f=d[h];a.test(f)||(u[f]=l[f])}return u}return n.markAsOriginatingFromRejection(l),l}function c(l,u){return function(d,h){if(l!==null){if(d){var f=o(e(d));l._attachExtraTrace(f),l._reject(f)}else if(!u)l._fulfill(h);else{for(var p=arguments.length,m=new Array(Math.max(p-1,0)),g=1;g<p;++g)m[g-1]=arguments[g];l._fulfill(m)}l=null}}}return su=c,su}var au,Q0;function DO(){return Q0||(Q0=1,au=function(n,e,t,i,r){var s=Qe(),a=s.tryCatch;n.method=function(o){if(typeof o!="function")throw new n.TypeError("expecting a function but got "+s.classString(o));return function(){var c=new n(e);c._captureStackTrace(),c._pushContext();var l=a(o).apply(this,arguments),u=c._popContext();return r.checkForgottenReturns(l,u,"Promise.method",c),c._resolveFromSyncValue(l),c}},n.attempt=n.try=function(o){if(typeof o!="function")return i("expecting a function but got "+s.classString(o));var c=new n(e);c._captureStackTrace(),c._pushContext();var l;if(arguments.length>1){r.deprecated("calling Promise.try with more than 1 argument");var u=arguments[1],d=arguments[2];l=s.isArray(u)?a(o).apply(d,u):a(o).call(d,u)}else l=a(o)();var h=c._popContext();return r.checkForgottenReturns(l,h,"Promise.try",c),c._resolveFromSyncValue(l),c},n.prototype._resolveFromSyncValue=function(o){o===s.errorObj?this._rejectCallback(o.e,!1):this._resolveCallback(o,!0)}}),au}var ou,Z0;function EO(){return Z0||(Z0=1,ou=function(n,e,t,i){var r=!1,s=function(l,u){this._reject(u)},a=function(l,u){u.promiseRejectionQueued=!0,u.bindingPromise._then(s,s,null,this,l)},o=function(l,u){(this._bitField&50397184)===0&&this._resolveCallback(u.target)},c=function(l,u){u.promiseRejectionQueued||this._reject(l)};n.prototype.bind=function(l){r||(r=!0,n.prototype._propagateFrom=i.propagateFromFunction(),n.prototype._boundValue=i.boundValueFunction());var u=t(l),d=new n(e);d._propagateFrom(this,1);var h=this._target();if(d._setBoundTo(u),u instanceof n){var f={promiseRejectionQueued:!1,promise:d,target:h,bindingPromise:u};h._then(e,a,void 0,d,f),u._then(o,c,void 0,d,f),d._setOnCancel(u)}else d._resolveCallback(h);return d},n.prototype._setBoundTo=function(l){l!==void 0?(this._bitField=this._bitField|2097152,this._boundTo=l):this._bitField=this._bitField&-2097153},n.prototype._isBound=function(){return(this._bitField&2097152)===2097152},n.bind=function(l,u){return n.resolve(u).bind(l)}}),ou}var cu,J0;function SO(){return J0||(J0=1,cu=function(n,e,t,i){var r=Qe(),s=r.tryCatch,a=r.errorObj,o=n._async;n.prototype.break=n.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var c=this,l=c;c._isCancellable();){if(!c._cancelBy(l)){l._isFollowing()?l._followee().cancel():l._cancelBranched();break}var u=c._cancellationParent;if(u==null||!u._isCancellable()){c._isFollowing()?c._followee().cancel():c._cancelBranched();break}else c._isFollowing()&&c._followee().cancel(),c._setWillBeCancelled(),l=c,c=u}},n.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},n.prototype._enoughBranchesHaveCancelled=function(){return this._branchesRemainingToCancel===void 0||this._branchesRemainingToCancel<=0},n.prototype._cancelBy=function(c){return c===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},n.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},n.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),o.invoke(this._cancelPromises,this,void 0))},n.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},n.prototype._unsetOnCancel=function(){this._onCancelField=void 0},n.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},n.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},n.prototype._doInvokeOnCancel=function(c,l){if(r.isArray(c))for(var u=0;u<c.length;++u)this._doInvokeOnCancel(c[u],l);else if(c!==void 0)if(typeof c=="function"){if(!l){var d=s(c).call(this._boundValue());d===a&&(this._attachExtraTrace(d.e),o.throwLater(d.e))}}else c._resultCancelled(this)},n.prototype._invokeOnCancel=function(){var c=this._onCancel();this._unsetOnCancel(),o.invoke(this._doInvokeOnCancel,this,c)},n.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},n.prototype._resultCancelled=function(){this.cancel()}}),cu}var lu,ey;function AO(){return ey||(ey=1,lu=function(n){function e(){return this.value}function t(){throw this.reason}n.prototype.return=n.prototype.thenReturn=function(i){return i instanceof n&&i.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:i},void 0)},n.prototype.throw=n.prototype.thenThrow=function(i){return this._then(t,void 0,void 0,{reason:i},void 0)},n.prototype.catchThrow=function(i){if(arguments.length<=1)return this._then(void 0,t,void 0,{reason:i},void 0);var r=arguments[1],s=function(){throw r};return this.caught(i,s)},n.prototype.catchReturn=function(i){if(arguments.length<=1)return i instanceof n&&i.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:i},void 0);var r=arguments[1];r instanceof n&&r.suppressUnhandledRejections();var s=function(){return r};return this.caught(i,s)}}),lu}var uu,ty;function wO(){return ty||(ty=1,uu=function(n){function e(c){c!==void 0?(c=c._target(),this._bitField=c._bitField,this._settledValueField=c._isFateSealed()?c._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var t=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError(`cannot get fulfillment value of a non-fulfilled promise

    See http://goo.gl/MqrFmX
`);return this._settledValue()},i=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError(`cannot get rejection reason of a non-rejected promise

    See http://goo.gl/MqrFmX
`);return this._settledValue()},r=e.prototype.isFulfilled=function(){return(this._bitField&33554432)!==0},s=e.prototype.isRejected=function(){return(this._bitField&16777216)!==0},a=e.prototype.isPending=function(){return(this._bitField&50397184)===0},o=e.prototype.isResolved=function(){return(this._bitField&50331648)!==0};e.prototype.isCancelled=function(){return(this._bitField&8454144)!==0},n.prototype.__isCancelled=function(){return(this._bitField&65536)===65536},n.prototype._isCancelled=function(){return this._target().__isCancelled()},n.prototype.isCancelled=function(){return(this._target()._bitField&8454144)!==0},n.prototype.isPending=function(){return a.call(this._target())},n.prototype.isRejected=function(){return s.call(this._target())},n.prototype.isFulfilled=function(){return r.call(this._target())},n.prototype.isResolved=function(){return o.call(this._target())},n.prototype.value=function(){return t.call(this._target())},n.prototype.reason=function(){var c=this._target();return c._unsetRejectionIsUnhandled(),i.call(c)},n.prototype._value=function(){return this._settledValue()},n.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},n.PromiseInspection=e}),uu}var du,ny;function IO(){return ny||(ny=1,du=function(n,e,t,i,r,s){var a=Qe(),o=a.canEvaluate,c=a.tryCatch,l=a.errorObj,u;if(o){for(var d=function(v){return new Function("value","holder",`                             
	            'use strict';                                                    
	            holder.pIndex = value;                                           
	            holder.checkFulfillment(this);                                   
	            `.replace(/Index/g,v))},h=function(v){return new Function("promise","holder",`                           
	            'use strict';                                                    
	            holder.pIndex = promise;                                         
	            `.replace(/Index/g,v))},f=function(v){for(var b=new Array(v),T=0;T<b.length;++T)b[T]="this.p"+(T+1);var x=b.join(" = ")+" = null;",_=`var promise;
`+b.map(function(C){return`                                                         
	                promise = `+C+`;                                      
	                if (promise instanceof Promise) {                            
	                    promise.cancel();                                        
	                }                                                            
	            `}).join(`
`),D=b.join(", "),w="Holder$"+v,S=`return function(tryCatch, errorObj, Promise, async) {    
	            'use strict';                                                    
	            function [TheName](fn) {                                         
	                [TheProperties]                                              
	                this.fn = fn;                                                
	                this.asyncNeeded = true;                                     
	                this.now = 0;                                                
	            }                                                                
	                                                                             
	            [TheName].prototype._callFunction = function(promise) {          
	                promise._pushContext();                                      
	                var ret = tryCatch(this.fn)([ThePassedArguments]);           
	                promise._popContext();                                       
	                if (ret === errorObj) {                                      
	                    promise._rejectCallback(ret.e, false);                   
	                } else {                                                     
	                    promise._resolveCallback(ret);                           
	                }                                                            
	            };                                                               
	                                                                             
	            [TheName].prototype.checkFulfillment = function(promise) {       
	                var now = ++this.now;                                        
	                if (now === [TheTotal]) {                                    
	                    if (this.asyncNeeded) {                                  
	                        async.invoke(this._callFunction, this, promise);     
	                    } else {                                                 
	                        this._callFunction(promise);                         
	                    }                                                        
	                                                                             
	                }                                                            
	            };                                                               
	                                                                             
	            [TheName].prototype._resultCancelled = function() {              
	                [CancellationCode]                                           
	            };                                                               
	                                                                             
	            return [TheName];                                                
	        }(tryCatch, errorObj, Promise, async);                               
	        `;return S=S.replace(/\[TheName\]/g,w).replace(/\[TheTotal\]/g,v).replace(/\[ThePassedArguments\]/g,D).replace(/\[TheProperties\]/g,x).replace(/\[CancellationCode\]/g,_),new Function("tryCatch","errorObj","Promise","async",S)(c,l,n,r)},p=[],m=[],g=[],y=0;y<8;++y)p.push(f(y+1)),m.push(d(y+1)),g.push(h(y+1));u=function(v){this._reject(v)}}n.join=function(){var v=arguments.length-1,b;if(v>0&&typeof arguments[v]=="function"&&(b=arguments[v],v<=8&&o)){var E=new n(i);E._captureStackTrace();for(var T=p[v-1],x=new T(b),_=m,D=0;D<v;++D){var w=t(arguments[D],E);if(w instanceof n){w=w._target();var S=w._bitField;(S&50397184)===0?(w._then(_[D],u,void 0,E,x),g[D](w,x),x.asyncNeeded=!1):(S&33554432)!==0?_[D].call(E,w._value(),x):(S&16777216)!==0?E._reject(w._reason()):E._cancel()}else _[D].call(E,w,x)}if(!E._isFateSealed()){if(x.asyncNeeded){var C=s();C!==null&&(x.fn=a.domainBind(C,x.fn))}E._setAsyncGuaranteed(),E._setOnCancel(x)}return E}for(var O=arguments.length,I=new Array(O),L=0;L<O;++L)I[L]=arguments[L];b&&I.pop();var E=new e(I).promise();return b!==void 0?E.spread(b):E}}),du}var hu,iy;function CO(){return iy||(iy=1,hu=function(n,e,t,i,r,s){var a=n._getDomain,o=Qe(),c=o.tryCatch,l=o.errorObj,u=n._async;function d(f,p,m,g){this.constructor$(f),this._promise._captureStackTrace();var y=a();this._callback=y===null?p:o.domainBind(y,p),this._preservedValues=g===r?new Array(this.length()):null,this._limit=m,this._inFlight=0,this._queue=[],u.invoke(this._asyncInit,this,void 0)}o.inherits(d,e),d.prototype._asyncInit=function(){this._init$(void 0,-2)},d.prototype._init=function(){},d.prototype._promiseFulfilled=function(f,p){var m=this._values,g=this.length(),y=this._preservedValues,v=this._limit;if(p<0){if(p=p*-1-1,m[p]=f,v>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(v>=1&&this._inFlight>=v)return m[p]=f,this._queue.push(p),!1;y!==null&&(y[p]=f);var b=this._promise,T=this._callback,x=b._boundValue();b._pushContext();var _=c(T).call(x,f,p,g),D=b._popContext();if(s.checkForgottenReturns(_,D,y!==null?"Promise.filter":"Promise.map",b),_===l)return this._reject(_.e),!0;var w=i(_,this._promise);if(w instanceof n){w=w._target();var S=w._bitField;if((S&50397184)===0)return v>=1&&this._inFlight++,m[p]=w,w._proxy(this,(p+1)*-1),!1;if((S&33554432)!==0)_=w._value();else return(S&16777216)!==0?(this._reject(w._reason()),!0):(this._cancel(),!0)}m[p]=_}var C=++this._totalResolved;return C>=g?(y!==null?this._filter(m,y):this._resolve(m),!0):!1},d.prototype._drainQueue=function(){for(var f=this._queue,p=this._limit,m=this._values;f.length>0&&this._inFlight<p;){if(this._isResolved())return;var g=f.pop();this._promiseFulfilled(m[g],g)}},d.prototype._filter=function(f,p){for(var m=p.length,g=new Array(m),y=0,v=0;v<m;++v)f[v]&&(g[y++]=p[v]);g.length=y,this._resolve(g)},d.prototype.preservedValues=function(){return this._preservedValues};function h(f,p,m,g){if(typeof p!="function")return t("expecting a function but got "+o.classString(p));var y=0;if(m!==void 0)if(typeof m=="object"&&m!==null){if(typeof m.concurrency!="number")return n.reject(new TypeError("'concurrency' must be a number but it is "+o.classString(m.concurrency)));y=m.concurrency}else return n.reject(new TypeError("options argument must be an object but it is "+o.classString(m)));return y=typeof y=="number"&&isFinite(y)&&y>=1?y:0,new d(f,p,y,g).promise()}n.prototype.map=function(f,p){return h(this,f,p,null)},n.map=function(f,p,m,g){return h(f,p,m,g)}}),hu}var fu,ry;function RO(){if(ry)return fu;ry=1;var n=Object.create;if(n){var e=n(null),t=n(null);e[" size"]=t[" size"]=0}return fu=function(i){var r=Qe(),s=r.canEvaluate,a=r.isIdentifier,o,c;{var l=function(g){return new Function("ensureMethod",`                                    
	        return function(obj) {                                               
	            'use strict'                                                     
	            var len = this.length;                                           
	            ensureMethod(obj, 'methodName');                                 
	            switch(len) {                                                    
	                case 1: return obj.methodName(this[0]);                      
	                case 2: return obj.methodName(this[0], this[1]);             
	                case 3: return obj.methodName(this[0], this[1], this[2]);    
	                case 0: return obj.methodName();                             
	                default:                                                     
	                    return obj.methodName.apply(obj, this);                  
	            }                                                                
	        };                                                                   
	        `.replace(/methodName/g,g))(h)},u=function(g){return new Function("obj",`                                             
	        'use strict';                                                        
	        return obj.propertyName;                                             
	        `.replace("propertyName",g))},d=function(g,y,v){var b=v[g];if(typeof b!="function"){if(!a(g))return null;if(b=y(g),v[g]=b,v[" size"]++,v[" size"]>512){for(var T=Object.keys(v),x=0;x<256;++x)delete v[T[x]];v[" size"]=T.length-256}}return b};o=function(g){return d(g,l,e)},c=function(g){return d(g,u,t)}}function h(g,y){var v;if(g!=null&&(v=g[y]),typeof v!="function"){var b="Object "+r.classString(g)+" has no method '"+r.toString(y)+"'";throw new i.TypeError(b)}return v}function f(g){var y=this.pop(),v=h(g,y);return v.apply(g,this)}i.prototype.call=function(g){for(var y=arguments.length,v=new Array(Math.max(y-1,0)),b=1;b<y;++b)v[b-1]=arguments[b];if(s){var T=o(g);if(T!==null)return this._then(T,void 0,void 0,v,void 0)}return v.push(g),this._then(f,void 0,void 0,v,void 0)};function p(g){return g[this]}function m(g){var y=+this;return y<0&&(y=Math.max(0,y+g.length)),g[y]}i.prototype.get=function(g){var y=typeof g=="number",v;if(y)v=m;else if(s){var b=c(g);v=b!==null?b:p}else v=p;return this._then(v,void 0,void 0,g,void 0)}},fu}var pu,sy;function LO(){return sy||(sy=1,pu=function(n,e,t,i,r,s){var a=Qe(),o=wi().TypeError,c=Qe().inherits,l=a.errorObj,u=a.tryCatch,d={};function h(b){setTimeout(function(){throw b},0)}function f(b){var T=t(b);return T!==b&&typeof b._isDisposable=="function"&&typeof b._getDisposer=="function"&&b._isDisposable()&&T._setDisposable(b._getDisposer()),T}function p(b,T){var x=0,_=b.length,D=new n(r);function w(){if(x>=_)return D._fulfill();var S=f(b[x++]);if(S instanceof n&&S._isDisposable()){try{S=t(S._getDisposer().tryDispose(T),b.promise)}catch(C){return h(C)}if(S instanceof n)return S._then(w,h,null,null,null)}w()}return w(),D}function m(b,T,x){this._data=b,this._promise=T,this._context=x}m.prototype.data=function(){return this._data},m.prototype.promise=function(){return this._promise},m.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():d},m.prototype.tryDispose=function(b){var T=this.resource(),x=this._context;x!==void 0&&x._pushContext();var _=T!==d?this.doDispose(T,b):null;return x!==void 0&&x._popContext(),this._promise._unsetDisposable(),this._data=null,_},m.isDisposer=function(b){return b!=null&&typeof b.resource=="function"&&typeof b.tryDispose=="function"};function g(b,T,x){this.constructor$(b,T,x)}c(g,m),g.prototype.doDispose=function(b,T){var x=this.data();return x.call(b,b,T)};function y(b){return m.isDisposer(b)?(this.resources[this.index]._setDisposable(b),b.promise()):b}function v(b){this.length=b,this.promise=null,this[b-1]=null}v.prototype._resultCancelled=function(){for(var b=this.length,T=0;T<b;++T){var x=this[T];x instanceof n&&x.cancel()}},n.using=function(){var b=arguments.length;if(b<2)return e("you must pass at least 2 arguments to Promise.using");var T=arguments[b-1];if(typeof T!="function")return e("expecting a function but got "+a.classString(T));var x,_=!0;b===2&&Array.isArray(arguments[0])?(x=arguments[0],b=x.length,_=!1):(x=arguments,b--);for(var D=new v(b),w=0;w<b;++w){var S=x[w];if(m.isDisposer(S)){var C=S;S=S.promise(),S._setDisposable(C)}else{var O=t(S);O instanceof n&&(S=O._then(y,null,null,{resources:D,index:w},void 0))}D[w]=S}for(var I=new Array(D.length),w=0;w<I.length;++w)I[w]=n.resolve(D[w]).reflect();var L=n.all(I).then(function($){for(var U=0;U<$.length;++U){var F=$[U];if(F.isRejected())return l.e=F.error(),l;if(!F.isFulfilled()){L.cancel();return}$[U]=F.value()}E._pushContext(),T=u(T);var G=_?T.apply(void 0,$):T($),W=E._popContext();return s.checkForgottenReturns(G,W,"Promise.using",E),G}),E=L.lastly(function(){var $=new n.PromiseInspection(L);return p(D,$)});return D.promise=E,E._setOnCancel(D),E},n.prototype._setDisposable=function(b){this._bitField=this._bitField|131072,this._disposer=b},n.prototype._isDisposable=function(){return(this._bitField&131072)>0},n.prototype._getDisposer=function(){return this._disposer},n.prototype._unsetDisposable=function(){this._bitField=this._bitField&-131073,this._disposer=void 0},n.prototype.disposer=function(b){if(typeof b=="function")return new g(b,this,i());throw new o}}),pu}var gu,ay;function UO(){return ay||(ay=1,gu=function(n,e,t){var i=Qe(),r=n.TimeoutError;function s(d){this.handle=d}s.prototype._resultCancelled=function(){clearTimeout(this.handle)};var a=function(d){return o(+this).thenReturn(d)},o=n.delay=function(d,h){var f,p;return h!==void 0?(f=n.resolve(h)._then(a,null,null,d,void 0),t.cancellation()&&h instanceof n&&f._setOnCancel(h)):(f=new n(e),p=setTimeout(function(){f._fulfill()},+d),t.cancellation()&&f._setOnCancel(new s(p)),f._captureStackTrace()),f._setAsyncGuaranteed(),f};n.prototype.delay=function(d){return o(d,this)};var c=function(d,h,f){var p;typeof h!="string"?h instanceof Error?p=h:p=new r("operation timed out"):p=new r(h),i.markAsOriginatingFromRejection(p),d._attachExtraTrace(p),d._reject(p),f?.cancel()};function l(d){return clearTimeout(this.handle),d}function u(d){throw clearTimeout(this.handle),d}n.prototype.timeout=function(d,h){d=+d;var f,p,m=new s(setTimeout(function(){f.isPending()&&c(f,h,p)},d));return t.cancellation()?(p=this.then(),f=p._then(l,u,void 0,m,void 0),f._setOnCancel(m)):f=this._then(l,u,void 0,m,void 0),f}}),gu}var mu,oy;function kO(){return oy||(oy=1,mu=function(n,e,t,i,r,s){var a=wi(),o=a.TypeError,c=Qe(),l=c.errorObj,u=c.tryCatch,d=[];function h(p,m,g){for(var y=0;y<m.length;++y){g._pushContext();var v=u(m[y])(p);if(g._popContext(),v===l){g._pushContext();var b=n.reject(l.e);return g._popContext(),b}var T=i(v,g);if(T instanceof n)return T}return null}function f(p,m,g,y){if(s.cancellation()){var v=new n(t),b=this._finallyPromise=new n(t);this._promise=v.lastly(function(){return b}),v._captureStackTrace(),v._setOnCancel(this)}else{var T=this._promise=new n(t);T._captureStackTrace()}this._stack=y,this._generatorFunction=p,this._receiver=m,this._generator=void 0,this._yieldHandlers=typeof g=="function"?[g].concat(d):d,this._yieldedPromise=null,this._cancellationPhase=!1}c.inherits(f,r),f.prototype._isResolved=function(){return this._promise===null},f.prototype._cleanup=function(){this._promise=this._generator=null,s.cancellation()&&this._finallyPromise!==null&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},f.prototype._promiseCancelled=function(){if(!this._isResolved()){var p=typeof this._generator.return<"u",m;if(p)this._promise._pushContext(),m=u(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var g=new n.CancellationError("generator .return() sentinel");n.coroutine.returnSentinel=g,this._promise._attachExtraTrace(g),this._promise._pushContext(),m=u(this._generator.throw).call(this._generator,g),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(m)}},f.prototype._promiseFulfilled=function(p){this._yieldedPromise=null,this._promise._pushContext();var m=u(this._generator.next).call(this._generator,p);this._promise._popContext(),this._continue(m)},f.prototype._promiseRejected=function(p){this._yieldedPromise=null,this._promise._attachExtraTrace(p),this._promise._pushContext();var m=u(this._generator.throw).call(this._generator,p);this._promise._popContext(),this._continue(m)},f.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof n){var p=this._yieldedPromise;this._yieldedPromise=null,p.cancel()}},f.prototype.promise=function(){return this._promise},f.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},f.prototype._continue=function(p){var m=this._promise;if(p===l)return this._cleanup(),this._cancellationPhase?m.cancel():m._rejectCallback(p.e,!1);var g=p.value;if(p.done===!0)return this._cleanup(),this._cancellationPhase?m.cancel():m._resolveCallback(g);var y=i(g,this._promise);if(!(y instanceof n)&&(y=h(y,this._yieldHandlers,this._promise),y===null)){this._promiseRejected(new o(`A value %s was yielded that could not be treated as a promise

    See http://goo.gl/MqrFmX

`.replace("%s",g)+`From coroutine:
`+this._stack.split(`
`).slice(1,-7).join(`
`)));return}y=y._target();var v=y._bitField;(v&50397184)===0?(this._yieldedPromise=y,y._proxy(this,null)):(v&33554432)!==0?n._async.invoke(this._promiseFulfilled,this,y._value()):(v&16777216)!==0?n._async.invoke(this._promiseRejected,this,y._reason()):this._promiseCancelled()},n.coroutine=function(p,m){if(typeof p!="function")throw new o(`generatorFunction must be a function

    See http://goo.gl/MqrFmX
`);var g=Object(m).yieldHandler,y=f,v=new Error().stack;return function(){var b=p.apply(this,arguments),T=new y(void 0,void 0,g,v),x=T.promise();return T._generator=b,T._promiseFulfilled(void 0),x}},n.coroutine.addYieldHandler=function(p){if(typeof p!="function")throw new o("expecting a function but got "+c.classString(p));d.push(p)},n.spawn=function(p){if(s.deprecated("Promise.spawn()","Promise.coroutine()"),typeof p!="function")return e(`generatorFunction must be a function

    See http://goo.gl/MqrFmX
`);var m=new f(p,this),g=m.promise();return m._run(n.spawn),g}}),mu}var yu,cy;function FO(){return cy||(cy=1,yu=function(n){var e=Qe(),t=n._async,i=e.tryCatch,r=e.errorObj;function s(c,l){var u=this;if(!e.isArray(c))return a.call(u,c,l);var d=i(l).apply(u._boundValue(),[null].concat(c));d===r&&t.throwLater(d.e)}function a(c,l){var u=this,d=u._boundValue(),h=c===void 0?i(l).call(d,null):i(l).call(d,null,c);h===r&&t.throwLater(h.e)}function o(c,l){var u=this;if(!c){var d=new Error(c+"");d.cause=c,c=d}var h=i(l).call(u._boundValue(),c);h===r&&t.throwLater(h.e)}n.prototype.asCallback=n.prototype.nodeify=function(c,l){if(typeof c=="function"){var u=a;l!==void 0&&Object(l).spread&&(u=s),this._then(u,o,void 0,this,c)}return this}}),yu}var vu,ly;function PO(){return ly||(ly=1,vu=function(n,e){var t={},i=Qe(),r=J_(),s=i.withAppended,a=i.maybeWrapAsError,o=i.canEvaluate,c=wi().TypeError,l="Async",u={__isPromisified__:!0},d=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],h=new RegExp("^(?:"+d.join("|")+")$"),f=function(L){return i.isIdentifier(L)&&L.charAt(0)!=="_"&&L!=="constructor"};function p(L){return!h.test(L)}function m(L){try{return L.__isPromisified__===!0}catch{return!1}}function g(L,E,$){var U=i.getDataPropertyOrDefault(L,E+$,u);return U?m(U):!1}function y(L,E,$){for(var U=0;U<L.length;U+=2){var F=L[U];if($.test(F)){for(var G=F.replace($,""),W=0;W<L.length;W+=2)if(L[W]===G)throw new c(`Cannot promisify an API that has normal methods with '%s'-suffix

    See http://goo.gl/MqrFmX
`.replace("%s",E))}}}function v(L,E,$,U){for(var F=i.inheritedDataKeys(L),G=[],W=0;W<F.length;++W){var Y=F[W],P=L[Y],V=U===f?!0:f(Y);typeof P=="function"&&!m(P)&&!g(L,Y,E)&&U(Y,P,L,V)&&G.push(Y,P)}return y(G,E,$),G}var b=function(L){return L.replace(/([$])/,"\\$")},T;{var x=function(L){for(var E=[L],$=Math.max(0,L-1-3),U=L-1;U>=$;--U)E.push(U);for(var U=L+1;U<=3;++U)E.push(U);return E},_=function(L){return i.filledRange(L,"_arg","")},D=function(L){return i.filledRange(Math.max(L,3),"_arg","")},w=function(L){return typeof L.length=="number"?Math.max(Math.min(L.length,1024),0):0};T=function(L,E,$,U,F,G){var W=Math.max(0,w(U)-1),Y=x(W),P=typeof L=="string"||E===t;function V(ue){var he=_(ue).join(", "),fe=ue>0?", ":"",me;return P?me=`ret = callback.call(this, {{args}}, nodeback); break;
`:me=E===void 0?`ret = callback({{args}}, nodeback); break;
`:`ret = callback.call(receiver, {{args}}, nodeback); break;
`,me.replace("{{args}}",he).replace(", ",fe)}function j(){for(var ue="",he=0;he<Y.length;++he)ue+="case "+Y[he]+":"+V(Y[he]);return ue+=`                                                             
	        default:                                                             
	            var args = new Array(len + 1);                                   
	            var i = 0;                                                       
	            for (var i = 0; i < len; ++i) {                                  
	               args[i] = arguments[i];                                       
	            }                                                                
	            args[i] = nodeback;                                              
	            [CodeForCall]                                                    
	            break;                                                           
	        `.replace("[CodeForCall]",P?`ret = callback.apply(this, args);
`:`ret = callback.apply(receiver, args);
`),ue}var te=typeof L=="string"?"this != null ? this['"+L+"'] : fn":"fn",ne=`'use strict';                                                
	        var ret = function (Parameters) {                                    
	            'use strict';                                                    
	            var len = arguments.length;                                      
	            var promise = new Promise(INTERNAL);                             
	            promise._captureStackTrace();                                    
	            var nodeback = nodebackForPromise(promise, `+G+`);   
	            var ret;                                                         
	            var callback = tryCatch([GetFunctionCode]);                      
	            switch(len) {                                                    
	                [CodeForSwitchCase]                                          
	            }                                                                
	            if (ret === errorObj) {                                          
	                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);
	            }                                                                
	            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     
	            return promise;                                                  
	        };                                                                   
	        notEnumerableProp(ret, '__isPromisified__', true);                   
	        return ret;                                                          
	    `.replace("[CodeForSwitchCase]",j()).replace("[GetFunctionCode]",te);return ne=ne.replace("Parameters",D(W)),new Function("Promise","fn","receiver","withAppended","maybeWrapAsError","nodebackForPromise","tryCatch","errorObj","notEnumerableProp","INTERNAL",ne)(n,U,E,s,a,r,i.tryCatch,i.errorObj,i.notEnumerableProp,e)}}function S(L,E,$,U,F,G){var W=(function(){return this})(),Y=L;typeof Y=="string"&&(L=U);function P(){var V=E;E===t&&(V=this);var j=new n(e);j._captureStackTrace();var te=typeof Y=="string"&&this!==W?this[Y]:L,ne=r(j,G);try{te.apply(V,s(arguments,ne))}catch(ue){j._rejectCallback(a(ue),!0,!0)}return j._isFateSealed()||j._setAsyncGuaranteed(),j}return i.notEnumerableProp(P,"__isPromisified__",!0),P}var C=o?T:S;function O(L,E,$,U,F){for(var G=new RegExp(b(E)+"$"),W=v(L,E,G,$),Y=0,P=W.length;Y<P;Y+=2){var V=W[Y],j=W[Y+1],te=V+E;if(U===C)L[te]=C(V,t,V,j,E,F);else{var ne=U(j,function(){return C(V,t,V,j,E,F)});i.notEnumerableProp(ne,"__isPromisified__",!0),L[te]=ne}}return i.toFastProperties(L),L}function I(L,E,$){return C(L,E,void 0,L,null,$)}n.promisify=function(L,E){if(typeof L!="function")throw new c("expecting a function but got "+i.classString(L));if(m(L))return L;E=Object(E);var $=E.context===void 0?t:E.context,U=!!E.multiArgs,F=I(L,$,U);return i.copyDescriptors(L,F,p),F},n.promisifyAll=function(L,E){if(typeof L!="function"&&typeof L!="object")throw new c(`the target of promisifyAll must be an object or a function

    See http://goo.gl/MqrFmX
`);E=Object(E);var $=!!E.multiArgs,U=E.suffix;typeof U!="string"&&(U=l);var F=E.filter;typeof F!="function"&&(F=f);var G=E.promisifier;if(typeof G!="function"&&(G=C),!i.isIdentifier(U))throw new RangeError(`suffix must be a valid identifier

    See http://goo.gl/MqrFmX
`);for(var W=i.inheritedDataKeys(L),Y=0;Y<W.length;++Y){var P=L[W[Y]];W[Y]!=="constructor"&&i.isClass(P)&&(O(P.prototype,U,F,G,$),O(P,U,F,G,$))}return O(L,U,F,G,$)}}),vu}var bu,uy;function OO(){return uy||(uy=1,bu=function(n,e,t,i){var r=Qe(),s=r.isObject,a=as(),o;typeof Map=="function"&&(o=Map);var c=(function(){var h=0,f=0;function p(m,g){this[h]=m,this[h+f]=g,h++}return function(g){f=g.size,h=0;var y=new Array(g.size*2);return g.forEach(p,y),y}})(),l=function(h){for(var f=new o,p=h.length/2|0,m=0;m<p;++m){var g=h[p+m],y=h[m];f.set(g,y)}return f};function u(h){var f=!1,p;if(o!==void 0&&h instanceof o)p=c(h),f=!0;else{var m=a.keys(h),g=m.length;p=new Array(g*2);for(var y=0;y<g;++y){var v=m[y];p[y]=h[v],p[y+g]=v}}this.constructor$(p),this._isMap=f,this._init$(void 0,-3)}r.inherits(u,e),u.prototype._init=function(){},u.prototype._promiseFulfilled=function(h,f){this._values[f]=h;var p=++this._totalResolved;if(p>=this._length){var m;if(this._isMap)m=l(this._values);else{m={};for(var g=this.length(),y=0,v=this.length();y<v;++y)m[this._values[y+g]]=this._values[y]}return this._resolve(m),!0}return!1},u.prototype.shouldCopyValues=function(){return!1},u.prototype.getActualLength=function(h){return h>>1};function d(h){var f,p=t(h);if(s(p))p instanceof n?f=p._then(n.props,void 0,void 0,void 0,void 0):f=new u(p).promise();else return i(`cannot await properties of a non-object

    See http://goo.gl/MqrFmX
`);return p instanceof n&&f._propagateFrom(p,2),f}n.prototype.props=function(){return d(this)},n.props=function(h){return d(h)}}),bu}var xu,dy;function MO(){return dy||(dy=1,xu=function(n,e,t,i){var r=Qe(),s=function(o){return o.then(function(c){return a(c,o)})};function a(o,c){var l=t(o);if(l instanceof n)return s(l);if(o=r.asArray(o),o===null)return i("expecting an array or an iterable object but got "+r.classString(o));var u=new n(e);c!==void 0&&u._propagateFrom(c,3);for(var d=u._fulfill,h=u._reject,f=0,p=o.length;f<p;++f){var m=o[f];m===void 0&&!(f in o)||n.cast(m)._then(d,h,void 0,u,null)}return u}n.race=function(o){return a(o,void 0)},n.prototype.race=function(){return a(this,void 0)}}),xu}var Tu,hy;function BO(){return hy||(hy=1,Tu=function(n,e,t,i,r,s){var a=n._getDomain,o=Qe(),c=o.tryCatch;function l(p,m,g,y){this.constructor$(p);var v=a();this._fn=v===null?m:o.domainBind(v,m),g!==void 0&&(g=n.resolve(g),g._attachCancellationCallback(this)),this._initialValue=g,this._currentCancellable=null,y===r?this._eachValues=Array(this._length):y===0?this._eachValues=null:this._eachValues=void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}o.inherits(l,e),l.prototype._gotAccum=function(p){this._eachValues!==void 0&&this._eachValues!==null&&p!==r&&this._eachValues.push(p)},l.prototype._eachComplete=function(p){return this._eachValues!==null&&this._eachValues.push(p),this._eachValues},l.prototype._init=function(){},l.prototype._resolveEmptyArray=function(){this._resolve(this._eachValues!==void 0?this._eachValues:this._initialValue)},l.prototype.shouldCopyValues=function(){return!1},l.prototype._resolve=function(p){this._promise._resolveCallback(p),this._values=null},l.prototype._resultCancelled=function(p){if(p===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof n&&this._currentCancellable.cancel(),this._initialValue instanceof n&&this._initialValue.cancel())},l.prototype._iterate=function(p){this._values=p;var m,g,y=p.length;if(this._initialValue!==void 0?(m=this._initialValue,g=0):(m=n.resolve(p[0]),g=1),this._currentCancellable=m,!m.isRejected())for(;g<y;++g){var v={accum:null,value:p[g],index:g,length:y,array:this};m=m._then(h,void 0,void 0,v,void 0)}this._eachValues!==void 0&&(m=m._then(this._eachComplete,void 0,void 0,this,void 0)),m._then(u,u,void 0,m,this)},n.prototype.reduce=function(p,m){return d(this,p,m,null)},n.reduce=function(p,m,g,y){return d(p,m,g,y)};function u(p,m){this.isFulfilled()?m._resolve(p):m._reject(p)}function d(p,m,g,y){if(typeof m!="function")return t("expecting a function but got "+o.classString(m));var v=new l(p,m,g,y);return v.promise()}function h(p){this.accum=p,this.array._gotAccum(p);var m=i(this.value,this.array._promise);return m instanceof n?(this.array._currentCancellable=m,m._then(f,void 0,void 0,this,void 0)):f.call(this,m)}function f(p){var m=this.array,g=m._promise,y=c(m._fn);g._pushContext();var v;m._eachValues!==void 0?v=y.call(g._boundValue(),p,this.index,this.length):v=y.call(g._boundValue(),this.accum,p,this.index,this.length),v instanceof n&&(m._currentCancellable=v);var b=g._popContext();return s.checkForgottenReturns(v,b,m._eachValues!==void 0?"Promise.each":"Promise.reduce",g),v}}),Tu}var _u,fy;function NO(){return fy||(fy=1,_u=function(n,e,t){var i=n.PromiseInspection,r=Qe();function s(a){this.constructor$(a)}r.inherits(s,e),s.prototype._promiseResolved=function(a,o){this._values[a]=o;var c=++this._totalResolved;return c>=this._length?(this._resolve(this._values),!0):!1},s.prototype._promiseFulfilled=function(a,o){var c=new i;return c._bitField=33554432,c._settledValueField=a,this._promiseResolved(o,c)},s.prototype._promiseRejected=function(a,o){var c=new i;return c._bitField=16777216,c._settledValueField=a,this._promiseResolved(o,c)},n.settle=function(a){return t.deprecated(".settle()",".reflect()"),new s(a).promise()},n.prototype.settle=function(){return n.settle(this)}}),_u}var Du,py;function $O(){return py||(py=1,Du=function(n,e,t){var i=Qe(),r=wi().RangeError,s=wi().AggregateError,a=i.isArray,o={};function c(u){this.constructor$(u),this._howMany=0,this._unwrap=!1,this._initialized=!1}i.inherits(c,e),c.prototype._init=function(){if(this._initialized){if(this._howMany===0){this._resolve([]);return}this._init$(void 0,-5);var u=a(this._values);!this._isResolved()&&u&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},c.prototype.init=function(){this._initialized=!0,this._init()},c.prototype.setUnwrap=function(){this._unwrap=!0},c.prototype.howMany=function(){return this._howMany},c.prototype.setHowMany=function(u){this._howMany=u},c.prototype._promiseFulfilled=function(u){return this._addFulfilled(u),this._fulfilled()===this.howMany()?(this._values.length=this.howMany(),this.howMany()===1&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0):!1},c.prototype._promiseRejected=function(u){return this._addRejected(u),this._checkOutcome()},c.prototype._promiseCancelled=function(){return this._values instanceof n||this._values==null?this._cancel():(this._addRejected(o),this._checkOutcome())},c.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var u=new s,d=this.length();d<this._values.length;++d)this._values[d]!==o&&u.push(this._values[d]);return u.length>0?this._reject(u):this._cancel(),!0}return!1},c.prototype._fulfilled=function(){return this._totalResolved},c.prototype._rejected=function(){return this._values.length-this.length()},c.prototype._addRejected=function(u){this._values.push(u)},c.prototype._addFulfilled=function(u){this._values[this._totalResolved++]=u},c.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},c.prototype._getRangeError=function(u){var d="Input array must contain at least "+this._howMany+" items but contains only "+u+" items";return new r(d)},c.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))};function l(u,d){if((d|0)!==d||d<0)return t(`expecting a positive integer

    See http://goo.gl/MqrFmX
`);var h=new c(u),f=h.promise();return h.setHowMany(d),h.init(),f}n.some=function(u,d){return l(u,d)},n.prototype.some=function(u){return l(this,u)},n._SomePromiseArray=c}),Du}var Eu,gy;function WO(){return gy||(gy=1,Eu=function(n,e){var t=n.map;n.prototype.filter=function(i,r){return t(this,i,r,e)},n.filter=function(i,r,s){return t(i,r,s,e)}}),Eu}var Su,my;function VO(){return my||(my=1,Su=function(n,e){var t=n.reduce,i=n.all;function r(){return i(this)}function s(a,o){return t(a,o,e,e)}n.prototype.each=function(a){return t(this,a,e,0)._then(r,void 0,void 0,this,void 0)},n.prototype.mapSeries=function(a){return t(this,a,e,e)},n.each=function(a,o){return t(a,o,e,0)._then(r,void 0,void 0,a,void 0)},n.mapSeries=s}),Su}var Au,yy;function GO(){return yy||(yy=1,Au=function(n){var e=n._SomePromiseArray;function t(i){var r=new e(i),s=r.promise();return r.setHowMany(1),r.setUnwrap(),r.init(),s}n.any=function(i){return t(i)},n.prototype.any=function(){return t(this)}}),Au}var vy;function HO(){return vy||(vy=1,(function(n){n.exports=function(){var e=function(){return new h(`circular promise resolution chain

    See http://goo.gl/MqrFmX
`)},t=function(){return new I.PromiseInspection(this._target())},i=function(U){return I.reject(new h(U))};function r(){}var s={},a=Qe(),o;a.isNode?o=function(){var U=process.domain;return U===void 0&&(U=null),U}:o=function(){return null},a.notEnumerableProp(I,"_getDomain",o);var c=as(),l=mO(),u=new l;c.defineProperty(I,"_async",{value:u});var d=wi(),h=I.TypeError=d.TypeError;I.RangeError=d.RangeError;var f=I.CancellationError=d.CancellationError;I.TimeoutError=d.TimeoutError,I.OperationalError=d.OperationalError,I.RejectionError=d.OperationalError,I.AggregateError=d.AggregateError;var p=function(){},m={},g={},y=yO()(I,p),v=vO()(I,p,y,i,r),b=bO()(I),T=b.create,x=xO()(I,b);x.CapturedTrace;var _=TO()(I,y),D=_O()(g),w=J_(),S=a.errorObj,C=a.tryCatch;function O(U,F){if(typeof F!="function")throw new h("expecting a function but got "+a.classString(F));if(U.constructor!==I)throw new h(`the promise constructor cannot be invoked directly

    See http://goo.gl/MqrFmX
`)}function I(U){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,U!==p&&(O(this,U),this._resolveFromExecutor(U)),this._promiseCreated(),this._fireEvent("promiseCreated",this)}I.prototype.toString=function(){return"[object Promise]"},I.prototype.caught=I.prototype.catch=function(U){var F=arguments.length;if(F>1){var G=new Array(F-1),W=0,Y;for(Y=0;Y<F-1;++Y){var P=arguments[Y];if(a.isObject(P))G[W++]=P;else return i("expecting an object but got A catch statement predicate "+a.classString(P))}return G.length=W,U=arguments[Y],this.then(void 0,D(G,U,this))}return this.then(void 0,U)},I.prototype.reflect=function(){return this._then(t,t,void 0,this,void 0)},I.prototype.then=function(U,F){if(x.warnings()&&arguments.length>0&&typeof U!="function"&&typeof F!="function"){var G=".then() only accepts functions but was passed: "+a.classString(U);arguments.length>1&&(G+=", "+a.classString(F)),this._warn(G)}return this._then(U,F,void 0,void 0,void 0)},I.prototype.done=function(U,F){var G=this._then(U,F,void 0,void 0,void 0);G._setIsFinal()},I.prototype.spread=function(U){return typeof U!="function"?i("expecting a function but got "+a.classString(U)):this.all()._then(U,void 0,void 0,m,void 0)},I.prototype.toJSON=function(){var U={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(U.fulfillmentValue=this.value(),U.isFulfilled=!0):this.isRejected()&&(U.rejectionReason=this.reason(),U.isRejected=!0),U},I.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new v(this).promise()},I.prototype.error=function(U){return this.caught(a.originatesFromRejection,U)},I.getNewLibraryCopy=n.exports,I.is=function(U){return U instanceof I},I.fromNode=I.fromCallback=function(U){var F=new I(p);F._captureStackTrace();var G=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,W=C(U)(w(F,G));return W===S&&F._rejectCallback(W.e,!0),F._isFateSealed()||F._setAsyncGuaranteed(),F},I.all=function(U){return new v(U).promise()},I.cast=function(U){var F=y(U);return F instanceof I||(F=new I(p),F._captureStackTrace(),F._setFulfilled(),F._rejectionHandler0=U),F},I.resolve=I.fulfilled=I.cast,I.reject=I.rejected=function(U){var F=new I(p);return F._captureStackTrace(),F._rejectCallback(U,!0),F},I.setScheduler=function(U){if(typeof U!="function")throw new h("expecting a function but got "+a.classString(U));return u.setScheduler(U)},I.prototype._then=function(U,F,G,W,Y){var P=Y!==void 0,V=P?Y:new I(p),j=this._target(),te=j._bitField;P||(V._propagateFrom(this,3),V._captureStackTrace(),W===void 0&&(this._bitField&2097152)!==0&&((te&50397184)!==0?W=this._boundValue():W=j===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,V));var ne=o();if((te&50397184)!==0){var ue,he,fe=j._settlePromiseCtx;(te&33554432)!==0?(he=j._rejectionHandler0,ue=U):(te&16777216)!==0?(he=j._fulfillmentHandler0,ue=F,j._unsetRejectionIsUnhandled()):(fe=j._settlePromiseLateCancellationObserver,he=new f("late cancellation observer"),j._attachExtraTrace(he),ue=F),u.invoke(fe,j,{handler:ne===null?ue:typeof ue=="function"&&a.domainBind(ne,ue),promise:V,receiver:W,value:he})}else j._addCallbacks(U,F,V,W,ne);return V},I.prototype._length=function(){return this._bitField&65535},I.prototype._isFateSealed=function(){return(this._bitField&117506048)!==0},I.prototype._isFollowing=function(){return(this._bitField&67108864)===67108864},I.prototype._setLength=function(U){this._bitField=this._bitField&-65536|U&65535},I.prototype._setFulfilled=function(){this._bitField=this._bitField|33554432,this._fireEvent("promiseFulfilled",this)},I.prototype._setRejected=function(){this._bitField=this._bitField|16777216,this._fireEvent("promiseRejected",this)},I.prototype._setFollowing=function(){this._bitField=this._bitField|67108864,this._fireEvent("promiseResolved",this)},I.prototype._setIsFinal=function(){this._bitField=this._bitField|4194304},I.prototype._isFinal=function(){return(this._bitField&4194304)>0},I.prototype._unsetCancelled=function(){this._bitField=this._bitField&-65537},I.prototype._setCancelled=function(){this._bitField=this._bitField|65536,this._fireEvent("promiseCancelled",this)},I.prototype._setWillBeCancelled=function(){this._bitField=this._bitField|8388608},I.prototype._setAsyncGuaranteed=function(){u.hasCustomScheduler()||(this._bitField=this._bitField|134217728)},I.prototype._receiverAt=function(U){var F=U===0?this._receiver0:this[U*4-4+3];if(F!==s)return F===void 0&&this._isBound()?this._boundValue():F},I.prototype._promiseAt=function(U){return this[U*4-4+2]},I.prototype._fulfillmentHandlerAt=function(U){return this[U*4-4+0]},I.prototype._rejectionHandlerAt=function(U){return this[U*4-4+1]},I.prototype._boundValue=function(){},I.prototype._migrateCallback0=function(U){U._bitField;var F=U._fulfillmentHandler0,G=U._rejectionHandler0,W=U._promise0,Y=U._receiverAt(0);Y===void 0&&(Y=s),this._addCallbacks(F,G,W,Y,null)},I.prototype._migrateCallbackAt=function(U,F){var G=U._fulfillmentHandlerAt(F),W=U._rejectionHandlerAt(F),Y=U._promiseAt(F),P=U._receiverAt(F);P===void 0&&(P=s),this._addCallbacks(G,W,Y,P,null)},I.prototype._addCallbacks=function(U,F,G,W,Y){var P=this._length();if(P>=65531&&(P=0,this._setLength(0)),P===0)this._promise0=G,this._receiver0=W,typeof U=="function"&&(this._fulfillmentHandler0=Y===null?U:a.domainBind(Y,U)),typeof F=="function"&&(this._rejectionHandler0=Y===null?F:a.domainBind(Y,F));else{var V=P*4-4;this[V+2]=G,this[V+3]=W,typeof U=="function"&&(this[V+0]=Y===null?U:a.domainBind(Y,U)),typeof F=="function"&&(this[V+1]=Y===null?F:a.domainBind(Y,F))}return this._setLength(P+1),P},I.prototype._proxy=function(U,F){this._addCallbacks(void 0,void 0,F,U,null)},I.prototype._resolveCallback=function(U,F){if((this._bitField&117506048)===0){if(U===this)return this._rejectCallback(e(),!1);var G=y(U,this);if(!(G instanceof I))return this._fulfill(U);F&&this._propagateFrom(G,2);var W=G._target();if(W===this){this._reject(e());return}var Y=W._bitField;if((Y&50397184)===0){var P=this._length();P>0&&W._migrateCallback0(this);for(var V=1;V<P;++V)W._migrateCallbackAt(this,V);this._setFollowing(),this._setLength(0),this._setFollowee(W)}else if((Y&33554432)!==0)this._fulfill(W._value());else if((Y&16777216)!==0)this._reject(W._reason());else{var j=new f("late cancellation observer");W._attachExtraTrace(j),this._reject(j)}}},I.prototype._rejectCallback=function(U,F,G){var W=a.ensureErrorObject(U),Y=W===U;if(!Y&&!G&&x.warnings()){var P="a promise was rejected with a non-error: "+a.classString(U);this._warn(P,!0)}this._attachExtraTrace(W,F?Y:!1),this._reject(U)},I.prototype._resolveFromExecutor=function(U){var F=this;this._captureStackTrace(),this._pushContext();var G=!0,W=this._execute(U,function(Y){F._resolveCallback(Y)},function(Y){F._rejectCallback(Y,G)});G=!1,this._popContext(),W!==void 0&&F._rejectCallback(W,!0)},I.prototype._settlePromiseFromHandler=function(U,F,G,W){var Y=W._bitField;if((Y&65536)===0){W._pushContext();var P;F===m?!G||typeof G.length!="number"?(P=S,P.e=new h("cannot .spread() a non-array: "+a.classString(G))):P=C(U).apply(this._boundValue(),G):P=C(U).call(F,G);var V=W._popContext();Y=W._bitField,(Y&65536)===0&&(P===g?W._reject(G):P===S?W._rejectCallback(P.e,!1):(x.checkForgottenReturns(P,V,"",W,this),W._resolveCallback(P)))}},I.prototype._target=function(){for(var U=this;U._isFollowing();)U=U._followee();return U},I.prototype._followee=function(){return this._rejectionHandler0},I.prototype._setFollowee=function(U){this._rejectionHandler0=U},I.prototype._settlePromise=function(U,F,G,W){var Y=U instanceof I,P=this._bitField,V=(P&134217728)!==0;(P&65536)!==0?(Y&&U._invokeInternalOnCancel(),G instanceof _&&G.isFinallyHandler()?(G.cancelPromise=U,C(F).call(G,W)===S&&U._reject(S.e)):F===t?U._fulfill(t.call(G)):G instanceof r?G._promiseCancelled(U):Y||U instanceof v?U._cancel():G.cancel()):typeof F=="function"?Y?(V&&U._setAsyncGuaranteed(),this._settlePromiseFromHandler(F,G,W,U)):F.call(G,W,U):G instanceof r?G._isResolved()||((P&33554432)!==0?G._promiseFulfilled(W,U):G._promiseRejected(W,U)):Y&&(V&&U._setAsyncGuaranteed(),(P&33554432)!==0?U._fulfill(W):U._reject(W))},I.prototype._settlePromiseLateCancellationObserver=function(U){var F=U.handler,G=U.promise,W=U.receiver,Y=U.value;typeof F=="function"?G instanceof I?this._settlePromiseFromHandler(F,W,Y,G):F.call(W,Y,G):G instanceof I&&G._reject(Y)},I.prototype._settlePromiseCtx=function(U){this._settlePromise(U.promise,U.handler,U.receiver,U.value)},I.prototype._settlePromise0=function(U,F,G){var W=this._promise0,Y=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(W,U,Y,F)},I.prototype._clearCallbackDataAtIndex=function(U){var F=U*4-4;this[F+2]=this[F+3]=this[F+0]=this[F+1]=void 0},I.prototype._fulfill=function(U){var F=this._bitField;if(!((F&117506048)>>>16)){if(U===this){var G=e();return this._attachExtraTrace(G),this._reject(G)}this._setFulfilled(),this._rejectionHandler0=U,(F&65535)>0&&((F&134217728)!==0?this._settlePromises():u.settlePromises(this))}},I.prototype._reject=function(U){var F=this._bitField;if(!((F&117506048)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=U,this._isFinal())return u.fatalError(U,a.isNode);(F&65535)>0?u.settlePromises(this):this._ensurePossibleRejectionHandled()}},I.prototype._fulfillPromises=function(U,F){for(var G=1;G<U;G++){var W=this._fulfillmentHandlerAt(G),Y=this._promiseAt(G),P=this._receiverAt(G);this._clearCallbackDataAtIndex(G),this._settlePromise(Y,W,P,F)}},I.prototype._rejectPromises=function(U,F){for(var G=1;G<U;G++){var W=this._rejectionHandlerAt(G),Y=this._promiseAt(G),P=this._receiverAt(G);this._clearCallbackDataAtIndex(G),this._settlePromise(Y,W,P,F)}},I.prototype._settlePromises=function(){var U=this._bitField,F=U&65535;if(F>0){if((U&16842752)!==0){var G=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,G,U),this._rejectPromises(F,G)}else{var W=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,W,U),this._fulfillPromises(F,W)}this._setLength(0)}this._clearCancellationData()},I.prototype._settledValue=function(){var U=this._bitField;if((U&33554432)!==0)return this._rejectionHandler0;if((U&16777216)!==0)return this._fulfillmentHandler0};function L(U){this.promise._resolveCallback(U)}function E(U){this.promise._rejectCallback(U,!1)}I.defer=I.pending=function(){x.deprecated("Promise.defer","new Promise");var U=new I(p);return{promise:U,resolve:L,reject:E}},a.notEnumerableProp(I,"_makeSelfResolutionError",e),DO()(I,p,y,i,x),EO()(I,p,y,x),SO()(I,v,i,x),AO()(I),wO()(I),IO()(I,v,y,p,u,o),I.Promise=I,I.version="3.4.7",CO()(I,v,i,y,p,x),RO()(I),LO()(I,i,y,T,p,x),UO()(I,p,x),kO()(I,i,p,y,r,x),FO()(I),PO()(I,p),OO()(I,v,y,i),MO()(I,p,y,i),BO()(I,v,i,y,p,x),NO()(I,v,x),$O()(I,v,i),WO()(I,p),VO()(I,p),GO()(I),a.toFastProperties(I),a.toFastProperties(I.prototype);function $(U){var F=new I(p);F._fulfillmentHandler0=U,F._rejectionHandler0=U,F._promise0=U,F._receiver0=U}return $({a:1}),$({b:2}),$({c:3}),$(1),$(function(){}),$(void 0),$(!1),$(new I(p)),x.setBounds(l.firstLineError,a.lastLineError),I}})(Xl)),Xl.exports}var by;function Pi(){if(by)return Xt;by=1;var n=ut,e=HO()();Xt.defer=t,Xt.when=e.resolve,Xt.resolve=e.resolve,Xt.all=e.all,Xt.props=e.props,Xt.reject=e.reject,Xt.promisify=e.promisify,Xt.mapSeries=e.mapSeries,Xt.attempt=e.attempt,Xt.nfcall=function(i){var r=Array.prototype.slice.call(arguments,1),s=e.promisify(i);return s.apply(null,r)},e.prototype.fail=e.prototype.caught,e.prototype.also=function(i){return this.then(function(r){var s=n.extend({},r,i(r));return e.props(s)})};function t(){var i,r,s=new e.Promise(function(a,o){i=a,r=o});return{resolve:i,reject:r,promise:s}}return Xt}var Ge={},xy;function mr(){if(xy)return Ge;xy=1;var n=ut,e=Ge.types={document:"document",paragraph:"paragraph",run:"run",text:"text",tab:"tab",checkbox:"checkbox",hyperlink:"hyperlink",noteReference:"noteReference",image:"image",note:"note",commentReference:"commentReference",comment:"comment",table:"table",tableRow:"tableRow",tableCell:"tableCell",break:"break",bookmarkStart:"bookmarkStart"};function t(_,D){return D=D||{},{type:e.document,children:_,notes:D.notes||new d({}),comments:D.comments||[]}}function i(_,D){D=D||{};var w=D.indent||{};return{type:e.paragraph,children:_,styleId:D.styleId||null,styleName:D.styleName||null,numbering:D.numbering||null,alignment:D.alignment||null,indent:{start:w.start||null,end:w.end||null,firstLine:w.firstLine||null,hanging:w.hanging||null}}}function r(_,D){return D=D||{},{type:e.run,children:_,styleId:D.styleId||null,styleName:D.styleName||null,isBold:!!D.isBold,isUnderline:!!D.isUnderline,isItalic:!!D.isItalic,isStrikethrough:!!D.isStrikethrough,isAllCaps:!!D.isAllCaps,isSmallCaps:!!D.isSmallCaps,verticalAlignment:D.verticalAlignment||s.baseline,font:D.font||null,fontSize:D.fontSize||null,highlight:D.highlight||null}}var s={baseline:"baseline",superscript:"superscript",subscript:"subscript"};function a(_){return{type:e.text,value:_}}function o(){return{type:e.tab}}function c(_){return{type:e.checkbox,checked:_.checked}}function l(_,D){return{type:e.hyperlink,children:_,href:D.href,anchor:D.anchor,targetFrame:D.targetFrame}}function u(_){return{type:e.noteReference,noteType:_.noteType,noteId:_.noteId}}function d(_){this._notes=n.indexBy(_,function(D){return m(D.noteType,D.noteId)})}d.prototype.resolve=function(_){return this.findNoteByKey(m(_.noteType,_.noteId))},d.prototype.findNoteByKey=function(_){return this._notes[_]||null};function h(_){return{type:e.note,noteType:_.noteType,noteId:_.noteId,body:_.body}}function f(_){return{type:e.commentReference,commentId:_.commentId}}function p(_){return{type:e.comment,commentId:_.commentId,body:_.body,authorName:_.authorName,authorInitials:_.authorInitials}}function m(_,D){return _+"-"+D}function g(_){return{type:e.image,read:function(D){return D?_.readImage(D):_.readImage().then(function(w){return Buffer.from(w)})},readAsArrayBuffer:function(){return _.readImage()},readAsBase64String:function(){return _.readImage("base64")},readAsBuffer:function(){return _.readImage().then(function(D){return Buffer.from(D)})},altText:_.altText,contentType:_.contentType}}function y(_,D){return D=D||{},{type:e.table,children:_,styleId:D.styleId||null,styleName:D.styleName||null}}function v(_,D){return D=D||{},{type:e.tableRow,children:_,isHeader:D.isHeader||!1}}function b(_,D){return D=D||{},{type:e.tableCell,children:_,colSpan:D.colSpan==null?1:D.colSpan,rowSpan:D.rowSpan==null?1:D.rowSpan}}function T(_){return{type:e.break,breakType:_}}function x(_){return{type:e.bookmarkStart,name:_.name}}return Ge.document=Ge.Document=t,Ge.paragraph=Ge.Paragraph=i,Ge.run=Ge.Run=r,Ge.text=Ge.Text=a,Ge.tab=Ge.Tab=o,Ge.checkbox=Ge.Checkbox=c,Ge.Hyperlink=l,Ge.noteReference=Ge.NoteReference=u,Ge.Notes=d,Ge.Note=h,Ge.commentReference=f,Ge.comment=p,Ge.Image=g,Ge.Table=y,Ge.TableRow=v,Ge.TableCell=b,Ge.lineBreak=T("line"),Ge.pageBreak=T("page"),Ge.columnBreak=T("column"),Ge.BookmarkStart=x,Ge.verticalAlignment=s,Ge}var vr={},Ty;function ti(){if(Ty)return vr;Ty=1;var n=ut;vr.Result=e,vr.success=t,vr.warning=i,vr.error=r;function e(c,l){this.value=c,this.messages=l||[]}e.prototype.map=function(c){return new e(c(this.value),this.messages)},e.prototype.flatMap=function(c){var l=c(this.value);return new e(l.value,s([this,l]))},e.prototype.flatMapThen=function(c){var l=this;return c(this.value).then(function(u){return new e(u.value,s([l,u]))})},e.combine=function(c){var l=n.flatten(n.pluck(c,"value")),u=s(c);return new e(l,u)};function t(c){return new e(c,[])}function i(c){return{type:"warning",message:c}}function r(c){return{type:"error",message:c.message,error:c}}function s(c){var l=[];return n.flatten(n.pluck(c,"messages"),!0).forEach(function(u){a(l,u)||l.push(u)}),l}function a(c,l){return n.find(c,o.bind(null,l))!==void 0}function o(c,l){return c.type===l.type&&c.message===l.message}return vr}var ds={},hs={},_y;function qO(){if(_y)return hs;_y=1,hs.byteLength=o,hs.toByteArray=l,hs.fromByteArray=h;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,s=i.length;r<s;++r)n[r]=i[r],e[i.charCodeAt(r)]=r;e[45]=62,e[95]=63;function a(f){var p=f.length;if(p%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var m=f.indexOf("=");m===-1&&(m=p);var g=m===p?0:4-m%4;return[m,g]}function o(f){var p=a(f),m=p[0],g=p[1];return(m+g)*3/4-g}function c(f,p,m){return(p+m)*3/4-m}function l(f){var p,m=a(f),g=m[0],y=m[1],v=new t(c(f,g,y)),b=0,T=y>0?g-4:g,x;for(x=0;x<T;x+=4)p=e[f.charCodeAt(x)]<<18|e[f.charCodeAt(x+1)]<<12|e[f.charCodeAt(x+2)]<<6|e[f.charCodeAt(x+3)],v[b++]=p>>16&255,v[b++]=p>>8&255,v[b++]=p&255;return y===2&&(p=e[f.charCodeAt(x)]<<2|e[f.charCodeAt(x+1)]>>4,v[b++]=p&255),y===1&&(p=e[f.charCodeAt(x)]<<10|e[f.charCodeAt(x+1)]<<4|e[f.charCodeAt(x+2)]>>2,v[b++]=p>>8&255,v[b++]=p&255),v}function u(f){return n[f>>18&63]+n[f>>12&63]+n[f>>6&63]+n[f&63]}function d(f,p,m){for(var g,y=[],v=p;v<m;v+=3)g=(f[v]<<16&16711680)+(f[v+1]<<8&65280)+(f[v+2]&255),y.push(u(g));return y.join("")}function h(f){for(var p,m=f.length,g=m%3,y=[],v=16383,b=0,T=m-g;b<T;b+=v)y.push(d(f,b,b+v>T?T:b+v));return g===1?(p=f[m-1],y.push(n[p>>2]+n[p<<4&63]+"==")):g===2&&(p=(f[m-2]<<8)+f[m-1],y.push(n[p>>10]+n[p>>4&63]+n[p<<2&63]+"=")),y.join("")}return hs}function Pa(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var wu={exports:{}};var Dy;function jO(){return Dy||(Dy=1,(function(n,e){(function(t){n.exports=t()})(function(){return(function t(i,r,s){function a(l,u){if(!r[l]){if(!i[l]){var d=typeof Pa=="function"&&Pa;if(!u&&d)return d(l,!0);if(o)return o(l,!0);var h=new Error("Cannot find module '"+l+"'");throw h.code="MODULE_NOT_FOUND",h}var f=r[l]={exports:{}};i[l][0].call(f.exports,function(p){var m=i[l][1][p];return a(m||p)},f,f.exports,t,i,r,s)}return r[l].exports}for(var o=typeof Pa=="function"&&Pa,c=0;c<s.length;c++)a(s[c]);return a})({1:[function(t,i,r){var s=t("./utils"),a=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(c){for(var l,u,d,h,f,p,m,g=[],y=0,v=c.length,b=v,T=s.getTypeOf(c)!=="string";y<c.length;)b=v-y,d=T?(l=c[y++],u=y<v?c[y++]:0,y<v?c[y++]:0):(l=c.charCodeAt(y++),u=y<v?c.charCodeAt(y++):0,y<v?c.charCodeAt(y++):0),h=l>>2,f=(3&l)<<4|u>>4,p=1<b?(15&u)<<2|d>>6:64,m=2<b?63&d:64,g.push(o.charAt(h)+o.charAt(f)+o.charAt(p)+o.charAt(m));return g.join("")},r.decode=function(c){var l,u,d,h,f,p,m=0,g=0,y="data:";if(c.substr(0,y.length)===y)throw new Error("Invalid base64 input, it looks like a data url.");var v,b=3*(c=c.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(c.charAt(c.length-1)===o.charAt(64)&&b--,c.charAt(c.length-2)===o.charAt(64)&&b--,b%1!=0)throw new Error("Invalid base64 input, bad content length.");for(v=a.uint8array?new Uint8Array(0|b):new Array(0|b);m<c.length;)l=o.indexOf(c.charAt(m++))<<2|(h=o.indexOf(c.charAt(m++)))>>4,u=(15&h)<<4|(f=o.indexOf(c.charAt(m++)))>>2,d=(3&f)<<6|(p=o.indexOf(c.charAt(m++))),v[g++]=l,f!==64&&(v[g++]=u),p!==64&&(v[g++]=d);return v}},{"./support":30,"./utils":32}],2:[function(t,i,r){var s=t("./external"),a=t("./stream/DataWorker"),o=t("./stream/Crc32Probe"),c=t("./stream/DataLengthProbe");function l(u,d,h,f,p){this.compressedSize=u,this.uncompressedSize=d,this.crc32=h,this.compression=f,this.compressedContent=p}l.prototype={getContentWorker:function(){var u=new a(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new c("data_length")),d=this;return u.on("end",function(){if(this.streamInfo.data_length!==d.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),u},getCompressedWorker:function(){return new a(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},l.createWorkerFrom=function(u,d,h){return u.pipe(new o).pipe(new c("uncompressedSize")).pipe(d.compressWorker(h)).pipe(new c("compressedSize")).withStreamInfo("compression",d)},i.exports=l},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,i,r){var s=t("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},r.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,i,r){var s=t("./utils"),a=(function(){for(var o,c=[],l=0;l<256;l++){o=l;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;c[l]=o}return c})();i.exports=function(o,c){return o!==void 0&&o.length?s.getTypeOf(o)!=="string"?(function(l,u,d,h){var f=a,p=h+d;l^=-1;for(var m=h;m<p;m++)l=l>>>8^f[255&(l^u[m])];return-1^l})(0|c,o,o.length,0):(function(l,u,d,h){var f=a,p=h+d;l^=-1;for(var m=h;m<p;m++)l=l>>>8^f[255&(l^u.charCodeAt(m))];return-1^l})(0|c,o,o.length,0):0}},{"./utils":32}],5:[function(t,i,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(t,i,r){var s=null;s=typeof Promise<"u"?Promise:t("lie"),i.exports={Promise:s}},{lie:37}],7:[function(t,i,r){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=t("pako"),o=t("./utils"),c=t("./stream/GenericWorker"),l=s?"uint8array":"array";function u(d,h){c.call(this,"FlateWorker/"+d),this._pako=null,this._pakoAction=d,this._pakoOptions=h,this.meta={}}r.magic="\b\0",o.inherits(u,c),u.prototype.processChunk=function(d){this.meta=d.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(l,d.data),!1)},u.prototype.flush=function(){c.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){c.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var d=this;this._pako.onData=function(h){d.push({data:h,meta:d.meta})}},r.compressWorker=function(d){return new u("Deflate",d)},r.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,i,r){function s(f,p){var m,g="";for(m=0;m<p;m++)g+=String.fromCharCode(255&f),f>>>=8;return g}function a(f,p,m,g,y,v){var b,T,x=f.file,_=f.compression,D=v!==l.utf8encode,w=o.transformTo("string",v(x.name)),S=o.transformTo("string",l.utf8encode(x.name)),C=x.comment,O=o.transformTo("string",v(C)),I=o.transformTo("string",l.utf8encode(C)),L=S.length!==x.name.length,E=I.length!==C.length,$="",U="",F="",G=x.dir,W=x.date,Y={crc32:0,compressedSize:0,uncompressedSize:0};p&&!m||(Y.crc32=f.crc32,Y.compressedSize=f.compressedSize,Y.uncompressedSize=f.uncompressedSize);var P=0;p&&(P|=8),D||!L&&!E||(P|=2048);var V=0,j=0;G&&(V|=16),y==="UNIX"?(j=798,V|=(function(ne,ue){var he=ne;return ne||(he=ue?16893:33204),(65535&he)<<16})(x.unixPermissions,G)):(j=20,V|=(function(ne){return 63&(ne||0)})(x.dosPermissions)),b=W.getUTCHours(),b<<=6,b|=W.getUTCMinutes(),b<<=5,b|=W.getUTCSeconds()/2,T=W.getUTCFullYear()-1980,T<<=4,T|=W.getUTCMonth()+1,T<<=5,T|=W.getUTCDate(),L&&(U=s(1,1)+s(u(w),4)+S,$+="up"+s(U.length,2)+U),E&&(F=s(1,1)+s(u(O),4)+I,$+="uc"+s(F.length,2)+F);var te="";return te+=`
\0`,te+=s(P,2),te+=_.magic,te+=s(b,2),te+=s(T,2),te+=s(Y.crc32,4),te+=s(Y.compressedSize,4),te+=s(Y.uncompressedSize,4),te+=s(w.length,2),te+=s($.length,2),{fileRecord:d.LOCAL_FILE_HEADER+te+w+$,dirRecord:d.CENTRAL_FILE_HEADER+s(j,2)+te+s(O.length,2)+"\0\0\0\0"+s(V,4)+s(g,4)+w+$+O}}var o=t("../utils"),c=t("../stream/GenericWorker"),l=t("../utf8"),u=t("../crc32"),d=t("../signature");function h(f,p,m,g){c.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=p,this.zipPlatform=m,this.encodeFileName=g,this.streamFiles=f,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(h,c),h.prototype.push=function(f){var p=f.meta.percent||0,m=this.entriesCount,g=this._sources.length;this.accumulate?this.contentBuffer.push(f):(this.bytesWritten+=f.data.length,c.prototype.push.call(this,{data:f.data,meta:{currentFile:this.currentFile,percent:m?(p+100*(m-g-1))/m:100}}))},h.prototype.openedSource=function(f){this.currentSourceOffset=this.bytesWritten,this.currentFile=f.file.name;var p=this.streamFiles&&!f.file.dir;if(p){var m=a(f,p,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:m.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(f){this.accumulate=!1;var p=this.streamFiles&&!f.file.dir,m=a(f,p,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(m.dirRecord),p)this.push({data:(function(g){return d.DATA_DESCRIPTOR+s(g.crc32,4)+s(g.compressedSize,4)+s(g.uncompressedSize,4)})(f),meta:{percent:100}});else for(this.push({data:m.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var f=this.bytesWritten,p=0;p<this.dirRecords.length;p++)this.push({data:this.dirRecords[p],meta:{percent:100}});var m=this.bytesWritten-f,g=(function(y,v,b,T,x){var _=o.transformTo("string",x(T));return d.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(y,2)+s(y,2)+s(v,4)+s(b,4)+s(_.length,2)+_})(this.dirRecords.length,m,f,this.zipComment,this.encodeFileName);this.push({data:g,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(f){this._sources.push(f);var p=this;return f.on("data",function(m){p.processChunk(m)}),f.on("end",function(){p.closedSource(p.previous.streamInfo),p._sources.length?p.prepareNextSource():p.end()}),f.on("error",function(m){p.error(m)}),this},h.prototype.resume=function(){return!!c.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(f){var p=this._sources;if(!c.prototype.error.call(this,f))return!1;for(var m=0;m<p.length;m++)try{p[m].error(f)}catch{}return!0},h.prototype.lock=function(){c.prototype.lock.call(this);for(var f=this._sources,p=0;p<f.length;p++)f[p].lock()},i.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,i,r){var s=t("../compressions"),a=t("./ZipFileWorker");r.generateWorker=function(o,c,l){var u=new a(c.streamFiles,l,c.platform,c.encodeFileName),d=0;try{o.forEach(function(h,f){d++;var p=(function(v,b){var T=v||b,x=s[T];if(!x)throw new Error(T+" is not a valid compression method !");return x})(f.options.compression,c.compression),m=f.options.compressionOptions||c.compressionOptions||{},g=f.dir,y=f.date;f._compressWorker(p,m).withStreamInfo("file",{name:h,dir:g,date:y,comment:f.comment||"",unixPermissions:f.unixPermissions,dosPermissions:f.dosPermissions}).pipe(u)}),u.entriesCount=d}catch(h){u.error(h)}return u}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,i,r){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new s;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}(s.prototype=t("./object")).loadAsync=t("./load"),s.support=t("./support"),s.defaults=t("./defaults"),s.version="3.10.1",s.loadAsync=function(a,o){return new s().loadAsync(a,o)},s.external=t("./external"),i.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,i,r){var s=t("./utils"),a=t("./external"),o=t("./utf8"),c=t("./zipEntries"),l=t("./stream/Crc32Probe"),u=t("./nodejsUtils");function d(h){return new a.Promise(function(f,p){var m=h.decompressed.getContentWorker().pipe(new l);m.on("error",function(g){p(g)}).on("end",function(){m.streamInfo.crc32!==h.decompressed.crc32?p(new Error("Corrupted zip : CRC32 mismatch")):f()}).resume()})}i.exports=function(h,f){var p=this;return f=s.extend(f||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),u.isNode&&u.isStream(h)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",h,!0,f.optimizedBinaryString,f.base64).then(function(m){var g=new c(f);return g.load(m),g}).then(function(m){var g=[a.Promise.resolve(m)],y=m.files;if(f.checkCRC32)for(var v=0;v<y.length;v++)g.push(d(y[v]));return a.Promise.all(g)}).then(function(m){for(var g=m.shift(),y=g.files,v=0;v<y.length;v++){var b=y[v],T=b.fileNameStr,x=s.resolve(b.fileNameStr);p.file(x,b.decompressed,{binary:!0,optimizedBinaryString:!0,date:b.date,dir:b.dir,comment:b.fileCommentStr.length?b.fileCommentStr:null,unixPermissions:b.unixPermissions,dosPermissions:b.dosPermissions,createFolders:f.createFolders}),b.dir||(p.file(x).unsafeOriginalName=T)}return g.zipComment.length&&(p.comment=g.zipComment),p})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,i,r){var s=t("../utils"),a=t("../stream/GenericWorker");function o(c,l){a.call(this,"Nodejs stream input adapter for "+c),this._upstreamEnded=!1,this._bindStream(l)}s.inherits(o,a),o.prototype._bindStream=function(c){var l=this;(this._stream=c).pause(),c.on("data",function(u){l.push({data:u,meta:{percent:0}})}).on("error",function(u){l.isPaused?this.generatedError=u:l.error(u)}).on("end",function(){l.isPaused?l._upstreamEnded=!0:l.end()})},o.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,i,r){var s=t("readable-stream").Readable;function a(o,c,l){s.call(this,c),this._helper=o;var u=this;o.on("data",function(d,h){u.push(d)||u._helper.pause(),l&&l(h)}).on("error",function(d){u.emit("error",d)}).on("end",function(){u.push(null)})}t("../utils").inherits(a,s),a.prototype._read=function(){this._helper.resume()},i.exports=a},{"../utils":32,"readable-stream":16}],14:[function(t,i,r){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,a);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,a)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var a=new Buffer(s);return a.fill(0),a},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(t,i,r){function s(x,_,D){var w,S=o.getTypeOf(_),C=o.extend(D||{},u);C.date=C.date||new Date,C.compression!==null&&(C.compression=C.compression.toUpperCase()),typeof C.unixPermissions=="string"&&(C.unixPermissions=parseInt(C.unixPermissions,8)),C.unixPermissions&&16384&C.unixPermissions&&(C.dir=!0),C.dosPermissions&&16&C.dosPermissions&&(C.dir=!0),C.dir&&(x=y(x)),C.createFolders&&(w=g(x))&&v.call(this,w,!0);var O=S==="string"&&C.binary===!1&&C.base64===!1;D&&D.binary!==void 0||(C.binary=!O),(_ instanceof d&&_.uncompressedSize===0||C.dir||!_||_.length===0)&&(C.base64=!1,C.binary=!0,_="",C.compression="STORE",S="string");var I=null;I=_ instanceof d||_ instanceof c?_:p.isNode&&p.isStream(_)?new m(x,_):o.prepareContent(x,_,C.binary,C.optimizedBinaryString,C.base64);var L=new h(x,I,C);this.files[x]=L}var a=t("./utf8"),o=t("./utils"),c=t("./stream/GenericWorker"),l=t("./stream/StreamHelper"),u=t("./defaults"),d=t("./compressedObject"),h=t("./zipObject"),f=t("./generate"),p=t("./nodejsUtils"),m=t("./nodejs/NodejsStreamInputAdapter"),g=function(x){x.slice(-1)==="/"&&(x=x.substring(0,x.length-1));var _=x.lastIndexOf("/");return 0<_?x.substring(0,_):""},y=function(x){return x.slice(-1)!=="/"&&(x+="/"),x},v=function(x,_){return _=_!==void 0?_:u.createFolders,x=y(x),this.files[x]||s.call(this,x,null,{dir:!0,createFolders:_}),this.files[x]};function b(x){return Object.prototype.toString.call(x)==="[object RegExp]"}var T={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(x){var _,D,w;for(_ in this.files)w=this.files[_],(D=_.slice(this.root.length,_.length))&&_.slice(0,this.root.length)===this.root&&x(D,w)},filter:function(x){var _=[];return this.forEach(function(D,w){x(D,w)&&_.push(w)}),_},file:function(x,_,D){if(arguments.length!==1)return x=this.root+x,s.call(this,x,_,D),this;if(b(x)){var w=x;return this.filter(function(C,O){return!O.dir&&w.test(C)})}var S=this.files[this.root+x];return S&&!S.dir?S:null},folder:function(x){if(!x)return this;if(b(x))return this.filter(function(S,C){return C.dir&&x.test(S)});var _=this.root+x,D=v.call(this,_),w=this.clone();return w.root=D.name,w},remove:function(x){x=this.root+x;var _=this.files[x];if(_||(x.slice(-1)!=="/"&&(x+="/"),_=this.files[x]),_&&!_.dir)delete this.files[x];else for(var D=this.filter(function(S,C){return C.name.slice(0,x.length)===x}),w=0;w<D.length;w++)delete this.files[D[w].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(x){var _,D={};try{if((D=o.extend(x||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=D.type.toLowerCase(),D.compression=D.compression.toUpperCase(),D.type==="binarystring"&&(D.type="string"),!D.type)throw new Error("No output type specified.");o.checkSupport(D.type),D.platform!=="darwin"&&D.platform!=="freebsd"&&D.platform!=="linux"&&D.platform!=="sunos"||(D.platform="UNIX"),D.platform==="win32"&&(D.platform="DOS");var w=D.comment||this.comment||"";_=f.generateWorker(this,D,w)}catch(S){(_=new c("error")).error(S)}return new l(_,D.type||"string",D.mimeType)},generateAsync:function(x,_){return this.generateInternalStream(x).accumulate(_)},generateNodeStream:function(x,_){return(x=x||{}).type||(x.type="nodebuffer"),this.generateInternalStream(x).toNodejsStream(_)}};i.exports=T},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,i,r){i.exports=t("stream")},{stream:void 0}],17:[function(t,i,r){var s=t("./DataReader");function a(o){s.call(this,o);for(var c=0;c<this.data.length;c++)o[c]=255&o[c]}t("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data[this.zero+o]},a.prototype.lastIndexOfSignature=function(o){for(var c=o.charCodeAt(0),l=o.charCodeAt(1),u=o.charCodeAt(2),d=o.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===c&&this.data[h+1]===l&&this.data[h+2]===u&&this.data[h+3]===d)return h-this.zero;return-1},a.prototype.readAndCheckSignature=function(o){var c=o.charCodeAt(0),l=o.charCodeAt(1),u=o.charCodeAt(2),d=o.charCodeAt(3),h=this.readData(4);return c===h[0]&&l===h[1]&&u===h[2]&&d===h[3]},a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},i.exports=a},{"../utils":32,"./DataReader":18}],18:[function(t,i,r){var s=t("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var c,l=0;for(this.checkOffset(o),c=this.index+o-1;c>=this.index;c--)l=(l<<8)+this.byteAt(c);return this.index+=o,l},readString:function(o){return s.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},i.exports=a},{"../utils":32}],19:[function(t,i,r){var s=t("./Uint8ArrayReader");function a(o){s.call(this,o)}t("../utils").inherits(a,s),a.prototype.readData=function(o){this.checkOffset(o);var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},i.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,i,r){var s=t("./DataReader");function a(o){s.call(this,o)}t("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},a.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},a.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},a.prototype.readData=function(o){this.checkOffset(o);var c=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},i.exports=a},{"../utils":32,"./DataReader":18}],21:[function(t,i,r){var s=t("./ArrayReader");function a(o){s.call(this,o)}t("../utils").inherits(a,s),a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var c=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,c},i.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(t,i,r){var s=t("../utils"),a=t("../support"),o=t("./ArrayReader"),c=t("./StringReader"),l=t("./NodeBufferReader"),u=t("./Uint8ArrayReader");i.exports=function(d){var h=s.getTypeOf(d);return s.checkSupport(h),h!=="string"||a.uint8array?h==="nodebuffer"?new l(d):a.uint8array?new u(s.transformTo("uint8array",d)):new o(s.transformTo("array",d)):new c(d)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,i,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,i,r){var s=t("./GenericWorker"),a=t("../utils");function o(c){s.call(this,"ConvertWorker to "+c),this.destType=c}a.inherits(o,s),o.prototype.processChunk=function(c){this.push({data:a.transformTo(this.destType,c.data),meta:c.meta})},i.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(t,i,r){var s=t("./GenericWorker"),a=t("../crc32");function o(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(o,s),o.prototype.processChunk=function(c){this.streamInfo.crc32=a(c.data,this.streamInfo.crc32||0),this.push(c)},i.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,i,r){var s=t("../utils"),a=t("./GenericWorker");function o(c){a.call(this,"DataLengthProbe for "+c),this.propName=c,this.withStreamInfo(c,0)}s.inherits(o,a),o.prototype.processChunk=function(c){if(c){var l=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=l+c.data.length}a.prototype.processChunk.call(this,c)},i.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(t,i,r){var s=t("../utils"),a=t("./GenericWorker");function o(c){a.call(this,"DataWorker");var l=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,c.then(function(u){l.dataIsReady=!0,l.data=u,l.max=u&&u.length||0,l.type=s.getTypeOf(u),l.isPaused||l._tickAndRepeat()},function(u){l.error(u)})}s.inherits(o,a),o.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var c=null,l=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,l);break;case"uint8array":c=this.data.subarray(this.index,l);break;case"array":case"nodebuffer":c=this.data.slice(this.index,l)}return this.index=l,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(t,i,r){function s(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var c=0;c<this._listeners[a].length;c++)this._listeners[a][c].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(c){o.processChunk(c)}),a.on("end",function(){o.end()}),a.on("error",function(c){o.error(c)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},i.exports=s},{}],29:[function(t,i,r){var s=t("../utils"),a=t("./ConvertWorker"),o=t("./GenericWorker"),c=t("../base64"),l=t("../support"),u=t("../external"),d=null;if(l.nodestream)try{d=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(p,m){return new u.Promise(function(g,y){var v=[],b=p._internalType,T=p._outputType,x=p._mimeType;p.on("data",function(_,D){v.push(_),m&&m(D)}).on("error",function(_){v=[],y(_)}).on("end",function(){try{var _=(function(D,w,S){switch(D){case"blob":return s.newBlob(s.transformTo("arraybuffer",w),S);case"base64":return c.encode(w);default:return s.transformTo(D,w)}})(T,(function(D,w){var S,C=0,O=null,I=0;for(S=0;S<w.length;S++)I+=w[S].length;switch(D){case"string":return w.join("");case"array":return Array.prototype.concat.apply([],w);case"uint8array":for(O=new Uint8Array(I),S=0;S<w.length;S++)O.set(w[S],C),C+=w[S].length;return O;case"nodebuffer":return Buffer.concat(w);default:throw new Error("concat : unsupported type '"+D+"'")}})(b,v),x);g(_)}catch(D){y(D)}v=[]}).resume()})}function f(p,m,g){var y=m;switch(m){case"blob":case"arraybuffer":y="uint8array";break;case"base64":y="string"}try{this._internalType=y,this._outputType=m,this._mimeType=g,s.checkSupport(y),this._worker=p.pipe(new a(y)),p.lock()}catch(v){this._worker=new o("error"),this._worker.error(v)}}f.prototype={accumulate:function(p){return h(this,p)},on:function(p,m){var g=this;return p==="data"?this._worker.on(p,function(y){m.call(g,y.data,y.meta)}):this._worker.on(p,function(){s.delay(m,arguments,g)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new d(this,{objectMode:this._outputType!=="nodebuffer"},p)}},i.exports=f},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,i,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r.nodebuffer=typeof Buffer<"u",r.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r.blob=!1;else{var s=new ArrayBuffer(0);try{r.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(s),r.blob=a.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!t("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(t,i,r){for(var s=t("./utils"),a=t("./support"),o=t("./nodejsUtils"),c=t("./stream/GenericWorker"),l=new Array(256),u=0;u<256;u++)l[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;l[254]=l[254]=1;function d(){c.call(this,"utf-8 decode"),this.leftOver=null}function h(){c.call(this,"utf-8 encode")}r.utf8encode=function(f){return a.nodebuffer?o.newBufferFrom(f,"utf-8"):(function(p){var m,g,y,v,b,T=p.length,x=0;for(v=0;v<T;v++)(64512&(g=p.charCodeAt(v)))==55296&&v+1<T&&(64512&(y=p.charCodeAt(v+1)))==56320&&(g=65536+(g-55296<<10)+(y-56320),v++),x+=g<128?1:g<2048?2:g<65536?3:4;for(m=a.uint8array?new Uint8Array(x):new Array(x),v=b=0;b<x;v++)(64512&(g=p.charCodeAt(v)))==55296&&v+1<T&&(64512&(y=p.charCodeAt(v+1)))==56320&&(g=65536+(g-55296<<10)+(y-56320),v++),g<128?m[b++]=g:(g<2048?m[b++]=192|g>>>6:(g<65536?m[b++]=224|g>>>12:(m[b++]=240|g>>>18,m[b++]=128|g>>>12&63),m[b++]=128|g>>>6&63),m[b++]=128|63&g);return m})(f)},r.utf8decode=function(f){return a.nodebuffer?s.transformTo("nodebuffer",f).toString("utf-8"):(function(p){var m,g,y,v,b=p.length,T=new Array(2*b);for(m=g=0;m<b;)if((y=p[m++])<128)T[g++]=y;else if(4<(v=l[y]))T[g++]=65533,m+=v-1;else{for(y&=v===2?31:v===3?15:7;1<v&&m<b;)y=y<<6|63&p[m++],v--;1<v?T[g++]=65533:y<65536?T[g++]=y:(y-=65536,T[g++]=55296|y>>10&1023,T[g++]=56320|1023&y)}return T.length!==g&&(T.subarray?T=T.subarray(0,g):T.length=g),s.applyFromCharCode(T)})(f=s.transformTo(a.uint8array?"uint8array":"array",f))},s.inherits(d,c),d.prototype.processChunk=function(f){var p=s.transformTo(a.uint8array?"uint8array":"array",f.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var m=p;(p=new Uint8Array(m.length+this.leftOver.length)).set(this.leftOver,0),p.set(m,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var g=(function(v,b){var T;for((b=b||v.length)>v.length&&(b=v.length),T=b-1;0<=T&&(192&v[T])==128;)T--;return T<0||T===0?b:T+l[v[T]]>b?T:b})(p),y=p;g!==p.length&&(a.uint8array?(y=p.subarray(0,g),this.leftOver=p.subarray(g,p.length)):(y=p.slice(0,g),this.leftOver=p.slice(g,p.length))),this.push({data:r.utf8decode(y),meta:f.meta})},d.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=d,s.inherits(h,c),h.prototype.processChunk=function(f){this.push({data:r.utf8encode(f.data),meta:f.meta})},r.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,i,r){var s=t("./support"),a=t("./base64"),o=t("./nodejsUtils"),c=t("./external");function l(m){return m}function u(m,g){for(var y=0;y<m.length;++y)g[y]=255&m.charCodeAt(y);return g}t("setimmediate"),r.newBlob=function(m,g){r.checkSupport("blob");try{return new Blob([m],{type:g})}catch{try{var y=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return y.append(m),y.getBlob(g)}catch{throw new Error("Bug : can't construct the Blob.")}}};var d={stringifyByChunk:function(m,g,y){var v=[],b=0,T=m.length;if(T<=y)return String.fromCharCode.apply(null,m);for(;b<T;)g==="array"||g==="nodebuffer"?v.push(String.fromCharCode.apply(null,m.slice(b,Math.min(b+y,T)))):v.push(String.fromCharCode.apply(null,m.subarray(b,Math.min(b+y,T)))),b+=y;return v.join("")},stringifyByChar:function(m){for(var g="",y=0;y<m.length;y++)g+=String.fromCharCode(m[y]);return g},applyCanBeUsed:{uint8array:(function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}})()}};function h(m){var g=65536,y=r.getTypeOf(m),v=!0;if(y==="uint8array"?v=d.applyCanBeUsed.uint8array:y==="nodebuffer"&&(v=d.applyCanBeUsed.nodebuffer),v)for(;1<g;)try{return d.stringifyByChunk(m,y,g)}catch{g=Math.floor(g/2)}return d.stringifyByChar(m)}function f(m,g){for(var y=0;y<m.length;y++)g[y]=m[y];return g}r.applyFromCharCode=h;var p={};p.string={string:l,array:function(m){return u(m,new Array(m.length))},arraybuffer:function(m){return p.string.uint8array(m).buffer},uint8array:function(m){return u(m,new Uint8Array(m.length))},nodebuffer:function(m){return u(m,o.allocBuffer(m.length))}},p.array={string:h,array:l,arraybuffer:function(m){return new Uint8Array(m).buffer},uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return o.newBufferFrom(m)}},p.arraybuffer={string:function(m){return h(new Uint8Array(m))},array:function(m){return f(new Uint8Array(m),new Array(m.byteLength))},arraybuffer:l,uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return o.newBufferFrom(new Uint8Array(m))}},p.uint8array={string:h,array:function(m){return f(m,new Array(m.length))},arraybuffer:function(m){return m.buffer},uint8array:l,nodebuffer:function(m){return o.newBufferFrom(m)}},p.nodebuffer={string:h,array:function(m){return f(m,new Array(m.length))},arraybuffer:function(m){return p.nodebuffer.uint8array(m).buffer},uint8array:function(m){return f(m,new Uint8Array(m.length))},nodebuffer:l},r.transformTo=function(m,g){if(g=g||"",!m)return g;r.checkSupport(m);var y=r.getTypeOf(g);return p[y][m](g)},r.resolve=function(m){for(var g=m.split("/"),y=[],v=0;v<g.length;v++){var b=g[v];b==="."||b===""&&v!==0&&v!==g.length-1||(b===".."?y.pop():y.push(b))}return y.join("/")},r.getTypeOf=function(m){return typeof m=="string"?"string":Object.prototype.toString.call(m)==="[object Array]"?"array":s.nodebuffer&&o.isBuffer(m)?"nodebuffer":s.uint8array&&m instanceof Uint8Array?"uint8array":s.arraybuffer&&m instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(m){if(!s[m.toLowerCase()])throw new Error(m+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(m){var g,y,v="";for(y=0;y<(m||"").length;y++)v+="\\x"+((g=m.charCodeAt(y))<16?"0":"")+g.toString(16).toUpperCase();return v},r.delay=function(m,g,y){setImmediate(function(){m.apply(y||null,g||[])})},r.inherits=function(m,g){function y(){}y.prototype=g.prototype,m.prototype=new y},r.extend=function(){var m,g,y={};for(m=0;m<arguments.length;m++)for(g in arguments[m])Object.prototype.hasOwnProperty.call(arguments[m],g)&&y[g]===void 0&&(y[g]=arguments[m][g]);return y},r.prepareContent=function(m,g,y,v,b){return c.Promise.resolve(g).then(function(T){return s.blob&&(T instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(T))!==-1)&&typeof FileReader<"u"?new c.Promise(function(x,_){var D=new FileReader;D.onload=function(w){x(w.target.result)},D.onerror=function(w){_(w.target.error)},D.readAsArrayBuffer(T)}):T}).then(function(T){var x=r.getTypeOf(T);return x?(x==="arraybuffer"?T=r.transformTo("uint8array",T):x==="string"&&(b?T=a.decode(T):y&&v!==!0&&(T=(function(_){return u(_,s.uint8array?new Uint8Array(_.length):new Array(_.length))})(T))),T):c.Promise.reject(new Error("Can't read the data of '"+m+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,i,r){var s=t("./reader/readerFor"),a=t("./utils"),o=t("./signature"),c=t("./zipEntry"),l=t("./support");function u(d){this.files=[],this.loadOptions=d}u.prototype={checkSignature:function(d){if(!this.reader.readAndCheckSignature(d)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(h)+", expected "+a.pretty(d)+")")}},isSignature:function(d,h){var f=this.reader.index;this.reader.setIndex(d);var p=this.reader.readString(4)===h;return this.reader.setIndex(f),p},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var d=this.reader.readData(this.zipCommentLength),h=l.uint8array?"uint8array":"array",f=a.transformTo(h,d);this.zipComment=this.loadOptions.decodeFileName(f)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var d,h,f,p=this.zip64EndOfCentralSize-44;0<p;)d=this.reader.readInt(2),h=this.reader.readInt(4),f=this.reader.readData(h),this.zip64ExtensibleData[d]={id:d,length:h,value:f}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var d,h;for(d=0;d<this.files.length;d++)h=this.files[d],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var d;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(d=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(d);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var d=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(d<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(d);var h=d;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(d=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(d),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var f=this.centralDirOffset+this.centralDirSize;this.zip64&&(f+=20,f+=12+this.zip64EndOfCentralSize);var p=h-f;if(0<p)this.isSignature(h,o.CENTRAL_FILE_HEADER)||(this.reader.zero=p);else if(p<0)throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")},prepareReader:function(d){this.reader=s(d)},load:function(d){this.prepareReader(d),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,i,r){var s=t("./reader/readerFor"),a=t("./utils"),o=t("./compressedObject"),c=t("./crc32"),l=t("./utf8"),u=t("./compressions"),d=t("./support");function h(f,p){this.options=f,this.loadOptions=p}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(f){var p,m;if(f.skip(22),this.fileNameLength=f.readInt(2),m=f.readInt(2),this.fileName=f.readData(this.fileNameLength),f.skip(m),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((p=(function(g){for(var y in u)if(Object.prototype.hasOwnProperty.call(u,y)&&u[y].magic===g)return u[y];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,p,f.readData(this.compressedSize))},readCentralPart:function(f){this.versionMadeBy=f.readInt(2),f.skip(2),this.bitFlag=f.readInt(2),this.compressionMethod=f.readString(2),this.date=f.readDate(),this.crc32=f.readInt(4),this.compressedSize=f.readInt(4),this.uncompressedSize=f.readInt(4);var p=f.readInt(2);if(this.extraFieldsLength=f.readInt(2),this.fileCommentLength=f.readInt(2),this.diskNumberStart=f.readInt(2),this.internalFileAttributes=f.readInt(2),this.externalFileAttributes=f.readInt(4),this.localHeaderOffset=f.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");f.skip(p),this.readExtraFields(f),this.parseZIP64ExtraField(f),this.fileComment=f.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var f=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),f==0&&(this.dosPermissions=63&this.externalFileAttributes),f==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var f=s(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=f.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=f.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=f.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=f.readInt(4))}},readExtraFields:function(f){var p,m,g,y=f.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});f.index+4<y;)p=f.readInt(2),m=f.readInt(2),g=f.readData(m),this.extraFields[p]={id:p,length:m,value:g};f.setIndex(y)},handleUTF8:function(){var f=d.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=l.utf8decode(this.fileName),this.fileCommentStr=l.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var m=a.transformTo(f,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(m)}var g=this.findExtraFieldUnicodeComment();if(g!==null)this.fileCommentStr=g;else{var y=a.transformTo(f,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(y)}}},findExtraFieldUnicodePath:function(){var f=this.extraFields[28789];if(f){var p=s(f.value);return p.readInt(1)!==1||c(this.fileName)!==p.readInt(4)?null:l.utf8decode(p.readData(f.length-5))}return null},findExtraFieldUnicodeComment:function(){var f=this.extraFields[25461];if(f){var p=s(f.value);return p.readInt(1)!==1||c(this.fileComment)!==p.readInt(4)?null:l.utf8decode(p.readData(f.length-5))}return null}},i.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,i,r){function s(p,m,g){this.name=p,this.dir=g.dir,this.date=g.date,this.comment=g.comment,this.unixPermissions=g.unixPermissions,this.dosPermissions=g.dosPermissions,this._data=m,this._dataBinary=g.binary,this.options={compression:g.compression,compressionOptions:g.compressionOptions}}var a=t("./stream/StreamHelper"),o=t("./stream/DataWorker"),c=t("./utf8"),l=t("./compressedObject"),u=t("./stream/GenericWorker");s.prototype={internalStream:function(p){var m=null,g="string";try{if(!p)throw new Error("No output type specified.");var y=(g=p.toLowerCase())==="string"||g==="text";g!=="binarystring"&&g!=="text"||(g="string"),m=this._decompressWorker();var v=!this._dataBinary;v&&!y&&(m=m.pipe(new c.Utf8EncodeWorker)),!v&&y&&(m=m.pipe(new c.Utf8DecodeWorker))}catch(b){(m=new u("error")).error(b)}return new a(m,g,"")},async:function(p,m){return this.internalStream(p).accumulate(m)},nodeStream:function(p,m){return this.internalStream(p||"nodebuffer").toNodejsStream(m)},_compressWorker:function(p,m){if(this._data instanceof l&&this._data.compression.magic===p.magic)return this._data.getCompressedWorker();var g=this._decompressWorker();return this._dataBinary||(g=g.pipe(new c.Utf8EncodeWorker)),l.createWorkerFrom(g,p,m)},_decompressWorker:function(){return this._data instanceof l?this._data.getContentWorker():this._data instanceof u?this._data:new o(this._data)}};for(var d=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<d.length;f++)s.prototype[d[f]]=h;i.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,i,r){(function(s){var a,o,c=s.MutationObserver||s.WebKitMutationObserver;if(c){var l=0,u=new c(p),d=s.document.createTextNode("");u.observe(d,{characterData:!0}),a=function(){d.data=l=++l%2}}else if(s.setImmediate||s.MessageChannel===void 0)a="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var m=s.document.createElement("script");m.onreadystatechange=function(){p(),m.onreadystatechange=null,m.parentNode.removeChild(m),m=null},s.document.documentElement.appendChild(m)}:function(){setTimeout(p,0)};else{var h=new s.MessageChannel;h.port1.onmessage=p,a=function(){h.port2.postMessage(0)}}var f=[];function p(){var m,g;o=!0;for(var y=f.length;y;){for(g=f,f=[],m=-1;++m<y;)g[m]();y=f.length}o=!1}i.exports=function(m){f.push(m)!==1||o||a()}}).call(this,typeof vi<"u"?vi:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,i,r){var s=t("immediate");function a(){}var o={},c=["REJECTED"],l=["FULFILLED"],u=["PENDING"];function d(y){if(typeof y!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,y!==a&&m(this,y)}function h(y,v,b){this.promise=y,typeof v=="function"&&(this.onFulfilled=v,this.callFulfilled=this.otherCallFulfilled),typeof b=="function"&&(this.onRejected=b,this.callRejected=this.otherCallRejected)}function f(y,v,b){s(function(){var T;try{T=v(b)}catch(x){return o.reject(y,x)}T===y?o.reject(y,new TypeError("Cannot resolve promise with itself")):o.resolve(y,T)})}function p(y){var v=y&&y.then;if(y&&(typeof y=="object"||typeof y=="function")&&typeof v=="function")return function(){v.apply(y,arguments)}}function m(y,v){var b=!1;function T(D){b||(b=!0,o.reject(y,D))}function x(D){b||(b=!0,o.resolve(y,D))}var _=g(function(){v(x,T)});_.status==="error"&&T(_.value)}function g(y,v){var b={};try{b.value=y(v),b.status="success"}catch(T){b.status="error",b.value=T}return b}(i.exports=d).prototype.finally=function(y){if(typeof y!="function")return this;var v=this.constructor;return this.then(function(b){return v.resolve(y()).then(function(){return b})},function(b){return v.resolve(y()).then(function(){throw b})})},d.prototype.catch=function(y){return this.then(null,y)},d.prototype.then=function(y,v){if(typeof y!="function"&&this.state===l||typeof v!="function"&&this.state===c)return this;var b=new this.constructor(a);return this.state!==u?f(b,this.state===l?y:v,this.outcome):this.queue.push(new h(b,y,v)),b},h.prototype.callFulfilled=function(y){o.resolve(this.promise,y)},h.prototype.otherCallFulfilled=function(y){f(this.promise,this.onFulfilled,y)},h.prototype.callRejected=function(y){o.reject(this.promise,y)},h.prototype.otherCallRejected=function(y){f(this.promise,this.onRejected,y)},o.resolve=function(y,v){var b=g(p,v);if(b.status==="error")return o.reject(y,b.value);var T=b.value;if(T)m(y,T);else{y.state=l,y.outcome=v;for(var x=-1,_=y.queue.length;++x<_;)y.queue[x].callFulfilled(v)}return y},o.reject=function(y,v){y.state=c,y.outcome=v;for(var b=-1,T=y.queue.length;++b<T;)y.queue[b].callRejected(v);return y},d.resolve=function(y){return y instanceof this?y:o.resolve(new this(a),y)},d.reject=function(y){var v=new this(a);return o.reject(v,y)},d.all=function(y){var v=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=y.length,T=!1;if(!b)return this.resolve([]);for(var x=new Array(b),_=0,D=-1,w=new this(a);++D<b;)S(y[D],D);return w;function S(C,O){v.resolve(C).then(function(I){x[O]=I,++_!==b||T||(T=!0,o.resolve(w,x))},function(I){T||(T=!0,o.reject(w,I))})}},d.race=function(y){var v=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=y.length,T=!1;if(!b)return this.resolve([]);for(var x=-1,_=new this(a);++x<b;)D=y[x],v.resolve(D).then(function(w){T||(T=!0,o.resolve(_,w))},function(w){T||(T=!0,o.reject(_,w))});var D;return _}},{immediate:36}],38:[function(t,i,r){var s={};(0,t("./lib/utils/common").assign)(s,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),i.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,i,r){var s=t("./zlib/deflate"),a=t("./utils/common"),o=t("./utils/strings"),c=t("./zlib/messages"),l=t("./zlib/zstream"),u=Object.prototype.toString,d=0,h=-1,f=0,p=8;function m(y){if(!(this instanceof m))return new m(y);this.options=a.assign({level:h,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},y||{});var v=this.options;v.raw&&0<v.windowBits?v.windowBits=-v.windowBits:v.gzip&&0<v.windowBits&&v.windowBits<16&&(v.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var b=s.deflateInit2(this.strm,v.level,v.method,v.windowBits,v.memLevel,v.strategy);if(b!==d)throw new Error(c[b]);if(v.header&&s.deflateSetHeader(this.strm,v.header),v.dictionary){var T;if(T=typeof v.dictionary=="string"?o.string2buf(v.dictionary):u.call(v.dictionary)==="[object ArrayBuffer]"?new Uint8Array(v.dictionary):v.dictionary,(b=s.deflateSetDictionary(this.strm,T))!==d)throw new Error(c[b]);this._dict_set=!0}}function g(y,v){var b=new m(v);if(b.push(y,!0),b.err)throw b.msg||c[b.err];return b.result}m.prototype.push=function(y,v){var b,T,x=this.strm,_=this.options.chunkSize;if(this.ended)return!1;T=v===~~v?v:v===!0?4:0,typeof y=="string"?x.input=o.string2buf(y):u.call(y)==="[object ArrayBuffer]"?x.input=new Uint8Array(y):x.input=y,x.next_in=0,x.avail_in=x.input.length;do{if(x.avail_out===0&&(x.output=new a.Buf8(_),x.next_out=0,x.avail_out=_),(b=s.deflate(x,T))!==1&&b!==d)return this.onEnd(b),!(this.ended=!0);x.avail_out!==0&&(x.avail_in!==0||T!==4&&T!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(x.output,x.next_out))):this.onData(a.shrinkBuf(x.output,x.next_out)))}while((0<x.avail_in||x.avail_out===0)&&b!==1);return T===4?(b=s.deflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===d):T!==2||(this.onEnd(d),!(x.avail_out=0))},m.prototype.onData=function(y){this.chunks.push(y)},m.prototype.onEnd=function(y){y===d&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},r.Deflate=m,r.deflate=g,r.deflateRaw=function(y,v){return(v=v||{}).raw=!0,g(y,v)},r.gzip=function(y,v){return(v=v||{}).gzip=!0,g(y,v)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,i,r){var s=t("./zlib/inflate"),a=t("./utils/common"),o=t("./utils/strings"),c=t("./zlib/constants"),l=t("./zlib/messages"),u=t("./zlib/zstream"),d=t("./zlib/gzheader"),h=Object.prototype.toString;function f(m){if(!(this instanceof f))return new f(m);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},m||{});var g=this.options;g.raw&&0<=g.windowBits&&g.windowBits<16&&(g.windowBits=-g.windowBits,g.windowBits===0&&(g.windowBits=-15)),!(0<=g.windowBits&&g.windowBits<16)||m&&m.windowBits||(g.windowBits+=32),15<g.windowBits&&g.windowBits<48&&(15&g.windowBits)==0&&(g.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var y=s.inflateInit2(this.strm,g.windowBits);if(y!==c.Z_OK)throw new Error(l[y]);this.header=new d,s.inflateGetHeader(this.strm,this.header)}function p(m,g){var y=new f(g);if(y.push(m,!0),y.err)throw y.msg||l[y.err];return y.result}f.prototype.push=function(m,g){var y,v,b,T,x,_,D=this.strm,w=this.options.chunkSize,S=this.options.dictionary,C=!1;if(this.ended)return!1;v=g===~~g?g:g===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof m=="string"?D.input=o.binstring2buf(m):h.call(m)==="[object ArrayBuffer]"?D.input=new Uint8Array(m):D.input=m,D.next_in=0,D.avail_in=D.input.length;do{if(D.avail_out===0&&(D.output=new a.Buf8(w),D.next_out=0,D.avail_out=w),(y=s.inflate(D,c.Z_NO_FLUSH))===c.Z_NEED_DICT&&S&&(_=typeof S=="string"?o.string2buf(S):h.call(S)==="[object ArrayBuffer]"?new Uint8Array(S):S,y=s.inflateSetDictionary(this.strm,_)),y===c.Z_BUF_ERROR&&C===!0&&(y=c.Z_OK,C=!1),y!==c.Z_STREAM_END&&y!==c.Z_OK)return this.onEnd(y),!(this.ended=!0);D.next_out&&(D.avail_out!==0&&y!==c.Z_STREAM_END&&(D.avail_in!==0||v!==c.Z_FINISH&&v!==c.Z_SYNC_FLUSH)||(this.options.to==="string"?(b=o.utf8border(D.output,D.next_out),T=D.next_out-b,x=o.buf2string(D.output,b),D.next_out=T,D.avail_out=w-T,T&&a.arraySet(D.output,D.output,b,T,0),this.onData(x)):this.onData(a.shrinkBuf(D.output,D.next_out)))),D.avail_in===0&&D.avail_out===0&&(C=!0)}while((0<D.avail_in||D.avail_out===0)&&y!==c.Z_STREAM_END);return y===c.Z_STREAM_END&&(v=c.Z_FINISH),v===c.Z_FINISH?(y=s.inflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===c.Z_OK):v!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),!(D.avail_out=0))},f.prototype.onData=function(m){this.chunks.push(m)},f.prototype.onEnd=function(m){m===c.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},r.Inflate=f,r.inflate=p,r.inflateRaw=function(m,g){return(g=g||{}).raw=!0,p(m,g)},r.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,i,r){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r.assign=function(c){for(var l=Array.prototype.slice.call(arguments,1);l.length;){var u=l.shift();if(u){if(typeof u!="object")throw new TypeError(u+"must be non-object");for(var d in u)u.hasOwnProperty(d)&&(c[d]=u[d])}}return c},r.shrinkBuf=function(c,l){return c.length===l?c:c.subarray?c.subarray(0,l):(c.length=l,c)};var a={arraySet:function(c,l,u,d,h){if(l.subarray&&c.subarray)c.set(l.subarray(u,u+d),h);else for(var f=0;f<d;f++)c[h+f]=l[u+f]},flattenChunks:function(c){var l,u,d,h,f,p;for(l=d=0,u=c.length;l<u;l++)d+=c[l].length;for(p=new Uint8Array(d),l=h=0,u=c.length;l<u;l++)f=c[l],p.set(f,h),h+=f.length;return p}},o={arraySet:function(c,l,u,d,h){for(var f=0;f<d;f++)c[h+f]=l[u+f]},flattenChunks:function(c){return[].concat.apply([],c)}};r.setTyped=function(c){c?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,a)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,o))},r.setTyped(s)},{}],42:[function(t,i,r){var s=t("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var c=new s.Buf8(256),l=0;l<256;l++)c[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function u(d,h){if(h<65537&&(d.subarray&&o||!d.subarray&&a))return String.fromCharCode.apply(null,s.shrinkBuf(d,h));for(var f="",p=0;p<h;p++)f+=String.fromCharCode(d[p]);return f}c[254]=c[254]=1,r.string2buf=function(d){var h,f,p,m,g,y=d.length,v=0;for(m=0;m<y;m++)(64512&(f=d.charCodeAt(m)))==55296&&m+1<y&&(64512&(p=d.charCodeAt(m+1)))==56320&&(f=65536+(f-55296<<10)+(p-56320),m++),v+=f<128?1:f<2048?2:f<65536?3:4;for(h=new s.Buf8(v),m=g=0;g<v;m++)(64512&(f=d.charCodeAt(m)))==55296&&m+1<y&&(64512&(p=d.charCodeAt(m+1)))==56320&&(f=65536+(f-55296<<10)+(p-56320),m++),f<128?h[g++]=f:(f<2048?h[g++]=192|f>>>6:(f<65536?h[g++]=224|f>>>12:(h[g++]=240|f>>>18,h[g++]=128|f>>>12&63),h[g++]=128|f>>>6&63),h[g++]=128|63&f);return h},r.buf2binstring=function(d){return u(d,d.length)},r.binstring2buf=function(d){for(var h=new s.Buf8(d.length),f=0,p=h.length;f<p;f++)h[f]=d.charCodeAt(f);return h},r.buf2string=function(d,h){var f,p,m,g,y=h||d.length,v=new Array(2*y);for(f=p=0;f<y;)if((m=d[f++])<128)v[p++]=m;else if(4<(g=c[m]))v[p++]=65533,f+=g-1;else{for(m&=g===2?31:g===3?15:7;1<g&&f<y;)m=m<<6|63&d[f++],g--;1<g?v[p++]=65533:m<65536?v[p++]=m:(m-=65536,v[p++]=55296|m>>10&1023,v[p++]=56320|1023&m)}return u(v,p)},r.utf8border=function(d,h){var f;for((h=h||d.length)>d.length&&(h=d.length),f=h-1;0<=f&&(192&d[f])==128;)f--;return f<0||f===0?h:f+c[d[f]]>h?f:h}},{"./common":41}],43:[function(t,i,r){i.exports=function(s,a,o,c){for(var l=65535&s|0,u=s>>>16&65535|0,d=0;o!==0;){for(o-=d=2e3<o?2e3:o;u=u+(l=l+a[c++]|0)|0,--d;);l%=65521,u%=65521}return l|u<<16|0}},{}],44:[function(t,i,r){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,i,r){var s=(function(){for(var a,o=[],c=0;c<256;c++){a=c;for(var l=0;l<8;l++)a=1&a?3988292384^a>>>1:a>>>1;o[c]=a}return o})();i.exports=function(a,o,c,l){var u=s,d=l+c;a^=-1;for(var h=l;h<d;h++)a=a>>>8^u[255&(a^o[h])];return-1^a}},{}],46:[function(t,i,r){var s,a=t("../utils/common"),o=t("./trees"),c=t("./adler32"),l=t("./crc32"),u=t("./messages"),d=0,h=4,f=0,p=-2,m=-1,g=4,y=2,v=8,b=9,T=286,x=30,_=19,D=2*T+1,w=15,S=3,C=258,O=C+S+1,I=42,L=113,E=1,$=2,U=3,F=4;function G(A,Z){return A.msg=u[Z],Z}function W(A){return(A<<1)-(4<A?9:0)}function Y(A){for(var Z=A.length;0<=--Z;)A[Z]=0}function P(A){var Z=A.state,q=Z.pending;q>A.avail_out&&(q=A.avail_out),q!==0&&(a.arraySet(A.output,Z.pending_buf,Z.pending_out,q,A.next_out),A.next_out+=q,Z.pending_out+=q,A.total_out+=q,A.avail_out-=q,Z.pending-=q,Z.pending===0&&(Z.pending_out=0))}function V(A,Z){o._tr_flush_block(A,0<=A.block_start?A.block_start:-1,A.strstart-A.block_start,Z),A.block_start=A.strstart,P(A.strm)}function j(A,Z){A.pending_buf[A.pending++]=Z}function te(A,Z){A.pending_buf[A.pending++]=Z>>>8&255,A.pending_buf[A.pending++]=255&Z}function ne(A,Z){var q,N,B=A.max_chain_length,z=A.strstart,se=A.prev_length,ce=A.nice_match,Q=A.strstart>A.w_size-O?A.strstart-(A.w_size-O):0,H=A.window,X=A.w_mask,ee=A.prev,ae=A.strstart+C,pe=H[z+se-1],Te=H[z+se];A.prev_length>=A.good_match&&(B>>=2),ce>A.lookahead&&(ce=A.lookahead);do if(H[(q=Z)+se]===Te&&H[q+se-1]===pe&&H[q]===H[z]&&H[++q]===H[z+1]){z+=2,q++;do;while(H[++z]===H[++q]&&H[++z]===H[++q]&&H[++z]===H[++q]&&H[++z]===H[++q]&&H[++z]===H[++q]&&H[++z]===H[++q]&&H[++z]===H[++q]&&H[++z]===H[++q]&&z<ae);if(N=C-(ae-z),z=ae-C,se<N){if(A.match_start=Z,ce<=(se=N))break;pe=H[z+se-1],Te=H[z+se]}}while((Z=ee[Z&X])>Q&&--B!=0);return se<=A.lookahead?se:A.lookahead}function ue(A){var Z,q,N,B,z,se,ce,Q,H,X,ee=A.w_size;do{if(B=A.window_size-A.lookahead-A.strstart,A.strstart>=ee+(ee-O)){for(a.arraySet(A.window,A.window,ee,ee,0),A.match_start-=ee,A.strstart-=ee,A.block_start-=ee,Z=q=A.hash_size;N=A.head[--Z],A.head[Z]=ee<=N?N-ee:0,--q;);for(Z=q=ee;N=A.prev[--Z],A.prev[Z]=ee<=N?N-ee:0,--q;);B+=ee}if(A.strm.avail_in===0)break;if(se=A.strm,ce=A.window,Q=A.strstart+A.lookahead,H=B,X=void 0,X=se.avail_in,H<X&&(X=H),q=X===0?0:(se.avail_in-=X,a.arraySet(ce,se.input,se.next_in,X,Q),se.state.wrap===1?se.adler=c(se.adler,ce,X,Q):se.state.wrap===2&&(se.adler=l(se.adler,ce,X,Q)),se.next_in+=X,se.total_in+=X,X),A.lookahead+=q,A.lookahead+A.insert>=S)for(z=A.strstart-A.insert,A.ins_h=A.window[z],A.ins_h=(A.ins_h<<A.hash_shift^A.window[z+1])&A.hash_mask;A.insert&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[z+S-1])&A.hash_mask,A.prev[z&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=z,z++,A.insert--,!(A.lookahead+A.insert<S)););}while(A.lookahead<O&&A.strm.avail_in!==0)}function he(A,Z){for(var q,N;;){if(A.lookahead<O){if(ue(A),A.lookahead<O&&Z===d)return E;if(A.lookahead===0)break}if(q=0,A.lookahead>=S&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+S-1])&A.hash_mask,q=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart),q!==0&&A.strstart-q<=A.w_size-O&&(A.match_length=ne(A,q)),A.match_length>=S)if(N=o._tr_tally(A,A.strstart-A.match_start,A.match_length-S),A.lookahead-=A.match_length,A.match_length<=A.max_lazy_match&&A.lookahead>=S){for(A.match_length--;A.strstart++,A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+S-1])&A.hash_mask,q=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart,--A.match_length!=0;);A.strstart++}else A.strstart+=A.match_length,A.match_length=0,A.ins_h=A.window[A.strstart],A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+1])&A.hash_mask;else N=o._tr_tally(A,0,A.window[A.strstart]),A.lookahead--,A.strstart++;if(N&&(V(A,!1),A.strm.avail_out===0))return E}return A.insert=A.strstart<S-1?A.strstart:S-1,Z===h?(V(A,!0),A.strm.avail_out===0?U:F):A.last_lit&&(V(A,!1),A.strm.avail_out===0)?E:$}function fe(A,Z){for(var q,N,B;;){if(A.lookahead<O){if(ue(A),A.lookahead<O&&Z===d)return E;if(A.lookahead===0)break}if(q=0,A.lookahead>=S&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+S-1])&A.hash_mask,q=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart),A.prev_length=A.match_length,A.prev_match=A.match_start,A.match_length=S-1,q!==0&&A.prev_length<A.max_lazy_match&&A.strstart-q<=A.w_size-O&&(A.match_length=ne(A,q),A.match_length<=5&&(A.strategy===1||A.match_length===S&&4096<A.strstart-A.match_start)&&(A.match_length=S-1)),A.prev_length>=S&&A.match_length<=A.prev_length){for(B=A.strstart+A.lookahead-S,N=o._tr_tally(A,A.strstart-1-A.prev_match,A.prev_length-S),A.lookahead-=A.prev_length-1,A.prev_length-=2;++A.strstart<=B&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+S-1])&A.hash_mask,q=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart),--A.prev_length!=0;);if(A.match_available=0,A.match_length=S-1,A.strstart++,N&&(V(A,!1),A.strm.avail_out===0))return E}else if(A.match_available){if((N=o._tr_tally(A,0,A.window[A.strstart-1]))&&V(A,!1),A.strstart++,A.lookahead--,A.strm.avail_out===0)return E}else A.match_available=1,A.strstart++,A.lookahead--}return A.match_available&&(N=o._tr_tally(A,0,A.window[A.strstart-1]),A.match_available=0),A.insert=A.strstart<S-1?A.strstart:S-1,Z===h?(V(A,!0),A.strm.avail_out===0?U:F):A.last_lit&&(V(A,!1),A.strm.avail_out===0)?E:$}function me(A,Z,q,N,B){this.good_length=A,this.max_lazy=Z,this.nice_length=q,this.max_chain=N,this.func=B}function ve(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*D),this.dyn_dtree=new a.Buf16(2*(2*x+1)),this.bl_tree=new a.Buf16(2*(2*_+1)),Y(this.dyn_ltree),Y(this.dyn_dtree),Y(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(w+1),this.heap=new a.Buf16(2*T+1),Y(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*T+1),Y(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function De(A){var Z;return A&&A.state?(A.total_in=A.total_out=0,A.data_type=y,(Z=A.state).pending=0,Z.pending_out=0,Z.wrap<0&&(Z.wrap=-Z.wrap),Z.status=Z.wrap?I:L,A.adler=Z.wrap===2?0:1,Z.last_flush=d,o._tr_init(Z),f):G(A,p)}function Oe(A){var Z=De(A);return Z===f&&(function(q){q.window_size=2*q.w_size,Y(q.head),q.max_lazy_match=s[q.level].max_lazy,q.good_match=s[q.level].good_length,q.nice_match=s[q.level].nice_length,q.max_chain_length=s[q.level].max_chain,q.strstart=0,q.block_start=0,q.lookahead=0,q.insert=0,q.match_length=q.prev_length=S-1,q.match_available=0,q.ins_h=0})(A.state),Z}function We(A,Z,q,N,B,z){if(!A)return p;var se=1;if(Z===m&&(Z=6),N<0?(se=0,N=-N):15<N&&(se=2,N-=16),B<1||b<B||q!==v||N<8||15<N||Z<0||9<Z||z<0||g<z)return G(A,p);N===8&&(N=9);var ce=new ve;return(A.state=ce).strm=A,ce.wrap=se,ce.gzhead=null,ce.w_bits=N,ce.w_size=1<<ce.w_bits,ce.w_mask=ce.w_size-1,ce.hash_bits=B+7,ce.hash_size=1<<ce.hash_bits,ce.hash_mask=ce.hash_size-1,ce.hash_shift=~~((ce.hash_bits+S-1)/S),ce.window=new a.Buf8(2*ce.w_size),ce.head=new a.Buf16(ce.hash_size),ce.prev=new a.Buf16(ce.w_size),ce.lit_bufsize=1<<B+6,ce.pending_buf_size=4*ce.lit_bufsize,ce.pending_buf=new a.Buf8(ce.pending_buf_size),ce.d_buf=1*ce.lit_bufsize,ce.l_buf=3*ce.lit_bufsize,ce.level=Z,ce.strategy=z,ce.method=q,Oe(A)}s=[new me(0,0,0,0,function(A,Z){var q=65535;for(q>A.pending_buf_size-5&&(q=A.pending_buf_size-5);;){if(A.lookahead<=1){if(ue(A),A.lookahead===0&&Z===d)return E;if(A.lookahead===0)break}A.strstart+=A.lookahead,A.lookahead=0;var N=A.block_start+q;if((A.strstart===0||A.strstart>=N)&&(A.lookahead=A.strstart-N,A.strstart=N,V(A,!1),A.strm.avail_out===0)||A.strstart-A.block_start>=A.w_size-O&&(V(A,!1),A.strm.avail_out===0))return E}return A.insert=0,Z===h?(V(A,!0),A.strm.avail_out===0?U:F):(A.strstart>A.block_start&&(V(A,!1),A.strm.avail_out),E)}),new me(4,4,8,4,he),new me(4,5,16,8,he),new me(4,6,32,32,he),new me(4,4,16,16,fe),new me(8,16,32,32,fe),new me(8,16,128,128,fe),new me(8,32,128,256,fe),new me(32,128,258,1024,fe),new me(32,258,258,4096,fe)],r.deflateInit=function(A,Z){return We(A,Z,v,15,8,0)},r.deflateInit2=We,r.deflateReset=Oe,r.deflateResetKeep=De,r.deflateSetHeader=function(A,Z){return A&&A.state?A.state.wrap!==2?p:(A.state.gzhead=Z,f):p},r.deflate=function(A,Z){var q,N,B,z;if(!A||!A.state||5<Z||Z<0)return A?G(A,p):p;if(N=A.state,!A.output||!A.input&&A.avail_in!==0||N.status===666&&Z!==h)return G(A,A.avail_out===0?-5:p);if(N.strm=A,q=N.last_flush,N.last_flush=Z,N.status===I)if(N.wrap===2)A.adler=0,j(N,31),j(N,139),j(N,8),N.gzhead?(j(N,(N.gzhead.text?1:0)+(N.gzhead.hcrc?2:0)+(N.gzhead.extra?4:0)+(N.gzhead.name?8:0)+(N.gzhead.comment?16:0)),j(N,255&N.gzhead.time),j(N,N.gzhead.time>>8&255),j(N,N.gzhead.time>>16&255),j(N,N.gzhead.time>>24&255),j(N,N.level===9?2:2<=N.strategy||N.level<2?4:0),j(N,255&N.gzhead.os),N.gzhead.extra&&N.gzhead.extra.length&&(j(N,255&N.gzhead.extra.length),j(N,N.gzhead.extra.length>>8&255)),N.gzhead.hcrc&&(A.adler=l(A.adler,N.pending_buf,N.pending,0)),N.gzindex=0,N.status=69):(j(N,0),j(N,0),j(N,0),j(N,0),j(N,0),j(N,N.level===9?2:2<=N.strategy||N.level<2?4:0),j(N,3),N.status=L);else{var se=v+(N.w_bits-8<<4)<<8;se|=(2<=N.strategy||N.level<2?0:N.level<6?1:N.level===6?2:3)<<6,N.strstart!==0&&(se|=32),se+=31-se%31,N.status=L,te(N,se),N.strstart!==0&&(te(N,A.adler>>>16),te(N,65535&A.adler)),A.adler=1}if(N.status===69)if(N.gzhead.extra){for(B=N.pending;N.gzindex<(65535&N.gzhead.extra.length)&&(N.pending!==N.pending_buf_size||(N.gzhead.hcrc&&N.pending>B&&(A.adler=l(A.adler,N.pending_buf,N.pending-B,B)),P(A),B=N.pending,N.pending!==N.pending_buf_size));)j(N,255&N.gzhead.extra[N.gzindex]),N.gzindex++;N.gzhead.hcrc&&N.pending>B&&(A.adler=l(A.adler,N.pending_buf,N.pending-B,B)),N.gzindex===N.gzhead.extra.length&&(N.gzindex=0,N.status=73)}else N.status=73;if(N.status===73)if(N.gzhead.name){B=N.pending;do{if(N.pending===N.pending_buf_size&&(N.gzhead.hcrc&&N.pending>B&&(A.adler=l(A.adler,N.pending_buf,N.pending-B,B)),P(A),B=N.pending,N.pending===N.pending_buf_size)){z=1;break}z=N.gzindex<N.gzhead.name.length?255&N.gzhead.name.charCodeAt(N.gzindex++):0,j(N,z)}while(z!==0);N.gzhead.hcrc&&N.pending>B&&(A.adler=l(A.adler,N.pending_buf,N.pending-B,B)),z===0&&(N.gzindex=0,N.status=91)}else N.status=91;if(N.status===91)if(N.gzhead.comment){B=N.pending;do{if(N.pending===N.pending_buf_size&&(N.gzhead.hcrc&&N.pending>B&&(A.adler=l(A.adler,N.pending_buf,N.pending-B,B)),P(A),B=N.pending,N.pending===N.pending_buf_size)){z=1;break}z=N.gzindex<N.gzhead.comment.length?255&N.gzhead.comment.charCodeAt(N.gzindex++):0,j(N,z)}while(z!==0);N.gzhead.hcrc&&N.pending>B&&(A.adler=l(A.adler,N.pending_buf,N.pending-B,B)),z===0&&(N.status=103)}else N.status=103;if(N.status===103&&(N.gzhead.hcrc?(N.pending+2>N.pending_buf_size&&P(A),N.pending+2<=N.pending_buf_size&&(j(N,255&A.adler),j(N,A.adler>>8&255),A.adler=0,N.status=L)):N.status=L),N.pending!==0){if(P(A),A.avail_out===0)return N.last_flush=-1,f}else if(A.avail_in===0&&W(Z)<=W(q)&&Z!==h)return G(A,-5);if(N.status===666&&A.avail_in!==0)return G(A,-5);if(A.avail_in!==0||N.lookahead!==0||Z!==d&&N.status!==666){var ce=N.strategy===2?(function(Q,H){for(var X;;){if(Q.lookahead===0&&(ue(Q),Q.lookahead===0)){if(H===d)return E;break}if(Q.match_length=0,X=o._tr_tally(Q,0,Q.window[Q.strstart]),Q.lookahead--,Q.strstart++,X&&(V(Q,!1),Q.strm.avail_out===0))return E}return Q.insert=0,H===h?(V(Q,!0),Q.strm.avail_out===0?U:F):Q.last_lit&&(V(Q,!1),Q.strm.avail_out===0)?E:$})(N,Z):N.strategy===3?(function(Q,H){for(var X,ee,ae,pe,Te=Q.window;;){if(Q.lookahead<=C){if(ue(Q),Q.lookahead<=C&&H===d)return E;if(Q.lookahead===0)break}if(Q.match_length=0,Q.lookahead>=S&&0<Q.strstart&&(ee=Te[ae=Q.strstart-1])===Te[++ae]&&ee===Te[++ae]&&ee===Te[++ae]){pe=Q.strstart+C;do;while(ee===Te[++ae]&&ee===Te[++ae]&&ee===Te[++ae]&&ee===Te[++ae]&&ee===Te[++ae]&&ee===Te[++ae]&&ee===Te[++ae]&&ee===Te[++ae]&&ae<pe);Q.match_length=C-(pe-ae),Q.match_length>Q.lookahead&&(Q.match_length=Q.lookahead)}if(Q.match_length>=S?(X=o._tr_tally(Q,1,Q.match_length-S),Q.lookahead-=Q.match_length,Q.strstart+=Q.match_length,Q.match_length=0):(X=o._tr_tally(Q,0,Q.window[Q.strstart]),Q.lookahead--,Q.strstart++),X&&(V(Q,!1),Q.strm.avail_out===0))return E}return Q.insert=0,H===h?(V(Q,!0),Q.strm.avail_out===0?U:F):Q.last_lit&&(V(Q,!1),Q.strm.avail_out===0)?E:$})(N,Z):s[N.level].func(N,Z);if(ce!==U&&ce!==F||(N.status=666),ce===E||ce===U)return A.avail_out===0&&(N.last_flush=-1),f;if(ce===$&&(Z===1?o._tr_align(N):Z!==5&&(o._tr_stored_block(N,0,0,!1),Z===3&&(Y(N.head),N.lookahead===0&&(N.strstart=0,N.block_start=0,N.insert=0))),P(A),A.avail_out===0))return N.last_flush=-1,f}return Z!==h?f:N.wrap<=0?1:(N.wrap===2?(j(N,255&A.adler),j(N,A.adler>>8&255),j(N,A.adler>>16&255),j(N,A.adler>>24&255),j(N,255&A.total_in),j(N,A.total_in>>8&255),j(N,A.total_in>>16&255),j(N,A.total_in>>24&255)):(te(N,A.adler>>>16),te(N,65535&A.adler)),P(A),0<N.wrap&&(N.wrap=-N.wrap),N.pending!==0?f:1)},r.deflateEnd=function(A){var Z;return A&&A.state?(Z=A.state.status)!==I&&Z!==69&&Z!==73&&Z!==91&&Z!==103&&Z!==L&&Z!==666?G(A,p):(A.state=null,Z===L?G(A,-3):f):p},r.deflateSetDictionary=function(A,Z){var q,N,B,z,se,ce,Q,H,X=Z.length;if(!A||!A.state||(z=(q=A.state).wrap)===2||z===1&&q.status!==I||q.lookahead)return p;for(z===1&&(A.adler=c(A.adler,Z,X,0)),q.wrap=0,X>=q.w_size&&(z===0&&(Y(q.head),q.strstart=0,q.block_start=0,q.insert=0),H=new a.Buf8(q.w_size),a.arraySet(H,Z,X-q.w_size,q.w_size,0),Z=H,X=q.w_size),se=A.avail_in,ce=A.next_in,Q=A.input,A.avail_in=X,A.next_in=0,A.input=Z,ue(q);q.lookahead>=S;){for(N=q.strstart,B=q.lookahead-(S-1);q.ins_h=(q.ins_h<<q.hash_shift^q.window[N+S-1])&q.hash_mask,q.prev[N&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=N,N++,--B;);q.strstart=N,q.lookahead=S-1,ue(q)}return q.strstart+=q.lookahead,q.block_start=q.strstart,q.insert=q.lookahead,q.lookahead=0,q.match_length=q.prev_length=S-1,q.match_available=0,A.next_in=ce,A.input=Q,A.avail_in=se,q.wrap=z,f},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,i,r){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,i,r){i.exports=function(s,a){var o,c,l,u,d,h,f,p,m,g,y,v,b,T,x,_,D,w,S,C,O,I,L,E,$;o=s.state,c=s.next_in,E=s.input,l=c+(s.avail_in-5),u=s.next_out,$=s.output,d=u-(a-s.avail_out),h=u+(s.avail_out-257),f=o.dmax,p=o.wsize,m=o.whave,g=o.wnext,y=o.window,v=o.hold,b=o.bits,T=o.lencode,x=o.distcode,_=(1<<o.lenbits)-1,D=(1<<o.distbits)-1;e:do{b<15&&(v+=E[c++]<<b,b+=8,v+=E[c++]<<b,b+=8),w=T[v&_];t:for(;;){if(v>>>=S=w>>>24,b-=S,(S=w>>>16&255)===0)$[u++]=65535&w;else{if(!(16&S)){if((64&S)==0){w=T[(65535&w)+(v&(1<<S)-1)];continue t}if(32&S){o.mode=12;break e}s.msg="invalid literal/length code",o.mode=30;break e}C=65535&w,(S&=15)&&(b<S&&(v+=E[c++]<<b,b+=8),C+=v&(1<<S)-1,v>>>=S,b-=S),b<15&&(v+=E[c++]<<b,b+=8,v+=E[c++]<<b,b+=8),w=x[v&D];n:for(;;){if(v>>>=S=w>>>24,b-=S,!(16&(S=w>>>16&255))){if((64&S)==0){w=x[(65535&w)+(v&(1<<S)-1)];continue n}s.msg="invalid distance code",o.mode=30;break e}if(O=65535&w,b<(S&=15)&&(v+=E[c++]<<b,(b+=8)<S&&(v+=E[c++]<<b,b+=8)),f<(O+=v&(1<<S)-1)){s.msg="invalid distance too far back",o.mode=30;break e}if(v>>>=S,b-=S,(S=u-d)<O){if(m<(S=O-S)&&o.sane){s.msg="invalid distance too far back",o.mode=30;break e}if(L=y,(I=0)===g){if(I+=p-S,S<C){for(C-=S;$[u++]=y[I++],--S;);I=u-O,L=$}}else if(g<S){if(I+=p+g-S,(S-=g)<C){for(C-=S;$[u++]=y[I++],--S;);if(I=0,g<C){for(C-=S=g;$[u++]=y[I++],--S;);I=u-O,L=$}}}else if(I+=g-S,S<C){for(C-=S;$[u++]=y[I++],--S;);I=u-O,L=$}for(;2<C;)$[u++]=L[I++],$[u++]=L[I++],$[u++]=L[I++],C-=3;C&&($[u++]=L[I++],1<C&&($[u++]=L[I++]))}else{for(I=u-O;$[u++]=$[I++],$[u++]=$[I++],$[u++]=$[I++],2<(C-=3););C&&($[u++]=$[I++],1<C&&($[u++]=$[I++]))}break}}break}}while(c<l&&u<h);c-=C=b>>3,v&=(1<<(b-=C<<3))-1,s.next_in=c,s.next_out=u,s.avail_in=c<l?l-c+5:5-(c-l),s.avail_out=u<h?h-u+257:257-(u-h),o.hold=v,o.bits=b}},{}],49:[function(t,i,r){var s=t("../utils/common"),a=t("./adler32"),o=t("./crc32"),c=t("./inffast"),l=t("./inftrees"),u=1,d=2,h=0,f=-2,p=1,m=852,g=592;function y(I){return(I>>>24&255)+(I>>>8&65280)+((65280&I)<<8)+((255&I)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function b(I){var L;return I&&I.state?(L=I.state,I.total_in=I.total_out=L.total=0,I.msg="",L.wrap&&(I.adler=1&L.wrap),L.mode=p,L.last=0,L.havedict=0,L.dmax=32768,L.head=null,L.hold=0,L.bits=0,L.lencode=L.lendyn=new s.Buf32(m),L.distcode=L.distdyn=new s.Buf32(g),L.sane=1,L.back=-1,h):f}function T(I){var L;return I&&I.state?((L=I.state).wsize=0,L.whave=0,L.wnext=0,b(I)):f}function x(I,L){var E,$;return I&&I.state?($=I.state,L<0?(E=0,L=-L):(E=1+(L>>4),L<48&&(L&=15)),L&&(L<8||15<L)?f:($.window!==null&&$.wbits!==L&&($.window=null),$.wrap=E,$.wbits=L,T(I))):f}function _(I,L){var E,$;return I?($=new v,(I.state=$).window=null,(E=x(I,L))!==h&&(I.state=null),E):f}var D,w,S=!0;function C(I){if(S){var L;for(D=new s.Buf32(512),w=new s.Buf32(32),L=0;L<144;)I.lens[L++]=8;for(;L<256;)I.lens[L++]=9;for(;L<280;)I.lens[L++]=7;for(;L<288;)I.lens[L++]=8;for(l(u,I.lens,0,288,D,0,I.work,{bits:9}),L=0;L<32;)I.lens[L++]=5;l(d,I.lens,0,32,w,0,I.work,{bits:5}),S=!1}I.lencode=D,I.lenbits=9,I.distcode=w,I.distbits=5}function O(I,L,E,$){var U,F=I.state;return F.window===null&&(F.wsize=1<<F.wbits,F.wnext=0,F.whave=0,F.window=new s.Buf8(F.wsize)),$>=F.wsize?(s.arraySet(F.window,L,E-F.wsize,F.wsize,0),F.wnext=0,F.whave=F.wsize):($<(U=F.wsize-F.wnext)&&(U=$),s.arraySet(F.window,L,E-$,U,F.wnext),($-=U)?(s.arraySet(F.window,L,E-$,$,0),F.wnext=$,F.whave=F.wsize):(F.wnext+=U,F.wnext===F.wsize&&(F.wnext=0),F.whave<F.wsize&&(F.whave+=U))),0}r.inflateReset=T,r.inflateReset2=x,r.inflateResetKeep=b,r.inflateInit=function(I){return _(I,15)},r.inflateInit2=_,r.inflate=function(I,L){var E,$,U,F,G,W,Y,P,V,j,te,ne,ue,he,fe,me,ve,De,Oe,We,A,Z,q,N,B=0,z=new s.Buf8(4),se=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!I||!I.state||!I.output||!I.input&&I.avail_in!==0)return f;(E=I.state).mode===12&&(E.mode=13),G=I.next_out,U=I.output,Y=I.avail_out,F=I.next_in,$=I.input,W=I.avail_in,P=E.hold,V=E.bits,j=W,te=Y,Z=h;e:for(;;)switch(E.mode){case p:if(E.wrap===0){E.mode=13;break}for(;V<16;){if(W===0)break e;W--,P+=$[F++]<<V,V+=8}if(2&E.wrap&&P===35615){z[E.check=0]=255&P,z[1]=P>>>8&255,E.check=o(E.check,z,2,0),V=P=0,E.mode=2;break}if(E.flags=0,E.head&&(E.head.done=!1),!(1&E.wrap)||(((255&P)<<8)+(P>>8))%31){I.msg="incorrect header check",E.mode=30;break}if((15&P)!=8){I.msg="unknown compression method",E.mode=30;break}if(V-=4,A=8+(15&(P>>>=4)),E.wbits===0)E.wbits=A;else if(A>E.wbits){I.msg="invalid window size",E.mode=30;break}E.dmax=1<<A,I.adler=E.check=1,E.mode=512&P?10:12,V=P=0;break;case 2:for(;V<16;){if(W===0)break e;W--,P+=$[F++]<<V,V+=8}if(E.flags=P,(255&E.flags)!=8){I.msg="unknown compression method",E.mode=30;break}if(57344&E.flags){I.msg="unknown header flags set",E.mode=30;break}E.head&&(E.head.text=P>>8&1),512&E.flags&&(z[0]=255&P,z[1]=P>>>8&255,E.check=o(E.check,z,2,0)),V=P=0,E.mode=3;case 3:for(;V<32;){if(W===0)break e;W--,P+=$[F++]<<V,V+=8}E.head&&(E.head.time=P),512&E.flags&&(z[0]=255&P,z[1]=P>>>8&255,z[2]=P>>>16&255,z[3]=P>>>24&255,E.check=o(E.check,z,4,0)),V=P=0,E.mode=4;case 4:for(;V<16;){if(W===0)break e;W--,P+=$[F++]<<V,V+=8}E.head&&(E.head.xflags=255&P,E.head.os=P>>8),512&E.flags&&(z[0]=255&P,z[1]=P>>>8&255,E.check=o(E.check,z,2,0)),V=P=0,E.mode=5;case 5:if(1024&E.flags){for(;V<16;){if(W===0)break e;W--,P+=$[F++]<<V,V+=8}E.length=P,E.head&&(E.head.extra_len=P),512&E.flags&&(z[0]=255&P,z[1]=P>>>8&255,E.check=o(E.check,z,2,0)),V=P=0}else E.head&&(E.head.extra=null);E.mode=6;case 6:if(1024&E.flags&&(W<(ne=E.length)&&(ne=W),ne&&(E.head&&(A=E.head.extra_len-E.length,E.head.extra||(E.head.extra=new Array(E.head.extra_len)),s.arraySet(E.head.extra,$,F,ne,A)),512&E.flags&&(E.check=o(E.check,$,ne,F)),W-=ne,F+=ne,E.length-=ne),E.length))break e;E.length=0,E.mode=7;case 7:if(2048&E.flags){if(W===0)break e;for(ne=0;A=$[F+ne++],E.head&&A&&E.length<65536&&(E.head.name+=String.fromCharCode(A)),A&&ne<W;);if(512&E.flags&&(E.check=o(E.check,$,ne,F)),W-=ne,F+=ne,A)break e}else E.head&&(E.head.name=null);E.length=0,E.mode=8;case 8:if(4096&E.flags){if(W===0)break e;for(ne=0;A=$[F+ne++],E.head&&A&&E.length<65536&&(E.head.comment+=String.fromCharCode(A)),A&&ne<W;);if(512&E.flags&&(E.check=o(E.check,$,ne,F)),W-=ne,F+=ne,A)break e}else E.head&&(E.head.comment=null);E.mode=9;case 9:if(512&E.flags){for(;V<16;){if(W===0)break e;W--,P+=$[F++]<<V,V+=8}if(P!==(65535&E.check)){I.msg="header crc mismatch",E.mode=30;break}V=P=0}E.head&&(E.head.hcrc=E.flags>>9&1,E.head.done=!0),I.adler=E.check=0,E.mode=12;break;case 10:for(;V<32;){if(W===0)break e;W--,P+=$[F++]<<V,V+=8}I.adler=E.check=y(P),V=P=0,E.mode=11;case 11:if(E.havedict===0)return I.next_out=G,I.avail_out=Y,I.next_in=F,I.avail_in=W,E.hold=P,E.bits=V,2;I.adler=E.check=1,E.mode=12;case 12:if(L===5||L===6)break e;case 13:if(E.last){P>>>=7&V,V-=7&V,E.mode=27;break}for(;V<3;){if(W===0)break e;W--,P+=$[F++]<<V,V+=8}switch(E.last=1&P,V-=1,3&(P>>>=1)){case 0:E.mode=14;break;case 1:if(C(E),E.mode=20,L!==6)break;P>>>=2,V-=2;break e;case 2:E.mode=17;break;case 3:I.msg="invalid block type",E.mode=30}P>>>=2,V-=2;break;case 14:for(P>>>=7&V,V-=7&V;V<32;){if(W===0)break e;W--,P+=$[F++]<<V,V+=8}if((65535&P)!=(P>>>16^65535)){I.msg="invalid stored block lengths",E.mode=30;break}if(E.length=65535&P,V=P=0,E.mode=15,L===6)break e;case 15:E.mode=16;case 16:if(ne=E.length){if(W<ne&&(ne=W),Y<ne&&(ne=Y),ne===0)break e;s.arraySet(U,$,F,ne,G),W-=ne,F+=ne,Y-=ne,G+=ne,E.length-=ne;break}E.mode=12;break;case 17:for(;V<14;){if(W===0)break e;W--,P+=$[F++]<<V,V+=8}if(E.nlen=257+(31&P),P>>>=5,V-=5,E.ndist=1+(31&P),P>>>=5,V-=5,E.ncode=4+(15&P),P>>>=4,V-=4,286<E.nlen||30<E.ndist){I.msg="too many length or distance symbols",E.mode=30;break}E.have=0,E.mode=18;case 18:for(;E.have<E.ncode;){for(;V<3;){if(W===0)break e;W--,P+=$[F++]<<V,V+=8}E.lens[se[E.have++]]=7&P,P>>>=3,V-=3}for(;E.have<19;)E.lens[se[E.have++]]=0;if(E.lencode=E.lendyn,E.lenbits=7,q={bits:E.lenbits},Z=l(0,E.lens,0,19,E.lencode,0,E.work,q),E.lenbits=q.bits,Z){I.msg="invalid code lengths set",E.mode=30;break}E.have=0,E.mode=19;case 19:for(;E.have<E.nlen+E.ndist;){for(;me=(B=E.lencode[P&(1<<E.lenbits)-1])>>>16&255,ve=65535&B,!((fe=B>>>24)<=V);){if(W===0)break e;W--,P+=$[F++]<<V,V+=8}if(ve<16)P>>>=fe,V-=fe,E.lens[E.have++]=ve;else{if(ve===16){for(N=fe+2;V<N;){if(W===0)break e;W--,P+=$[F++]<<V,V+=8}if(P>>>=fe,V-=fe,E.have===0){I.msg="invalid bit length repeat",E.mode=30;break}A=E.lens[E.have-1],ne=3+(3&P),P>>>=2,V-=2}else if(ve===17){for(N=fe+3;V<N;){if(W===0)break e;W--,P+=$[F++]<<V,V+=8}V-=fe,A=0,ne=3+(7&(P>>>=fe)),P>>>=3,V-=3}else{for(N=fe+7;V<N;){if(W===0)break e;W--,P+=$[F++]<<V,V+=8}V-=fe,A=0,ne=11+(127&(P>>>=fe)),P>>>=7,V-=7}if(E.have+ne>E.nlen+E.ndist){I.msg="invalid bit length repeat",E.mode=30;break}for(;ne--;)E.lens[E.have++]=A}}if(E.mode===30)break;if(E.lens[256]===0){I.msg="invalid code -- missing end-of-block",E.mode=30;break}if(E.lenbits=9,q={bits:E.lenbits},Z=l(u,E.lens,0,E.nlen,E.lencode,0,E.work,q),E.lenbits=q.bits,Z){I.msg="invalid literal/lengths set",E.mode=30;break}if(E.distbits=6,E.distcode=E.distdyn,q={bits:E.distbits},Z=l(d,E.lens,E.nlen,E.ndist,E.distcode,0,E.work,q),E.distbits=q.bits,Z){I.msg="invalid distances set",E.mode=30;break}if(E.mode=20,L===6)break e;case 20:E.mode=21;case 21:if(6<=W&&258<=Y){I.next_out=G,I.avail_out=Y,I.next_in=F,I.avail_in=W,E.hold=P,E.bits=V,c(I,te),G=I.next_out,U=I.output,Y=I.avail_out,F=I.next_in,$=I.input,W=I.avail_in,P=E.hold,V=E.bits,E.mode===12&&(E.back=-1);break}for(E.back=0;me=(B=E.lencode[P&(1<<E.lenbits)-1])>>>16&255,ve=65535&B,!((fe=B>>>24)<=V);){if(W===0)break e;W--,P+=$[F++]<<V,V+=8}if(me&&(240&me)==0){for(De=fe,Oe=me,We=ve;me=(B=E.lencode[We+((P&(1<<De+Oe)-1)>>De)])>>>16&255,ve=65535&B,!(De+(fe=B>>>24)<=V);){if(W===0)break e;W--,P+=$[F++]<<V,V+=8}P>>>=De,V-=De,E.back+=De}if(P>>>=fe,V-=fe,E.back+=fe,E.length=ve,me===0){E.mode=26;break}if(32&me){E.back=-1,E.mode=12;break}if(64&me){I.msg="invalid literal/length code",E.mode=30;break}E.extra=15&me,E.mode=22;case 22:if(E.extra){for(N=E.extra;V<N;){if(W===0)break e;W--,P+=$[F++]<<V,V+=8}E.length+=P&(1<<E.extra)-1,P>>>=E.extra,V-=E.extra,E.back+=E.extra}E.was=E.length,E.mode=23;case 23:for(;me=(B=E.distcode[P&(1<<E.distbits)-1])>>>16&255,ve=65535&B,!((fe=B>>>24)<=V);){if(W===0)break e;W--,P+=$[F++]<<V,V+=8}if((240&me)==0){for(De=fe,Oe=me,We=ve;me=(B=E.distcode[We+((P&(1<<De+Oe)-1)>>De)])>>>16&255,ve=65535&B,!(De+(fe=B>>>24)<=V);){if(W===0)break e;W--,P+=$[F++]<<V,V+=8}P>>>=De,V-=De,E.back+=De}if(P>>>=fe,V-=fe,E.back+=fe,64&me){I.msg="invalid distance code",E.mode=30;break}E.offset=ve,E.extra=15&me,E.mode=24;case 24:if(E.extra){for(N=E.extra;V<N;){if(W===0)break e;W--,P+=$[F++]<<V,V+=8}E.offset+=P&(1<<E.extra)-1,P>>>=E.extra,V-=E.extra,E.back+=E.extra}if(E.offset>E.dmax){I.msg="invalid distance too far back",E.mode=30;break}E.mode=25;case 25:if(Y===0)break e;if(ne=te-Y,E.offset>ne){if((ne=E.offset-ne)>E.whave&&E.sane){I.msg="invalid distance too far back",E.mode=30;break}ue=ne>E.wnext?(ne-=E.wnext,E.wsize-ne):E.wnext-ne,ne>E.length&&(ne=E.length),he=E.window}else he=U,ue=G-E.offset,ne=E.length;for(Y<ne&&(ne=Y),Y-=ne,E.length-=ne;U[G++]=he[ue++],--ne;);E.length===0&&(E.mode=21);break;case 26:if(Y===0)break e;U[G++]=E.length,Y--,E.mode=21;break;case 27:if(E.wrap){for(;V<32;){if(W===0)break e;W--,P|=$[F++]<<V,V+=8}if(te-=Y,I.total_out+=te,E.total+=te,te&&(I.adler=E.check=E.flags?o(E.check,U,te,G-te):a(E.check,U,te,G-te)),te=Y,(E.flags?P:y(P))!==E.check){I.msg="incorrect data check",E.mode=30;break}V=P=0}E.mode=28;case 28:if(E.wrap&&E.flags){for(;V<32;){if(W===0)break e;W--,P+=$[F++]<<V,V+=8}if(P!==(4294967295&E.total)){I.msg="incorrect length check",E.mode=30;break}V=P=0}E.mode=29;case 29:Z=1;break e;case 30:Z=-3;break e;case 31:return-4;default:return f}return I.next_out=G,I.avail_out=Y,I.next_in=F,I.avail_in=W,E.hold=P,E.bits=V,(E.wsize||te!==I.avail_out&&E.mode<30&&(E.mode<27||L!==4))&&O(I,I.output,I.next_out,te-I.avail_out)?(E.mode=31,-4):(j-=I.avail_in,te-=I.avail_out,I.total_in+=j,I.total_out+=te,E.total+=te,E.wrap&&te&&(I.adler=E.check=E.flags?o(E.check,U,te,I.next_out-te):a(E.check,U,te,I.next_out-te)),I.data_type=E.bits+(E.last?64:0)+(E.mode===12?128:0)+(E.mode===20||E.mode===15?256:0),(j==0&&te===0||L===4)&&Z===h&&(Z=-5),Z)},r.inflateEnd=function(I){if(!I||!I.state)return f;var L=I.state;return L.window&&(L.window=null),I.state=null,h},r.inflateGetHeader=function(I,L){var E;return I&&I.state?(2&(E=I.state).wrap)==0?f:((E.head=L).done=!1,h):f},r.inflateSetDictionary=function(I,L){var E,$=L.length;return I&&I.state?(E=I.state).wrap!==0&&E.mode!==11?f:E.mode===11&&a(1,L,$,0)!==E.check?-3:O(I,L,$,$)?(E.mode=31,-4):(E.havedict=1,h):f},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,i,r){var s=t("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(u,d,h,f,p,m,g,y){var v,b,T,x,_,D,w,S,C,O=y.bits,I=0,L=0,E=0,$=0,U=0,F=0,G=0,W=0,Y=0,P=0,V=null,j=0,te=new s.Buf16(16),ne=new s.Buf16(16),ue=null,he=0;for(I=0;I<=15;I++)te[I]=0;for(L=0;L<f;L++)te[d[h+L]]++;for(U=O,$=15;1<=$&&te[$]===0;$--);if($<U&&(U=$),$===0)return p[m++]=20971520,p[m++]=20971520,y.bits=1,0;for(E=1;E<$&&te[E]===0;E++);for(U<E&&(U=E),I=W=1;I<=15;I++)if(W<<=1,(W-=te[I])<0)return-1;if(0<W&&(u===0||$!==1))return-1;for(ne[1]=0,I=1;I<15;I++)ne[I+1]=ne[I]+te[I];for(L=0;L<f;L++)d[h+L]!==0&&(g[ne[d[h+L]]++]=L);if(D=u===0?(V=ue=g,19):u===1?(V=a,j-=257,ue=o,he-=257,256):(V=c,ue=l,-1),I=E,_=m,G=L=P=0,T=-1,x=(Y=1<<(F=U))-1,u===1&&852<Y||u===2&&592<Y)return 1;for(;;){for(w=I-G,C=g[L]<D?(S=0,g[L]):g[L]>D?(S=ue[he+g[L]],V[j+g[L]]):(S=96,0),v=1<<I-G,E=b=1<<F;p[_+(P>>G)+(b-=v)]=w<<24|S<<16|C|0,b!==0;);for(v=1<<I-1;P&v;)v>>=1;if(v!==0?(P&=v-1,P+=v):P=0,L++,--te[I]==0){if(I===$)break;I=d[h+g[L]]}if(U<I&&(P&x)!==T){for(G===0&&(G=U),_+=E,W=1<<(F=I-G);F+G<$&&!((W-=te[F+G])<=0);)F++,W<<=1;if(Y+=1<<F,u===1&&852<Y||u===2&&592<Y)return 1;p[T=P&x]=U<<24|F<<16|_-m|0}}return P!==0&&(p[_+P]=I-G<<24|64<<16|0),y.bits=U,0}},{"../utils/common":41}],51:[function(t,i,r){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,i,r){var s=t("../utils/common"),a=0,o=1;function c(B){for(var z=B.length;0<=--z;)B[z]=0}var l=0,u=29,d=256,h=d+1+u,f=30,p=19,m=2*h+1,g=15,y=16,v=7,b=256,T=16,x=17,_=18,D=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],w=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],C=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],O=new Array(2*(h+2));c(O);var I=new Array(2*f);c(I);var L=new Array(512);c(L);var E=new Array(256);c(E);var $=new Array(u);c($);var U,F,G,W=new Array(f);function Y(B,z,se,ce,Q){this.static_tree=B,this.extra_bits=z,this.extra_base=se,this.elems=ce,this.max_length=Q,this.has_stree=B&&B.length}function P(B,z){this.dyn_tree=B,this.max_code=0,this.stat_desc=z}function V(B){return B<256?L[B]:L[256+(B>>>7)]}function j(B,z){B.pending_buf[B.pending++]=255&z,B.pending_buf[B.pending++]=z>>>8&255}function te(B,z,se){B.bi_valid>y-se?(B.bi_buf|=z<<B.bi_valid&65535,j(B,B.bi_buf),B.bi_buf=z>>y-B.bi_valid,B.bi_valid+=se-y):(B.bi_buf|=z<<B.bi_valid&65535,B.bi_valid+=se)}function ne(B,z,se){te(B,se[2*z],se[2*z+1])}function ue(B,z){for(var se=0;se|=1&B,B>>>=1,se<<=1,0<--z;);return se>>>1}function he(B,z,se){var ce,Q,H=new Array(g+1),X=0;for(ce=1;ce<=g;ce++)H[ce]=X=X+se[ce-1]<<1;for(Q=0;Q<=z;Q++){var ee=B[2*Q+1];ee!==0&&(B[2*Q]=ue(H[ee]++,ee))}}function fe(B){var z;for(z=0;z<h;z++)B.dyn_ltree[2*z]=0;for(z=0;z<f;z++)B.dyn_dtree[2*z]=0;for(z=0;z<p;z++)B.bl_tree[2*z]=0;B.dyn_ltree[2*b]=1,B.opt_len=B.static_len=0,B.last_lit=B.matches=0}function me(B){8<B.bi_valid?j(B,B.bi_buf):0<B.bi_valid&&(B.pending_buf[B.pending++]=B.bi_buf),B.bi_buf=0,B.bi_valid=0}function ve(B,z,se,ce){var Q=2*z,H=2*se;return B[Q]<B[H]||B[Q]===B[H]&&ce[z]<=ce[se]}function De(B,z,se){for(var ce=B.heap[se],Q=se<<1;Q<=B.heap_len&&(Q<B.heap_len&&ve(z,B.heap[Q+1],B.heap[Q],B.depth)&&Q++,!ve(z,ce,B.heap[Q],B.depth));)B.heap[se]=B.heap[Q],se=Q,Q<<=1;B.heap[se]=ce}function Oe(B,z,se){var ce,Q,H,X,ee=0;if(B.last_lit!==0)for(;ce=B.pending_buf[B.d_buf+2*ee]<<8|B.pending_buf[B.d_buf+2*ee+1],Q=B.pending_buf[B.l_buf+ee],ee++,ce===0?ne(B,Q,z):(ne(B,(H=E[Q])+d+1,z),(X=D[H])!==0&&te(B,Q-=$[H],X),ne(B,H=V(--ce),se),(X=w[H])!==0&&te(B,ce-=W[H],X)),ee<B.last_lit;);ne(B,b,z)}function We(B,z){var se,ce,Q,H=z.dyn_tree,X=z.stat_desc.static_tree,ee=z.stat_desc.has_stree,ae=z.stat_desc.elems,pe=-1;for(B.heap_len=0,B.heap_max=m,se=0;se<ae;se++)H[2*se]!==0?(B.heap[++B.heap_len]=pe=se,B.depth[se]=0):H[2*se+1]=0;for(;B.heap_len<2;)H[2*(Q=B.heap[++B.heap_len]=pe<2?++pe:0)]=1,B.depth[Q]=0,B.opt_len--,ee&&(B.static_len-=X[2*Q+1]);for(z.max_code=pe,se=B.heap_len>>1;1<=se;se--)De(B,H,se);for(Q=ae;se=B.heap[1],B.heap[1]=B.heap[B.heap_len--],De(B,H,1),ce=B.heap[1],B.heap[--B.heap_max]=se,B.heap[--B.heap_max]=ce,H[2*Q]=H[2*se]+H[2*ce],B.depth[Q]=(B.depth[se]>=B.depth[ce]?B.depth[se]:B.depth[ce])+1,H[2*se+1]=H[2*ce+1]=Q,B.heap[1]=Q++,De(B,H,1),2<=B.heap_len;);B.heap[--B.heap_max]=B.heap[1],(function(Te,Ce){var Se,we,Ve,J,de,be,Ee=Ce.dyn_tree,Fe=Ce.max_code,$e=Ce.stat_desc.static_tree,it=Ce.stat_desc.has_stree,St=Ce.stat_desc.extra_bits,vn=Ce.stat_desc.extra_base,k=Ce.stat_desc.max_length,M=0;for(J=0;J<=g;J++)Te.bl_count[J]=0;for(Ee[2*Te.heap[Te.heap_max]+1]=0,Se=Te.heap_max+1;Se<m;Se++)k<(J=Ee[2*Ee[2*(we=Te.heap[Se])+1]+1]+1)&&(J=k,M++),Ee[2*we+1]=J,Fe<we||(Te.bl_count[J]++,de=0,vn<=we&&(de=St[we-vn]),be=Ee[2*we],Te.opt_len+=be*(J+de),it&&(Te.static_len+=be*($e[2*we+1]+de)));if(M!==0){do{for(J=k-1;Te.bl_count[J]===0;)J--;Te.bl_count[J]--,Te.bl_count[J+1]+=2,Te.bl_count[k]--,M-=2}while(0<M);for(J=k;J!==0;J--)for(we=Te.bl_count[J];we!==0;)Fe<(Ve=Te.heap[--Se])||(Ee[2*Ve+1]!==J&&(Te.opt_len+=(J-Ee[2*Ve+1])*Ee[2*Ve],Ee[2*Ve+1]=J),we--)}})(B,z),he(H,pe,B.bl_count)}function A(B,z,se){var ce,Q,H=-1,X=z[1],ee=0,ae=7,pe=4;for(X===0&&(ae=138,pe=3),z[2*(se+1)+1]=65535,ce=0;ce<=se;ce++)Q=X,X=z[2*(ce+1)+1],++ee<ae&&Q===X||(ee<pe?B.bl_tree[2*Q]+=ee:Q!==0?(Q!==H&&B.bl_tree[2*Q]++,B.bl_tree[2*T]++):ee<=10?B.bl_tree[2*x]++:B.bl_tree[2*_]++,H=Q,pe=(ee=0)===X?(ae=138,3):Q===X?(ae=6,3):(ae=7,4))}function Z(B,z,se){var ce,Q,H=-1,X=z[1],ee=0,ae=7,pe=4;for(X===0&&(ae=138,pe=3),ce=0;ce<=se;ce++)if(Q=X,X=z[2*(ce+1)+1],!(++ee<ae&&Q===X)){if(ee<pe)for(;ne(B,Q,B.bl_tree),--ee!=0;);else Q!==0?(Q!==H&&(ne(B,Q,B.bl_tree),ee--),ne(B,T,B.bl_tree),te(B,ee-3,2)):ee<=10?(ne(B,x,B.bl_tree),te(B,ee-3,3)):(ne(B,_,B.bl_tree),te(B,ee-11,7));H=Q,pe=(ee=0)===X?(ae=138,3):Q===X?(ae=6,3):(ae=7,4)}}c(W);var q=!1;function N(B,z,se,ce){te(B,(l<<1)+(ce?1:0),3),(function(Q,H,X,ee){me(Q),j(Q,X),j(Q,~X),s.arraySet(Q.pending_buf,Q.window,H,X,Q.pending),Q.pending+=X})(B,z,se)}r._tr_init=function(B){q||((function(){var z,se,ce,Q,H,X=new Array(g+1);for(Q=ce=0;Q<u-1;Q++)for($[Q]=ce,z=0;z<1<<D[Q];z++)E[ce++]=Q;for(E[ce-1]=Q,Q=H=0;Q<16;Q++)for(W[Q]=H,z=0;z<1<<w[Q];z++)L[H++]=Q;for(H>>=7;Q<f;Q++)for(W[Q]=H<<7,z=0;z<1<<w[Q]-7;z++)L[256+H++]=Q;for(se=0;se<=g;se++)X[se]=0;for(z=0;z<=143;)O[2*z+1]=8,z++,X[8]++;for(;z<=255;)O[2*z+1]=9,z++,X[9]++;for(;z<=279;)O[2*z+1]=7,z++,X[7]++;for(;z<=287;)O[2*z+1]=8,z++,X[8]++;for(he(O,h+1,X),z=0;z<f;z++)I[2*z+1]=5,I[2*z]=ue(z,5);U=new Y(O,D,d+1,h,g),F=new Y(I,w,0,f,g),G=new Y(new Array(0),S,0,p,v)})(),q=!0),B.l_desc=new P(B.dyn_ltree,U),B.d_desc=new P(B.dyn_dtree,F),B.bl_desc=new P(B.bl_tree,G),B.bi_buf=0,B.bi_valid=0,fe(B)},r._tr_stored_block=N,r._tr_flush_block=function(B,z,se,ce){var Q,H,X=0;0<B.level?(B.strm.data_type===2&&(B.strm.data_type=(function(ee){var ae,pe=4093624447;for(ae=0;ae<=31;ae++,pe>>>=1)if(1&pe&&ee.dyn_ltree[2*ae]!==0)return a;if(ee.dyn_ltree[18]!==0||ee.dyn_ltree[20]!==0||ee.dyn_ltree[26]!==0)return o;for(ae=32;ae<d;ae++)if(ee.dyn_ltree[2*ae]!==0)return o;return a})(B)),We(B,B.l_desc),We(B,B.d_desc),X=(function(ee){var ae;for(A(ee,ee.dyn_ltree,ee.l_desc.max_code),A(ee,ee.dyn_dtree,ee.d_desc.max_code),We(ee,ee.bl_desc),ae=p-1;3<=ae&&ee.bl_tree[2*C[ae]+1]===0;ae--);return ee.opt_len+=3*(ae+1)+5+5+4,ae})(B),Q=B.opt_len+3+7>>>3,(H=B.static_len+3+7>>>3)<=Q&&(Q=H)):Q=H=se+5,se+4<=Q&&z!==-1?N(B,z,se,ce):B.strategy===4||H===Q?(te(B,2+(ce?1:0),3),Oe(B,O,I)):(te(B,4+(ce?1:0),3),(function(ee,ae,pe,Te){var Ce;for(te(ee,ae-257,5),te(ee,pe-1,5),te(ee,Te-4,4),Ce=0;Ce<Te;Ce++)te(ee,ee.bl_tree[2*C[Ce]+1],3);Z(ee,ee.dyn_ltree,ae-1),Z(ee,ee.dyn_dtree,pe-1)})(B,B.l_desc.max_code+1,B.d_desc.max_code+1,X+1),Oe(B,B.dyn_ltree,B.dyn_dtree)),fe(B),ce&&me(B)},r._tr_tally=function(B,z,se){return B.pending_buf[B.d_buf+2*B.last_lit]=z>>>8&255,B.pending_buf[B.d_buf+2*B.last_lit+1]=255&z,B.pending_buf[B.l_buf+B.last_lit]=255&se,B.last_lit++,z===0?B.dyn_ltree[2*se]++:(B.matches++,z--,B.dyn_ltree[2*(E[se]+d+1)]++,B.dyn_dtree[2*V(z)]++),B.last_lit===B.lit_bufsize-1},r._tr_align=function(B){te(B,2,3),ne(B,b,O),(function(z){z.bi_valid===16?(j(z,z.bi_buf),z.bi_buf=0,z.bi_valid=0):8<=z.bi_valid&&(z.pending_buf[z.pending++]=255&z.bi_buf,z.bi_buf>>=8,z.bi_valid-=8)})(B)}},{"../utils/common":41}],53:[function(t,i,r){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,i,r){(function(s){(function(a,o){if(!a.setImmediate){var c,l,u,d,h=1,f={},p=!1,m=a.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(a);g=g&&g.setTimeout?g:a,c={}.toString.call(a.process)==="[object process]"?function(T){process.nextTick(function(){v(T)})}:(function(){if(a.postMessage&&!a.importScripts){var T=!0,x=a.onmessage;return a.onmessage=function(){T=!1},a.postMessage("","*"),a.onmessage=x,T}})()?(d="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",b,!1):a.attachEvent("onmessage",b),function(T){a.postMessage(d+T,"*")}):a.MessageChannel?((u=new MessageChannel).port1.onmessage=function(T){v(T.data)},function(T){u.port2.postMessage(T)}):m&&"onreadystatechange"in m.createElement("script")?(l=m.documentElement,function(T){var x=m.createElement("script");x.onreadystatechange=function(){v(T),x.onreadystatechange=null,l.removeChild(x),x=null},l.appendChild(x)}):function(T){setTimeout(v,0,T)},g.setImmediate=function(T){typeof T!="function"&&(T=new Function(""+T));for(var x=new Array(arguments.length-1),_=0;_<x.length;_++)x[_]=arguments[_+1];var D={callback:T,args:x};return f[h]=D,c(h),h++},g.clearImmediate=y}function y(T){delete f[T]}function v(T){if(p)setTimeout(v,0,T);else{var x=f[T];if(x){p=!0;try{(function(_){var D=_.callback,w=_.args;switch(w.length){case 0:D();break;case 1:D(w[0]);break;case 2:D(w[0],w[1]);break;case 3:D(w[0],w[1],w[2]);break;default:D.apply(o,w)}})(x)}finally{y(T),p=!1}}}}function b(T){T.source===a&&typeof T.data=="string"&&T.data.indexOf(d)===0&&v(+T.data.slice(d.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof vi<"u"?vi:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(wu)),wu.exports}var Ey;function eD(){if(Ey)return ds;Ey=1;var n=qO(),e=jO();ds.openArrayBuffer=t,ds.splitPath=i,ds.joinPath=r;function t(s){return e.loadAsync(s).then(function(a){function o(d){return a.file(d)!==null}function c(d,h){return a.file(d).async("uint8array").then(function(f){if(h==="base64")return n.fromByteArray(f);if(h){var p=new TextDecoder(h);return p.decode(f)}else return f})}function l(d,h){a.file(d,h)}function u(){return a.generateAsync({type:"arraybuffer"})}return{exists:o,read:c,write:l,toArrayBuffer:u}})}function i(s){var a=s.lastIndexOf("/");return a===-1?{dirname:"",basename:s}:{dirname:s.substring(0,a),basename:s.substring(a+1)}}function r(){var s=Array.prototype.filter.call(arguments,function(o){return o}),a=[];return s.forEach(function(o){/^\//.test(o)?a=[o]:a.push(o)}),a.join("/")}return ds}var Oa={},ai={},br={},Sy;function tD(){if(Sy)return br;Sy=1;var n=ut;br.Element=t,br.element=function(s,a,o){return new t(s,a,o)},br.text=function(s){return{type:"text",value:s}};var e=br.emptyElement={first:function(){return null},firstOrEmpty:function(){return e},attributes:{},children:[]};function t(s,a,o){this.type="element",this.name=s,this.attributes=a||{},this.children=o||[]}t.prototype.first=function(s){return n.find(this.children,function(a){return a.name===s})},t.prototype.firstOrEmpty=function(s){return this.first(s)||e},t.prototype.getElementsByTagName=function(s){var a=n.filter(this.children,function(o){return o.name===s});return r(a)},t.prototype.text=function(){if(this.children.length===0)return"";if(this.children.length!==1||this.children[0].type!=="text")throw new Error("Not implemented");return this.children[0].value};var i={getElementsByTagName:function(s){return r(n.flatten(this.map(function(a){return a.getElementsByTagName(s)},!0)))}};function r(s){return n.extend(s,i)}return br}var Iu={},Ma={},fs={},Pn={},Vi={},Ay;function zc(){if(Ay)return Vi;Ay=1;function n(s,a,o){if(o===void 0&&(o=Array.prototype),s&&typeof o.find=="function")return o.find.call(s,a);for(var c=0;c<s.length;c++)if(Object.prototype.hasOwnProperty.call(s,c)){var l=s[c];if(a.call(void 0,l,c,s))return l}}function e(s,a){return a===void 0&&(a=Object),a&&typeof a.freeze=="function"?a.freeze(s):s}function t(s,a){if(s===null||typeof s!="object")throw new TypeError("target is not an object");for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(s[o]=a[o]);return s}var i=e({HTML:"text/html",isHTML:function(s){return s===i.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),r=e({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(s){return s===r.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return Vi.assign=t,Vi.find=n,Vi.freeze=e,Vi.MIME_TYPE=i,Vi.NAMESPACE=r,Vi}var wy;function Tp(){if(wy)return Pn;wy=1;var n=zc(),e=n.find,t=n.NAMESPACE;function i(k){return k!==""}function r(k){return k?k.split(/[\t\n\f\r ]+/).filter(i):[]}function s(k,M){return k.hasOwnProperty(M)||(k[M]=!0),k}function a(k){if(!k)return[];var M=r(k);return Object.keys(M.reduce(s,{}))}function o(k){return function(M){return k&&k.indexOf(M)!==-1}}function c(k,M){for(var K in k)Object.prototype.hasOwnProperty.call(k,K)&&(M[K]=k[K])}function l(k,M){var K=k.prototype;if(!(K instanceof M)){let oe=function(){};oe.prototype=M.prototype,oe=new oe,c(K,oe),k.prototype=K=oe}K.constructor!=k&&(typeof k!="function"&&console.error("unknown Class:"+k),K.constructor=k)}var u={},d=u.ELEMENT_NODE=1,h=u.ATTRIBUTE_NODE=2,f=u.TEXT_NODE=3,p=u.CDATA_SECTION_NODE=4,m=u.ENTITY_REFERENCE_NODE=5,g=u.ENTITY_NODE=6,y=u.PROCESSING_INSTRUCTION_NODE=7,v=u.COMMENT_NODE=8,b=u.DOCUMENT_NODE=9,T=u.DOCUMENT_TYPE_NODE=10,x=u.DOCUMENT_FRAGMENT_NODE=11,_=u.NOTATION_NODE=12,D={},w={};D.INDEX_SIZE_ERR=(w[1]="Index size error",1),D.DOMSTRING_SIZE_ERR=(w[2]="DOMString size error",2);var S=D.HIERARCHY_REQUEST_ERR=(w[3]="Hierarchy request error",3);D.WRONG_DOCUMENT_ERR=(w[4]="Wrong document",4),D.INVALID_CHARACTER_ERR=(w[5]="Invalid character",5),D.NO_DATA_ALLOWED_ERR=(w[6]="No data allowed",6),D.NO_MODIFICATION_ALLOWED_ERR=(w[7]="No modification allowed",7);var C=D.NOT_FOUND_ERR=(w[8]="Not found",8);D.NOT_SUPPORTED_ERR=(w[9]="Not supported",9);var O=D.INUSE_ATTRIBUTE_ERR=(w[10]="Attribute in use",10);D.INVALID_STATE_ERR=(w[11]="Invalid state",11),D.SYNTAX_ERR=(w[12]="Syntax error",12),D.INVALID_MODIFICATION_ERR=(w[13]="Invalid modification",13),D.NAMESPACE_ERR=(w[14]="Invalid namespace",14),D.INVALID_ACCESS_ERR=(w[15]="Invalid access",15);function I(k,M){if(M instanceof Error)var K=M;else K=this,Error.call(this,w[k]),this.message=w[k],Error.captureStackTrace&&Error.captureStackTrace(this,I);return K.code=k,M&&(this.message=this.message+": "+M),K}I.prototype=Error.prototype,c(D,I);function L(){}L.prototype={length:0,item:function(k){return k>=0&&k<this.length?this[k]:null},toString:function(k,M){for(var K=[],oe=0;oe<this.length;oe++)$e(this[oe],K,k,M);return K.join("")},filter:function(k){return Array.prototype.filter.call(this,k)},indexOf:function(k){return Array.prototype.indexOf.call(this,k)}};function E(k,M){this._node=k,this._refresh=M,$(this)}function $(k){var M=k._node._inc||k._node.ownerDocument._inc;if(k._inc!==M){var K=k._refresh(k._node);if(vn(k,"length",K.length),!k.$$length||K.length<k.$$length)for(var oe=K.length;oe in k;oe++)Object.prototype.hasOwnProperty.call(k,oe)&&delete k[oe];c(K,k),k._inc=M}}E.prototype.item=function(k){return $(this),this[k]||null},l(E,L);function U(){}function F(k,M){for(var K=k.length;K--;)if(k[K]===M)return K}function G(k,M,K,oe){if(oe?M[F(M,oe)]=K:M[M.length++]=K,k){K.ownerElement=k;var ge=k.ownerDocument;ge&&(oe&&ue(ge,k,oe),ne(ge,k,K))}}function W(k,M,K){var oe=F(M,K);if(oe>=0){for(var ge=M.length-1;oe<ge;)M[oe]=M[++oe];if(M.length=ge,k){var Re=k.ownerDocument;Re&&(ue(Re,k,K),K.ownerElement=null)}}else throw new I(C,new Error(k.tagName+"@"+K))}U.prototype={length:0,item:L.prototype.item,getNamedItem:function(k){for(var M=this.length;M--;){var K=this[M];if(K.nodeName==k)return K}},setNamedItem:function(k){var M=k.ownerElement;if(M&&M!=this._ownerElement)throw new I(O);var K=this.getNamedItem(k.nodeName);return G(this._ownerElement,this,k,K),K},setNamedItemNS:function(k){var M=k.ownerElement,K;if(M&&M!=this._ownerElement)throw new I(O);return K=this.getNamedItemNS(k.namespaceURI,k.localName),G(this._ownerElement,this,k,K),K},removeNamedItem:function(k){var M=this.getNamedItem(k);return W(this._ownerElement,this,M),M},removeNamedItemNS:function(k,M){var K=this.getNamedItemNS(k,M);return W(this._ownerElement,this,K),K},getNamedItemNS:function(k,M){for(var K=this.length;K--;){var oe=this[K];if(oe.localName==M&&oe.namespaceURI==k)return oe}return null}};function Y(){}Y.prototype={hasFeature:function(k,M){return!0},createDocument:function(k,M,K){var oe=new te;if(oe.implementation=this,oe.childNodes=new L,oe.doctype=K||null,K&&oe.appendChild(K),M){var ge=oe.createElementNS(k,M);oe.appendChild(ge)}return oe},createDocumentType:function(k,M,K){var oe=new Te;return oe.name=k,oe.nodeName=k,oe.publicId=M||"",oe.systemId=K||"",oe}};function P(){}P.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(k,M){return z(this,k,M)},replaceChild:function(k,M){z(this,k,M,B),M&&this.removeChild(M)},removeChild:function(k){return fe(this,k)},appendChild:function(k){return this.insertBefore(k,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(k){return St(this.ownerDocument||this,this,k)},normalize:function(){for(var k=this.firstChild;k;){var M=k.nextSibling;M&&M.nodeType==f&&k.nodeType==f?(this.removeChild(M),k.appendData(M.data)):(k.normalize(),k=M)}},isSupported:function(k,M){return this.ownerDocument.implementation.hasFeature(k,M)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(k){for(var M=this;M;){var K=M._nsMap;if(K){for(var oe in K)if(Object.prototype.hasOwnProperty.call(K,oe)&&K[oe]===k)return oe}M=M.nodeType==h?M.ownerDocument:M.parentNode}return null},lookupNamespaceURI:function(k){for(var M=this;M;){var K=M._nsMap;if(K&&Object.prototype.hasOwnProperty.call(K,k))return K[k];M=M.nodeType==h?M.ownerDocument:M.parentNode}return null},isDefaultNamespace:function(k){var M=this.lookupPrefix(k);return M==null}};function V(k){return k=="<"&&"&lt;"||k==">"&&"&gt;"||k=="&"&&"&amp;"||k=='"'&&"&quot;"||"&#"+k.charCodeAt()+";"}c(u,P),c(u,P.prototype);function j(k,M){if(M(k))return!0;if(k=k.firstChild)do if(j(k,M))return!0;while(k=k.nextSibling)}function te(){this.ownerDocument=this}function ne(k,M,K){k&&k._inc++;var oe=K.namespaceURI;oe===t.XMLNS&&(M._nsMap[K.prefix?K.localName:""]=K.value)}function ue(k,M,K,oe){k&&k._inc++;var ge=K.namespaceURI;ge===t.XMLNS&&delete M._nsMap[K.prefix?K.localName:""]}function he(k,M,K){if(k&&k._inc){k._inc++;var oe=M.childNodes;if(K)oe[oe.length++]=K;else{for(var ge=M.firstChild,Re=0;ge;)oe[Re++]=ge,ge=ge.nextSibling;oe.length=Re,delete oe[oe.length]}}}function fe(k,M){var K=M.previousSibling,oe=M.nextSibling;return K?K.nextSibling=oe:k.firstChild=oe,oe?oe.previousSibling=K:k.lastChild=K,M.parentNode=null,M.previousSibling=null,M.nextSibling=null,he(k.ownerDocument,k),M}function me(k){return k&&(k.nodeType===P.DOCUMENT_NODE||k.nodeType===P.DOCUMENT_FRAGMENT_NODE||k.nodeType===P.ELEMENT_NODE)}function ve(k){return k&&(Oe(k)||We(k)||De(k)||k.nodeType===P.DOCUMENT_FRAGMENT_NODE||k.nodeType===P.COMMENT_NODE||k.nodeType===P.PROCESSING_INSTRUCTION_NODE)}function De(k){return k&&k.nodeType===P.DOCUMENT_TYPE_NODE}function Oe(k){return k&&k.nodeType===P.ELEMENT_NODE}function We(k){return k&&k.nodeType===P.TEXT_NODE}function A(k,M){var K=k.childNodes||[];if(e(K,Oe)||De(M))return!1;var oe=e(K,De);return!(M&&oe&&K.indexOf(oe)>K.indexOf(M))}function Z(k,M){var K=k.childNodes||[];function oe(Re){return Oe(Re)&&Re!==M}if(e(K,oe))return!1;var ge=e(K,De);return!(M&&ge&&K.indexOf(ge)>K.indexOf(M))}function q(k,M,K){if(!me(k))throw new I(S,"Unexpected parent node type "+k.nodeType);if(K&&K.parentNode!==k)throw new I(C,"child not in parent");if(!ve(M)||De(M)&&k.nodeType!==P.DOCUMENT_NODE)throw new I(S,"Unexpected node type "+M.nodeType+" for parent node type "+k.nodeType)}function N(k,M,K){var oe=k.childNodes||[],ge=M.childNodes||[];if(M.nodeType===P.DOCUMENT_FRAGMENT_NODE){var Re=ge.filter(Oe);if(Re.length>1||e(ge,We))throw new I(S,"More than one element or text in fragment");if(Re.length===1&&!A(k,K))throw new I(S,"Element in fragment can not be inserted before doctype")}if(Oe(M)&&!A(k,K))throw new I(S,"Only one element can be added and only after doctype");if(De(M)){if(e(oe,De))throw new I(S,"Only one doctype is allowed");var Ze=e(oe,Oe);if(K&&oe.indexOf(Ze)<oe.indexOf(K))throw new I(S,"Doctype can only be inserted before an element");if(!K&&Ze)throw new I(S,"Doctype can not be appended since element is present")}}function B(k,M,K){var oe=k.childNodes||[],ge=M.childNodes||[];if(M.nodeType===P.DOCUMENT_FRAGMENT_NODE){var Re=ge.filter(Oe);if(Re.length>1||e(ge,We))throw new I(S,"More than one element or text in fragment");if(Re.length===1&&!Z(k,K))throw new I(S,"Element in fragment can not be inserted before doctype")}if(Oe(M)&&!Z(k,K))throw new I(S,"Only one element can be added and only after doctype");if(De(M)){if(e(oe,function(on){return De(on)&&on!==K}))throw new I(S,"Only one doctype is allowed");var Ze=e(oe,Oe);if(K&&oe.indexOf(Ze)<oe.indexOf(K))throw new I(S,"Doctype can only be inserted before an element")}}function z(k,M,K,oe){q(k,M,K),k.nodeType===P.DOCUMENT_NODE&&(oe||N)(k,M,K);var ge=M.parentNode;if(ge&&ge.removeChild(M),M.nodeType===x){var Re=M.firstChild;if(Re==null)return M;var Ze=M.lastChild}else Re=Ze=M;var Pt=K?K.previousSibling:k.lastChild;Re.previousSibling=Pt,Ze.nextSibling=K,Pt?Pt.nextSibling=Re:k.firstChild=Re,K==null?k.lastChild=Ze:K.previousSibling=Ze;do{Re.parentNode=k;var on=k.ownerDocument||k;se(Re,on)}while(Re!==Ze&&(Re=Re.nextSibling));return he(k.ownerDocument||k,k),M.nodeType==x&&(M.firstChild=M.lastChild=null),M}function se(k,M){if(k.ownerDocument!==M){if(k.ownerDocument=M,k.nodeType===d&&k.attributes)for(var K=0;K<k.attributes.length;K++){var oe=k.attributes.item(K);oe&&(oe.ownerDocument=M)}for(var ge=k.firstChild;ge;)se(ge,M),ge=ge.nextSibling}}function ce(k,M){M.parentNode&&M.parentNode.removeChild(M),M.parentNode=k,M.previousSibling=k.lastChild,M.nextSibling=null,M.previousSibling?M.previousSibling.nextSibling=M:k.firstChild=M,k.lastChild=M,he(k.ownerDocument,k,M);var K=k.ownerDocument||k;return se(M,K),M}te.prototype={nodeName:"#document",nodeType:b,doctype:null,documentElement:null,_inc:1,insertBefore:function(k,M){if(k.nodeType==x){for(var K=k.firstChild;K;){var oe=K.nextSibling;this.insertBefore(K,M),K=oe}return k}return z(this,k,M),se(k,this),this.documentElement===null&&k.nodeType===d&&(this.documentElement=k),k},removeChild:function(k){return this.documentElement==k&&(this.documentElement=null),fe(this,k)},replaceChild:function(k,M){z(this,k,M,B),se(k,this),M&&this.removeChild(M),Oe(k)&&(this.documentElement=k)},importNode:function(k,M){return it(this,k,M)},getElementById:function(k){var M=null;return j(this.documentElement,function(K){if(K.nodeType==d&&K.getAttribute("id")==k)return M=K,!0}),M},getElementsByClassName:function(k){var M=a(k);return new E(this,function(K){var oe=[];return M.length>0&&j(K.documentElement,function(ge){if(ge!==K&&ge.nodeType===d){var Re=ge.getAttribute("class");if(Re){var Ze=k===Re;if(!Ze){var Pt=a(Re);Ze=M.every(o(Pt))}Ze&&oe.push(ge)}}}),oe})},createElement:function(k){var M=new Q;M.ownerDocument=this,M.nodeName=k,M.tagName=k,M.localName=k,M.childNodes=new L;var K=M.attributes=new U;return K._ownerElement=M,M},createDocumentFragment:function(){var k=new Ve;return k.ownerDocument=this,k.childNodes=new L,k},createTextNode:function(k){var M=new ee;return M.ownerDocument=this,M.appendData(k),M},createComment:function(k){var M=new ae;return M.ownerDocument=this,M.appendData(k),M},createCDATASection:function(k){var M=new pe;return M.ownerDocument=this,M.appendData(k),M},createProcessingInstruction:function(k,M){var K=new J;return K.ownerDocument=this,K.tagName=K.nodeName=K.target=k,K.nodeValue=K.data=M,K},createAttribute:function(k){var M=new H;return M.ownerDocument=this,M.name=k,M.nodeName=k,M.localName=k,M.specified=!0,M},createEntityReference:function(k){var M=new we;return M.ownerDocument=this,M.nodeName=k,M},createElementNS:function(k,M){var K=new Q,oe=M.split(":"),ge=K.attributes=new U;return K.childNodes=new L,K.ownerDocument=this,K.nodeName=M,K.tagName=M,K.namespaceURI=k,oe.length==2?(K.prefix=oe[0],K.localName=oe[1]):K.localName=M,ge._ownerElement=K,K},createAttributeNS:function(k,M){var K=new H,oe=M.split(":");return K.ownerDocument=this,K.nodeName=M,K.name=M,K.namespaceURI=k,K.specified=!0,oe.length==2?(K.prefix=oe[0],K.localName=oe[1]):K.localName=M,K}},l(te,P);function Q(){this._nsMap={}}Q.prototype={nodeType:d,hasAttribute:function(k){return this.getAttributeNode(k)!=null},getAttribute:function(k){var M=this.getAttributeNode(k);return M&&M.value||""},getAttributeNode:function(k){return this.attributes.getNamedItem(k)},setAttribute:function(k,M){var K=this.ownerDocument.createAttribute(k);K.value=K.nodeValue=""+M,this.setAttributeNode(K)},removeAttribute:function(k){var M=this.getAttributeNode(k);M&&this.removeAttributeNode(M)},appendChild:function(k){return k.nodeType===x?this.insertBefore(k,null):ce(this,k)},setAttributeNode:function(k){return this.attributes.setNamedItem(k)},setAttributeNodeNS:function(k){return this.attributes.setNamedItemNS(k)},removeAttributeNode:function(k){return this.attributes.removeNamedItem(k.nodeName)},removeAttributeNS:function(k,M){var K=this.getAttributeNodeNS(k,M);K&&this.removeAttributeNode(K)},hasAttributeNS:function(k,M){return this.getAttributeNodeNS(k,M)!=null},getAttributeNS:function(k,M){var K=this.getAttributeNodeNS(k,M);return K&&K.value||""},setAttributeNS:function(k,M,K){var oe=this.ownerDocument.createAttributeNS(k,M);oe.value=oe.nodeValue=""+K,this.setAttributeNode(oe)},getAttributeNodeNS:function(k,M){return this.attributes.getNamedItemNS(k,M)},getElementsByTagName:function(k){return new E(this,function(M){var K=[];return j(M,function(oe){oe!==M&&oe.nodeType==d&&(k==="*"||oe.tagName==k)&&K.push(oe)}),K})},getElementsByTagNameNS:function(k,M){return new E(this,function(K){var oe=[];return j(K,function(ge){ge!==K&&ge.nodeType===d&&(k==="*"||ge.namespaceURI===k)&&(M==="*"||ge.localName==M)&&oe.push(ge)}),oe})}},te.prototype.getElementsByTagName=Q.prototype.getElementsByTagName,te.prototype.getElementsByTagNameNS=Q.prototype.getElementsByTagNameNS,l(Q,P);function H(){}H.prototype.nodeType=h,l(H,P);function X(){}X.prototype={data:"",substringData:function(k,M){return this.data.substring(k,k+M)},appendData:function(k){k=this.data+k,this.nodeValue=this.data=k,this.length=k.length},insertData:function(k,M){this.replaceData(k,0,M)},appendChild:function(k){throw new Error(w[S])},deleteData:function(k,M){this.replaceData(k,M,"")},replaceData:function(k,M,K){var oe=this.data.substring(0,k),ge=this.data.substring(k+M);K=oe+K+ge,this.nodeValue=this.data=K,this.length=K.length}},l(X,P);function ee(){}ee.prototype={nodeName:"#text",nodeType:f,splitText:function(k){var M=this.data,K=M.substring(k);M=M.substring(0,k),this.data=this.nodeValue=M,this.length=M.length;var oe=this.ownerDocument.createTextNode(K);return this.parentNode&&this.parentNode.insertBefore(oe,this.nextSibling),oe}},l(ee,X);function ae(){}ae.prototype={nodeName:"#comment",nodeType:v},l(ae,X);function pe(){}pe.prototype={nodeName:"#cdata-section",nodeType:p},l(pe,X);function Te(){}Te.prototype.nodeType=T,l(Te,P);function Ce(){}Ce.prototype.nodeType=_,l(Ce,P);function Se(){}Se.prototype.nodeType=g,l(Se,P);function we(){}we.prototype.nodeType=m,l(we,P);function Ve(){}Ve.prototype.nodeName="#document-fragment",Ve.prototype.nodeType=x,l(Ve,P);function J(){}J.prototype.nodeType=y,l(J,P);function de(){}de.prototype.serializeToString=function(k,M,K){return be.call(k,M,K)},P.prototype.toString=be;function be(k,M){var K=[],oe=this.nodeType==9&&this.documentElement||this,ge=oe.prefix,Re=oe.namespaceURI;if(Re&&ge==null){var ge=oe.lookupPrefix(Re);if(ge==null)var Ze=[{namespace:Re,prefix:null}]}return $e(this,K,k,M,Ze),K.join("")}function Ee(k,M,K){var oe=k.prefix||"",ge=k.namespaceURI;if(!ge||oe==="xml"&&ge===t.XML||ge===t.XMLNS)return!1;for(var Re=K.length;Re--;){var Ze=K[Re];if(Ze.prefix===oe)return Ze.namespace!==ge}return!0}function Fe(k,M,K){k.push(" ",M,'="',K.replace(/[<>&"\t\n\r]/g,V),'"')}function $e(k,M,K,oe,ge){if(ge||(ge=[]),oe)if(k=oe(k),k){if(typeof k=="string"){M.push(k);return}}else return;switch(k.nodeType){case d:var Re=k.attributes,Ze=Re.length,At=k.firstChild,Pt=k.tagName;K=t.isHTML(k.namespaceURI)||K;var on=Pt;if(!K&&!k.prefix&&k.namespaceURI){for(var ri,Fn=0;Fn<Re.length;Fn++)if(Re.item(Fn).name==="xmlns"){ri=Re.item(Fn).value;break}if(!ri)for(var Mi=ge.length-1;Mi>=0;Mi--){var Bi=ge[Mi];if(Bi.prefix===""&&Bi.namespace===k.namespaceURI){ri=Bi.namespace;break}}if(ri!==k.namespaceURI)for(var Mi=ge.length-1;Mi>=0;Mi--){var Bi=ge[Mi];if(Bi.namespace===k.namespaceURI){Bi.prefix&&(on=Bi.prefix+":"+Pt);break}}}M.push("<",on);for(var Ni=0;Ni<Ze;Ni++){var bn=Re.item(Ni);bn.prefix=="xmlns"?ge.push({prefix:bn.localName,namespace:bn.value}):bn.nodeName=="xmlns"&&ge.push({prefix:"",namespace:bn.value})}for(var Ni=0;Ni<Ze;Ni++){var bn=Re.item(Ni);if(Ee(bn,K,ge)){var $i=bn.prefix||"",os=bn.namespaceURI;Fe(M,$i?"xmlns:"+$i:"xmlns",os),ge.push({prefix:$i,namespace:os})}$e(bn,M,K,oe,ge)}if(Pt===on&&Ee(k,K,ge)){var $i=k.prefix||"",os=k.namespaceURI;Fe(M,$i?"xmlns:"+$i:"xmlns",os),ge.push({prefix:$i,namespace:os})}if(At||K&&!/^(?:meta|link|img|br|hr|input)$/i.test(Pt)){if(M.push(">"),K&&/^script$/i.test(Pt))for(;At;)At.data?M.push(At.data):$e(At,M,K,oe,ge.slice()),At=At.nextSibling;else for(;At;)$e(At,M,K,oe,ge.slice()),At=At.nextSibling;M.push("</",on,">")}else M.push("/>");return;case b:case x:for(var At=k.firstChild;At;)$e(At,M,K,oe,ge.slice()),At=At.nextSibling;return;case h:return Fe(M,k.name,k.value);case f:return M.push(k.data.replace(/[<&>]/g,V));case p:return M.push("<![CDATA[",k.data,"]]>");case v:return M.push("<!--",k.data,"-->");case T:var Yp=k.publicId,yr=k.systemId;if(M.push("<!DOCTYPE ",k.name),Yp)M.push(" PUBLIC ",Yp),yr&&yr!="."&&M.push(" ",yr),M.push(">");else if(yr&&yr!=".")M.push(" SYSTEM ",yr,">");else{var Qp=k.internalSubset;Qp&&M.push(" [",Qp,"]"),M.push(">")}return;case y:return M.push("<?",k.target," ",k.data,"?>");case m:return M.push("&",k.nodeName,";");default:M.push("??",k.nodeName)}}function it(k,M,K){var oe;switch(M.nodeType){case d:oe=M.cloneNode(!1),oe.ownerDocument=k;case x:break;case h:K=!0;break}if(oe||(oe=M.cloneNode(!1)),oe.ownerDocument=k,oe.parentNode=null,K)for(var ge=M.firstChild;ge;)oe.appendChild(it(k,ge,K)),ge=ge.nextSibling;return oe}function St(k,M,K){var oe=new M.constructor;for(var ge in M)if(Object.prototype.hasOwnProperty.call(M,ge)){var Re=M[ge];typeof Re!="object"&&Re!=oe[ge]&&(oe[ge]=Re)}switch(M.childNodes&&(oe.childNodes=new L),oe.ownerDocument=k,oe.nodeType){case d:var Ze=M.attributes,Pt=oe.attributes=new U,on=Ze.length;Pt._ownerElement=oe;for(var ri=0;ri<on;ri++)oe.setAttributeNode(St(k,Ze.item(ri),!0));break;case h:K=!0}if(K)for(var Fn=M.firstChild;Fn;)oe.appendChild(St(k,Fn,K)),Fn=Fn.nextSibling;return oe}function vn(k,M,K){k[M]=K}try{if(Object.defineProperty){let k=function(M){switch(M.nodeType){case d:case x:var K=[];for(M=M.firstChild;M;)M.nodeType!==7&&M.nodeType!==8&&K.push(k(M)),M=M.nextSibling;return K.join("");default:return M.nodeValue}};Object.defineProperty(E.prototype,"length",{get:function(){return $(this),this.$$length}}),Object.defineProperty(P.prototype,"textContent",{get:function(){return k(this)},set:function(M){switch(this.nodeType){case d:case x:for(;this.firstChild;)this.removeChild(this.firstChild);(M||String(M))&&this.appendChild(this.ownerDocument.createTextNode(M));break;default:this.data=M,this.value=M,this.nodeValue=M}}}),vn=function(M,K,oe){M["$$"+K]=oe}}}catch{}return Pn.DocumentType=Te,Pn.DOMException=I,Pn.DOMImplementation=Y,Pn.Element=Q,Pn.Node=P,Pn.NodeList=L,Pn.XMLSerializer=de,Pn}var ps={},Cu={},Iy;function KO(){return Iy||(Iy=1,(function(n){var e=zc().freeze;n.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),n.HTML_ENTITIES=e({Aacute:"Ã",aacute:"Ã¡",Abreve:"Ä‚",abreve:"Äƒ",ac:"âˆ¾",acd:"âˆ¿",acE:"âˆ¾Ì³",Acirc:"Ã‚",acirc:"Ã¢",acute:"Â´",Acy:"Ð",acy:"Ð°",AElig:"Ã†",aelig:"Ã¦",af:"â¡",Afr:"ð”„",afr:"ð”ž",Agrave:"Ã€",agrave:"Ã ",alefsym:"â„µ",aleph:"â„µ",Alpha:"Î‘",alpha:"Î±",Amacr:"Ä€",amacr:"Ä",amalg:"â¨¿",AMP:"&",amp:"&",And:"â©“",and:"âˆ§",andand:"â©•",andd:"â©œ",andslope:"â©˜",andv:"â©š",ang:"âˆ ",ange:"â¦¤",angle:"âˆ ",angmsd:"âˆ¡",angmsdaa:"â¦¨",angmsdab:"â¦©",angmsdac:"â¦ª",angmsdad:"â¦«",angmsdae:"â¦¬",angmsdaf:"â¦­",angmsdag:"â¦®",angmsdah:"â¦¯",angrt:"âˆŸ",angrtvb:"âŠ¾",angrtvbd:"â¦",angsph:"âˆ¢",angst:"Ã…",angzarr:"â¼",Aogon:"Ä„",aogon:"Ä…",Aopf:"ð”¸",aopf:"ð•’",ap:"â‰ˆ",apacir:"â©¯",apE:"â©°",ape:"â‰Š",apid:"â‰‹",apos:"'",ApplyFunction:"â¡",approx:"â‰ˆ",approxeq:"â‰Š",Aring:"Ã…",aring:"Ã¥",Ascr:"ð’œ",ascr:"ð’¶",Assign:"â‰”",ast:"*",asymp:"â‰ˆ",asympeq:"â‰",Atilde:"Ãƒ",atilde:"Ã£",Auml:"Ã„",auml:"Ã¤",awconint:"âˆ³",awint:"â¨‘",backcong:"â‰Œ",backepsilon:"Ï¶",backprime:"â€µ",backsim:"âˆ½",backsimeq:"â‹",Backslash:"âˆ–",Barv:"â«§",barvee:"âŠ½",Barwed:"âŒ†",barwed:"âŒ…",barwedge:"âŒ…",bbrk:"âŽµ",bbrktbrk:"âŽ¶",bcong:"â‰Œ",Bcy:"Ð‘",bcy:"Ð±",bdquo:"â€ž",becaus:"âˆµ",Because:"âˆµ",because:"âˆµ",bemptyv:"â¦°",bepsi:"Ï¶",bernou:"â„¬",Bernoullis:"â„¬",Beta:"Î’",beta:"Î²",beth:"â„¶",between:"â‰¬",Bfr:"ð”…",bfr:"ð”Ÿ",bigcap:"â‹‚",bigcirc:"â—¯",bigcup:"â‹ƒ",bigodot:"â¨€",bigoplus:"â¨",bigotimes:"â¨‚",bigsqcup:"â¨†",bigstar:"â˜…",bigtriangledown:"â–½",bigtriangleup:"â–³",biguplus:"â¨„",bigvee:"â‹",bigwedge:"â‹€",bkarow:"â¤",blacklozenge:"â§«",blacksquare:"â–ª",blacktriangle:"â–´",blacktriangledown:"â–¾",blacktriangleleft:"â—‚",blacktriangleright:"â–¸",blank:"â£",blk12:"â–’",blk14:"â–‘",blk34:"â–“",block:"â–ˆ",bne:"=âƒ¥",bnequiv:"â‰¡âƒ¥",bNot:"â«­",bnot:"âŒ",Bopf:"ð”¹",bopf:"ð•“",bot:"âŠ¥",bottom:"âŠ¥",bowtie:"â‹ˆ",boxbox:"â§‰",boxDL:"â•—",boxDl:"â•–",boxdL:"â••",boxdl:"â”",boxDR:"â•”",boxDr:"â•“",boxdR:"â•’",boxdr:"â”Œ",boxH:"â•",boxh:"â”€",boxHD:"â•¦",boxHd:"â•¤",boxhD:"â•¥",boxhd:"â”¬",boxHU:"â•©",boxHu:"â•§",boxhU:"â•¨",boxhu:"â”´",boxminus:"âŠŸ",boxplus:"âŠž",boxtimes:"âŠ ",boxUL:"â•",boxUl:"â•œ",boxuL:"â•›",boxul:"â”˜",boxUR:"â•š",boxUr:"â•™",boxuR:"â•˜",boxur:"â””",boxV:"â•‘",boxv:"â”‚",boxVH:"â•¬",boxVh:"â•«",boxvH:"â•ª",boxvh:"â”¼",boxVL:"â•£",boxVl:"â•¢",boxvL:"â•¡",boxvl:"â”¤",boxVR:"â• ",boxVr:"â•Ÿ",boxvR:"â•ž",boxvr:"â”œ",bprime:"â€µ",Breve:"Ë˜",breve:"Ë˜",brvbar:"Â¦",Bscr:"â„¬",bscr:"ð’·",bsemi:"â",bsim:"âˆ½",bsime:"â‹",bsol:"\\",bsolb:"â§…",bsolhsub:"âŸˆ",bull:"â€¢",bullet:"â€¢",bump:"â‰Ž",bumpE:"âª®",bumpe:"â‰",Bumpeq:"â‰Ž",bumpeq:"â‰",Cacute:"Ä†",cacute:"Ä‡",Cap:"â‹’",cap:"âˆ©",capand:"â©„",capbrcup:"â©‰",capcap:"â©‹",capcup:"â©‡",capdot:"â©€",CapitalDifferentialD:"â……",caps:"âˆ©ï¸€",caret:"â",caron:"Ë‡",Cayleys:"â„­",ccaps:"â©",Ccaron:"ÄŒ",ccaron:"Ä",Ccedil:"Ã‡",ccedil:"Ã§",Ccirc:"Äˆ",ccirc:"Ä‰",Cconint:"âˆ°",ccups:"â©Œ",ccupssm:"â©",Cdot:"ÄŠ",cdot:"Ä‹",cedil:"Â¸",Cedilla:"Â¸",cemptyv:"â¦²",cent:"Â¢",CenterDot:"Â·",centerdot:"Â·",Cfr:"â„­",cfr:"ð” ",CHcy:"Ð§",chcy:"Ñ‡",check:"âœ“",checkmark:"âœ“",Chi:"Î§",chi:"Ï‡",cir:"â—‹",circ:"Ë†",circeq:"â‰—",circlearrowleft:"â†º",circlearrowright:"â†»",circledast:"âŠ›",circledcirc:"âŠš",circleddash:"âŠ",CircleDot:"âŠ™",circledR:"Â®",circledS:"â“ˆ",CircleMinus:"âŠ–",CirclePlus:"âŠ•",CircleTimes:"âŠ—",cirE:"â§ƒ",cire:"â‰—",cirfnint:"â¨",cirmid:"â«¯",cirscir:"â§‚",ClockwiseContourIntegral:"âˆ²",CloseCurlyDoubleQuote:"â€",CloseCurlyQuote:"â€™",clubs:"â™£",clubsuit:"â™£",Colon:"âˆ·",colon:":",Colone:"â©´",colone:"â‰”",coloneq:"â‰”",comma:",",commat:"@",comp:"âˆ",compfn:"âˆ˜",complement:"âˆ",complexes:"â„‚",cong:"â‰…",congdot:"â©­",Congruent:"â‰¡",Conint:"âˆ¯",conint:"âˆ®",ContourIntegral:"âˆ®",Copf:"â„‚",copf:"ð•”",coprod:"âˆ",Coproduct:"âˆ",COPY:"Â©",copy:"Â©",copysr:"â„—",CounterClockwiseContourIntegral:"âˆ³",crarr:"â†µ",Cross:"â¨¯",cross:"âœ—",Cscr:"ð’ž",cscr:"ð’¸",csub:"â«",csube:"â«‘",csup:"â«",csupe:"â«’",ctdot:"â‹¯",cudarrl:"â¤¸",cudarrr:"â¤µ",cuepr:"â‹ž",cuesc:"â‹Ÿ",cularr:"â†¶",cularrp:"â¤½",Cup:"â‹“",cup:"âˆª",cupbrcap:"â©ˆ",CupCap:"â‰",cupcap:"â©†",cupcup:"â©Š",cupdot:"âŠ",cupor:"â©…",cups:"âˆªï¸€",curarr:"â†·",curarrm:"â¤¼",curlyeqprec:"â‹ž",curlyeqsucc:"â‹Ÿ",curlyvee:"â‹Ž",curlywedge:"â‹",curren:"Â¤",curvearrowleft:"â†¶",curvearrowright:"â†·",cuvee:"â‹Ž",cuwed:"â‹",cwconint:"âˆ²",cwint:"âˆ±",cylcty:"âŒ­",Dagger:"â€¡",dagger:"â€ ",daleth:"â„¸",Darr:"â†¡",dArr:"â‡“",darr:"â†“",dash:"â€",Dashv:"â«¤",dashv:"âŠ£",dbkarow:"â¤",dblac:"Ë",Dcaron:"ÄŽ",dcaron:"Ä",Dcy:"Ð”",dcy:"Ð´",DD:"â……",dd:"â…†",ddagger:"â€¡",ddarr:"â‡Š",DDotrahd:"â¤‘",ddotseq:"â©·",deg:"Â°",Del:"âˆ‡",Delta:"Î”",delta:"Î´",demptyv:"â¦±",dfisht:"â¥¿",Dfr:"ð”‡",dfr:"ð”¡",dHar:"â¥¥",dharl:"â‡ƒ",dharr:"â‡‚",DiacriticalAcute:"Â´",DiacriticalDot:"Ë™",DiacriticalDoubleAcute:"Ë",DiacriticalGrave:"`",DiacriticalTilde:"Ëœ",diam:"â‹„",Diamond:"â‹„",diamond:"â‹„",diamondsuit:"â™¦",diams:"â™¦",die:"Â¨",DifferentialD:"â…†",digamma:"Ï",disin:"â‹²",div:"Ã·",divide:"Ã·",divideontimes:"â‹‡",divonx:"â‹‡",DJcy:"Ð‚",djcy:"Ñ’",dlcorn:"âŒž",dlcrop:"âŒ",dollar:"$",Dopf:"ð”»",dopf:"ð••",Dot:"Â¨",dot:"Ë™",DotDot:"âƒœ",doteq:"â‰",doteqdot:"â‰‘",DotEqual:"â‰",dotminus:"âˆ¸",dotplus:"âˆ”",dotsquare:"âŠ¡",doublebarwedge:"âŒ†",DoubleContourIntegral:"âˆ¯",DoubleDot:"Â¨",DoubleDownArrow:"â‡“",DoubleLeftArrow:"â‡",DoubleLeftRightArrow:"â‡”",DoubleLeftTee:"â«¤",DoubleLongLeftArrow:"âŸ¸",DoubleLongLeftRightArrow:"âŸº",DoubleLongRightArrow:"âŸ¹",DoubleRightArrow:"â‡’",DoubleRightTee:"âŠ¨",DoubleUpArrow:"â‡‘",DoubleUpDownArrow:"â‡•",DoubleVerticalBar:"âˆ¥",DownArrow:"â†“",Downarrow:"â‡“",downarrow:"â†“",DownArrowBar:"â¤“",DownArrowUpArrow:"â‡µ",DownBreve:"Ì‘",downdownarrows:"â‡Š",downharpoonleft:"â‡ƒ",downharpoonright:"â‡‚",DownLeftRightVector:"â¥",DownLeftTeeVector:"â¥ž",DownLeftVector:"â†½",DownLeftVectorBar:"â¥–",DownRightTeeVector:"â¥Ÿ",DownRightVector:"â‡",DownRightVectorBar:"â¥—",DownTee:"âŠ¤",DownTeeArrow:"â†§",drbkarow:"â¤",drcorn:"âŒŸ",drcrop:"âŒŒ",Dscr:"ð’Ÿ",dscr:"ð’¹",DScy:"Ð…",dscy:"Ñ•",dsol:"â§¶",Dstrok:"Ä",dstrok:"Ä‘",dtdot:"â‹±",dtri:"â–¿",dtrif:"â–¾",duarr:"â‡µ",duhar:"â¥¯",dwangle:"â¦¦",DZcy:"Ð",dzcy:"ÑŸ",dzigrarr:"âŸ¿",Eacute:"Ã‰",eacute:"Ã©",easter:"â©®",Ecaron:"Äš",ecaron:"Ä›",ecir:"â‰–",Ecirc:"ÃŠ",ecirc:"Ãª",ecolon:"â‰•",Ecy:"Ð­",ecy:"Ñ",eDDot:"â©·",Edot:"Ä–",eDot:"â‰‘",edot:"Ä—",ee:"â…‡",efDot:"â‰’",Efr:"ð”ˆ",efr:"ð”¢",eg:"âªš",Egrave:"Ãˆ",egrave:"Ã¨",egs:"âª–",egsdot:"âª˜",el:"âª™",Element:"âˆˆ",elinters:"â§",ell:"â„“",els:"âª•",elsdot:"âª—",Emacr:"Ä’",emacr:"Ä“",empty:"âˆ…",emptyset:"âˆ…",EmptySmallSquare:"â—»",emptyv:"âˆ…",EmptyVerySmallSquare:"â–«",emsp:"â€ƒ",emsp13:"â€„",emsp14:"â€…",ENG:"ÅŠ",eng:"Å‹",ensp:"â€‚",Eogon:"Ä˜",eogon:"Ä™",Eopf:"ð”¼",eopf:"ð•–",epar:"â‹•",eparsl:"â§£",eplus:"â©±",epsi:"Îµ",Epsilon:"Î•",epsilon:"Îµ",epsiv:"Ïµ",eqcirc:"â‰–",eqcolon:"â‰•",eqsim:"â‰‚",eqslantgtr:"âª–",eqslantless:"âª•",Equal:"â©µ",equals:"=",EqualTilde:"â‰‚",equest:"â‰Ÿ",Equilibrium:"â‡Œ",equiv:"â‰¡",equivDD:"â©¸",eqvparsl:"â§¥",erarr:"â¥±",erDot:"â‰“",Escr:"â„°",escr:"â„¯",esdot:"â‰",Esim:"â©³",esim:"â‰‚",Eta:"Î—",eta:"Î·",ETH:"Ã",eth:"Ã°",Euml:"Ã‹",euml:"Ã«",euro:"â‚¬",excl:"!",exist:"âˆƒ",Exists:"âˆƒ",expectation:"â„°",ExponentialE:"â…‡",exponentiale:"â…‡",fallingdotseq:"â‰’",Fcy:"Ð¤",fcy:"Ñ„",female:"â™€",ffilig:"ï¬ƒ",fflig:"ï¬€",ffllig:"ï¬„",Ffr:"ð”‰",ffr:"ð”£",filig:"ï¬",FilledSmallSquare:"â—¼",FilledVerySmallSquare:"â–ª",fjlig:"fj",flat:"â™­",fllig:"ï¬‚",fltns:"â–±",fnof:"Æ’",Fopf:"ð”½",fopf:"ð•—",ForAll:"âˆ€",forall:"âˆ€",fork:"â‹”",forkv:"â«™",Fouriertrf:"â„±",fpartint:"â¨",frac12:"Â½",frac13:"â…“",frac14:"Â¼",frac15:"â…•",frac16:"â…™",frac18:"â…›",frac23:"â…”",frac25:"â…–",frac34:"Â¾",frac35:"â…—",frac38:"â…œ",frac45:"â…˜",frac56:"â…š",frac58:"â…",frac78:"â…ž",frasl:"â„",frown:"âŒ¢",Fscr:"â„±",fscr:"ð’»",gacute:"Çµ",Gamma:"Î“",gamma:"Î³",Gammad:"Ïœ",gammad:"Ï",gap:"âª†",Gbreve:"Äž",gbreve:"ÄŸ",Gcedil:"Ä¢",Gcirc:"Äœ",gcirc:"Ä",Gcy:"Ð“",gcy:"Ð³",Gdot:"Ä ",gdot:"Ä¡",gE:"â‰§",ge:"â‰¥",gEl:"âªŒ",gel:"â‹›",geq:"â‰¥",geqq:"â‰§",geqslant:"â©¾",ges:"â©¾",gescc:"âª©",gesdot:"âª€",gesdoto:"âª‚",gesdotol:"âª„",gesl:"â‹›ï¸€",gesles:"âª”",Gfr:"ð”Š",gfr:"ð”¤",Gg:"â‹™",gg:"â‰«",ggg:"â‹™",gimel:"â„·",GJcy:"Ðƒ",gjcy:"Ñ“",gl:"â‰·",gla:"âª¥",glE:"âª’",glj:"âª¤",gnap:"âªŠ",gnapprox:"âªŠ",gnE:"â‰©",gne:"âªˆ",gneq:"âªˆ",gneqq:"â‰©",gnsim:"â‹§",Gopf:"ð”¾",gopf:"ð•˜",grave:"`",GreaterEqual:"â‰¥",GreaterEqualLess:"â‹›",GreaterFullEqual:"â‰§",GreaterGreater:"âª¢",GreaterLess:"â‰·",GreaterSlantEqual:"â©¾",GreaterTilde:"â‰³",Gscr:"ð’¢",gscr:"â„Š",gsim:"â‰³",gsime:"âªŽ",gsiml:"âª",Gt:"â‰«",GT:">",gt:">",gtcc:"âª§",gtcir:"â©º",gtdot:"â‹—",gtlPar:"â¦•",gtquest:"â©¼",gtrapprox:"âª†",gtrarr:"â¥¸",gtrdot:"â‹—",gtreqless:"â‹›",gtreqqless:"âªŒ",gtrless:"â‰·",gtrsim:"â‰³",gvertneqq:"â‰©ï¸€",gvnE:"â‰©ï¸€",Hacek:"Ë‡",hairsp:"â€Š",half:"Â½",hamilt:"â„‹",HARDcy:"Ðª",hardcy:"ÑŠ",hArr:"â‡”",harr:"â†”",harrcir:"â¥ˆ",harrw:"â†­",Hat:"^",hbar:"â„",Hcirc:"Ä¤",hcirc:"Ä¥",hearts:"â™¥",heartsuit:"â™¥",hellip:"â€¦",hercon:"âŠ¹",Hfr:"â„Œ",hfr:"ð”¥",HilbertSpace:"â„‹",hksearow:"â¤¥",hkswarow:"â¤¦",hoarr:"â‡¿",homtht:"âˆ»",hookleftarrow:"â†©",hookrightarrow:"â†ª",Hopf:"â„",hopf:"ð•™",horbar:"â€•",HorizontalLine:"â”€",Hscr:"â„‹",hscr:"ð’½",hslash:"â„",Hstrok:"Ä¦",hstrok:"Ä§",HumpDownHump:"â‰Ž",HumpEqual:"â‰",hybull:"âƒ",hyphen:"â€",Iacute:"Ã",iacute:"Ã­",ic:"â£",Icirc:"ÃŽ",icirc:"Ã®",Icy:"Ð˜",icy:"Ð¸",Idot:"Ä°",IEcy:"Ð•",iecy:"Ðµ",iexcl:"Â¡",iff:"â‡”",Ifr:"â„‘",ifr:"ð”¦",Igrave:"ÃŒ",igrave:"Ã¬",ii:"â…ˆ",iiiint:"â¨Œ",iiint:"âˆ­",iinfin:"â§œ",iiota:"â„©",IJlig:"Ä²",ijlig:"Ä³",Im:"â„‘",Imacr:"Äª",imacr:"Ä«",image:"â„‘",ImaginaryI:"â…ˆ",imagline:"â„",imagpart:"â„‘",imath:"Ä±",imof:"âŠ·",imped:"Æµ",Implies:"â‡’",in:"âˆˆ",incare:"â„…",infin:"âˆž",infintie:"â§",inodot:"Ä±",Int:"âˆ¬",int:"âˆ«",intcal:"âŠº",integers:"â„¤",Integral:"âˆ«",intercal:"âŠº",Intersection:"â‹‚",intlarhk:"â¨—",intprod:"â¨¼",InvisibleComma:"â£",InvisibleTimes:"â¢",IOcy:"Ð",iocy:"Ñ‘",Iogon:"Ä®",iogon:"Ä¯",Iopf:"ð•€",iopf:"ð•š",Iota:"Î™",iota:"Î¹",iprod:"â¨¼",iquest:"Â¿",Iscr:"â„",iscr:"ð’¾",isin:"âˆˆ",isindot:"â‹µ",isinE:"â‹¹",isins:"â‹´",isinsv:"â‹³",isinv:"âˆˆ",it:"â¢",Itilde:"Ä¨",itilde:"Ä©",Iukcy:"Ð†",iukcy:"Ñ–",Iuml:"Ã",iuml:"Ã¯",Jcirc:"Ä´",jcirc:"Äµ",Jcy:"Ð™",jcy:"Ð¹",Jfr:"ð”",jfr:"ð”§",jmath:"È·",Jopf:"ð•",jopf:"ð•›",Jscr:"ð’¥",jscr:"ð’¿",Jsercy:"Ðˆ",jsercy:"Ñ˜",Jukcy:"Ð„",jukcy:"Ñ”",Kappa:"Îš",kappa:"Îº",kappav:"Ï°",Kcedil:"Ä¶",kcedil:"Ä·",Kcy:"Ðš",kcy:"Ðº",Kfr:"ð”Ž",kfr:"ð”¨",kgreen:"Ä¸",KHcy:"Ð¥",khcy:"Ñ…",KJcy:"ÐŒ",kjcy:"Ñœ",Kopf:"ð•‚",kopf:"ð•œ",Kscr:"ð’¦",kscr:"ð“€",lAarr:"â‡š",Lacute:"Ä¹",lacute:"Äº",laemptyv:"â¦´",lagran:"â„’",Lambda:"Î›",lambda:"Î»",Lang:"âŸª",lang:"âŸ¨",langd:"â¦‘",langle:"âŸ¨",lap:"âª…",Laplacetrf:"â„’",laquo:"Â«",Larr:"â†ž",lArr:"â‡",larr:"â†",larrb:"â‡¤",larrbfs:"â¤Ÿ",larrfs:"â¤",larrhk:"â†©",larrlp:"â†«",larrpl:"â¤¹",larrsim:"â¥³",larrtl:"â†¢",lat:"âª«",lAtail:"â¤›",latail:"â¤™",late:"âª­",lates:"âª­ï¸€",lBarr:"â¤Ž",lbarr:"â¤Œ",lbbrk:"â²",lbrace:"{",lbrack:"[",lbrke:"â¦‹",lbrksld:"â¦",lbrkslu:"â¦",Lcaron:"Ä½",lcaron:"Ä¾",Lcedil:"Ä»",lcedil:"Ä¼",lceil:"âŒˆ",lcub:"{",Lcy:"Ð›",lcy:"Ð»",ldca:"â¤¶",ldquo:"â€œ",ldquor:"â€ž",ldrdhar:"â¥§",ldrushar:"â¥‹",ldsh:"â†²",lE:"â‰¦",le:"â‰¤",LeftAngleBracket:"âŸ¨",LeftArrow:"â†",Leftarrow:"â‡",leftarrow:"â†",LeftArrowBar:"â‡¤",LeftArrowRightArrow:"â‡†",leftarrowtail:"â†¢",LeftCeiling:"âŒˆ",LeftDoubleBracket:"âŸ¦",LeftDownTeeVector:"â¥¡",LeftDownVector:"â‡ƒ",LeftDownVectorBar:"â¥™",LeftFloor:"âŒŠ",leftharpoondown:"â†½",leftharpoonup:"â†¼",leftleftarrows:"â‡‡",LeftRightArrow:"â†”",Leftrightarrow:"â‡”",leftrightarrow:"â†”",leftrightarrows:"â‡†",leftrightharpoons:"â‡‹",leftrightsquigarrow:"â†­",LeftRightVector:"â¥Ž",LeftTee:"âŠ£",LeftTeeArrow:"â†¤",LeftTeeVector:"â¥š",leftthreetimes:"â‹‹",LeftTriangle:"âŠ²",LeftTriangleBar:"â§",LeftTriangleEqual:"âŠ´",LeftUpDownVector:"â¥‘",LeftUpTeeVector:"â¥ ",LeftUpVector:"â†¿",LeftUpVectorBar:"â¥˜",LeftVector:"â†¼",LeftVectorBar:"â¥’",lEg:"âª‹",leg:"â‹š",leq:"â‰¤",leqq:"â‰¦",leqslant:"â©½",les:"â©½",lescc:"âª¨",lesdot:"â©¿",lesdoto:"âª",lesdotor:"âªƒ",lesg:"â‹šï¸€",lesges:"âª“",lessapprox:"âª…",lessdot:"â‹–",lesseqgtr:"â‹š",lesseqqgtr:"âª‹",LessEqualGreater:"â‹š",LessFullEqual:"â‰¦",LessGreater:"â‰¶",lessgtr:"â‰¶",LessLess:"âª¡",lesssim:"â‰²",LessSlantEqual:"â©½",LessTilde:"â‰²",lfisht:"â¥¼",lfloor:"âŒŠ",Lfr:"ð”",lfr:"ð”©",lg:"â‰¶",lgE:"âª‘",lHar:"â¥¢",lhard:"â†½",lharu:"â†¼",lharul:"â¥ª",lhblk:"â–„",LJcy:"Ð‰",ljcy:"Ñ™",Ll:"â‹˜",ll:"â‰ª",llarr:"â‡‡",llcorner:"âŒž",Lleftarrow:"â‡š",llhard:"â¥«",lltri:"â—º",Lmidot:"Ä¿",lmidot:"Å€",lmoust:"âŽ°",lmoustache:"âŽ°",lnap:"âª‰",lnapprox:"âª‰",lnE:"â‰¨",lne:"âª‡",lneq:"âª‡",lneqq:"â‰¨",lnsim:"â‹¦",loang:"âŸ¬",loarr:"â‡½",lobrk:"âŸ¦",LongLeftArrow:"âŸµ",Longleftarrow:"âŸ¸",longleftarrow:"âŸµ",LongLeftRightArrow:"âŸ·",Longleftrightarrow:"âŸº",longleftrightarrow:"âŸ·",longmapsto:"âŸ¼",LongRightArrow:"âŸ¶",Longrightarrow:"âŸ¹",longrightarrow:"âŸ¶",looparrowleft:"â†«",looparrowright:"â†¬",lopar:"â¦…",Lopf:"ð•ƒ",lopf:"ð•",loplus:"â¨­",lotimes:"â¨´",lowast:"âˆ—",lowbar:"_",LowerLeftArrow:"â†™",LowerRightArrow:"â†˜",loz:"â—Š",lozenge:"â—Š",lozf:"â§«",lpar:"(",lparlt:"â¦“",lrarr:"â‡†",lrcorner:"âŒŸ",lrhar:"â‡‹",lrhard:"â¥­",lrm:"â€Ž",lrtri:"âŠ¿",lsaquo:"â€¹",Lscr:"â„’",lscr:"ð“",Lsh:"â†°",lsh:"â†°",lsim:"â‰²",lsime:"âª",lsimg:"âª",lsqb:"[",lsquo:"â€˜",lsquor:"â€š",Lstrok:"Å",lstrok:"Å‚",Lt:"â‰ª",LT:"<",lt:"<",ltcc:"âª¦",ltcir:"â©¹",ltdot:"â‹–",lthree:"â‹‹",ltimes:"â‹‰",ltlarr:"â¥¶",ltquest:"â©»",ltri:"â—ƒ",ltrie:"âŠ´",ltrif:"â—‚",ltrPar:"â¦–",lurdshar:"â¥Š",luruhar:"â¥¦",lvertneqq:"â‰¨ï¸€",lvnE:"â‰¨ï¸€",macr:"Â¯",male:"â™‚",malt:"âœ ",maltese:"âœ ",Map:"â¤…",map:"â†¦",mapsto:"â†¦",mapstodown:"â†§",mapstoleft:"â†¤",mapstoup:"â†¥",marker:"â–®",mcomma:"â¨©",Mcy:"Ðœ",mcy:"Ð¼",mdash:"â€”",mDDot:"âˆº",measuredangle:"âˆ¡",MediumSpace:"âŸ",Mellintrf:"â„³",Mfr:"ð”",mfr:"ð”ª",mho:"â„§",micro:"Âµ",mid:"âˆ£",midast:"*",midcir:"â«°",middot:"Â·",minus:"âˆ’",minusb:"âŠŸ",minusd:"âˆ¸",minusdu:"â¨ª",MinusPlus:"âˆ“",mlcp:"â«›",mldr:"â€¦",mnplus:"âˆ“",models:"âŠ§",Mopf:"ð•„",mopf:"ð•ž",mp:"âˆ“",Mscr:"â„³",mscr:"ð“‚",mstpos:"âˆ¾",Mu:"Îœ",mu:"Î¼",multimap:"âŠ¸",mumap:"âŠ¸",nabla:"âˆ‡",Nacute:"Åƒ",nacute:"Å„",nang:"âˆ âƒ’",nap:"â‰‰",napE:"â©°Ì¸",napid:"â‰‹Ì¸",napos:"Å‰",napprox:"â‰‰",natur:"â™®",natural:"â™®",naturals:"â„•",nbsp:"Â ",nbump:"â‰ŽÌ¸",nbumpe:"â‰Ì¸",ncap:"â©ƒ",Ncaron:"Å‡",ncaron:"Åˆ",Ncedil:"Å…",ncedil:"Å†",ncong:"â‰‡",ncongdot:"â©­Ì¸",ncup:"â©‚",Ncy:"Ð",ncy:"Ð½",ndash:"â€“",ne:"â‰ ",nearhk:"â¤¤",neArr:"â‡—",nearr:"â†—",nearrow:"â†—",nedot:"â‰Ì¸",NegativeMediumSpace:"â€‹",NegativeThickSpace:"â€‹",NegativeThinSpace:"â€‹",NegativeVeryThinSpace:"â€‹",nequiv:"â‰¢",nesear:"â¤¨",nesim:"â‰‚Ì¸",NestedGreaterGreater:"â‰«",NestedLessLess:"â‰ª",NewLine:`
`,nexist:"âˆ„",nexists:"âˆ„",Nfr:"ð”‘",nfr:"ð”«",ngE:"â‰§Ì¸",nge:"â‰±",ngeq:"â‰±",ngeqq:"â‰§Ì¸",ngeqslant:"â©¾Ì¸",nges:"â©¾Ì¸",nGg:"â‹™Ì¸",ngsim:"â‰µ",nGt:"â‰«âƒ’",ngt:"â‰¯",ngtr:"â‰¯",nGtv:"â‰«Ì¸",nhArr:"â‡Ž",nharr:"â†®",nhpar:"â«²",ni:"âˆ‹",nis:"â‹¼",nisd:"â‹º",niv:"âˆ‹",NJcy:"ÐŠ",njcy:"Ñš",nlArr:"â‡",nlarr:"â†š",nldr:"â€¥",nlE:"â‰¦Ì¸",nle:"â‰°",nLeftarrow:"â‡",nleftarrow:"â†š",nLeftrightarrow:"â‡Ž",nleftrightarrow:"â†®",nleq:"â‰°",nleqq:"â‰¦Ì¸",nleqslant:"â©½Ì¸",nles:"â©½Ì¸",nless:"â‰®",nLl:"â‹˜Ì¸",nlsim:"â‰´",nLt:"â‰ªâƒ’",nlt:"â‰®",nltri:"â‹ª",nltrie:"â‹¬",nLtv:"â‰ªÌ¸",nmid:"âˆ¤",NoBreak:"â ",NonBreakingSpace:"Â ",Nopf:"â„•",nopf:"ð•Ÿ",Not:"â«¬",not:"Â¬",NotCongruent:"â‰¢",NotCupCap:"â‰­",NotDoubleVerticalBar:"âˆ¦",NotElement:"âˆ‰",NotEqual:"â‰ ",NotEqualTilde:"â‰‚Ì¸",NotExists:"âˆ„",NotGreater:"â‰¯",NotGreaterEqual:"â‰±",NotGreaterFullEqual:"â‰§Ì¸",NotGreaterGreater:"â‰«Ì¸",NotGreaterLess:"â‰¹",NotGreaterSlantEqual:"â©¾Ì¸",NotGreaterTilde:"â‰µ",NotHumpDownHump:"â‰ŽÌ¸",NotHumpEqual:"â‰Ì¸",notin:"âˆ‰",notindot:"â‹µÌ¸",notinE:"â‹¹Ì¸",notinva:"âˆ‰",notinvb:"â‹·",notinvc:"â‹¶",NotLeftTriangle:"â‹ª",NotLeftTriangleBar:"â§Ì¸",NotLeftTriangleEqual:"â‹¬",NotLess:"â‰®",NotLessEqual:"â‰°",NotLessGreater:"â‰¸",NotLessLess:"â‰ªÌ¸",NotLessSlantEqual:"â©½Ì¸",NotLessTilde:"â‰´",NotNestedGreaterGreater:"âª¢Ì¸",NotNestedLessLess:"âª¡Ì¸",notni:"âˆŒ",notniva:"âˆŒ",notnivb:"â‹¾",notnivc:"â‹½",NotPrecedes:"âŠ€",NotPrecedesEqual:"âª¯Ì¸",NotPrecedesSlantEqual:"â‹ ",NotReverseElement:"âˆŒ",NotRightTriangle:"â‹«",NotRightTriangleBar:"â§Ì¸",NotRightTriangleEqual:"â‹­",NotSquareSubset:"âŠÌ¸",NotSquareSubsetEqual:"â‹¢",NotSquareSuperset:"âŠÌ¸",NotSquareSupersetEqual:"â‹£",NotSubset:"âŠ‚âƒ’",NotSubsetEqual:"âŠˆ",NotSucceeds:"âŠ",NotSucceedsEqual:"âª°Ì¸",NotSucceedsSlantEqual:"â‹¡",NotSucceedsTilde:"â‰¿Ì¸",NotSuperset:"âŠƒâƒ’",NotSupersetEqual:"âŠ‰",NotTilde:"â‰",NotTildeEqual:"â‰„",NotTildeFullEqual:"â‰‡",NotTildeTilde:"â‰‰",NotVerticalBar:"âˆ¤",npar:"âˆ¦",nparallel:"âˆ¦",nparsl:"â«½âƒ¥",npart:"âˆ‚Ì¸",npolint:"â¨”",npr:"âŠ€",nprcue:"â‹ ",npre:"âª¯Ì¸",nprec:"âŠ€",npreceq:"âª¯Ì¸",nrArr:"â‡",nrarr:"â†›",nrarrc:"â¤³Ì¸",nrarrw:"â†Ì¸",nRightarrow:"â‡",nrightarrow:"â†›",nrtri:"â‹«",nrtrie:"â‹­",nsc:"âŠ",nsccue:"â‹¡",nsce:"âª°Ì¸",Nscr:"ð’©",nscr:"ð“ƒ",nshortmid:"âˆ¤",nshortparallel:"âˆ¦",nsim:"â‰",nsime:"â‰„",nsimeq:"â‰„",nsmid:"âˆ¤",nspar:"âˆ¦",nsqsube:"â‹¢",nsqsupe:"â‹£",nsub:"âŠ„",nsubE:"â«…Ì¸",nsube:"âŠˆ",nsubset:"âŠ‚âƒ’",nsubseteq:"âŠˆ",nsubseteqq:"â«…Ì¸",nsucc:"âŠ",nsucceq:"âª°Ì¸",nsup:"âŠ…",nsupE:"â«†Ì¸",nsupe:"âŠ‰",nsupset:"âŠƒâƒ’",nsupseteq:"âŠ‰",nsupseteqq:"â«†Ì¸",ntgl:"â‰¹",Ntilde:"Ã‘",ntilde:"Ã±",ntlg:"â‰¸",ntriangleleft:"â‹ª",ntrianglelefteq:"â‹¬",ntriangleright:"â‹«",ntrianglerighteq:"â‹­",Nu:"Î",nu:"Î½",num:"#",numero:"â„–",numsp:"â€‡",nvap:"â‰âƒ’",nVDash:"âŠ¯",nVdash:"âŠ®",nvDash:"âŠ­",nvdash:"âŠ¬",nvge:"â‰¥âƒ’",nvgt:">âƒ’",nvHarr:"â¤„",nvinfin:"â§ž",nvlArr:"â¤‚",nvle:"â‰¤âƒ’",nvlt:"<âƒ’",nvltrie:"âŠ´âƒ’",nvrArr:"â¤ƒ",nvrtrie:"âŠµâƒ’",nvsim:"âˆ¼âƒ’",nwarhk:"â¤£",nwArr:"â‡–",nwarr:"â†–",nwarrow:"â†–",nwnear:"â¤§",Oacute:"Ã“",oacute:"Ã³",oast:"âŠ›",ocir:"âŠš",Ocirc:"Ã”",ocirc:"Ã´",Ocy:"Ðž",ocy:"Ð¾",odash:"âŠ",Odblac:"Å",odblac:"Å‘",odiv:"â¨¸",odot:"âŠ™",odsold:"â¦¼",OElig:"Å’",oelig:"Å“",ofcir:"â¦¿",Ofr:"ð”’",ofr:"ð”¬",ogon:"Ë›",Ograve:"Ã’",ograve:"Ã²",ogt:"â§",ohbar:"â¦µ",ohm:"Î©",oint:"âˆ®",olarr:"â†º",olcir:"â¦¾",olcross:"â¦»",oline:"â€¾",olt:"â§€",Omacr:"ÅŒ",omacr:"Å",Omega:"Î©",omega:"Ï‰",Omicron:"ÎŸ",omicron:"Î¿",omid:"â¦¶",ominus:"âŠ–",Oopf:"ð•†",oopf:"ð• ",opar:"â¦·",OpenCurlyDoubleQuote:"â€œ",OpenCurlyQuote:"â€˜",operp:"â¦¹",oplus:"âŠ•",Or:"â©”",or:"âˆ¨",orarr:"â†»",ord:"â©",order:"â„´",orderof:"â„´",ordf:"Âª",ordm:"Âº",origof:"âŠ¶",oror:"â©–",orslope:"â©—",orv:"â©›",oS:"â“ˆ",Oscr:"ð’ª",oscr:"â„´",Oslash:"Ã˜",oslash:"Ã¸",osol:"âŠ˜",Otilde:"Ã•",otilde:"Ãµ",Otimes:"â¨·",otimes:"âŠ—",otimesas:"â¨¶",Ouml:"Ã–",ouml:"Ã¶",ovbar:"âŒ½",OverBar:"â€¾",OverBrace:"âž",OverBracket:"âŽ´",OverParenthesis:"âœ",par:"âˆ¥",para:"Â¶",parallel:"âˆ¥",parsim:"â«³",parsl:"â«½",part:"âˆ‚",PartialD:"âˆ‚",Pcy:"ÐŸ",pcy:"Ð¿",percnt:"%",period:".",permil:"â€°",perp:"âŠ¥",pertenk:"â€±",Pfr:"ð”“",pfr:"ð”­",Phi:"Î¦",phi:"Ï†",phiv:"Ï•",phmmat:"â„³",phone:"â˜Ž",Pi:"Î ",pi:"Ï€",pitchfork:"â‹”",piv:"Ï–",planck:"â„",planckh:"â„Ž",plankv:"â„",plus:"+",plusacir:"â¨£",plusb:"âŠž",pluscir:"â¨¢",plusdo:"âˆ”",plusdu:"â¨¥",pluse:"â©²",PlusMinus:"Â±",plusmn:"Â±",plussim:"â¨¦",plustwo:"â¨§",pm:"Â±",Poincareplane:"â„Œ",pointint:"â¨•",Popf:"â„™",popf:"ð•¡",pound:"Â£",Pr:"âª»",pr:"â‰º",prap:"âª·",prcue:"â‰¼",prE:"âª³",pre:"âª¯",prec:"â‰º",precapprox:"âª·",preccurlyeq:"â‰¼",Precedes:"â‰º",PrecedesEqual:"âª¯",PrecedesSlantEqual:"â‰¼",PrecedesTilde:"â‰¾",preceq:"âª¯",precnapprox:"âª¹",precneqq:"âªµ",precnsim:"â‹¨",precsim:"â‰¾",Prime:"â€³",prime:"â€²",primes:"â„™",prnap:"âª¹",prnE:"âªµ",prnsim:"â‹¨",prod:"âˆ",Product:"âˆ",profalar:"âŒ®",profline:"âŒ’",profsurf:"âŒ“",prop:"âˆ",Proportion:"âˆ·",Proportional:"âˆ",propto:"âˆ",prsim:"â‰¾",prurel:"âŠ°",Pscr:"ð’«",pscr:"ð“…",Psi:"Î¨",psi:"Ïˆ",puncsp:"â€ˆ",Qfr:"ð””",qfr:"ð”®",qint:"â¨Œ",Qopf:"â„š",qopf:"ð•¢",qprime:"â—",Qscr:"ð’¬",qscr:"ð“†",quaternions:"â„",quatint:"â¨–",quest:"?",questeq:"â‰Ÿ",QUOT:'"',quot:'"',rAarr:"â‡›",race:"âˆ½Ì±",Racute:"Å”",racute:"Å•",radic:"âˆš",raemptyv:"â¦³",Rang:"âŸ«",rang:"âŸ©",rangd:"â¦’",range:"â¦¥",rangle:"âŸ©",raquo:"Â»",Rarr:"â† ",rArr:"â‡’",rarr:"â†’",rarrap:"â¥µ",rarrb:"â‡¥",rarrbfs:"â¤ ",rarrc:"â¤³",rarrfs:"â¤ž",rarrhk:"â†ª",rarrlp:"â†¬",rarrpl:"â¥…",rarrsim:"â¥´",Rarrtl:"â¤–",rarrtl:"â†£",rarrw:"â†",rAtail:"â¤œ",ratail:"â¤š",ratio:"âˆ¶",rationals:"â„š",RBarr:"â¤",rBarr:"â¤",rbarr:"â¤",rbbrk:"â³",rbrace:"}",rbrack:"]",rbrke:"â¦Œ",rbrksld:"â¦Ž",rbrkslu:"â¦",Rcaron:"Å˜",rcaron:"Å™",Rcedil:"Å–",rcedil:"Å—",rceil:"âŒ‰",rcub:"}",Rcy:"Ð ",rcy:"Ñ€",rdca:"â¤·",rdldhar:"â¥©",rdquo:"â€",rdquor:"â€",rdsh:"â†³",Re:"â„œ",real:"â„œ",realine:"â„›",realpart:"â„œ",reals:"â„",rect:"â–­",REG:"Â®",reg:"Â®",ReverseElement:"âˆ‹",ReverseEquilibrium:"â‡‹",ReverseUpEquilibrium:"â¥¯",rfisht:"â¥½",rfloor:"âŒ‹",Rfr:"â„œ",rfr:"ð”¯",rHar:"â¥¤",rhard:"â‡",rharu:"â‡€",rharul:"â¥¬",Rho:"Î¡",rho:"Ï",rhov:"Ï±",RightAngleBracket:"âŸ©",RightArrow:"â†’",Rightarrow:"â‡’",rightarrow:"â†’",RightArrowBar:"â‡¥",RightArrowLeftArrow:"â‡„",rightarrowtail:"â†£",RightCeiling:"âŒ‰",RightDoubleBracket:"âŸ§",RightDownTeeVector:"â¥",RightDownVector:"â‡‚",RightDownVectorBar:"â¥•",RightFloor:"âŒ‹",rightharpoondown:"â‡",rightharpoonup:"â‡€",rightleftarrows:"â‡„",rightleftharpoons:"â‡Œ",rightrightarrows:"â‡‰",rightsquigarrow:"â†",RightTee:"âŠ¢",RightTeeArrow:"â†¦",RightTeeVector:"â¥›",rightthreetimes:"â‹Œ",RightTriangle:"âŠ³",RightTriangleBar:"â§",RightTriangleEqual:"âŠµ",RightUpDownVector:"â¥",RightUpTeeVector:"â¥œ",RightUpVector:"â†¾",RightUpVectorBar:"â¥”",RightVector:"â‡€",RightVectorBar:"â¥“",ring:"Ëš",risingdotseq:"â‰“",rlarr:"â‡„",rlhar:"â‡Œ",rlm:"â€",rmoust:"âŽ±",rmoustache:"âŽ±",rnmid:"â«®",roang:"âŸ­",roarr:"â‡¾",robrk:"âŸ§",ropar:"â¦†",Ropf:"â„",ropf:"ð•£",roplus:"â¨®",rotimes:"â¨µ",RoundImplies:"â¥°",rpar:")",rpargt:"â¦”",rppolint:"â¨’",rrarr:"â‡‰",Rrightarrow:"â‡›",rsaquo:"â€º",Rscr:"â„›",rscr:"ð“‡",Rsh:"â†±",rsh:"â†±",rsqb:"]",rsquo:"â€™",rsquor:"â€™",rthree:"â‹Œ",rtimes:"â‹Š",rtri:"â–¹",rtrie:"âŠµ",rtrif:"â–¸",rtriltri:"â§Ž",RuleDelayed:"â§´",ruluhar:"â¥¨",rx:"â„ž",Sacute:"Åš",sacute:"Å›",sbquo:"â€š",Sc:"âª¼",sc:"â‰»",scap:"âª¸",Scaron:"Å ",scaron:"Å¡",sccue:"â‰½",scE:"âª´",sce:"âª°",Scedil:"Åž",scedil:"ÅŸ",Scirc:"Åœ",scirc:"Å",scnap:"âªº",scnE:"âª¶",scnsim:"â‹©",scpolint:"â¨“",scsim:"â‰¿",Scy:"Ð¡",scy:"Ñ",sdot:"â‹…",sdotb:"âŠ¡",sdote:"â©¦",searhk:"â¤¥",seArr:"â‡˜",searr:"â†˜",searrow:"â†˜",sect:"Â§",semi:";",seswar:"â¤©",setminus:"âˆ–",setmn:"âˆ–",sext:"âœ¶",Sfr:"ð”–",sfr:"ð”°",sfrown:"âŒ¢",sharp:"â™¯",SHCHcy:"Ð©",shchcy:"Ñ‰",SHcy:"Ð¨",shcy:"Ñˆ",ShortDownArrow:"â†“",ShortLeftArrow:"â†",shortmid:"âˆ£",shortparallel:"âˆ¥",ShortRightArrow:"â†’",ShortUpArrow:"â†‘",shy:"Â­",Sigma:"Î£",sigma:"Ïƒ",sigmaf:"Ï‚",sigmav:"Ï‚",sim:"âˆ¼",simdot:"â©ª",sime:"â‰ƒ",simeq:"â‰ƒ",simg:"âªž",simgE:"âª ",siml:"âª",simlE:"âªŸ",simne:"â‰†",simplus:"â¨¤",simrarr:"â¥²",slarr:"â†",SmallCircle:"âˆ˜",smallsetminus:"âˆ–",smashp:"â¨³",smeparsl:"â§¤",smid:"âˆ£",smile:"âŒ£",smt:"âªª",smte:"âª¬",smtes:"âª¬ï¸€",SOFTcy:"Ð¬",softcy:"ÑŒ",sol:"/",solb:"â§„",solbar:"âŒ¿",Sopf:"ð•Š",sopf:"ð•¤",spades:"â™ ",spadesuit:"â™ ",spar:"âˆ¥",sqcap:"âŠ“",sqcaps:"âŠ“ï¸€",sqcup:"âŠ”",sqcups:"âŠ”ï¸€",Sqrt:"âˆš",sqsub:"âŠ",sqsube:"âŠ‘",sqsubset:"âŠ",sqsubseteq:"âŠ‘",sqsup:"âŠ",sqsupe:"âŠ’",sqsupset:"âŠ",sqsupseteq:"âŠ’",squ:"â–¡",Square:"â–¡",square:"â–¡",SquareIntersection:"âŠ“",SquareSubset:"âŠ",SquareSubsetEqual:"âŠ‘",SquareSuperset:"âŠ",SquareSupersetEqual:"âŠ’",SquareUnion:"âŠ”",squarf:"â–ª",squf:"â–ª",srarr:"â†’",Sscr:"ð’®",sscr:"ð“ˆ",ssetmn:"âˆ–",ssmile:"âŒ£",sstarf:"â‹†",Star:"â‹†",star:"â˜†",starf:"â˜…",straightepsilon:"Ïµ",straightphi:"Ï•",strns:"Â¯",Sub:"â‹",sub:"âŠ‚",subdot:"âª½",subE:"â«…",sube:"âŠ†",subedot:"â«ƒ",submult:"â«",subnE:"â«‹",subne:"âŠŠ",subplus:"âª¿",subrarr:"â¥¹",Subset:"â‹",subset:"âŠ‚",subseteq:"âŠ†",subseteqq:"â«…",SubsetEqual:"âŠ†",subsetneq:"âŠŠ",subsetneqq:"â«‹",subsim:"â«‡",subsub:"â«•",subsup:"â«“",succ:"â‰»",succapprox:"âª¸",succcurlyeq:"â‰½",Succeeds:"â‰»",SucceedsEqual:"âª°",SucceedsSlantEqual:"â‰½",SucceedsTilde:"â‰¿",succeq:"âª°",succnapprox:"âªº",succneqq:"âª¶",succnsim:"â‹©",succsim:"â‰¿",SuchThat:"âˆ‹",Sum:"âˆ‘",sum:"âˆ‘",sung:"â™ª",Sup:"â‹‘",sup:"âŠƒ",sup1:"Â¹",sup2:"Â²",sup3:"Â³",supdot:"âª¾",supdsub:"â«˜",supE:"â«†",supe:"âŠ‡",supedot:"â«„",Superset:"âŠƒ",SupersetEqual:"âŠ‡",suphsol:"âŸ‰",suphsub:"â«—",suplarr:"â¥»",supmult:"â«‚",supnE:"â«Œ",supne:"âŠ‹",supplus:"â«€",Supset:"â‹‘",supset:"âŠƒ",supseteq:"âŠ‡",supseteqq:"â«†",supsetneq:"âŠ‹",supsetneqq:"â«Œ",supsim:"â«ˆ",supsub:"â«”",supsup:"â«–",swarhk:"â¤¦",swArr:"â‡™",swarr:"â†™",swarrow:"â†™",swnwar:"â¤ª",szlig:"ÃŸ",Tab:"	",target:"âŒ–",Tau:"Î¤",tau:"Ï„",tbrk:"âŽ´",Tcaron:"Å¤",tcaron:"Å¥",Tcedil:"Å¢",tcedil:"Å£",Tcy:"Ð¢",tcy:"Ñ‚",tdot:"âƒ›",telrec:"âŒ•",Tfr:"ð”—",tfr:"ð”±",there4:"âˆ´",Therefore:"âˆ´",therefore:"âˆ´",Theta:"Î˜",theta:"Î¸",thetasym:"Ï‘",thetav:"Ï‘",thickapprox:"â‰ˆ",thicksim:"âˆ¼",ThickSpace:"âŸâ€Š",thinsp:"â€‰",ThinSpace:"â€‰",thkap:"â‰ˆ",thksim:"âˆ¼",THORN:"Ãž",thorn:"Ã¾",Tilde:"âˆ¼",tilde:"Ëœ",TildeEqual:"â‰ƒ",TildeFullEqual:"â‰…",TildeTilde:"â‰ˆ",times:"Ã—",timesb:"âŠ ",timesbar:"â¨±",timesd:"â¨°",tint:"âˆ­",toea:"â¤¨",top:"âŠ¤",topbot:"âŒ¶",topcir:"â«±",Topf:"ð•‹",topf:"ð•¥",topfork:"â«š",tosa:"â¤©",tprime:"â€´",TRADE:"â„¢",trade:"â„¢",triangle:"â–µ",triangledown:"â–¿",triangleleft:"â—ƒ",trianglelefteq:"âŠ´",triangleq:"â‰œ",triangleright:"â–¹",trianglerighteq:"âŠµ",tridot:"â—¬",trie:"â‰œ",triminus:"â¨º",TripleDot:"âƒ›",triplus:"â¨¹",trisb:"â§",tritime:"â¨»",trpezium:"â¢",Tscr:"ð’¯",tscr:"ð“‰",TScy:"Ð¦",tscy:"Ñ†",TSHcy:"Ð‹",tshcy:"Ñ›",Tstrok:"Å¦",tstrok:"Å§",twixt:"â‰¬",twoheadleftarrow:"â†ž",twoheadrightarrow:"â† ",Uacute:"Ãš",uacute:"Ãº",Uarr:"â†Ÿ",uArr:"â‡‘",uarr:"â†‘",Uarrocir:"â¥‰",Ubrcy:"ÐŽ",ubrcy:"Ñž",Ubreve:"Å¬",ubreve:"Å­",Ucirc:"Ã›",ucirc:"Ã»",Ucy:"Ð£",ucy:"Ñƒ",udarr:"â‡…",Udblac:"Å°",udblac:"Å±",udhar:"â¥®",ufisht:"â¥¾",Ufr:"ð”˜",ufr:"ð”²",Ugrave:"Ã™",ugrave:"Ã¹",uHar:"â¥£",uharl:"â†¿",uharr:"â†¾",uhblk:"â–€",ulcorn:"âŒœ",ulcorner:"âŒœ",ulcrop:"âŒ",ultri:"â—¸",Umacr:"Åª",umacr:"Å«",uml:"Â¨",UnderBar:"_",UnderBrace:"âŸ",UnderBracket:"âŽµ",UnderParenthesis:"â",Union:"â‹ƒ",UnionPlus:"âŠŽ",Uogon:"Å²",uogon:"Å³",Uopf:"ð•Œ",uopf:"ð•¦",UpArrow:"â†‘",Uparrow:"â‡‘",uparrow:"â†‘",UpArrowBar:"â¤’",UpArrowDownArrow:"â‡…",UpDownArrow:"â†•",Updownarrow:"â‡•",updownarrow:"â†•",UpEquilibrium:"â¥®",upharpoonleft:"â†¿",upharpoonright:"â†¾",uplus:"âŠŽ",UpperLeftArrow:"â†–",UpperRightArrow:"â†—",Upsi:"Ï’",upsi:"Ï…",upsih:"Ï’",Upsilon:"Î¥",upsilon:"Ï…",UpTee:"âŠ¥",UpTeeArrow:"â†¥",upuparrows:"â‡ˆ",urcorn:"âŒ",urcorner:"âŒ",urcrop:"âŒŽ",Uring:"Å®",uring:"Å¯",urtri:"â—¹",Uscr:"ð’°",uscr:"ð“Š",utdot:"â‹°",Utilde:"Å¨",utilde:"Å©",utri:"â–µ",utrif:"â–´",uuarr:"â‡ˆ",Uuml:"Ãœ",uuml:"Ã¼",uwangle:"â¦§",vangrt:"â¦œ",varepsilon:"Ïµ",varkappa:"Ï°",varnothing:"âˆ…",varphi:"Ï•",varpi:"Ï–",varpropto:"âˆ",vArr:"â‡•",varr:"â†•",varrho:"Ï±",varsigma:"Ï‚",varsubsetneq:"âŠŠï¸€",varsubsetneqq:"â«‹ï¸€",varsupsetneq:"âŠ‹ï¸€",varsupsetneqq:"â«Œï¸€",vartheta:"Ï‘",vartriangleleft:"âŠ²",vartriangleright:"âŠ³",Vbar:"â««",vBar:"â«¨",vBarv:"â«©",Vcy:"Ð’",vcy:"Ð²",VDash:"âŠ«",Vdash:"âŠ©",vDash:"âŠ¨",vdash:"âŠ¢",Vdashl:"â«¦",Vee:"â‹",vee:"âˆ¨",veebar:"âŠ»",veeeq:"â‰š",vellip:"â‹®",Verbar:"â€–",verbar:"|",Vert:"â€–",vert:"|",VerticalBar:"âˆ£",VerticalLine:"|",VerticalSeparator:"â˜",VerticalTilde:"â‰€",VeryThinSpace:"â€Š",Vfr:"ð”™",vfr:"ð”³",vltri:"âŠ²",vnsub:"âŠ‚âƒ’",vnsup:"âŠƒâƒ’",Vopf:"ð•",vopf:"ð•§",vprop:"âˆ",vrtri:"âŠ³",Vscr:"ð’±",vscr:"ð“‹",vsubnE:"â«‹ï¸€",vsubne:"âŠŠï¸€",vsupnE:"â«Œï¸€",vsupne:"âŠ‹ï¸€",Vvdash:"âŠª",vzigzag:"â¦š",Wcirc:"Å´",wcirc:"Åµ",wedbar:"â©Ÿ",Wedge:"â‹€",wedge:"âˆ§",wedgeq:"â‰™",weierp:"â„˜",Wfr:"ð”š",wfr:"ð”´",Wopf:"ð•Ž",wopf:"ð•¨",wp:"â„˜",wr:"â‰€",wreath:"â‰€",Wscr:"ð’²",wscr:"ð“Œ",xcap:"â‹‚",xcirc:"â—¯",xcup:"â‹ƒ",xdtri:"â–½",Xfr:"ð”›",xfr:"ð”µ",xhArr:"âŸº",xharr:"âŸ·",Xi:"Îž",xi:"Î¾",xlArr:"âŸ¸",xlarr:"âŸµ",xmap:"âŸ¼",xnis:"â‹»",xodot:"â¨€",Xopf:"ð•",xopf:"ð•©",xoplus:"â¨",xotime:"â¨‚",xrArr:"âŸ¹",xrarr:"âŸ¶",Xscr:"ð’³",xscr:"ð“",xsqcup:"â¨†",xuplus:"â¨„",xutri:"â–³",xvee:"â‹",xwedge:"â‹€",Yacute:"Ã",yacute:"Ã½",YAcy:"Ð¯",yacy:"Ñ",Ycirc:"Å¶",ycirc:"Å·",Ycy:"Ð«",ycy:"Ñ‹",yen:"Â¥",Yfr:"ð”œ",yfr:"ð”¶",YIcy:"Ð‡",yicy:"Ñ—",Yopf:"ð•",yopf:"ð•ª",Yscr:"ð’´",yscr:"ð“Ž",YUcy:"Ð®",yucy:"ÑŽ",Yuml:"Å¸",yuml:"Ã¿",Zacute:"Å¹",zacute:"Åº",Zcaron:"Å½",zcaron:"Å¾",Zcy:"Ð—",zcy:"Ð·",Zdot:"Å»",zdot:"Å¼",zeetrf:"â„¨",ZeroWidthSpace:"â€‹",Zeta:"Î–",zeta:"Î¶",Zfr:"â„¨",zfr:"ð”·",ZHcy:"Ð–",zhcy:"Ð¶",zigrarr:"â‡",Zopf:"â„¤",zopf:"ð•«",Zscr:"ð’µ",zscr:"ð“",zwj:"â€",zwnj:"â€Œ"}),n.entityMap=n.HTML_ENTITIES})(Cu)),Cu}var Ba={},Cy;function zO(){if(Cy)return Ba;Cy=1;var n=zc().NAMESPACE,e=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,t=new RegExp("[\\-\\.0-9"+e.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),i=new RegExp("^"+e.source+t.source+"*(?::"+e.source+t.source+"*)?$"),r=0,s=1,a=2,o=3,c=4,l=5,u=6,d=7;function h(S,C){this.message=S,this.locator=C,Error.captureStackTrace&&Error.captureStackTrace(this,h)}h.prototype=new Error,h.prototype.name=h.name;function f(){}f.prototype={parse:function(S,C,O){var I=this.domBuilder;I.startDocument(),T(C,C={}),p(S,C,O,I,this.errorHandler),I.endDocument()}};function p(S,C,O,I,L){function E(ce){if(ce>65535){ce-=65536;var Q=55296+(ce>>10),H=56320+(ce&1023);return String.fromCharCode(Q,H)}else return String.fromCharCode(ce)}function $(ce){var Q=ce.slice(1,-1);return Object.hasOwnProperty.call(O,Q)?O[Q]:Q.charAt(0)==="#"?E(parseInt(Q.substr(1).replace("x","0x"))):(L.error("entity not found:"+ce),ce)}function U(ce){if(ce>te){var Q=S.substring(te,ce).replace(/&#?\w+;/g,$);P&&F(te),I.characters(Q,0,ce-te),te=ce}}function F(ce,Q){for(;ce>=W&&(Q=Y.exec(S));)G=Q.index,W=G+Q[0].length,P.lineNumber++;P.columnNumber=ce-G+1}for(var G=0,W=0,Y=/.*(?:\r\n?|\n)|.*$/g,P=I.locator,V=[{currentNSMap:C}],j={},te=0;;){try{var ne=S.indexOf("<",te);if(ne<0){if(!S.substr(te).match(/^\s*$/)){var ue=I.doc,he=ue.createTextNode(S.substr(te));ue.appendChild(he),I.currentElement=he}return}switch(ne>te&&U(ne),S.charAt(ne+1)){case"/":var q=S.indexOf(">",ne+3),fe=S.substring(ne+2,q).replace(/[ \t\n\r]+$/g,""),me=V.pop();q<0?(fe=S.substring(ne+2).replace(/[\s<].*/,""),L.error("end tag name: "+fe+" is not complete:"+me.tagName),q=ne+1+fe.length):fe.match(/\s</)&&(fe=fe.replace(/[\s<].*/,""),L.error("end tag name: "+fe+" maybe not complete"),q=ne+1+fe.length);var ve=me.localNSMap,De=me.tagName==fe,Oe=De||me.tagName&&me.tagName.toLowerCase()==fe.toLowerCase();if(Oe){if(I.endElement(me.uri,me.localName,fe),ve)for(var We in ve)Object.prototype.hasOwnProperty.call(ve,We)&&I.endPrefixMapping(We);De||L.fatalError("end tag name: "+fe+" is not match the current start tagName:"+me.tagName)}else V.push(me);q++;break;case"?":P&&F(ne),q=_(S,ne,I);break;case"!":P&&F(ne),q=x(S,ne,I,L);break;default:P&&F(ne);var A=new D,Z=V[V.length-1].currentNSMap,q=g(S,ne,A,Z,$,L),N=A.length;if(!A.closed&&b(S,q,A.tagName,j)&&(A.closed=!0,O.nbsp||L.warning("unclosed xml attribute")),P&&N){for(var B=m(P,{}),z=0;z<N;z++){var se=A[z];F(se.offset),se.locator=m(P,{})}I.locator=B,y(A,I,Z)&&V.push(A),I.locator=P}else y(A,I,Z)&&V.push(A);n.isHTML(A.uri)&&!A.closed?q=v(S,q,A.tagName,$,I):q++}}catch(ce){if(ce instanceof h)throw ce;L.error("element parse error: "+ce),q=-1}q>te?te=q:U(Math.max(ne,te)+1)}}function m(S,C){return C.lineNumber=S.lineNumber,C.columnNumber=S.columnNumber,C}function g(S,C,O,I,L,E){function $(P,V,j){O.attributeNames.hasOwnProperty(P)&&E.fatalError("Attribute "+P+" redefined"),O.addValue(P,V.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,L),j)}for(var U,F,G=++C,W=r;;){var Y=S.charAt(G);switch(Y){case"=":if(W===s)U=S.slice(C,G),W=o;else if(W===a)W=o;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(W===o||W===s)if(W===s&&(E.warning('attribute value must after "="'),U=S.slice(C,G)),C=G+1,G=S.indexOf(Y,C),G>0)F=S.slice(C,G),$(U,F,C-1),W=l;else throw new Error("attribute value no end '"+Y+"' match");else if(W==c)F=S.slice(C,G),$(U,F,C),E.warning('attribute "'+U+'" missed start quot('+Y+")!!"),C=G+1,W=l;else throw new Error('attribute value must after "="');break;case"/":switch(W){case r:O.setTagName(S.slice(C,G));case l:case u:case d:W=d,O.closed=!0;case c:case s:break;case a:O.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return E.error("unexpected end of input"),W==r&&O.setTagName(S.slice(C,G)),G;case">":switch(W){case r:O.setTagName(S.slice(C,G));case l:case u:case d:break;case c:case s:F=S.slice(C,G),F.slice(-1)==="/"&&(O.closed=!0,F=F.slice(0,-1));case a:W===a&&(F=U),W==c?(E.warning('attribute "'+F+'" missed quot(")!'),$(U,F,C)):((!n.isHTML(I[""])||!F.match(/^(?:disabled|checked|selected)$/i))&&E.warning('attribute "'+F+'" missed value!! "'+F+'" instead!!'),$(F,F,C));break;case o:throw new Error("attribute value missed!!")}return G;case"Â€":Y=" ";default:if(Y<=" ")switch(W){case r:O.setTagName(S.slice(C,G)),W=u;break;case s:U=S.slice(C,G),W=a;break;case c:var F=S.slice(C,G);E.warning('attribute "'+F+'" missed quot(")!!'),$(U,F,C);case l:W=u;break}else switch(W){case a:O.tagName,(!n.isHTML(I[""])||!U.match(/^(?:disabled|checked|selected)$/i))&&E.warning('attribute "'+U+'" missed value!! "'+U+'" instead2!!'),$(U,U,C),C=G,W=s;break;case l:E.warning('attribute space is required"'+U+'"!!');case u:W=s,C=G;break;case o:W=c,C=G;break;case d:throw new Error("elements closed character '/' and '>' must be connected to")}}G++}}function y(S,C,O){for(var I=S.tagName,L=null,Y=S.length;Y--;){var E=S[Y],$=E.qName,U=E.value,P=$.indexOf(":");if(P>0)var F=E.prefix=$.slice(0,P),G=$.slice(P+1),W=F==="xmlns"&&G;else G=$,F=null,W=$==="xmlns"&&"";E.localName=G,W!==!1&&(L==null&&(L={},T(O,O={})),O[W]=L[W]=U,E.uri=n.XMLNS,C.startPrefixMapping(W,U))}for(var Y=S.length;Y--;){E=S[Y];var F=E.prefix;F&&(F==="xml"&&(E.uri=n.XML),F!=="xmlns"&&(E.uri=O[F||""]))}var P=I.indexOf(":");P>0?(F=S.prefix=I.slice(0,P),G=S.localName=I.slice(P+1)):(F=null,G=S.localName=I);var V=S.uri=O[F||""];if(C.startElement(V,G,I,S),S.closed){if(C.endElement(V,G,I),L)for(F in L)Object.prototype.hasOwnProperty.call(L,F)&&C.endPrefixMapping(F)}else return S.currentNSMap=O,S.localNSMap=L,!0}function v(S,C,O,I,L){if(/^(?:script|textarea)$/i.test(O)){var E=S.indexOf("</"+O+">",C),$=S.substring(C+1,E);if(/[&<]/.test($))return/^script$/i.test(O)?(L.characters($,0,$.length),E):($=$.replace(/&#?\w+;/g,I),L.characters($,0,$.length),E)}return C+1}function b(S,C,O,I){var L=I[O];return L==null&&(L=S.lastIndexOf("</"+O+">"),L<C&&(L=S.lastIndexOf("</"+O)),I[O]=L),L<C}function T(S,C){for(var O in S)Object.prototype.hasOwnProperty.call(S,O)&&(C[O]=S[O])}function x(S,C,O,I){var L=S.charAt(C+2);switch(L){case"-":if(S.charAt(C+3)==="-"){var E=S.indexOf("-->",C+4);return E>C?(O.comment(S,C+4,E-C-4),E+3):(I.error("Unclosed comment"),-1)}else return-1;default:if(S.substr(C+3,6)=="CDATA["){var E=S.indexOf("]]>",C+9);return O.startCDATA(),O.characters(S,C+9,E-C-9),O.endCDATA(),E+3}var $=w(S,C),U=$.length;if(U>1&&/!doctype/i.test($[0][0])){var F=$[1][0],G=!1,W=!1;U>3&&(/^public$/i.test($[2][0])?(G=$[3][0],W=U>4&&$[4][0]):/^system$/i.test($[2][0])&&(W=$[3][0]));var Y=$[U-1];return O.startDTD(F,G,W),O.endDTD(),Y.index+Y[0].length}}return-1}function _(S,C,O){var I=S.indexOf("?>",C);if(I){var L=S.substring(C,I).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return L?(L[0].length,O.processingInstruction(L[1],L[2]),I+2):-1}return-1}function D(){this.attributeNames={}}D.prototype={setTagName:function(S){if(!i.test(S))throw new Error("invalid tagName:"+S);this.tagName=S},addValue:function(S,C,O){if(!i.test(S))throw new Error("invalid attribute:"+S);this.attributeNames[S]=this.length,this[this.length++]={qName:S,value:C,offset:O}},length:0,getLocalName:function(S){return this[S].localName},getLocator:function(S){return this[S].locator},getQName:function(S){return this[S].qName},getURI:function(S){return this[S].uri},getValue:function(S){return this[S].value}};function w(S,C){var O,I=[],L=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(L.lastIndex=C,L.exec(S);O=L.exec(S);)if(I.push(O),O[1])return I}return Ba.XMLReader=f,Ba.ParseError=h,Ba}var Ry;function XO(){if(Ry)return ps;Ry=1;var n=zc(),e=Tp(),t=KO(),i=zO(),r=e.DOMImplementation,s=n.NAMESPACE,a=i.ParseError,o=i.XMLReader;function c(g){return g.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function l(g){this.options=g||{locator:{}}}l.prototype.parseFromString=function(g,y){var v=this.options,b=new o,T=v.domBuilder||new d,x=v.errorHandler,_=v.locator,D=v.xmlns||{},w=/\/x?html?$/.test(y),S=w?t.HTML_ENTITIES:t.XML_ENTITIES;_&&T.setDocumentLocator(_),b.errorHandler=u(x,T,_),b.domBuilder=v.domBuilder||T,w&&(D[""]=s.HTML),D.xml=D.xml||s.XML;var C=v.normalizeLineEndings||c;return g&&typeof g=="string"?b.parse(C(g),D,S):b.errorHandler.error("invalid doc source"),T.doc};function u(g,y,v){if(!g){if(y instanceof d)return y;g=y}var b={},T=g instanceof Function;v=v||{};function x(_){var D=g[_];!D&&T&&(D=g.length==2?function(w){g(_,w)}:g),b[_]=D&&function(w){D("[xmldom "+_+"]	"+w+f(v))}||function(){}}return x("warning"),x("error"),x("fatalError"),b}function d(){this.cdata=!1}function h(g,y){y.lineNumber=g.lineNumber,y.columnNumber=g.columnNumber}d.prototype={startDocument:function(){this.doc=new r().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(g,y,v,b){var T=this.doc,x=T.createElementNS(g,v||y),_=b.length;m(this,x),this.currentElement=x,this.locator&&h(this.locator,x);for(var D=0;D<_;D++){var g=b.getURI(D),w=b.getValue(D),v=b.getQName(D),S=T.createAttributeNS(g,v);this.locator&&h(b.getLocator(D),S),S.value=S.nodeValue=w,x.setAttributeNode(S)}},endElement:function(g,y,v){var b=this.currentElement;b.tagName,this.currentElement=b.parentNode},startPrefixMapping:function(g,y){},endPrefixMapping:function(g){},processingInstruction:function(g,y){var v=this.doc.createProcessingInstruction(g,y);this.locator&&h(this.locator,v),m(this,v)},ignorableWhitespace:function(g,y,v){},characters:function(g,y,v){if(g=p.apply(this,arguments),g){if(this.cdata)var b=this.doc.createCDATASection(g);else var b=this.doc.createTextNode(g);this.currentElement?this.currentElement.appendChild(b):/^\s*$/.test(g)&&this.doc.appendChild(b),this.locator&&h(this.locator,b)}},skippedEntity:function(g){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(g){(this.locator=g)&&(g.lineNumber=0)},comment:function(g,y,v){g=p.apply(this,arguments);var b=this.doc.createComment(g);this.locator&&h(this.locator,b),m(this,b)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(g,y,v){var b=this.doc.implementation;if(b&&b.createDocumentType){var T=b.createDocumentType(g,y,v);this.locator&&h(this.locator,T),m(this,T),this.doc.doctype=T}},warning:function(g){console.warn("[xmldom warning]	"+g,f(this.locator))},error:function(g){console.error("[xmldom error]	"+g,f(this.locator))},fatalError:function(g){throw new a(g,this.locator)}};function f(g){if(g)return`
@`+(g.systemId||"")+"#[line:"+g.lineNumber+",col:"+g.columnNumber+"]"}function p(g,y,v){return typeof g=="string"?g.substr(y,v):g.length>=y+v||y?new java.lang.String(g,y,v)+"":g}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(g){d.prototype[g]=function(){return null}});function m(g,y){g.currentElement?g.currentElement.appendChild(y):g.doc.appendChild(y)}return ps.__DOMHandler=d,ps.normalizeLineEndings=c,ps.DOMParser=l,ps}var Ly;function YO(){if(Ly)return fs;Ly=1;var n=Tp();return fs.DOMImplementation=n.DOMImplementation,fs.XMLSerializer=n.XMLSerializer,fs.DOMParser=XO().DOMParser,fs}var Uy;function QO(){if(Uy)return Ma;Uy=1;var n=YO(),e=Tp();function t(i){var r=null,s=new n.DOMParser({errorHandler:function(o,c){r={level:o,message:c}}}),a=s.parseFromString(i);if(r===null)return a;throw new Error(r.level+": "+r.message)}return Ma.parseFromString=t,Ma.Node=e.Node,Ma}var ky;function ZO(){if(ky)return Iu;ky=1;var n=Pi(),e=ut,t=QO(),i=tD(),r=i.Element;Iu.readString=a;var s=t.Node;function a(o,c){c=c||{};try{var l=t.parseFromString(o,"text/xml")}catch(f){return n.reject(f)}if(l.documentElement.tagName==="parsererror")return n.resolve(new Error(l.documentElement.textContent));function u(f){switch(f.nodeType){case s.ELEMENT_NODE:return d(f);case s.TEXT_NODE:return i.text(f.nodeValue)}}function d(f){var p=h(f),m=[];e.forEach(f.childNodes,function(y){var v=u(y);v&&m.push(v)});var g={};return e.forEach(f.attributes,function(y){g[h(y)]=y.value}),new r(p,g,m)}function h(f){if(f.namespaceURI){var p=c[f.namespaceURI],m;return p?m=p+":":m="{"+f.namespaceURI+"}",m+f.localName}else return f.localName}return n.resolve(u(l.documentElement))}return Iu}var Ru={},Gi={},xn={},Fy;function Oi(){return Fy||(Fy=1,(function(){var n,e,t,i,r,s,a,o=[].slice,c={}.hasOwnProperty;n=function(){var l,u,d,h,f,p;if(p=arguments[0],f=2<=arguments.length?o.call(arguments,1):[],r(Object.assign))Object.assign.apply(null,arguments);else for(l=0,d=f.length;l<d;l++)if(h=f[l],h!=null)for(u in h)c.call(h,u)&&(p[u]=h[u]);return p},r=function(l){return!!l&&Object.prototype.toString.call(l)==="[object Function]"},s=function(l){var u;return!!l&&((u=typeof l)=="function"||u==="object")},t=function(l){return r(Array.isArray)?Array.isArray(l):Object.prototype.toString.call(l)==="[object Array]"},i=function(l){var u;if(t(l))return!l.length;for(u in l)if(c.call(l,u))return!1;return!0},a=function(l){var u,d;return s(l)&&(d=Object.getPrototypeOf(l))&&(u=d.constructor)&&typeof u=="function"&&u instanceof u&&Function.prototype.toString.call(u)===Function.prototype.toString.call(Object)},e=function(l){return r(l.valueOf)?l.valueOf():l},xn.assign=n,xn.isFunction=r,xn.isObject=s,xn.isArray=t,xn.isEmpty=i,xn.isPlainObject=a,xn.getValue=e}).call(xn)),xn}var bo={exports:{}},xo={exports:{}},To={exports:{}},_o={exports:{}},JO=_o.exports,Py;function nD(){return Py||(Py=1,(function(){_o.exports=(function(){function n(e,t,i){if(this.options=e.options,this.stringify=e.stringify,this.parent=e,t==null)throw new Error("Missing attribute name. "+this.debugInfo(t));if(i==null)throw new Error("Missing attribute value. "+this.debugInfo(t));this.name=this.stringify.attName(t),this.value=this.stringify.attValue(i)}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.set(e).attribute(this)},n.prototype.debugInfo=function(e){return e=e||this.name,e==null?"parent: <"+this.parent.name+">":"attribute: {"+e+"}, parent: <"+this.parent.name+">"},n})()}).call(JO)),_o.exports}var eM=To.exports,Oy;function Xc(){return Oy||(Oy=1,(function(){var n,e,t,i,r,s,a=function(c,l){for(var u in l)o.call(l,u)&&(c[u]=l[u]);function d(){this.constructor=c}return d.prototype=l.prototype,c.prototype=new d,c.__super__=l.prototype,c},o={}.hasOwnProperty;s=Oi(),r=s.isObject,i=s.isFunction,t=s.getValue,e=Gt(),n=nD(),To.exports=(function(c){a(l,c);function l(u,d,h){if(l.__super__.constructor.call(this,u),d==null)throw new Error("Missing element name. "+this.debugInfo());this.name=this.stringify.eleName(d),this.attributes={},h!=null&&this.attribute(h),u.isDocument&&(this.isRoot=!0,this.documentObject=u,u.rootObject=this)}return l.prototype.clone=function(){var u,d,h,f;h=Object.create(this),h.isRoot&&(h.documentObject=null),h.attributes={},f=this.attributes;for(d in f)o.call(f,d)&&(u=f[d],h.attributes[d]=u.clone());return h.children=[],this.children.forEach(function(p){var m;return m=p.clone(),m.parent=h,h.children.push(m)}),h},l.prototype.attribute=function(u,d){var h,f;if(u!=null&&(u=t(u)),r(u))for(h in u)o.call(u,h)&&(f=u[h],this.attribute(h,f));else i(d)&&(d=d.apply()),(!this.options.skipNullAttributes||d!=null)&&(this.attributes[u]=new n(this,u,d));return this},l.prototype.removeAttribute=function(u){var d,h,f;if(u==null)throw new Error("Missing attribute name. "+this.debugInfo());if(u=t(u),Array.isArray(u))for(h=0,f=u.length;h<f;h++)d=u[h],delete this.attributes[d];else delete this.attributes[u];return this},l.prototype.toString=function(u){return this.options.writer.set(u).element(this)},l.prototype.att=function(u,d){return this.attribute(u,d)},l.prototype.a=function(u,d){return this.attribute(u,d)},l})(e)}).call(eM)),To.exports}var Do={exports:{}},tM=Do.exports,My;function Yc(){return My||(My=1,(function(){var n,e=function(i,r){for(var s in r)t.call(r,s)&&(i[s]=r[s]);function a(){this.constructor=i}return a.prototype=r.prototype,i.prototype=new a,i.__super__=r.prototype,i},t={}.hasOwnProperty;n=Gt(),Do.exports=(function(i){e(r,i);function r(s,a){if(r.__super__.constructor.call(this,s),a==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.text=this.stringify.cdata(a)}return r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(s){return this.options.writer.set(s).cdata(this)},r})(n)}).call(tM)),Do.exports}var Eo={exports:{}},nM=Eo.exports,By;function Qc(){return By||(By=1,(function(){var n,e=function(i,r){for(var s in r)t.call(r,s)&&(i[s]=r[s]);function a(){this.constructor=i}return a.prototype=r.prototype,i.prototype=new a,i.__super__=r.prototype,i},t={}.hasOwnProperty;n=Gt(),Eo.exports=(function(i){e(r,i);function r(s,a){if(r.__super__.constructor.call(this,s),a==null)throw new Error("Missing comment text. "+this.debugInfo());this.text=this.stringify.comment(a)}return r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(s){return this.options.writer.set(s).comment(this)},r})(n)}).call(nM)),Eo.exports}var So={exports:{}},iM=So.exports,Ny;function Zc(){return Ny||(Ny=1,(function(){var n,e,t=function(r,s){for(var a in s)i.call(s,a)&&(r[a]=s[a]);function o(){this.constructor=r}return o.prototype=s.prototype,r.prototype=new o,r.__super__=s.prototype,r},i={}.hasOwnProperty;e=Oi().isObject,n=Gt(),So.exports=(function(r){t(s,r);function s(a,o,c,l){var u;s.__super__.constructor.call(this,a),e(o)&&(u=o,o=u.version,c=u.encoding,l=u.standalone),o||(o="1.0"),this.version=this.stringify.xmlVersion(o),c!=null&&(this.encoding=this.stringify.xmlEncoding(c)),l!=null&&(this.standalone=this.stringify.xmlStandalone(l))}return s.prototype.toString=function(a){return this.options.writer.set(a).declaration(this)},s})(n)}).call(iM)),So.exports}var Ao={exports:{}},wo={exports:{}},rM=wo.exports,$y;function Jc(){return $y||($y=1,(function(){var n,e=function(i,r){for(var s in r)t.call(r,s)&&(i[s]=r[s]);function a(){this.constructor=i}return a.prototype=r.prototype,i.prototype=new a,i.__super__=r.prototype,i},t={}.hasOwnProperty;n=Gt(),wo.exports=(function(i){e(r,i);function r(s,a,o,c,l,u){if(r.__super__.constructor.call(this,s),a==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(o==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(a));if(!c)throw new Error("Missing DTD attribute type. "+this.debugInfo(a));if(!l)throw new Error("Missing DTD attribute default. "+this.debugInfo(a));if(l.indexOf("#")!==0&&(l="#"+l),!l.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(a));if(u&&!l.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(a));this.elementName=this.stringify.eleName(a),this.attributeName=this.stringify.attName(o),this.attributeType=this.stringify.dtdAttType(c),this.defaultValue=this.stringify.dtdAttDefault(u),this.defaultValueType=l}return r.prototype.toString=function(s){return this.options.writer.set(s).dtdAttList(this)},r})(n)}).call(rM)),wo.exports}var Io={exports:{}},sM=Io.exports,Wy;function el(){return Wy||(Wy=1,(function(){var n,e,t=function(r,s){for(var a in s)i.call(s,a)&&(r[a]=s[a]);function o(){this.constructor=r}return o.prototype=s.prototype,r.prototype=new o,r.__super__=s.prototype,r},i={}.hasOwnProperty;e=Oi().isObject,n=Gt(),Io.exports=(function(r){t(s,r);function s(a,o,c,l){if(s.__super__.constructor.call(this,a),c==null)throw new Error("Missing DTD entity name. "+this.debugInfo(c));if(l==null)throw new Error("Missing DTD entity value. "+this.debugInfo(c));if(this.pe=!!o,this.name=this.stringify.eleName(c),!e(l))this.value=this.stringify.dtdEntityValue(l);else{if(!l.pubID&&!l.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(c));if(l.pubID&&!l.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(c));if(l.pubID!=null&&(this.pubID=this.stringify.dtdPubID(l.pubID)),l.sysID!=null&&(this.sysID=this.stringify.dtdSysID(l.sysID)),l.nData!=null&&(this.nData=this.stringify.dtdNData(l.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(c))}}return s.prototype.toString=function(a){return this.options.writer.set(a).dtdEntity(this)},s})(n)}).call(sM)),Io.exports}var Co={exports:{}},aM=Co.exports,Vy;function tl(){return Vy||(Vy=1,(function(){var n,e=function(i,r){for(var s in r)t.call(r,s)&&(i[s]=r[s]);function a(){this.constructor=i}return a.prototype=r.prototype,i.prototype=new a,i.__super__=r.prototype,i},t={}.hasOwnProperty;n=Gt(),Co.exports=(function(i){e(r,i);function r(s,a,o){if(r.__super__.constructor.call(this,s),a==null)throw new Error("Missing DTD element name. "+this.debugInfo());o||(o="(#PCDATA)"),Array.isArray(o)&&(o="("+o.join(",")+")"),this.name=this.stringify.eleName(a),this.value=this.stringify.dtdElementValue(o)}return r.prototype.toString=function(s){return this.options.writer.set(s).dtdElement(this)},r})(n)}).call(aM)),Co.exports}var Ro={exports:{}},oM=Ro.exports,Gy;function nl(){return Gy||(Gy=1,(function(){var n,e=function(i,r){for(var s in r)t.call(r,s)&&(i[s]=r[s]);function a(){this.constructor=i}return a.prototype=r.prototype,i.prototype=new a,i.__super__=r.prototype,i},t={}.hasOwnProperty;n=Gt(),Ro.exports=(function(i){e(r,i);function r(s,a,o){if(r.__super__.constructor.call(this,s),a==null)throw new Error("Missing DTD notation name. "+this.debugInfo(a));if(!o.pubID&&!o.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(a));this.name=this.stringify.eleName(a),o.pubID!=null&&(this.pubID=this.stringify.dtdPubID(o.pubID)),o.sysID!=null&&(this.sysID=this.stringify.dtdSysID(o.sysID))}return r.prototype.toString=function(s){return this.options.writer.set(s).dtdNotation(this)},r})(n)}).call(oM)),Ro.exports}var cM=Ao.exports,Hy;function il(){return Hy||(Hy=1,(function(){var n,e,t,i,r,s,a=function(c,l){for(var u in l)o.call(l,u)&&(c[u]=l[u]);function d(){this.constructor=c}return d.prototype=l.prototype,c.prototype=new d,c.__super__=l.prototype,c},o={}.hasOwnProperty;s=Oi().isObject,r=Gt(),n=Jc(),t=el(),e=tl(),i=nl(),Ao.exports=(function(c){a(l,c);function l(u,d,h){var f,p;l.__super__.constructor.call(this,u),this.name="!DOCTYPE",this.documentObject=u,s(d)&&(f=d,d=f.pubID,h=f.sysID),h==null&&(p=[d,h],h=p[0],d=p[1]),d!=null&&(this.pubID=this.stringify.dtdPubID(d)),h!=null&&(this.sysID=this.stringify.dtdSysID(h))}return l.prototype.element=function(u,d){var h;return h=new e(this,u,d),this.children.push(h),this},l.prototype.attList=function(u,d,h,f,p){var m;return m=new n(this,u,d,h,f,p),this.children.push(m),this},l.prototype.entity=function(u,d){var h;return h=new t(this,!1,u,d),this.children.push(h),this},l.prototype.pEntity=function(u,d){var h;return h=new t(this,!0,u,d),this.children.push(h),this},l.prototype.notation=function(u,d){var h;return h=new i(this,u,d),this.children.push(h),this},l.prototype.toString=function(u){return this.options.writer.set(u).docType(this)},l.prototype.ele=function(u,d){return this.element(u,d)},l.prototype.att=function(u,d,h,f,p){return this.attList(u,d,h,f,p)},l.prototype.ent=function(u,d){return this.entity(u,d)},l.prototype.pent=function(u,d){return this.pEntity(u,d)},l.prototype.not=function(u,d){return this.notation(u,d)},l.prototype.up=function(){return this.root()||this.documentObject},l})(r)}).call(cM)),Ao.exports}var Lo={exports:{}},lM=Lo.exports,qy;function rl(){return qy||(qy=1,(function(){var n,e=function(i,r){for(var s in r)t.call(r,s)&&(i[s]=r[s]);function a(){this.constructor=i}return a.prototype=r.prototype,i.prototype=new a,i.__super__=r.prototype,i},t={}.hasOwnProperty;n=Gt(),Lo.exports=(function(i){e(r,i);function r(s,a){if(r.__super__.constructor.call(this,s),a==null)throw new Error("Missing raw text. "+this.debugInfo());this.value=this.stringify.raw(a)}return r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(s){return this.options.writer.set(s).raw(this)},r})(n)}).call(lM)),Lo.exports}var Uo={exports:{}},uM=Uo.exports,jy;function sl(){return jy||(jy=1,(function(){var n,e=function(i,r){for(var s in r)t.call(r,s)&&(i[s]=r[s]);function a(){this.constructor=i}return a.prototype=r.prototype,i.prototype=new a,i.__super__=r.prototype,i},t={}.hasOwnProperty;n=Gt(),Uo.exports=(function(i){e(r,i);function r(s,a){if(r.__super__.constructor.call(this,s),a==null)throw new Error("Missing element text. "+this.debugInfo());this.value=this.stringify.eleText(a)}return r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(s){return this.options.writer.set(s).text(this)},r})(n)}).call(uM)),Uo.exports}var ko={exports:{}},dM=ko.exports,Ky;function al(){return Ky||(Ky=1,(function(){var n,e=function(i,r){for(var s in r)t.call(r,s)&&(i[s]=r[s]);function a(){this.constructor=i}return a.prototype=r.prototype,i.prototype=new a,i.__super__=r.prototype,i},t={}.hasOwnProperty;n=Gt(),ko.exports=(function(i){e(r,i);function r(s,a,o){if(r.__super__.constructor.call(this,s),a==null)throw new Error("Missing instruction target. "+this.debugInfo());this.target=this.stringify.insTarget(a),o&&(this.value=this.stringify.insValue(o))}return r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(s){return this.options.writer.set(s).processingInstruction(this)},r})(n)}).call(dM)),ko.exports}var Fo={exports:{}},hM=Fo.exports,zy;function _p(){return zy||(zy=1,(function(){var n,e=function(i,r){for(var s in r)t.call(r,s)&&(i[s]=r[s]);function a(){this.constructor=i}return a.prototype=r.prototype,i.prototype=new a,i.__super__=r.prototype,i},t={}.hasOwnProperty;n=Gt(),Fo.exports=(function(i){e(r,i);function r(s){r.__super__.constructor.call(this,s),this.isDummy=!0}return r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(s){return""},r})(n)}).call(hM)),Fo.exports}var fM=xo.exports,Xy;function Gt(){return Xy||(Xy=1,(function(){var n,e,t,i,r,s,a,o,c,l,u,d,h,f,p={}.hasOwnProperty;f=Oi(),h=f.isObject,d=f.isFunction,u=f.isEmpty,l=f.getValue,s=null,n=null,e=null,t=null,i=null,o=null,c=null,a=null,r=null,xo.exports=(function(){function m(g){this.parent=g,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.children=[],s||(s=Xc(),n=Yc(),e=Qc(),t=Zc(),i=il(),o=rl(),c=sl(),a=al(),r=_p())}return m.prototype.element=function(g,y,v){var b,T,x,_,D,w,S,C,O,I,L;if(w=null,y===null&&v==null&&(O=[{},null],y=O[0],v=O[1]),y==null&&(y={}),y=l(y),h(y)||(I=[y,v],v=I[0],y=I[1]),g!=null&&(g=l(g)),Array.isArray(g))for(x=0,S=g.length;x<S;x++)T=g[x],w=this.element(T);else if(d(g))w=this.element(g.apply());else if(h(g)){for(D in g)if(p.call(g,D))if(L=g[D],d(L)&&(L=L.apply()),h(L)&&u(L)&&(L=null),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&D.indexOf(this.stringify.convertAttKey)===0)w=this.attribute(D.substr(this.stringify.convertAttKey.length),L);else if(!this.options.separateArrayItems&&Array.isArray(L))for(_=0,C=L.length;_<C;_++)T=L[_],b={},b[D]=T,w=this.element(b);else h(L)?(w=this.element(D),w.element(L)):w=this.element(D,L)}else this.options.skipNullNodes&&v===null?w=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&g.indexOf(this.stringify.convertTextKey)===0?w=this.text(v):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&g.indexOf(this.stringify.convertCDataKey)===0?w=this.cdata(v):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&g.indexOf(this.stringify.convertCommentKey)===0?w=this.comment(v):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&g.indexOf(this.stringify.convertRawKey)===0?w=this.raw(v):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&g.indexOf(this.stringify.convertPIKey)===0?w=this.instruction(g.substr(this.stringify.convertPIKey.length),v):w=this.node(g,y,v);if(w==null)throw new Error("Could not create any elements with: "+g+". "+this.debugInfo());return w},m.prototype.insertBefore=function(g,y,v){var b,T,x;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(g));return T=this.parent.children.indexOf(this),x=this.parent.children.splice(T),b=this.parent.element(g,y,v),Array.prototype.push.apply(this.parent.children,x),b},m.prototype.insertAfter=function(g,y,v){var b,T,x;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(g));return T=this.parent.children.indexOf(this),x=this.parent.children.splice(T+1),b=this.parent.element(g,y,v),Array.prototype.push.apply(this.parent.children,x),b},m.prototype.remove=function(){var g;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return g=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[g,g-g+1].concat([])),this.parent},m.prototype.node=function(g,y,v){var b,T;return g!=null&&(g=l(g)),y||(y={}),y=l(y),h(y)||(T=[y,v],v=T[0],y=T[1]),b=new s(this,g,y),v!=null&&b.text(v),this.children.push(b),b},m.prototype.text=function(g){var y;return y=new c(this,g),this.children.push(y),this},m.prototype.cdata=function(g){var y;return y=new n(this,g),this.children.push(y),this},m.prototype.comment=function(g){var y;return y=new e(this,g),this.children.push(y),this},m.prototype.commentBefore=function(g){var y,v;return y=this.parent.children.indexOf(this),v=this.parent.children.splice(y),this.parent.comment(g),Array.prototype.push.apply(this.parent.children,v),this},m.prototype.commentAfter=function(g){var y,v;return y=this.parent.children.indexOf(this),v=this.parent.children.splice(y+1),this.parent.comment(g),Array.prototype.push.apply(this.parent.children,v),this},m.prototype.raw=function(g){var y;return y=new o(this,g),this.children.push(y),this},m.prototype.dummy=function(){var g;return g=new r(this),this.children.push(g),g},m.prototype.instruction=function(g,y){var v,b,T,x,_;if(g!=null&&(g=l(g)),y!=null&&(y=l(y)),Array.isArray(g))for(x=0,_=g.length;x<_;x++)v=g[x],this.instruction(v);else if(h(g))for(v in g)p.call(g,v)&&(b=g[v],this.instruction(v,b));else d(y)&&(y=y.apply()),T=new a(this,g,y),this.children.push(T);return this},m.prototype.instructionBefore=function(g,y){var v,b;return v=this.parent.children.indexOf(this),b=this.parent.children.splice(v),this.parent.instruction(g,y),Array.prototype.push.apply(this.parent.children,b),this},m.prototype.instructionAfter=function(g,y){var v,b;return v=this.parent.children.indexOf(this),b=this.parent.children.splice(v+1),this.parent.instruction(g,y),Array.prototype.push.apply(this.parent.children,b),this},m.prototype.declaration=function(g,y,v){var b,T;return b=this.document(),T=new t(b,g,y,v),b.children[0]instanceof t?b.children[0]=T:b.children.unshift(T),b.root()||b},m.prototype.doctype=function(g,y){var v,b,T,x,_,D,w,S,C,O;for(b=this.document(),T=new i(b,g,y),C=b.children,x=_=0,w=C.length;_<w;x=++_)if(v=C[x],v instanceof i)return b.children[x]=T,T;for(O=b.children,x=D=0,S=O.length;D<S;x=++D)if(v=O[x],v.isRoot)return b.children.splice(x,0,T),T;return b.children.push(T),T},m.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},m.prototype.root=function(){var g;for(g=this;g;){if(g.isDocument)return g.rootObject;if(g.isRoot)return g;g=g.parent}},m.prototype.document=function(){var g;for(g=this;g;){if(g.isDocument)return g;g=g.parent}},m.prototype.end=function(g){return this.document().end(g)},m.prototype.prev=function(){var g;for(g=this.parent.children.indexOf(this);g>0&&this.parent.children[g-1].isDummy;)g=g-1;if(g<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[g-1]},m.prototype.next=function(){var g;for(g=this.parent.children.indexOf(this);g<this.parent.children.length-1&&this.parent.children[g+1].isDummy;)g=g+1;if(g===-1||g===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[g+1]},m.prototype.importDocument=function(g){var y;return y=g.root().clone(),y.parent=this,y.isRoot=!1,this.children.push(y),this},m.prototype.debugInfo=function(g){var y,v;return g=g||this.name,g==null&&!((y=this.parent)!=null&&y.name)?"":g==null?"parent: <"+this.parent.name+">":(v=this.parent)!=null&&v.name?"node: <"+g+">, parent: <"+this.parent.name+">":"node: <"+g+">"},m.prototype.ele=function(g,y,v){return this.element(g,y,v)},m.prototype.nod=function(g,y,v){return this.node(g,y,v)},m.prototype.txt=function(g){return this.text(g)},m.prototype.dat=function(g){return this.cdata(g)},m.prototype.com=function(g){return this.comment(g)},m.prototype.ins=function(g,y){return this.instruction(g,y)},m.prototype.doc=function(){return this.document()},m.prototype.dec=function(g,y,v){return this.declaration(g,y,v)},m.prototype.dtd=function(g,y){return this.doctype(g,y)},m.prototype.e=function(g,y,v){return this.element(g,y,v)},m.prototype.n=function(g,y,v){return this.node(g,y,v)},m.prototype.t=function(g){return this.text(g)},m.prototype.d=function(g){return this.cdata(g)},m.prototype.c=function(g){return this.comment(g)},m.prototype.r=function(g){return this.raw(g)},m.prototype.i=function(g,y){return this.instruction(g,y)},m.prototype.u=function(){return this.up()},m.prototype.importXMLBuilder=function(g){return this.importDocument(g)},m})()}).call(fM)),xo.exports}var Po={exports:{}},pM=Po.exports,Yy;function iD(){return Yy||(Yy=1,(function(){var n=function(t,i){return function(){return t.apply(i,arguments)}},e={}.hasOwnProperty;Po.exports=(function(){function t(i){this.assertLegalChar=n(this.assertLegalChar,this);var r,s,a;i||(i={}),this.noDoubleEncoding=i.noDoubleEncoding,s=i.stringify||{};for(r in s)e.call(s,r)&&(a=s[r],this[r]=a)}return t.prototype.eleName=function(i){return i=""+i||"",this.assertLegalChar(i)},t.prototype.eleText=function(i){return i=""+i||"",this.assertLegalChar(this.elEscape(i))},t.prototype.cdata=function(i){return i=""+i||"",i=i.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(i)},t.prototype.comment=function(i){if(i=""+i||"",i.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+i);return this.assertLegalChar(i)},t.prototype.raw=function(i){return""+i||""},t.prototype.attName=function(i){return i=""+i||""},t.prototype.attValue=function(i){return i=""+i||"",this.attEscape(i)},t.prototype.insTarget=function(i){return""+i||""},t.prototype.insValue=function(i){if(i=""+i||"",i.match(/\?>/))throw new Error("Invalid processing instruction value: "+i);return i},t.prototype.xmlVersion=function(i){if(i=""+i||"",!i.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+i);return i},t.prototype.xmlEncoding=function(i){if(i=""+i||"",!i.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+i);return i},t.prototype.xmlStandalone=function(i){return i?"yes":"no"},t.prototype.dtdPubID=function(i){return""+i||""},t.prototype.dtdSysID=function(i){return""+i||""},t.prototype.dtdElementValue=function(i){return""+i||""},t.prototype.dtdAttType=function(i){return""+i||""},t.prototype.dtdAttDefault=function(i){return i!=null?""+i||"":i},t.prototype.dtdEntityValue=function(i){return""+i||""},t.prototype.dtdNData=function(i){return""+i||""},t.prototype.convertAttKey="@",t.prototype.convertPIKey="?",t.prototype.convertTextKey="#text",t.prototype.convertCDataKey="#cdata",t.prototype.convertCommentKey="#comment",t.prototype.convertRawKey="#raw",t.prototype.assertLegalChar=function(i){var r;if(r=i.match(/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/),r)throw new Error("Invalid character in string: "+i+" at index "+r.index);return i},t.prototype.elEscape=function(i){var r;return r=this.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(r,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;")},t.prototype.attEscape=function(i){var r;return r=this.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,i.replace(r,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")},t})()}).call(pM)),Po.exports}var Oo={exports:{}},Mo={exports:{}},gM=Mo.exports,Qy;function rD(){return Qy||(Qy=1,(function(){var n={}.hasOwnProperty;Mo.exports=(function(){function e(t){var i,r,s,a,o,c,l,u,d;t||(t={}),this.pretty=t.pretty||!1,this.allowEmpty=(r=t.allowEmpty)!=null?r:!1,this.pretty?(this.indent=(s=t.indent)!=null?s:"  ",this.newline=(a=t.newline)!=null?a:`
`,this.offset=(o=t.offset)!=null?o:0,this.dontprettytextnodes=(c=t.dontprettytextnodes)!=null?c:0):(this.indent="",this.newline="",this.offset=0,this.dontprettytextnodes=0),this.spacebeforeslash=(l=t.spacebeforeslash)!=null?l:"",this.spacebeforeslash===!0&&(this.spacebeforeslash=" "),this.newlinedefault=this.newline,this.prettydefault=this.pretty,u=t.writer||{};for(i in u)n.call(u,i)&&(d=u[i],this[i]=d)}return e.prototype.set=function(t){var i,r,s;t||(t={}),"pretty"in t&&(this.pretty=t.pretty),"allowEmpty"in t&&(this.allowEmpty=t.allowEmpty),this.pretty?(this.indent="indent"in t?t.indent:"  ",this.newline="newline"in t?t.newline:`
`,this.offset="offset"in t?t.offset:0,this.dontprettytextnodes="dontprettytextnodes"in t?t.dontprettytextnodes:0):(this.indent="",this.newline="",this.offset=0,this.dontprettytextnodes=0),this.spacebeforeslash="spacebeforeslash"in t?t.spacebeforeslash:"",this.spacebeforeslash===!0&&(this.spacebeforeslash=" "),this.newlinedefault=this.newline,this.prettydefault=this.pretty,r=t.writer||{};for(i in r)n.call(r,i)&&(s=r[i],this[i]=s);return this},e.prototype.space=function(t){var i;return this.pretty?(i=(t||0)+this.offset+1,i>0?new Array(i).join(this.indent):""):""},e})()}).call(gM)),Mo.exports}var mM=Oo.exports,Zy;function Dp(){return Zy||(Zy=1,(function(){var n,e,t,i,r,s,a,o,c,l,u,d,h,f,p=function(g,y){for(var v in y)m.call(y,v)&&(g[v]=y[v]);function b(){this.constructor=g}return b.prototype=y.prototype,g.prototype=new b,g.__super__=y.prototype,g},m={}.hasOwnProperty;a=Zc(),o=il(),n=Yc(),e=Qc(),l=Xc(),d=rl(),h=sl(),u=al(),c=_p(),t=Jc(),i=tl(),r=el(),s=nl(),f=rD(),Oo.exports=(function(g){p(y,g);function y(v){y.__super__.constructor.call(this,v)}return y.prototype.document=function(v){var b,T,x,_,D;for(this.textispresent=!1,_="",D=v.children,T=0,x=D.length;T<x;T++)b=D[T],!(b instanceof c)&&(_+=(function(){switch(!1){case!(b instanceof a):return this.declaration(b);case!(b instanceof o):return this.docType(b);case!(b instanceof e):return this.comment(b);case!(b instanceof u):return this.processingInstruction(b);default:return this.element(b,0)}}).call(this));return this.pretty&&_.slice(-this.newline.length)===this.newline&&(_=_.slice(0,-this.newline.length)),_},y.prototype.attribute=function(v){return" "+v.name+'="'+v.value+'"'},y.prototype.cdata=function(v,b){return this.space(b)+"<![CDATA["+v.text+"]]>"+this.newline},y.prototype.comment=function(v,b){return this.space(b)+"<!-- "+v.text+" -->"+this.newline},y.prototype.declaration=function(v,b){var T;return T=this.space(b),T+='<?xml version="'+v.version+'"',v.encoding!=null&&(T+=' encoding="'+v.encoding+'"'),v.standalone!=null&&(T+=' standalone="'+v.standalone+'"'),T+=this.spacebeforeslash+"?>",T+=this.newline,T},y.prototype.docType=function(v,b){var T,x,_,D,w;if(b||(b=0),D=this.space(b),D+="<!DOCTYPE "+v.root().name,v.pubID&&v.sysID?D+=' PUBLIC "'+v.pubID+'" "'+v.sysID+'"':v.sysID&&(D+=' SYSTEM "'+v.sysID+'"'),v.children.length>0){for(D+=" [",D+=this.newline,w=v.children,x=0,_=w.length;x<_;x++)T=w[x],D+=(function(){switch(!1){case!(T instanceof t):return this.dtdAttList(T,b+1);case!(T instanceof i):return this.dtdElement(T,b+1);case!(T instanceof r):return this.dtdEntity(T,b+1);case!(T instanceof s):return this.dtdNotation(T,b+1);case!(T instanceof n):return this.cdata(T,b+1);case!(T instanceof e):return this.comment(T,b+1);case!(T instanceof u):return this.processingInstruction(T,b+1);default:throw new Error("Unknown DTD node type: "+T.constructor.name)}}).call(this);D+="]"}return D+=this.spacebeforeslash+">",D+=this.newline,D},y.prototype.element=function(v,b){var T,x,_,D,w,S,C,O,I,L,E,$,U;b||(b=0),U=!1,this.textispresent?(this.newline="",this.pretty=!1):(this.newline=this.newlinedefault,this.pretty=this.prettydefault),$=this.space(b),O="",O+=$+"<"+v.name,I=v.attributes;for(C in I)m.call(I,C)&&(T=I[C],O+=this.attribute(T));if(v.children.length===0||v.children.every(function(F){return F.value===""}))this.allowEmpty?O+="></"+v.name+">"+this.newline:O+=this.spacebeforeslash+"/>"+this.newline;else if(this.pretty&&v.children.length===1&&v.children[0].value!=null)O+=">",O+=v.children[0].value,O+="</"+v.name+">"+this.newline;else{if(this.dontprettytextnodes){for(L=v.children,_=0,w=L.length;_<w;_++)if(x=L[_],x.value!=null){this.textispresent++,U=!0;break}}for(this.textispresent&&(this.newline="",this.pretty=!1,$=this.space(b)),O+=">"+this.newline,E=v.children,D=0,S=E.length;D<S;D++)x=E[D],O+=(function(){switch(!1){case!(x instanceof n):return this.cdata(x,b+1);case!(x instanceof e):return this.comment(x,b+1);case!(x instanceof l):return this.element(x,b+1);case!(x instanceof d):return this.raw(x,b+1);case!(x instanceof h):return this.text(x,b+1);case!(x instanceof u):return this.processingInstruction(x,b+1);case!(x instanceof c):return"";default:throw new Error("Unknown XML node type: "+x.constructor.name)}}).call(this);U&&this.textispresent--,this.textispresent||(this.newline=this.newlinedefault,this.pretty=this.prettydefault),O+=$+"</"+v.name+">"+this.newline}return O},y.prototype.processingInstruction=function(v,b){var T;return T=this.space(b)+"<?"+v.target,v.value&&(T+=" "+v.value),T+=this.spacebeforeslash+"?>"+this.newline,T},y.prototype.raw=function(v,b){return this.space(b)+v.value+this.newline},y.prototype.text=function(v,b){return this.space(b)+v.value+this.newline},y.prototype.dtdAttList=function(v,b){var T;return T=this.space(b)+"<!ATTLIST "+v.elementName+" "+v.attributeName+" "+v.attributeType,v.defaultValueType!=="#DEFAULT"&&(T+=" "+v.defaultValueType),v.defaultValue&&(T+=' "'+v.defaultValue+'"'),T+=this.spacebeforeslash+">"+this.newline,T},y.prototype.dtdElement=function(v,b){return this.space(b)+"<!ELEMENT "+v.name+" "+v.value+this.spacebeforeslash+">"+this.newline},y.prototype.dtdEntity=function(v,b){var T;return T=this.space(b)+"<!ENTITY",v.pe&&(T+=" %"),T+=" "+v.name,v.value?T+=' "'+v.value+'"':(v.pubID&&v.sysID?T+=' PUBLIC "'+v.pubID+'" "'+v.sysID+'"':v.sysID&&(T+=' SYSTEM "'+v.sysID+'"'),v.nData&&(T+=" NDATA "+v.nData)),T+=this.spacebeforeslash+">"+this.newline,T},y.prototype.dtdNotation=function(v,b){var T;return T=this.space(b)+"<!NOTATION "+v.name,v.pubID&&v.sysID?T+=' PUBLIC "'+v.pubID+'" "'+v.sysID+'"':v.pubID?T+=' PUBLIC "'+v.pubID+'"':v.sysID&&(T+=' SYSTEM "'+v.sysID+'"'),T+=this.spacebeforeslash+">"+this.newline,T},y.prototype.openNode=function(v,b){var T,x,_,D;if(b||(b=0),v instanceof l){_=this.space(b)+"<"+v.name,D=v.attributes;for(x in D)m.call(D,x)&&(T=D[x],_+=this.attribute(T));return _+=(v.children?">":"/>")+this.newline,_}else return _=this.space(b)+"<!DOCTYPE "+v.rootNodeName,v.pubID&&v.sysID?_+=' PUBLIC "'+v.pubID+'" "'+v.sysID+'"':v.sysID&&(_+=' SYSTEM "'+v.sysID+'"'),_+=(v.children?" [":">")+this.newline,_},y.prototype.closeNode=function(v,b){switch(b||(b=0),!1){case!(v instanceof l):return this.space(b)+"</"+v.name+">"+this.newline;case!(v instanceof o):return this.space(b)+"]>"+this.newline}},y})(f)}).call(mM)),Oo.exports}var yM=bo.exports,Jy;function vM(){return Jy||(Jy=1,(function(){var n,e,t,i,r=function(a,o){for(var c in o)s.call(o,c)&&(a[c]=o[c]);function l(){this.constructor=a}return l.prototype=o.prototype,a.prototype=new l,a.__super__=o.prototype,a},s={}.hasOwnProperty;i=Oi().isPlainObject,n=Gt(),t=iD(),e=Dp(),bo.exports=(function(a){r(o,a);function o(c){o.__super__.constructor.call(this,null),this.name="?xml",c||(c={}),c.writer||(c.writer=new e),this.options=c,this.stringify=new t(c),this.isDocument=!0}return o.prototype.end=function(c){var l;return c?i(c)&&(l=c,c=this.options.writer.set(l)):c=this.options.writer,c.document(this)},o.prototype.toString=function(c){return this.options.writer.set(c).document(this)},o})(n)}).call(yM)),bo.exports}var Bo={exports:{}},bM=Bo.exports,ev;function xM(){return ev||(ev=1,(function(){var n,e,t,i,r,s,a,o,c,l,u,d,h,f,p,m,g,y,v,b,T={}.hasOwnProperty;b=Oi(),y=b.isObject,g=b.isFunction,v=b.isPlainObject,m=b.getValue,l=Xc(),e=Yc(),t=Qc(),d=rl(),p=sl(),u=al(),o=Zc(),c=il(),i=Jc(),s=el(),r=tl(),a=nl(),n=nD(),f=iD(),h=Dp(),Bo.exports=(function(){function x(_,D,w){var S;this.name="?xml",_||(_={}),_.writer?v(_.writer)&&(S=_.writer,_.writer=new h(S)):_.writer=new h(_),this.options=_,this.writer=_.writer,this.stringify=new f(_),this.onDataCallback=D||function(){},this.onEndCallback=w||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return x.prototype.node=function(_,D,w){var S,C;if(_==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(_));return this.openCurrent(),_=m(_),D===null&&w==null&&(S=[{},null],D=S[0],w=S[1]),D==null&&(D={}),D=m(D),y(D)||(C=[D,w],w=C[0],D=C[1]),this.currentNode=new l(this,_,D),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,w!=null&&this.text(w),this},x.prototype.element=function(_,D,w){return this.currentNode&&this.currentNode instanceof c?this.dtdElement.apply(this,arguments):this.node(_,D,w)},x.prototype.attribute=function(_,D){var w,S;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(_));if(_!=null&&(_=m(_)),y(_))for(w in _)T.call(_,w)&&(S=_[w],this.attribute(w,S));else g(D)&&(D=D.apply()),(!this.options.skipNullAttributes||D!=null)&&(this.currentNode.attributes[_]=new n(this,_,D));return this},x.prototype.text=function(_){var D;return this.openCurrent(),D=new p(this,_),this.onData(this.writer.text(D,this.currentLevel+1),this.currentLevel+1),this},x.prototype.cdata=function(_){var D;return this.openCurrent(),D=new e(this,_),this.onData(this.writer.cdata(D,this.currentLevel+1),this.currentLevel+1),this},x.prototype.comment=function(_){var D;return this.openCurrent(),D=new t(this,_),this.onData(this.writer.comment(D,this.currentLevel+1),this.currentLevel+1),this},x.prototype.raw=function(_){var D;return this.openCurrent(),D=new d(this,_),this.onData(this.writer.raw(D,this.currentLevel+1),this.currentLevel+1),this},x.prototype.instruction=function(_,D){var w,S,C,O,I;if(this.openCurrent(),_!=null&&(_=m(_)),D!=null&&(D=m(D)),Array.isArray(_))for(w=0,O=_.length;w<O;w++)S=_[w],this.instruction(S);else if(y(_))for(S in _)T.call(_,S)&&(C=_[S],this.instruction(S,C));else g(D)&&(D=D.apply()),I=new u(this,_,D),this.onData(this.writer.processingInstruction(I,this.currentLevel+1),this.currentLevel+1);return this},x.prototype.declaration=function(_,D,w){var S;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return S=new o(this,_,D,w),this.onData(this.writer.declaration(S,this.currentLevel+1),this.currentLevel+1),this},x.prototype.doctype=function(_,D,w){if(this.openCurrent(),_==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new c(this,D,w),this.currentNode.rootNodeName=_,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},x.prototype.dtdElement=function(_,D){var w;return this.openCurrent(),w=new r(this,_,D),this.onData(this.writer.dtdElement(w,this.currentLevel+1),this.currentLevel+1),this},x.prototype.attList=function(_,D,w,S,C){var O;return this.openCurrent(),O=new i(this,_,D,w,S,C),this.onData(this.writer.dtdAttList(O,this.currentLevel+1),this.currentLevel+1),this},x.prototype.entity=function(_,D){var w;return this.openCurrent(),w=new s(this,!1,_,D),this.onData(this.writer.dtdEntity(w,this.currentLevel+1),this.currentLevel+1),this},x.prototype.pEntity=function(_,D){var w;return this.openCurrent(),w=new s(this,!0,_,D),this.onData(this.writer.dtdEntity(w,this.currentLevel+1),this.currentLevel+1),this},x.prototype.notation=function(_,D){var w;return this.openCurrent(),w=new a(this,_,D),this.onData(this.writer.dtdNotation(w,this.currentLevel+1),this.currentLevel+1),this},x.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},x.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},x.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},x.prototype.openNode=function(_){if(!_.isOpen)return!this.root&&this.currentLevel===0&&_ instanceof l&&(this.root=_),this.onData(this.writer.openNode(_,this.currentLevel),this.currentLevel),_.isOpen=!0},x.prototype.closeNode=function(_){if(!_.isClosed)return this.onData(this.writer.closeNode(_,this.currentLevel),this.currentLevel),_.isClosed=!0},x.prototype.onData=function(_,D){return this.documentStarted=!0,this.onDataCallback(_,D+1)},x.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},x.prototype.debugInfo=function(_){return _==null?"":"node: <"+_+">"},x.prototype.ele=function(){return this.element.apply(this,arguments)},x.prototype.nod=function(_,D,w){return this.node(_,D,w)},x.prototype.txt=function(_){return this.text(_)},x.prototype.dat=function(_){return this.cdata(_)},x.prototype.com=function(_){return this.comment(_)},x.prototype.ins=function(_,D){return this.instruction(_,D)},x.prototype.dec=function(_,D,w){return this.declaration(_,D,w)},x.prototype.dtd=function(_,D,w){return this.doctype(_,D,w)},x.prototype.e=function(_,D,w){return this.element(_,D,w)},x.prototype.n=function(_,D,w){return this.node(_,D,w)},x.prototype.t=function(_){return this.text(_)},x.prototype.d=function(_){return this.cdata(_)},x.prototype.c=function(_){return this.comment(_)},x.prototype.r=function(_){return this.raw(_)},x.prototype.i=function(_,D){return this.instruction(_,D)},x.prototype.att=function(){return this.currentNode&&this.currentNode instanceof c?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},x.prototype.a=function(){return this.currentNode&&this.currentNode instanceof c?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},x.prototype.ent=function(_,D){return this.entity(_,D)},x.prototype.pent=function(_,D){return this.pEntity(_,D)},x.prototype.not=function(_,D){return this.notation(_,D)},x})()}).call(bM)),Bo.exports}var No={exports:{}},TM=No.exports,tv;function _M(){return tv||(tv=1,(function(){var n,e,t,i,r,s,a,o,c,l,u,d,h,f,p=function(g,y){for(var v in y)m.call(y,v)&&(g[v]=y[v]);function b(){this.constructor=g}return b.prototype=y.prototype,g.prototype=new b,g.__super__=y.prototype,g},m={}.hasOwnProperty;a=Zc(),o=il(),n=Yc(),e=Qc(),l=Xc(),d=rl(),h=sl(),u=al(),c=_p(),t=Jc(),i=tl(),r=el(),s=nl(),f=rD(),No.exports=(function(g){p(y,g);function y(v,b){y.__super__.constructor.call(this,b),this.stream=v}return y.prototype.document=function(v){var b,T,x,_,D,w,S,C;for(w=v.children,T=0,_=w.length;T<_;T++)b=w[T],b.isLastRootNode=!1;for(v.children[v.children.length-1].isLastRootNode=!0,S=v.children,C=[],x=0,D=S.length;x<D;x++)if(b=S[x],!(b instanceof c))switch(!1){case!(b instanceof a):C.push(this.declaration(b));break;case!(b instanceof o):C.push(this.docType(b));break;case!(b instanceof e):C.push(this.comment(b));break;case!(b instanceof u):C.push(this.processingInstruction(b));break;default:C.push(this.element(b))}return C},y.prototype.attribute=function(v){return this.stream.write(" "+v.name+'="'+v.value+'"')},y.prototype.cdata=function(v,b){return this.stream.write(this.space(b)+"<![CDATA["+v.text+"]]>"+this.endline(v))},y.prototype.comment=function(v,b){return this.stream.write(this.space(b)+"<!-- "+v.text+" -->"+this.endline(v))},y.prototype.declaration=function(v,b){return this.stream.write(this.space(b)),this.stream.write('<?xml version="'+v.version+'"'),v.encoding!=null&&this.stream.write(' encoding="'+v.encoding+'"'),v.standalone!=null&&this.stream.write(' standalone="'+v.standalone+'"'),this.stream.write(this.spacebeforeslash+"?>"),this.stream.write(this.endline(v))},y.prototype.docType=function(v,b){var T,x,_,D;if(b||(b=0),this.stream.write(this.space(b)),this.stream.write("<!DOCTYPE "+v.root().name),v.pubID&&v.sysID?this.stream.write(' PUBLIC "'+v.pubID+'" "'+v.sysID+'"'):v.sysID&&this.stream.write(' SYSTEM "'+v.sysID+'"'),v.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(v)),D=v.children,x=0,_=D.length;x<_;x++)switch(T=D[x],!1){case!(T instanceof t):this.dtdAttList(T,b+1);break;case!(T instanceof i):this.dtdElement(T,b+1);break;case!(T instanceof r):this.dtdEntity(T,b+1);break;case!(T instanceof s):this.dtdNotation(T,b+1);break;case!(T instanceof n):this.cdata(T,b+1);break;case!(T instanceof e):this.comment(T,b+1);break;case!(T instanceof u):this.processingInstruction(T,b+1);break;default:throw new Error("Unknown DTD node type: "+T.constructor.name)}this.stream.write("]")}return this.stream.write(this.spacebeforeslash+">"),this.stream.write(this.endline(v))},y.prototype.element=function(v,b){var T,x,_,D,w,S,C,O;b||(b=0),O=this.space(b),this.stream.write(O+"<"+v.name),S=v.attributes;for(w in S)m.call(S,w)&&(T=S[w],this.attribute(T));if(v.children.length===0||v.children.every(function(I){return I.value===""}))this.allowEmpty?this.stream.write("></"+v.name+">"):this.stream.write(this.spacebeforeslash+"/>");else if(this.pretty&&v.children.length===1&&v.children[0].value!=null)this.stream.write(">"),this.stream.write(v.children[0].value),this.stream.write("</"+v.name+">");else{for(this.stream.write(">"+this.newline),C=v.children,_=0,D=C.length;_<D;_++)switch(x=C[_],!1){case!(x instanceof n):this.cdata(x,b+1);break;case!(x instanceof e):this.comment(x,b+1);break;case!(x instanceof l):this.element(x,b+1);break;case!(x instanceof d):this.raw(x,b+1);break;case!(x instanceof h):this.text(x,b+1);break;case!(x instanceof u):this.processingInstruction(x,b+1);break;case!(x instanceof c):break;default:throw new Error("Unknown XML node type: "+x.constructor.name)}this.stream.write(O+"</"+v.name+">")}return this.stream.write(this.endline(v))},y.prototype.processingInstruction=function(v,b){return this.stream.write(this.space(b)+"<?"+v.target),v.value&&this.stream.write(" "+v.value),this.stream.write(this.spacebeforeslash+"?>"+this.endline(v))},y.prototype.raw=function(v,b){return this.stream.write(this.space(b)+v.value+this.endline(v))},y.prototype.text=function(v,b){return this.stream.write(this.space(b)+v.value+this.endline(v))},y.prototype.dtdAttList=function(v,b){return this.stream.write(this.space(b)+"<!ATTLIST "+v.elementName+" "+v.attributeName+" "+v.attributeType),v.defaultValueType!=="#DEFAULT"&&this.stream.write(" "+v.defaultValueType),v.defaultValue&&this.stream.write(' "'+v.defaultValue+'"'),this.stream.write(this.spacebeforeslash+">"+this.endline(v))},y.prototype.dtdElement=function(v,b){return this.stream.write(this.space(b)+"<!ELEMENT "+v.name+" "+v.value),this.stream.write(this.spacebeforeslash+">"+this.endline(v))},y.prototype.dtdEntity=function(v,b){return this.stream.write(this.space(b)+"<!ENTITY"),v.pe&&this.stream.write(" %"),this.stream.write(" "+v.name),v.value?this.stream.write(' "'+v.value+'"'):(v.pubID&&v.sysID?this.stream.write(' PUBLIC "'+v.pubID+'" "'+v.sysID+'"'):v.sysID&&this.stream.write(' SYSTEM "'+v.sysID+'"'),v.nData&&this.stream.write(" NDATA "+v.nData)),this.stream.write(this.spacebeforeslash+">"+this.endline(v))},y.prototype.dtdNotation=function(v,b){return this.stream.write(this.space(b)+"<!NOTATION "+v.name),v.pubID&&v.sysID?this.stream.write(' PUBLIC "'+v.pubID+'" "'+v.sysID+'"'):v.pubID?this.stream.write(' PUBLIC "'+v.pubID+'"'):v.sysID&&this.stream.write(' SYSTEM "'+v.sysID+'"'),this.stream.write(this.spacebeforeslash+">"+this.endline(v))},y.prototype.endline=function(v){return v.isLastRootNode?"":this.newline},y})(f)}).call(TM)),No.exports}var nv;function DM(){return nv||(nv=1,(function(){var n,e,t,i,r,s,a;a=Oi(),r=a.assign,s=a.isFunction,n=vM(),e=xM(),i=Dp(),t=_M(),Gi.create=function(o,c,l,u){var d,h;if(o==null)throw new Error("Root element needs a name.");return u=r({},c,l,u),d=new n(u),h=d.element(o),u.headless||(d.declaration(u),(u.pubID!=null||u.sysID!=null)&&d.doctype(u)),h},Gi.begin=function(o,c,l){var u;return s(o)&&(u=[o,c],c=u[0],l=u[1],o={}),c?new e(o,c,l):new n(o)},Gi.stringWriter=function(o){return new i(o)},Gi.streamWriter=function(o,c){return new t(o,c)}}).call(Gi)),Gi}var iv;function EM(){if(iv)return Ru;iv=1;var n=ut,e=DM();Ru.writeString=t;function t(r,s){var a=n.invert(s),o={element:l,text:i};function c(h,f){return o[f.type](h,f)}function l(h,f){var p=h.element(u(f.name),f.attributes);f.children.forEach(function(m){c(p,m)})}function u(h){var f=/^\{(.*)\}(.*)$/.exec(h);if(f){var p=a[f[1]];return p+(p===""?"":":")+f[2]}else return h}function d(h){var f=e.create(u(h.name),{version:"1.0",encoding:"UTF-8",standalone:!0});return n.forEach(s,function(p,m){var g="xmlns"+(m===""?"":":"+m);f.attribute(g,p)}),h.children.forEach(function(p){c(f,p)}),f.end()}return d(r)}function i(r,s){r.text(s.value)}return Ru}var rv;function Ep(){if(rv)return ai;rv=1;var n=tD();return ai.Element=n.Element,ai.element=n.element,ai.emptyElement=n.emptyElement,ai.text=n.text,ai.readString=ZO().readString,ai.writeString=EM().writeString,ai}var sv;function SM(){if(sv)return Oa;sv=1;var n=ut,e=Pi(),t=Ep();Oa.read=r,Oa.readXmlFromZipFile=s;var i={"http://schemas.openxmlformats.org/wordprocessingml/2006/main":"w","http://schemas.openxmlformats.org/officeDocument/2006/relationships":"r","http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing":"wp","http://schemas.openxmlformats.org/drawingml/2006/main":"a","http://schemas.openxmlformats.org/drawingml/2006/picture":"pic","http://purl.oclc.org/ooxml/wordprocessingml/main":"w","http://purl.oclc.org/ooxml/officeDocument/relationships":"r","http://purl.oclc.org/ooxml/drawingml/wordprocessingDrawing":"wp","http://purl.oclc.org/ooxml/drawingml/main":"a","http://purl.oclc.org/ooxml/drawingml/picture":"pic","http://schemas.openxmlformats.org/package/2006/content-types":"content-types","http://schemas.openxmlformats.org/package/2006/relationships":"relationships","http://schemas.openxmlformats.org/markup-compatibility/2006":"mc","urn:schemas-microsoft-com:vml":"v","urn:schemas-microsoft-com:office:word":"office-word","http://schemas.microsoft.com/office/word/2010/wordml":"wordml"};function r(c){return t.readString(c,i).then(function(l){return o(l)[0]})}function s(c,l){return c.exists(l)?c.read(l,"utf-8").then(a).then(r):e.resolve(null)}function a(c){return c.replace(/^\uFEFF/g,"")}function o(c){return c.type==="element"?c.name==="mc:AlternateContent"?c.firstOrEmpty("mc:Fallback").children:(c.children=n.flatten(c.children.map(o,!0)),[c]):[c]}return Oa}var Na={},ln={},$a={},av;function AM(){if(av)return $a;av=1,Object.defineProperty($a,"__esModule",{value:!0});var n=[{"Typeface name":"Symbol","Dingbat dec":"32","Dingbat hex":"20","Unicode dec":"32","Unicode hex":"20"},{"Typeface name":"Symbol","Dingbat dec":"33","Dingbat hex":"21","Unicode dec":"33","Unicode hex":"21"},{"Typeface name":"Symbol","Dingbat dec":"34","Dingbat hex":"22","Unicode dec":"8704","Unicode hex":"2200"},{"Typeface name":"Symbol","Dingbat dec":"35","Dingbat hex":"23","Unicode dec":"35","Unicode hex":"23"},{"Typeface name":"Symbol","Dingbat dec":"36","Dingbat hex":"24","Unicode dec":"8707","Unicode hex":"2203"},{"Typeface name":"Symbol","Dingbat dec":"37","Dingbat hex":"25","Unicode dec":"37","Unicode hex":"25"},{"Typeface name":"Symbol","Dingbat dec":"38","Dingbat hex":"26","Unicode dec":"38","Unicode hex":"26"},{"Typeface name":"Symbol","Dingbat dec":"39","Dingbat hex":"27","Unicode dec":"8717","Unicode hex":"220D"},{"Typeface name":"Symbol","Dingbat dec":"40","Dingbat hex":"28","Unicode dec":"40","Unicode hex":"28"},{"Typeface name":"Symbol","Dingbat dec":"41","Dingbat hex":"29","Unicode dec":"41","Unicode hex":"29"},{"Typeface name":"Symbol","Dingbat dec":"42","Dingbat hex":"2A","Unicode dec":"42","Unicode hex":"2A"},{"Typeface name":"Symbol","Dingbat dec":"43","Dingbat hex":"2B","Unicode dec":"43","Unicode hex":"2B"},{"Typeface name":"Symbol","Dingbat dec":"44","Dingbat hex":"2C","Unicode dec":"44","Unicode hex":"2C"},{"Typeface name":"Symbol","Dingbat dec":"45","Dingbat hex":"2D","Unicode dec":"8722","Unicode hex":"2212"},{"Typeface name":"Symbol","Dingbat dec":"46","Dingbat hex":"2E","Unicode dec":"46","Unicode hex":"2E"},{"Typeface name":"Symbol","Dingbat dec":"47","Dingbat hex":"2F","Unicode dec":"47","Unicode hex":"2F"},{"Typeface name":"Symbol","Dingbat dec":"48","Dingbat hex":"30","Unicode dec":"48","Unicode hex":"30"},{"Typeface name":"Symbol","Dingbat dec":"49","Dingbat hex":"31","Unicode dec":"49","Unicode hex":"31"},{"Typeface name":"Symbol","Dingbat dec":"50","Dingbat hex":"32","Unicode dec":"50","Unicode hex":"32"},{"Typeface name":"Symbol","Dingbat dec":"51","Dingbat hex":"33","Unicode dec":"51","Unicode hex":"33"},{"Typeface name":"Symbol","Dingbat dec":"52","Dingbat hex":"34","Unicode dec":"52","Unicode hex":"34"},{"Typeface name":"Symbol","Dingbat dec":"53","Dingbat hex":"35","Unicode dec":"53","Unicode hex":"35"},{"Typeface name":"Symbol","Dingbat dec":"54","Dingbat hex":"36","Unicode dec":"54","Unicode hex":"36"},{"Typeface name":"Symbol","Dingbat dec":"55","Dingbat hex":"37","Unicode dec":"55","Unicode hex":"37"},{"Typeface name":"Symbol","Dingbat dec":"56","Dingbat hex":"38","Unicode dec":"56","Unicode hex":"38"},{"Typeface name":"Symbol","Dingbat dec":"57","Dingbat hex":"39","Unicode dec":"57","Unicode hex":"39"},{"Typeface name":"Symbol","Dingbat dec":"58","Dingbat hex":"3A","Unicode dec":"58","Unicode hex":"3A"},{"Typeface name":"Symbol","Dingbat dec":"59","Dingbat hex":"3B","Unicode dec":"59","Unicode hex":"3B"},{"Typeface name":"Symbol","Dingbat dec":"60","Dingbat hex":"3C","Unicode dec":"60","Unicode hex":"3C"},{"Typeface name":"Symbol","Dingbat dec":"61","Dingbat hex":"3D","Unicode dec":"61","Unicode hex":"3D"},{"Typeface name":"Symbol","Dingbat dec":"62","Dingbat hex":"3E","Unicode dec":"62","Unicode hex":"3E"},{"Typeface name":"Symbol","Dingbat dec":"63","Dingbat hex":"3F","Unicode dec":"63","Unicode hex":"3F"},{"Typeface name":"Symbol","Dingbat dec":"64","Dingbat hex":"40","Unicode dec":"8773","Unicode hex":"2245"},{"Typeface name":"Symbol","Dingbat dec":"65","Dingbat hex":"41","Unicode dec":"913","Unicode hex":"391"},{"Typeface name":"Symbol","Dingbat dec":"66","Dingbat hex":"42","Unicode dec":"914","Unicode hex":"392"},{"Typeface name":"Symbol","Dingbat dec":"67","Dingbat hex":"43","Unicode dec":"935","Unicode hex":"3A7"},{"Typeface name":"Symbol","Dingbat dec":"68","Dingbat hex":"44","Unicode dec":"916","Unicode hex":"394"},{"Typeface name":"Symbol","Dingbat dec":"69","Dingbat hex":"45","Unicode dec":"917","Unicode hex":"395"},{"Typeface name":"Symbol","Dingbat dec":"70","Dingbat hex":"46","Unicode dec":"934","Unicode hex":"3A6"},{"Typeface name":"Symbol","Dingbat dec":"71","Dingbat hex":"47","Unicode dec":"915","Unicode hex":"393"},{"Typeface name":"Symbol","Dingbat dec":"72","Dingbat hex":"48","Unicode dec":"919","Unicode hex":"397"},{"Typeface name":"Symbol","Dingbat dec":"73","Dingbat hex":"49","Unicode dec":"921","Unicode hex":"399"},{"Typeface name":"Symbol","Dingbat dec":"74","Dingbat hex":"4A","Unicode dec":"977","Unicode hex":"3D1"},{"Typeface name":"Symbol","Dingbat dec":"75","Dingbat hex":"4B","Unicode dec":"922","Unicode hex":"39A"},{"Typeface name":"Symbol","Dingbat dec":"76","Dingbat hex":"4C","Unicode dec":"923","Unicode hex":"39B"},{"Typeface name":"Symbol","Dingbat dec":"77","Dingbat hex":"4D","Unicode dec":"924","Unicode hex":"39C"},{"Typeface name":"Symbol","Dingbat dec":"78","Dingbat hex":"4E","Unicode dec":"925","Unicode hex":"39D"},{"Typeface name":"Symbol","Dingbat dec":"79","Dingbat hex":"4F","Unicode dec":"927","Unicode hex":"39F"},{"Typeface name":"Symbol","Dingbat dec":"80","Dingbat hex":"50","Unicode dec":"928","Unicode hex":"3A0"},{"Typeface name":"Symbol","Dingbat dec":"81","Dingbat hex":"51","Unicode dec":"920","Unicode hex":"398"},{"Typeface name":"Symbol","Dingbat dec":"82","Dingbat hex":"52","Unicode dec":"929","Unicode hex":"3A1"},{"Typeface name":"Symbol","Dingbat dec":"83","Dingbat hex":"53","Unicode dec":"931","Unicode hex":"3A3"},{"Typeface name":"Symbol","Dingbat dec":"84","Dingbat hex":"54","Unicode dec":"932","Unicode hex":"3A4"},{"Typeface name":"Symbol","Dingbat dec":"85","Dingbat hex":"55","Unicode dec":"933","Unicode hex":"3A5"},{"Typeface name":"Symbol","Dingbat dec":"86","Dingbat hex":"56","Unicode dec":"962","Unicode hex":"3C2"},{"Typeface name":"Symbol","Dingbat dec":"87","Dingbat hex":"57","Unicode dec":"937","Unicode hex":"3A9"},{"Typeface name":"Symbol","Dingbat dec":"88","Dingbat hex":"58","Unicode dec":"926","Unicode hex":"39E"},{"Typeface name":"Symbol","Dingbat dec":"89","Dingbat hex":"59","Unicode dec":"936","Unicode hex":"3A8"},{"Typeface name":"Symbol","Dingbat dec":"90","Dingbat hex":"5A","Unicode dec":"918","Unicode hex":"396"},{"Typeface name":"Symbol","Dingbat dec":"91","Dingbat hex":"5B","Unicode dec":"91","Unicode hex":"5B"},{"Typeface name":"Symbol","Dingbat dec":"92","Dingbat hex":"5C","Unicode dec":"8756","Unicode hex":"2234"},{"Typeface name":"Symbol","Dingbat dec":"93","Dingbat hex":"5D","Unicode dec":"93","Unicode hex":"5D"},{"Typeface name":"Symbol","Dingbat dec":"94","Dingbat hex":"5E","Unicode dec":"8869","Unicode hex":"22A5"},{"Typeface name":"Symbol","Dingbat dec":"95","Dingbat hex":"5F","Unicode dec":"95","Unicode hex":"5F"},{"Typeface name":"Symbol","Dingbat dec":"96","Dingbat hex":"60","Unicode dec":"8254","Unicode hex":"203E"},{"Typeface name":"Symbol","Dingbat dec":"97","Dingbat hex":"61","Unicode dec":"945","Unicode hex":"3B1"},{"Typeface name":"Symbol","Dingbat dec":"98","Dingbat hex":"62","Unicode dec":"946","Unicode hex":"3B2"},{"Typeface name":"Symbol","Dingbat dec":"99","Dingbat hex":"63","Unicode dec":"967","Unicode hex":"3C7"},{"Typeface name":"Symbol","Dingbat dec":"100","Dingbat hex":"64","Unicode dec":"948","Unicode hex":"3B4"},{"Typeface name":"Symbol","Dingbat dec":"101","Dingbat hex":"65","Unicode dec":"949","Unicode hex":"3B5"},{"Typeface name":"Symbol","Dingbat dec":"102","Dingbat hex":"66","Unicode dec":"966","Unicode hex":"3C6"},{"Typeface name":"Symbol","Dingbat dec":"103","Dingbat hex":"67","Unicode dec":"947","Unicode hex":"3B3"},{"Typeface name":"Symbol","Dingbat dec":"104","Dingbat hex":"68","Unicode dec":"951","Unicode hex":"3B7"},{"Typeface name":"Symbol","Dingbat dec":"105","Dingbat hex":"69","Unicode dec":"953","Unicode hex":"3B9"},{"Typeface name":"Symbol","Dingbat dec":"106","Dingbat hex":"6A","Unicode dec":"981","Unicode hex":"3D5"},{"Typeface name":"Symbol","Dingbat dec":"107","Dingbat hex":"6B","Unicode dec":"954","Unicode hex":"3BA"},{"Typeface name":"Symbol","Dingbat dec":"108","Dingbat hex":"6C","Unicode dec":"955","Unicode hex":"3BB"},{"Typeface name":"Symbol","Dingbat dec":"109","Dingbat hex":"6D","Unicode dec":"956","Unicode hex":"3BC"},{"Typeface name":"Symbol","Dingbat dec":"110","Dingbat hex":"6E","Unicode dec":"957","Unicode hex":"3BD"},{"Typeface name":"Symbol","Dingbat dec":"111","Dingbat hex":"6F","Unicode dec":"959","Unicode hex":"3BF"},{"Typeface name":"Symbol","Dingbat dec":"112","Dingbat hex":"70","Unicode dec":"960","Unicode hex":"3C0"},{"Typeface name":"Symbol","Dingbat dec":"113","Dingbat hex":"71","Unicode dec":"952","Unicode hex":"3B8"},{"Typeface name":"Symbol","Dingbat dec":"114","Dingbat hex":"72","Unicode dec":"961","Unicode hex":"3C1"},{"Typeface name":"Symbol","Dingbat dec":"115","Dingbat hex":"73","Unicode dec":"963","Unicode hex":"3C3"},{"Typeface name":"Symbol","Dingbat dec":"116","Dingbat hex":"74","Unicode dec":"964","Unicode hex":"3C4"},{"Typeface name":"Symbol","Dingbat dec":"117","Dingbat hex":"75","Unicode dec":"965","Unicode hex":"3C5"},{"Typeface name":"Symbol","Dingbat dec":"118","Dingbat hex":"76","Unicode dec":"982","Unicode hex":"3D6"},{"Typeface name":"Symbol","Dingbat dec":"119","Dingbat hex":"77","Unicode dec":"969","Unicode hex":"3C9"},{"Typeface name":"Symbol","Dingbat dec":"120","Dingbat hex":"78","Unicode dec":"958","Unicode hex":"3BE"},{"Typeface name":"Symbol","Dingbat dec":"121","Dingbat hex":"79","Unicode dec":"968","Unicode hex":"3C8"},{"Typeface name":"Symbol","Dingbat dec":"122","Dingbat hex":"7A","Unicode dec":"950","Unicode hex":"3B6"},{"Typeface name":"Symbol","Dingbat dec":"123","Dingbat hex":"7B","Unicode dec":"123","Unicode hex":"7B"},{"Typeface name":"Symbol","Dingbat dec":"124","Dingbat hex":"7C","Unicode dec":"124","Unicode hex":"7C"},{"Typeface name":"Symbol","Dingbat dec":"125","Dingbat hex":"7D","Unicode dec":"125","Unicode hex":"7D"},{"Typeface name":"Symbol","Dingbat dec":"126","Dingbat hex":"7E","Unicode dec":"126","Unicode hex":"7E"},{"Typeface name":"Symbol","Dingbat dec":"160","Dingbat hex":"A0","Unicode dec":"8364","Unicode hex":"20AC"},{"Typeface name":"Symbol","Dingbat dec":"161","Dingbat hex":"A1","Unicode dec":"978","Unicode hex":"3D2"},{"Typeface name":"Symbol","Dingbat dec":"162","Dingbat hex":"A2","Unicode dec":"8242","Unicode hex":"2032"},{"Typeface name":"Symbol","Dingbat dec":"163","Dingbat hex":"A3","Unicode dec":"8804","Unicode hex":"2264"},{"Typeface name":"Symbol","Dingbat dec":"164","Dingbat hex":"A4","Unicode dec":"8260","Unicode hex":"2044"},{"Typeface name":"Symbol","Dingbat dec":"165","Dingbat hex":"A5","Unicode dec":"8734","Unicode hex":"221E"},{"Typeface name":"Symbol","Dingbat dec":"166","Dingbat hex":"A6","Unicode dec":"402","Unicode hex":"192"},{"Typeface name":"Symbol","Dingbat dec":"167","Dingbat hex":"A7","Unicode dec":"9827","Unicode hex":"2663"},{"Typeface name":"Symbol","Dingbat dec":"168","Dingbat hex":"A8","Unicode dec":"9830","Unicode hex":"2666"},{"Typeface name":"Symbol","Dingbat dec":"169","Dingbat hex":"A9","Unicode dec":"9829","Unicode hex":"2665"},{"Typeface name":"Symbol","Dingbat dec":"170","Dingbat hex":"AA","Unicode dec":"9824","Unicode hex":"2660"},{"Typeface name":"Symbol","Dingbat dec":"171","Dingbat hex":"AB","Unicode dec":"8596","Unicode hex":"2194"},{"Typeface name":"Symbol","Dingbat dec":"172","Dingbat hex":"AC","Unicode dec":"8592","Unicode hex":"2190"},{"Typeface name":"Symbol","Dingbat dec":"173","Dingbat hex":"AD","Unicode dec":"8593","Unicode hex":"2191"},{"Typeface name":"Symbol","Dingbat dec":"174","Dingbat hex":"AE","Unicode dec":"8594","Unicode hex":"2192"},{"Typeface name":"Symbol","Dingbat dec":"175","Dingbat hex":"AF","Unicode dec":"8595","Unicode hex":"2193"},{"Typeface name":"Symbol","Dingbat dec":"176","Dingbat hex":"B0","Unicode dec":"176","Unicode hex":"B0"},{"Typeface name":"Symbol","Dingbat dec":"177","Dingbat hex":"B1","Unicode dec":"177","Unicode hex":"B1"},{"Typeface name":"Symbol","Dingbat dec":"178","Dingbat hex":"B2","Unicode dec":"8243","Unicode hex":"2033"},{"Typeface name":"Symbol","Dingbat dec":"179","Dingbat hex":"B3","Unicode dec":"8805","Unicode hex":"2265"},{"Typeface name":"Symbol","Dingbat dec":"180","Dingbat hex":"B4","Unicode dec":"215","Unicode hex":"D7"},{"Typeface name":"Symbol","Dingbat dec":"181","Dingbat hex":"B5","Unicode dec":"8733","Unicode hex":"221D"},{"Typeface name":"Symbol","Dingbat dec":"182","Dingbat hex":"B6","Unicode dec":"8706","Unicode hex":"2202"},{"Typeface name":"Symbol","Dingbat dec":"183","Dingbat hex":"B7","Unicode dec":"8226","Unicode hex":"2022"},{"Typeface name":"Symbol","Dingbat dec":"184","Dingbat hex":"B8","Unicode dec":"247","Unicode hex":"F7"},{"Typeface name":"Symbol","Dingbat dec":"185","Dingbat hex":"B9","Unicode dec":"8800","Unicode hex":"2260"},{"Typeface name":"Symbol","Dingbat dec":"186","Dingbat hex":"BA","Unicode dec":"8801","Unicode hex":"2261"},{"Typeface name":"Symbol","Dingbat dec":"187","Dingbat hex":"BB","Unicode dec":"8776","Unicode hex":"2248"},{"Typeface name":"Symbol","Dingbat dec":"188","Dingbat hex":"BC","Unicode dec":"8230","Unicode hex":"2026"},{"Typeface name":"Symbol","Dingbat dec":"189","Dingbat hex":"BD","Unicode dec":"9168","Unicode hex":"23D0"},{"Typeface name":"Symbol","Dingbat dec":"190","Dingbat hex":"BE","Unicode dec":"9135","Unicode hex":"23AF"},{"Typeface name":"Symbol","Dingbat dec":"191","Dingbat hex":"BF","Unicode dec":"8629","Unicode hex":"21B5"},{"Typeface name":"Symbol","Dingbat dec":"192","Dingbat hex":"C0","Unicode dec":"8501","Unicode hex":"2135"},{"Typeface name":"Symbol","Dingbat dec":"193","Dingbat hex":"C1","Unicode dec":"8465","Unicode hex":"2111"},{"Typeface name":"Symbol","Dingbat dec":"194","Dingbat hex":"C2","Unicode dec":"8476","Unicode hex":"211C"},{"Typeface name":"Symbol","Dingbat dec":"195","Dingbat hex":"C3","Unicode dec":"8472","Unicode hex":"2118"},{"Typeface name":"Symbol","Dingbat dec":"196","Dingbat hex":"C4","Unicode dec":"8855","Unicode hex":"2297"},{"Typeface name":"Symbol","Dingbat dec":"197","Dingbat hex":"C5","Unicode dec":"8853","Unicode hex":"2295"},{"Typeface name":"Symbol","Dingbat dec":"198","Dingbat hex":"C6","Unicode dec":"8709","Unicode hex":"2205"},{"Typeface name":"Symbol","Dingbat dec":"199","Dingbat hex":"C7","Unicode dec":"8745","Unicode hex":"2229"},{"Typeface name":"Symbol","Dingbat dec":"200","Dingbat hex":"C8","Unicode dec":"8746","Unicode hex":"222A"},{"Typeface name":"Symbol","Dingbat dec":"201","Dingbat hex":"C9","Unicode dec":"8835","Unicode hex":"2283"},{"Typeface name":"Symbol","Dingbat dec":"202","Dingbat hex":"CA","Unicode dec":"8839","Unicode hex":"2287"},{"Typeface name":"Symbol","Dingbat dec":"203","Dingbat hex":"CB","Unicode dec":"8836","Unicode hex":"2284"},{"Typeface name":"Symbol","Dingbat dec":"204","Dingbat hex":"CC","Unicode dec":"8834","Unicode hex":"2282"},{"Typeface name":"Symbol","Dingbat dec":"205","Dingbat hex":"CD","Unicode dec":"8838","Unicode hex":"2286"},{"Typeface name":"Symbol","Dingbat dec":"206","Dingbat hex":"CE","Unicode dec":"8712","Unicode hex":"2208"},{"Typeface name":"Symbol","Dingbat dec":"207","Dingbat hex":"CF","Unicode dec":"8713","Unicode hex":"2209"},{"Typeface name":"Symbol","Dingbat dec":"208","Dingbat hex":"D0","Unicode dec":"8736","Unicode hex":"2220"},{"Typeface name":"Symbol","Dingbat dec":"209","Dingbat hex":"D1","Unicode dec":"8711","Unicode hex":"2207"},{"Typeface name":"Symbol","Dingbat dec":"210","Dingbat hex":"D2","Unicode dec":"174","Unicode hex":"AE"},{"Typeface name":"Symbol","Dingbat dec":"211","Dingbat hex":"D3","Unicode dec":"169","Unicode hex":"A9"},{"Typeface name":"Symbol","Dingbat dec":"212","Dingbat hex":"D4","Unicode dec":"8482","Unicode hex":"2122"},{"Typeface name":"Symbol","Dingbat dec":"213","Dingbat hex":"D5","Unicode dec":"8719","Unicode hex":"220F"},{"Typeface name":"Symbol","Dingbat dec":"214","Dingbat hex":"D6","Unicode dec":"8730","Unicode hex":"221A"},{"Typeface name":"Symbol","Dingbat dec":"215","Dingbat hex":"D7","Unicode dec":"8901","Unicode hex":"22C5"},{"Typeface name":"Symbol","Dingbat dec":"216","Dingbat hex":"D8","Unicode dec":"172","Unicode hex":"AC"},{"Typeface name":"Symbol","Dingbat dec":"217","Dingbat hex":"D9","Unicode dec":"8743","Unicode hex":"2227"},{"Typeface name":"Symbol","Dingbat dec":"218","Dingbat hex":"DA","Unicode dec":"8744","Unicode hex":"2228"},{"Typeface name":"Symbol","Dingbat dec":"219","Dingbat hex":"DB","Unicode dec":"8660","Unicode hex":"21D4"},{"Typeface name":"Symbol","Dingbat dec":"220","Dingbat hex":"DC","Unicode dec":"8656","Unicode hex":"21D0"},{"Typeface name":"Symbol","Dingbat dec":"221","Dingbat hex":"DD","Unicode dec":"8657","Unicode hex":"21D1"},{"Typeface name":"Symbol","Dingbat dec":"222","Dingbat hex":"DE","Unicode dec":"8658","Unicode hex":"21D2"},{"Typeface name":"Symbol","Dingbat dec":"223","Dingbat hex":"DF","Unicode dec":"8659","Unicode hex":"21D3"},{"Typeface name":"Symbol","Dingbat dec":"224","Dingbat hex":"E0","Unicode dec":"9674","Unicode hex":"25CA"},{"Typeface name":"Symbol","Dingbat dec":"225","Dingbat hex":"E1","Unicode dec":"12296","Unicode hex":"3008"},{"Typeface name":"Symbol","Dingbat dec":"226","Dingbat hex":"E2","Unicode dec":"174","Unicode hex":"AE"},{"Typeface name":"Symbol","Dingbat dec":"227","Dingbat hex":"E3","Unicode dec":"169","Unicode hex":"A9"},{"Typeface name":"Symbol","Dingbat dec":"228","Dingbat hex":"E4","Unicode dec":"8482","Unicode hex":"2122"},{"Typeface name":"Symbol","Dingbat dec":"229","Dingbat hex":"E5","Unicode dec":"8721","Unicode hex":"2211"},{"Typeface name":"Symbol","Dingbat dec":"230","Dingbat hex":"E6","Unicode dec":"9115","Unicode hex":"239B"},{"Typeface name":"Symbol","Dingbat dec":"231","Dingbat hex":"E7","Unicode dec":"9116","Unicode hex":"239C"},{"Typeface name":"Symbol","Dingbat dec":"232","Dingbat hex":"E8","Unicode dec":"9117","Unicode hex":"239D"},{"Typeface name":"Symbol","Dingbat dec":"233","Dingbat hex":"E9","Unicode dec":"9121","Unicode hex":"23A1"},{"Typeface name":"Symbol","Dingbat dec":"234","Dingbat hex":"EA","Unicode dec":"9122","Unicode hex":"23A2"},{"Typeface name":"Symbol","Dingbat dec":"235","Dingbat hex":"EB","Unicode dec":"9123","Unicode hex":"23A3"},{"Typeface name":"Symbol","Dingbat dec":"236","Dingbat hex":"EC","Unicode dec":"9127","Unicode hex":"23A7"},{"Typeface name":"Symbol","Dingbat dec":"237","Dingbat hex":"ED","Unicode dec":"9128","Unicode hex":"23A8"},{"Typeface name":"Symbol","Dingbat dec":"238","Dingbat hex":"EE","Unicode dec":"9129","Unicode hex":"23A9"},{"Typeface name":"Symbol","Dingbat dec":"239","Dingbat hex":"EF","Unicode dec":"9130","Unicode hex":"23AA"},{"Typeface name":"Symbol","Dingbat dec":"240","Dingbat hex":"F0","Unicode dec":"63743","Unicode hex":"F8FF"},{"Typeface name":"Symbol","Dingbat dec":"241","Dingbat hex":"F1","Unicode dec":"12297","Unicode hex":"3009"},{"Typeface name":"Symbol","Dingbat dec":"242","Dingbat hex":"F2","Unicode dec":"8747","Unicode hex":"222B"},{"Typeface name":"Symbol","Dingbat dec":"243","Dingbat hex":"F3","Unicode dec":"8992","Unicode hex":"2320"},{"Typeface name":"Symbol","Dingbat dec":"244","Dingbat hex":"F4","Unicode dec":"9134","Unicode hex":"23AE"},{"Typeface name":"Symbol","Dingbat dec":"245","Dingbat hex":"F5","Unicode dec":"8993","Unicode hex":"2321"},{"Typeface name":"Symbol","Dingbat dec":"246","Dingbat hex":"F6","Unicode dec":"9118","Unicode hex":"239E"},{"Typeface name":"Symbol","Dingbat dec":"247","Dingbat hex":"F7","Unicode dec":"9119","Unicode hex":"239F"},{"Typeface name":"Symbol","Dingbat dec":"248","Dingbat hex":"F8","Unicode dec":"9120","Unicode hex":"23A0"},{"Typeface name":"Symbol","Dingbat dec":"249","Dingbat hex":"F9","Unicode dec":"9124","Unicode hex":"23A4"},{"Typeface name":"Symbol","Dingbat dec":"250","Dingbat hex":"FA","Unicode dec":"9125","Unicode hex":"23A5"},{"Typeface name":"Symbol","Dingbat dec":"251","Dingbat hex":"FB","Unicode dec":"9126","Unicode hex":"23A6"},{"Typeface name":"Symbol","Dingbat dec":"252","Dingbat hex":"FC","Unicode dec":"9131","Unicode hex":"23AB"},{"Typeface name":"Symbol","Dingbat dec":"253","Dingbat hex":"FD","Unicode dec":"9132","Unicode hex":"23AC"},{"Typeface name":"Symbol","Dingbat dec":"254","Dingbat hex":"FE","Unicode dec":"9133","Unicode hex":"23AD"},{"Typeface name":"Webdings","Dingbat dec":"32","Dingbat hex":"20","Unicode dec":"32","Unicode hex":"20"},{"Typeface name":"Webdings","Dingbat dec":"33","Dingbat hex":"21","Unicode dec":"128375","Unicode hex":"1F577"},{"Typeface name":"Webdings","Dingbat dec":"34","Dingbat hex":"22","Unicode dec":"128376","Unicode hex":"1F578"},{"Typeface name":"Webdings","Dingbat dec":"35","Dingbat hex":"23","Unicode dec":"128370","Unicode hex":"1F572"},{"Typeface name":"Webdings","Dingbat dec":"36","Dingbat hex":"24","Unicode dec":"128374","Unicode hex":"1F576"},{"Typeface name":"Webdings","Dingbat dec":"37","Dingbat hex":"25","Unicode dec":"127942","Unicode hex":"1F3C6"},{"Typeface name":"Webdings","Dingbat dec":"38","Dingbat hex":"26","Unicode dec":"127894","Unicode hex":"1F396"},{"Typeface name":"Webdings","Dingbat dec":"39","Dingbat hex":"27","Unicode dec":"128391","Unicode hex":"1F587"},{"Typeface name":"Webdings","Dingbat dec":"40","Dingbat hex":"28","Unicode dec":"128488","Unicode hex":"1F5E8"},{"Typeface name":"Webdings","Dingbat dec":"41","Dingbat hex":"29","Unicode dec":"128489","Unicode hex":"1F5E9"},{"Typeface name":"Webdings","Dingbat dec":"42","Dingbat hex":"2A","Unicode dec":"128496","Unicode hex":"1F5F0"},{"Typeface name":"Webdings","Dingbat dec":"43","Dingbat hex":"2B","Unicode dec":"128497","Unicode hex":"1F5F1"},{"Typeface name":"Webdings","Dingbat dec":"44","Dingbat hex":"2C","Unicode dec":"127798","Unicode hex":"1F336"},{"Typeface name":"Webdings","Dingbat dec":"45","Dingbat hex":"2D","Unicode dec":"127895","Unicode hex":"1F397"},{"Typeface name":"Webdings","Dingbat dec":"46","Dingbat hex":"2E","Unicode dec":"128638","Unicode hex":"1F67E"},{"Typeface name":"Webdings","Dingbat dec":"47","Dingbat hex":"2F","Unicode dec":"128636","Unicode hex":"1F67C"},{"Typeface name":"Webdings","Dingbat dec":"48","Dingbat hex":"30","Unicode dec":"128469","Unicode hex":"1F5D5"},{"Typeface name":"Webdings","Dingbat dec":"49","Dingbat hex":"31","Unicode dec":"128470","Unicode hex":"1F5D6"},{"Typeface name":"Webdings","Dingbat dec":"50","Dingbat hex":"32","Unicode dec":"128471","Unicode hex":"1F5D7"},{"Typeface name":"Webdings","Dingbat dec":"51","Dingbat hex":"33","Unicode dec":"9204","Unicode hex":"23F4"},{"Typeface name":"Webdings","Dingbat dec":"52","Dingbat hex":"34","Unicode dec":"9205","Unicode hex":"23F5"},{"Typeface name":"Webdings","Dingbat dec":"53","Dingbat hex":"35","Unicode dec":"9206","Unicode hex":"23F6"},{"Typeface name":"Webdings","Dingbat dec":"54","Dingbat hex":"36","Unicode dec":"9207","Unicode hex":"23F7"},{"Typeface name":"Webdings","Dingbat dec":"55","Dingbat hex":"37","Unicode dec":"9194","Unicode hex":"23EA"},{"Typeface name":"Webdings","Dingbat dec":"56","Dingbat hex":"38","Unicode dec":"9193","Unicode hex":"23E9"},{"Typeface name":"Webdings","Dingbat dec":"57","Dingbat hex":"39","Unicode dec":"9198","Unicode hex":"23EE"},{"Typeface name":"Webdings","Dingbat dec":"58","Dingbat hex":"3A","Unicode dec":"9197","Unicode hex":"23ED"},{"Typeface name":"Webdings","Dingbat dec":"59","Dingbat hex":"3B","Unicode dec":"9208","Unicode hex":"23F8"},{"Typeface name":"Webdings","Dingbat dec":"60","Dingbat hex":"3C","Unicode dec":"9209","Unicode hex":"23F9"},{"Typeface name":"Webdings","Dingbat dec":"61","Dingbat hex":"3D","Unicode dec":"9210","Unicode hex":"23FA"},{"Typeface name":"Webdings","Dingbat dec":"62","Dingbat hex":"3E","Unicode dec":"128474","Unicode hex":"1F5DA"},{"Typeface name":"Webdings","Dingbat dec":"63","Dingbat hex":"3F","Unicode dec":"128499","Unicode hex":"1F5F3"},{"Typeface name":"Webdings","Dingbat dec":"64","Dingbat hex":"40","Unicode dec":"128736","Unicode hex":"1F6E0"},{"Typeface name":"Webdings","Dingbat dec":"65","Dingbat hex":"41","Unicode dec":"127959","Unicode hex":"1F3D7"},{"Typeface name":"Webdings","Dingbat dec":"66","Dingbat hex":"42","Unicode dec":"127960","Unicode hex":"1F3D8"},{"Typeface name":"Webdings","Dingbat dec":"67","Dingbat hex":"43","Unicode dec":"127961","Unicode hex":"1F3D9"},{"Typeface name":"Webdings","Dingbat dec":"68","Dingbat hex":"44","Unicode dec":"127962","Unicode hex":"1F3DA"},{"Typeface name":"Webdings","Dingbat dec":"69","Dingbat hex":"45","Unicode dec":"127964","Unicode hex":"1F3DC"},{"Typeface name":"Webdings","Dingbat dec":"70","Dingbat hex":"46","Unicode dec":"127981","Unicode hex":"1F3ED"},{"Typeface name":"Webdings","Dingbat dec":"71","Dingbat hex":"47","Unicode dec":"127963","Unicode hex":"1F3DB"},{"Typeface name":"Webdings","Dingbat dec":"72","Dingbat hex":"48","Unicode dec":"127968","Unicode hex":"1F3E0"},{"Typeface name":"Webdings","Dingbat dec":"73","Dingbat hex":"49","Unicode dec":"127958","Unicode hex":"1F3D6"},{"Typeface name":"Webdings","Dingbat dec":"74","Dingbat hex":"4A","Unicode dec":"127965","Unicode hex":"1F3DD"},{"Typeface name":"Webdings","Dingbat dec":"75","Dingbat hex":"4B","Unicode dec":"128739","Unicode hex":"1F6E3"},{"Typeface name":"Webdings","Dingbat dec":"76","Dingbat hex":"4C","Unicode dec":"128269","Unicode hex":"1F50D"},{"Typeface name":"Webdings","Dingbat dec":"77","Dingbat hex":"4D","Unicode dec":"127956","Unicode hex":"1F3D4"},{"Typeface name":"Webdings","Dingbat dec":"78","Dingbat hex":"4E","Unicode dec":"128065","Unicode hex":"1F441"},{"Typeface name":"Webdings","Dingbat dec":"79","Dingbat hex":"4F","Unicode dec":"128066","Unicode hex":"1F442"},{"Typeface name":"Webdings","Dingbat dec":"80","Dingbat hex":"50","Unicode dec":"127966","Unicode hex":"1F3DE"},{"Typeface name":"Webdings","Dingbat dec":"81","Dingbat hex":"51","Unicode dec":"127957","Unicode hex":"1F3D5"},{"Typeface name":"Webdings","Dingbat dec":"82","Dingbat hex":"52","Unicode dec":"128740","Unicode hex":"1F6E4"},{"Typeface name":"Webdings","Dingbat dec":"83","Dingbat hex":"53","Unicode dec":"127967","Unicode hex":"1F3DF"},{"Typeface name":"Webdings","Dingbat dec":"84","Dingbat hex":"54","Unicode dec":"128755","Unicode hex":"1F6F3"},{"Typeface name":"Webdings","Dingbat dec":"85","Dingbat hex":"55","Unicode dec":"128364","Unicode hex":"1F56C"},{"Typeface name":"Webdings","Dingbat dec":"86","Dingbat hex":"56","Unicode dec":"128363","Unicode hex":"1F56B"},{"Typeface name":"Webdings","Dingbat dec":"87","Dingbat hex":"57","Unicode dec":"128360","Unicode hex":"1F568"},{"Typeface name":"Webdings","Dingbat dec":"88","Dingbat hex":"58","Unicode dec":"128264","Unicode hex":"1F508"},{"Typeface name":"Webdings","Dingbat dec":"89","Dingbat hex":"59","Unicode dec":"127892","Unicode hex":"1F394"},{"Typeface name":"Webdings","Dingbat dec":"90","Dingbat hex":"5A","Unicode dec":"127893","Unicode hex":"1F395"},{"Typeface name":"Webdings","Dingbat dec":"91","Dingbat hex":"5B","Unicode dec":"128492","Unicode hex":"1F5EC"},{"Typeface name":"Webdings","Dingbat dec":"92","Dingbat hex":"5C","Unicode dec":"128637","Unicode hex":"1F67D"},{"Typeface name":"Webdings","Dingbat dec":"93","Dingbat hex":"5D","Unicode dec":"128493","Unicode hex":"1F5ED"},{"Typeface name":"Webdings","Dingbat dec":"94","Dingbat hex":"5E","Unicode dec":"128490","Unicode hex":"1F5EA"},{"Typeface name":"Webdings","Dingbat dec":"95","Dingbat hex":"5F","Unicode dec":"128491","Unicode hex":"1F5EB"},{"Typeface name":"Webdings","Dingbat dec":"96","Dingbat hex":"60","Unicode dec":"11156","Unicode hex":"2B94"},{"Typeface name":"Webdings","Dingbat dec":"97","Dingbat hex":"61","Unicode dec":"10004","Unicode hex":"2714"},{"Typeface name":"Webdings","Dingbat dec":"98","Dingbat hex":"62","Unicode dec":"128690","Unicode hex":"1F6B2"},{"Typeface name":"Webdings","Dingbat dec":"99","Dingbat hex":"63","Unicode dec":"11036","Unicode hex":"2B1C"},{"Typeface name":"Webdings","Dingbat dec":"100","Dingbat hex":"64","Unicode dec":"128737","Unicode hex":"1F6E1"},{"Typeface name":"Webdings","Dingbat dec":"101","Dingbat hex":"65","Unicode dec":"128230","Unicode hex":"1F4E6"},{"Typeface name":"Webdings","Dingbat dec":"102","Dingbat hex":"66","Unicode dec":"128753","Unicode hex":"1F6F1"},{"Typeface name":"Webdings","Dingbat dec":"103","Dingbat hex":"67","Unicode dec":"11035","Unicode hex":"2B1B"},{"Typeface name":"Webdings","Dingbat dec":"104","Dingbat hex":"68","Unicode dec":"128657","Unicode hex":"1F691"},{"Typeface name":"Webdings","Dingbat dec":"105","Dingbat hex":"69","Unicode dec":"128712","Unicode hex":"1F6C8"},{"Typeface name":"Webdings","Dingbat dec":"106","Dingbat hex":"6A","Unicode dec":"128745","Unicode hex":"1F6E9"},{"Typeface name":"Webdings","Dingbat dec":"107","Dingbat hex":"6B","Unicode dec":"128752","Unicode hex":"1F6F0"},{"Typeface name":"Webdings","Dingbat dec":"108","Dingbat hex":"6C","Unicode dec":"128968","Unicode hex":"1F7C8"},{"Typeface name":"Webdings","Dingbat dec":"109","Dingbat hex":"6D","Unicode dec":"128372","Unicode hex":"1F574"},{"Typeface name":"Webdings","Dingbat dec":"110","Dingbat hex":"6E","Unicode dec":"11044","Unicode hex":"2B24"},{"Typeface name":"Webdings","Dingbat dec":"111","Dingbat hex":"6F","Unicode dec":"128741","Unicode hex":"1F6E5"},{"Typeface name":"Webdings","Dingbat dec":"112","Dingbat hex":"70","Unicode dec":"128660","Unicode hex":"1F694"},{"Typeface name":"Webdings","Dingbat dec":"113","Dingbat hex":"71","Unicode dec":"128472","Unicode hex":"1F5D8"},{"Typeface name":"Webdings","Dingbat dec":"114","Dingbat hex":"72","Unicode dec":"128473","Unicode hex":"1F5D9"},{"Typeface name":"Webdings","Dingbat dec":"115","Dingbat hex":"73","Unicode dec":"10067","Unicode hex":"2753"},{"Typeface name":"Webdings","Dingbat dec":"116","Dingbat hex":"74","Unicode dec":"128754","Unicode hex":"1F6F2"},{"Typeface name":"Webdings","Dingbat dec":"117","Dingbat hex":"75","Unicode dec":"128647","Unicode hex":"1F687"},{"Typeface name":"Webdings","Dingbat dec":"118","Dingbat hex":"76","Unicode dec":"128653","Unicode hex":"1F68D"},{"Typeface name":"Webdings","Dingbat dec":"119","Dingbat hex":"77","Unicode dec":"9971","Unicode hex":"26F3"},{"Typeface name":"Webdings","Dingbat dec":"120","Dingbat hex":"78","Unicode dec":"10680","Unicode hex":"29B8"},{"Typeface name":"Webdings","Dingbat dec":"121","Dingbat hex":"79","Unicode dec":"8854","Unicode hex":"2296"},{"Typeface name":"Webdings","Dingbat dec":"122","Dingbat hex":"7A","Unicode dec":"128685","Unicode hex":"1F6AD"},{"Typeface name":"Webdings","Dingbat dec":"123","Dingbat hex":"7B","Unicode dec":"128494","Unicode hex":"1F5EE"},{"Typeface name":"Webdings","Dingbat dec":"124","Dingbat hex":"7C","Unicode dec":"9168","Unicode hex":"23D0"},{"Typeface name":"Webdings","Dingbat dec":"125","Dingbat hex":"7D","Unicode dec":"128495","Unicode hex":"1F5EF"},{"Typeface name":"Webdings","Dingbat dec":"126","Dingbat hex":"7E","Unicode dec":"128498","Unicode hex":"1F5F2"},{"Typeface name":"Webdings","Dingbat dec":"128","Dingbat hex":"80","Unicode dec":"128697","Unicode hex":"1F6B9"},{"Typeface name":"Webdings","Dingbat dec":"129","Dingbat hex":"81","Unicode dec":"128698","Unicode hex":"1F6BA"},{"Typeface name":"Webdings","Dingbat dec":"130","Dingbat hex":"82","Unicode dec":"128713","Unicode hex":"1F6C9"},{"Typeface name":"Webdings","Dingbat dec":"131","Dingbat hex":"83","Unicode dec":"128714","Unicode hex":"1F6CA"},{"Typeface name":"Webdings","Dingbat dec":"132","Dingbat hex":"84","Unicode dec":"128700","Unicode hex":"1F6BC"},{"Typeface name":"Webdings","Dingbat dec":"133","Dingbat hex":"85","Unicode dec":"128125","Unicode hex":"1F47D"},{"Typeface name":"Webdings","Dingbat dec":"134","Dingbat hex":"86","Unicode dec":"127947","Unicode hex":"1F3CB"},{"Typeface name":"Webdings","Dingbat dec":"135","Dingbat hex":"87","Unicode dec":"9975","Unicode hex":"26F7"},{"Typeface name":"Webdings","Dingbat dec":"136","Dingbat hex":"88","Unicode dec":"127938","Unicode hex":"1F3C2"},{"Typeface name":"Webdings","Dingbat dec":"137","Dingbat hex":"89","Unicode dec":"127948","Unicode hex":"1F3CC"},{"Typeface name":"Webdings","Dingbat dec":"138","Dingbat hex":"8A","Unicode dec":"127946","Unicode hex":"1F3CA"},{"Typeface name":"Webdings","Dingbat dec":"139","Dingbat hex":"8B","Unicode dec":"127940","Unicode hex":"1F3C4"},{"Typeface name":"Webdings","Dingbat dec":"140","Dingbat hex":"8C","Unicode dec":"127949","Unicode hex":"1F3CD"},{"Typeface name":"Webdings","Dingbat dec":"141","Dingbat hex":"8D","Unicode dec":"127950","Unicode hex":"1F3CE"},{"Typeface name":"Webdings","Dingbat dec":"142","Dingbat hex":"8E","Unicode dec":"128664","Unicode hex":"1F698"},{"Typeface name":"Webdings","Dingbat dec":"143","Dingbat hex":"8F","Unicode dec":"128480","Unicode hex":"1F5E0"},{"Typeface name":"Webdings","Dingbat dec":"144","Dingbat hex":"90","Unicode dec":"128738","Unicode hex":"1F6E2"},{"Typeface name":"Webdings","Dingbat dec":"145","Dingbat hex":"91","Unicode dec":"128176","Unicode hex":"1F4B0"},{"Typeface name":"Webdings","Dingbat dec":"146","Dingbat hex":"92","Unicode dec":"127991","Unicode hex":"1F3F7"},{"Typeface name":"Webdings","Dingbat dec":"147","Dingbat hex":"93","Unicode dec":"128179","Unicode hex":"1F4B3"},{"Typeface name":"Webdings","Dingbat dec":"148","Dingbat hex":"94","Unicode dec":"128106","Unicode hex":"1F46A"},{"Typeface name":"Webdings","Dingbat dec":"149","Dingbat hex":"95","Unicode dec":"128481","Unicode hex":"1F5E1"},{"Typeface name":"Webdings","Dingbat dec":"150","Dingbat hex":"96","Unicode dec":"128482","Unicode hex":"1F5E2"},{"Typeface name":"Webdings","Dingbat dec":"151","Dingbat hex":"97","Unicode dec":"128483","Unicode hex":"1F5E3"},{"Typeface name":"Webdings","Dingbat dec":"152","Dingbat hex":"98","Unicode dec":"10031","Unicode hex":"272F"},{"Typeface name":"Webdings","Dingbat dec":"153","Dingbat hex":"99","Unicode dec":"128388","Unicode hex":"1F584"},{"Typeface name":"Webdings","Dingbat dec":"154","Dingbat hex":"9A","Unicode dec":"128389","Unicode hex":"1F585"},{"Typeface name":"Webdings","Dingbat dec":"155","Dingbat hex":"9B","Unicode dec":"128387","Unicode hex":"1F583"},{"Typeface name":"Webdings","Dingbat dec":"156","Dingbat hex":"9C","Unicode dec":"128390","Unicode hex":"1F586"},{"Typeface name":"Webdings","Dingbat dec":"157","Dingbat hex":"9D","Unicode dec":"128441","Unicode hex":"1F5B9"},{"Typeface name":"Webdings","Dingbat dec":"158","Dingbat hex":"9E","Unicode dec":"128442","Unicode hex":"1F5BA"},{"Typeface name":"Webdings","Dingbat dec":"159","Dingbat hex":"9F","Unicode dec":"128443","Unicode hex":"1F5BB"},{"Typeface name":"Webdings","Dingbat dec":"160","Dingbat hex":"A0","Unicode dec":"128373","Unicode hex":"1F575"},{"Typeface name":"Webdings","Dingbat dec":"161","Dingbat hex":"A1","Unicode dec":"128368","Unicode hex":"1F570"},{"Typeface name":"Webdings","Dingbat dec":"162","Dingbat hex":"A2","Unicode dec":"128445","Unicode hex":"1F5BD"},{"Typeface name":"Webdings","Dingbat dec":"163","Dingbat hex":"A3","Unicode dec":"128446","Unicode hex":"1F5BE"},{"Typeface name":"Webdings","Dingbat dec":"164","Dingbat hex":"A4","Unicode dec":"128203","Unicode hex":"1F4CB"},{"Typeface name":"Webdings","Dingbat dec":"165","Dingbat hex":"A5","Unicode dec":"128466","Unicode hex":"1F5D2"},{"Typeface name":"Webdings","Dingbat dec":"166","Dingbat hex":"A6","Unicode dec":"128467","Unicode hex":"1F5D3"},{"Typeface name":"Webdings","Dingbat dec":"167","Dingbat hex":"A7","Unicode dec":"128366","Unicode hex":"1F56E"},{"Typeface name":"Webdings","Dingbat dec":"168","Dingbat hex":"A8","Unicode dec":"128218","Unicode hex":"1F4DA"},{"Typeface name":"Webdings","Dingbat dec":"169","Dingbat hex":"A9","Unicode dec":"128478","Unicode hex":"1F5DE"},{"Typeface name":"Webdings","Dingbat dec":"170","Dingbat hex":"AA","Unicode dec":"128479","Unicode hex":"1F5DF"},{"Typeface name":"Webdings","Dingbat dec":"171","Dingbat hex":"AB","Unicode dec":"128451","Unicode hex":"1F5C3"},{"Typeface name":"Webdings","Dingbat dec":"172","Dingbat hex":"AC","Unicode dec":"128450","Unicode hex":"1F5C2"},{"Typeface name":"Webdings","Dingbat dec":"173","Dingbat hex":"AD","Unicode dec":"128444","Unicode hex":"1F5BC"},{"Typeface name":"Webdings","Dingbat dec":"174","Dingbat hex":"AE","Unicode dec":"127917","Unicode hex":"1F3AD"},{"Typeface name":"Webdings","Dingbat dec":"175","Dingbat hex":"AF","Unicode dec":"127900","Unicode hex":"1F39C"},{"Typeface name":"Webdings","Dingbat dec":"176","Dingbat hex":"B0","Unicode dec":"127896","Unicode hex":"1F398"},{"Typeface name":"Webdings","Dingbat dec":"177","Dingbat hex":"B1","Unicode dec":"127897","Unicode hex":"1F399"},{"Typeface name":"Webdings","Dingbat dec":"178","Dingbat hex":"B2","Unicode dec":"127911","Unicode hex":"1F3A7"},{"Typeface name":"Webdings","Dingbat dec":"179","Dingbat hex":"B3","Unicode dec":"128191","Unicode hex":"1F4BF"},{"Typeface name":"Webdings","Dingbat dec":"180","Dingbat hex":"B4","Unicode dec":"127902","Unicode hex":"1F39E"},{"Typeface name":"Webdings","Dingbat dec":"181","Dingbat hex":"B5","Unicode dec":"128247","Unicode hex":"1F4F7"},{"Typeface name":"Webdings","Dingbat dec":"182","Dingbat hex":"B6","Unicode dec":"127903","Unicode hex":"1F39F"},{"Typeface name":"Webdings","Dingbat dec":"183","Dingbat hex":"B7","Unicode dec":"127916","Unicode hex":"1F3AC"},{"Typeface name":"Webdings","Dingbat dec":"184","Dingbat hex":"B8","Unicode dec":"128253","Unicode hex":"1F4FD"},{"Typeface name":"Webdings","Dingbat dec":"185","Dingbat hex":"B9","Unicode dec":"128249","Unicode hex":"1F4F9"},{"Typeface name":"Webdings","Dingbat dec":"186","Dingbat hex":"BA","Unicode dec":"128254","Unicode hex":"1F4FE"},{"Typeface name":"Webdings","Dingbat dec":"187","Dingbat hex":"BB","Unicode dec":"128251","Unicode hex":"1F4FB"},{"Typeface name":"Webdings","Dingbat dec":"188","Dingbat hex":"BC","Unicode dec":"127898","Unicode hex":"1F39A"},{"Typeface name":"Webdings","Dingbat dec":"189","Dingbat hex":"BD","Unicode dec":"127899","Unicode hex":"1F39B"},{"Typeface name":"Webdings","Dingbat dec":"190","Dingbat hex":"BE","Unicode dec":"128250","Unicode hex":"1F4FA"},{"Typeface name":"Webdings","Dingbat dec":"191","Dingbat hex":"BF","Unicode dec":"128187","Unicode hex":"1F4BB"},{"Typeface name":"Webdings","Dingbat dec":"192","Dingbat hex":"C0","Unicode dec":"128421","Unicode hex":"1F5A5"},{"Typeface name":"Webdings","Dingbat dec":"193","Dingbat hex":"C1","Unicode dec":"128422","Unicode hex":"1F5A6"},{"Typeface name":"Webdings","Dingbat dec":"194","Dingbat hex":"C2","Unicode dec":"128423","Unicode hex":"1F5A7"},{"Typeface name":"Webdings","Dingbat dec":"195","Dingbat hex":"C3","Unicode dec":"128377","Unicode hex":"1F579"},{"Typeface name":"Webdings","Dingbat dec":"196","Dingbat hex":"C4","Unicode dec":"127918","Unicode hex":"1F3AE"},{"Typeface name":"Webdings","Dingbat dec":"197","Dingbat hex":"C5","Unicode dec":"128379","Unicode hex":"1F57B"},{"Typeface name":"Webdings","Dingbat dec":"198","Dingbat hex":"C6","Unicode dec":"128380","Unicode hex":"1F57C"},{"Typeface name":"Webdings","Dingbat dec":"199","Dingbat hex":"C7","Unicode dec":"128223","Unicode hex":"1F4DF"},{"Typeface name":"Webdings","Dingbat dec":"200","Dingbat hex":"C8","Unicode dec":"128385","Unicode hex":"1F581"},{"Typeface name":"Webdings","Dingbat dec":"201","Dingbat hex":"C9","Unicode dec":"128384","Unicode hex":"1F580"},{"Typeface name":"Webdings","Dingbat dec":"202","Dingbat hex":"CA","Unicode dec":"128424","Unicode hex":"1F5A8"},{"Typeface name":"Webdings","Dingbat dec":"203","Dingbat hex":"CB","Unicode dec":"128425","Unicode hex":"1F5A9"},{"Typeface name":"Webdings","Dingbat dec":"204","Dingbat hex":"CC","Unicode dec":"128447","Unicode hex":"1F5BF"},{"Typeface name":"Webdings","Dingbat dec":"205","Dingbat hex":"CD","Unicode dec":"128426","Unicode hex":"1F5AA"},{"Typeface name":"Webdings","Dingbat dec":"206","Dingbat hex":"CE","Unicode dec":"128476","Unicode hex":"1F5DC"},{"Typeface name":"Webdings","Dingbat dec":"207","Dingbat hex":"CF","Unicode dec":"128274","Unicode hex":"1F512"},{"Typeface name":"Webdings","Dingbat dec":"208","Dingbat hex":"D0","Unicode dec":"128275","Unicode hex":"1F513"},{"Typeface name":"Webdings","Dingbat dec":"209","Dingbat hex":"D1","Unicode dec":"128477","Unicode hex":"1F5DD"},{"Typeface name":"Webdings","Dingbat dec":"210","Dingbat hex":"D2","Unicode dec":"128229","Unicode hex":"1F4E5"},{"Typeface name":"Webdings","Dingbat dec":"211","Dingbat hex":"D3","Unicode dec":"128228","Unicode hex":"1F4E4"},{"Typeface name":"Webdings","Dingbat dec":"212","Dingbat hex":"D4","Unicode dec":"128371","Unicode hex":"1F573"},{"Typeface name":"Webdings","Dingbat dec":"213","Dingbat hex":"D5","Unicode dec":"127779","Unicode hex":"1F323"},{"Typeface name":"Webdings","Dingbat dec":"214","Dingbat hex":"D6","Unicode dec":"127780","Unicode hex":"1F324"},{"Typeface name":"Webdings","Dingbat dec":"215","Dingbat hex":"D7","Unicode dec":"127781","Unicode hex":"1F325"},{"Typeface name":"Webdings","Dingbat dec":"216","Dingbat hex":"D8","Unicode dec":"127782","Unicode hex":"1F326"},{"Typeface name":"Webdings","Dingbat dec":"217","Dingbat hex":"D9","Unicode dec":"9729","Unicode hex":"2601"},{"Typeface name":"Webdings","Dingbat dec":"218","Dingbat hex":"DA","Unicode dec":"127784","Unicode hex":"1F328"},{"Typeface name":"Webdings","Dingbat dec":"219","Dingbat hex":"DB","Unicode dec":"127783","Unicode hex":"1F327"},{"Typeface name":"Webdings","Dingbat dec":"220","Dingbat hex":"DC","Unicode dec":"127785","Unicode hex":"1F329"},{"Typeface name":"Webdings","Dingbat dec":"221","Dingbat hex":"DD","Unicode dec":"127786","Unicode hex":"1F32A"},{"Typeface name":"Webdings","Dingbat dec":"222","Dingbat hex":"DE","Unicode dec":"127788","Unicode hex":"1F32C"},{"Typeface name":"Webdings","Dingbat dec":"223","Dingbat hex":"DF","Unicode dec":"127787","Unicode hex":"1F32B"},{"Typeface name":"Webdings","Dingbat dec":"224","Dingbat hex":"E0","Unicode dec":"127772","Unicode hex":"1F31C"},{"Typeface name":"Webdings","Dingbat dec":"225","Dingbat hex":"E1","Unicode dec":"127777","Unicode hex":"1F321"},{"Typeface name":"Webdings","Dingbat dec":"226","Dingbat hex":"E2","Unicode dec":"128715","Unicode hex":"1F6CB"},{"Typeface name":"Webdings","Dingbat dec":"227","Dingbat hex":"E3","Unicode dec":"128719","Unicode hex":"1F6CF"},{"Typeface name":"Webdings","Dingbat dec":"228","Dingbat hex":"E4","Unicode dec":"127869","Unicode hex":"1F37D"},{"Typeface name":"Webdings","Dingbat dec":"229","Dingbat hex":"E5","Unicode dec":"127864","Unicode hex":"1F378"},{"Typeface name":"Webdings","Dingbat dec":"230","Dingbat hex":"E6","Unicode dec":"128718","Unicode hex":"1F6CE"},{"Typeface name":"Webdings","Dingbat dec":"231","Dingbat hex":"E7","Unicode dec":"128717","Unicode hex":"1F6CD"},{"Typeface name":"Webdings","Dingbat dec":"232","Dingbat hex":"E8","Unicode dec":"9413","Unicode hex":"24C5"},{"Typeface name":"Webdings","Dingbat dec":"233","Dingbat hex":"E9","Unicode dec":"9855","Unicode hex":"267F"},{"Typeface name":"Webdings","Dingbat dec":"234","Dingbat hex":"EA","Unicode dec":"128710","Unicode hex":"1F6C6"},{"Typeface name":"Webdings","Dingbat dec":"235","Dingbat hex":"EB","Unicode dec":"128392","Unicode hex":"1F588"},{"Typeface name":"Webdings","Dingbat dec":"236","Dingbat hex":"EC","Unicode dec":"127891","Unicode hex":"1F393"},{"Typeface name":"Webdings","Dingbat dec":"237","Dingbat hex":"ED","Unicode dec":"128484","Unicode hex":"1F5E4"},{"Typeface name":"Webdings","Dingbat dec":"238","Dingbat hex":"EE","Unicode dec":"128485","Unicode hex":"1F5E5"},{"Typeface name":"Webdings","Dingbat dec":"239","Dingbat hex":"EF","Unicode dec":"128486","Unicode hex":"1F5E6"},{"Typeface name":"Webdings","Dingbat dec":"240","Dingbat hex":"F0","Unicode dec":"128487","Unicode hex":"1F5E7"},{"Typeface name":"Webdings","Dingbat dec":"241","Dingbat hex":"F1","Unicode dec":"128746","Unicode hex":"1F6EA"},{"Typeface name":"Webdings","Dingbat dec":"242","Dingbat hex":"F2","Unicode dec":"128063","Unicode hex":"1F43F"},{"Typeface name":"Webdings","Dingbat dec":"243","Dingbat hex":"F3","Unicode dec":"128038","Unicode hex":"1F426"},{"Typeface name":"Webdings","Dingbat dec":"244","Dingbat hex":"F4","Unicode dec":"128031","Unicode hex":"1F41F"},{"Typeface name":"Webdings","Dingbat dec":"245","Dingbat hex":"F5","Unicode dec":"128021","Unicode hex":"1F415"},{"Typeface name":"Webdings","Dingbat dec":"246","Dingbat hex":"F6","Unicode dec":"128008","Unicode hex":"1F408"},{"Typeface name":"Webdings","Dingbat dec":"247","Dingbat hex":"F7","Unicode dec":"128620","Unicode hex":"1F66C"},{"Typeface name":"Webdings","Dingbat dec":"248","Dingbat hex":"F8","Unicode dec":"128622","Unicode hex":"1F66E"},{"Typeface name":"Webdings","Dingbat dec":"249","Dingbat hex":"F9","Unicode dec":"128621","Unicode hex":"1F66D"},{"Typeface name":"Webdings","Dingbat dec":"250","Dingbat hex":"FA","Unicode dec":"128623","Unicode hex":"1F66F"},{"Typeface name":"Webdings","Dingbat dec":"251","Dingbat hex":"FB","Unicode dec":"128506","Unicode hex":"1F5FA"},{"Typeface name":"Webdings","Dingbat dec":"252","Dingbat hex":"FC","Unicode dec":"127757","Unicode hex":"1F30D"},{"Typeface name":"Webdings","Dingbat dec":"253","Dingbat hex":"FD","Unicode dec":"127759","Unicode hex":"1F30F"},{"Typeface name":"Webdings","Dingbat dec":"254","Dingbat hex":"FE","Unicode dec":"127758","Unicode hex":"1F30E"},{"Typeface name":"Webdings","Dingbat dec":"255","Dingbat hex":"FF","Unicode dec":"128330","Unicode hex":"1F54A"},{"Typeface name":"Wingdings","Dingbat dec":"32","Dingbat hex":"20","Unicode dec":"32","Unicode hex":"20"},{"Typeface name":"Wingdings","Dingbat dec":"33","Dingbat hex":"21","Unicode dec":"128393","Unicode hex":"1F589"},{"Typeface name":"Wingdings","Dingbat dec":"34","Dingbat hex":"22","Unicode dec":"9986","Unicode hex":"2702"},{"Typeface name":"Wingdings","Dingbat dec":"35","Dingbat hex":"23","Unicode dec":"9985","Unicode hex":"2701"},{"Typeface name":"Wingdings","Dingbat dec":"36","Dingbat hex":"24","Unicode dec":"128083","Unicode hex":"1F453"},{"Typeface name":"Wingdings","Dingbat dec":"37","Dingbat hex":"25","Unicode dec":"128365","Unicode hex":"1F56D"},{"Typeface name":"Wingdings","Dingbat dec":"38","Dingbat hex":"26","Unicode dec":"128366","Unicode hex":"1F56E"},{"Typeface name":"Wingdings","Dingbat dec":"39","Dingbat hex":"27","Unicode dec":"128367","Unicode hex":"1F56F"},{"Typeface name":"Wingdings","Dingbat dec":"40","Dingbat hex":"28","Unicode dec":"128383","Unicode hex":"1F57F"},{"Typeface name":"Wingdings","Dingbat dec":"41","Dingbat hex":"29","Unicode dec":"9990","Unicode hex":"2706"},{"Typeface name":"Wingdings","Dingbat dec":"42","Dingbat hex":"2A","Unicode dec":"128386","Unicode hex":"1F582"},{"Typeface name":"Wingdings","Dingbat dec":"43","Dingbat hex":"2B","Unicode dec":"128387","Unicode hex":"1F583"},{"Typeface name":"Wingdings","Dingbat dec":"44","Dingbat hex":"2C","Unicode dec":"128234","Unicode hex":"1F4EA"},{"Typeface name":"Wingdings","Dingbat dec":"45","Dingbat hex":"2D","Unicode dec":"128235","Unicode hex":"1F4EB"},{"Typeface name":"Wingdings","Dingbat dec":"46","Dingbat hex":"2E","Unicode dec":"128236","Unicode hex":"1F4EC"},{"Typeface name":"Wingdings","Dingbat dec":"47","Dingbat hex":"2F","Unicode dec":"128237","Unicode hex":"1F4ED"},{"Typeface name":"Wingdings","Dingbat dec":"48","Dingbat hex":"30","Unicode dec":"128448","Unicode hex":"1F5C0"},{"Typeface name":"Wingdings","Dingbat dec":"49","Dingbat hex":"31","Unicode dec":"128449","Unicode hex":"1F5C1"},{"Typeface name":"Wingdings","Dingbat dec":"50","Dingbat hex":"32","Unicode dec":"128462","Unicode hex":"1F5CE"},{"Typeface name":"Wingdings","Dingbat dec":"51","Dingbat hex":"33","Unicode dec":"128463","Unicode hex":"1F5CF"},{"Typeface name":"Wingdings","Dingbat dec":"52","Dingbat hex":"34","Unicode dec":"128464","Unicode hex":"1F5D0"},{"Typeface name":"Wingdings","Dingbat dec":"53","Dingbat hex":"35","Unicode dec":"128452","Unicode hex":"1F5C4"},{"Typeface name":"Wingdings","Dingbat dec":"54","Dingbat hex":"36","Unicode dec":"8987","Unicode hex":"231B"},{"Typeface name":"Wingdings","Dingbat dec":"55","Dingbat hex":"37","Unicode dec":"128430","Unicode hex":"1F5AE"},{"Typeface name":"Wingdings","Dingbat dec":"56","Dingbat hex":"38","Unicode dec":"128432","Unicode hex":"1F5B0"},{"Typeface name":"Wingdings","Dingbat dec":"57","Dingbat hex":"39","Unicode dec":"128434","Unicode hex":"1F5B2"},{"Typeface name":"Wingdings","Dingbat dec":"58","Dingbat hex":"3A","Unicode dec":"128435","Unicode hex":"1F5B3"},{"Typeface name":"Wingdings","Dingbat dec":"59","Dingbat hex":"3B","Unicode dec":"128436","Unicode hex":"1F5B4"},{"Typeface name":"Wingdings","Dingbat dec":"60","Dingbat hex":"3C","Unicode dec":"128427","Unicode hex":"1F5AB"},{"Typeface name":"Wingdings","Dingbat dec":"61","Dingbat hex":"3D","Unicode dec":"128428","Unicode hex":"1F5AC"},{"Typeface name":"Wingdings","Dingbat dec":"62","Dingbat hex":"3E","Unicode dec":"9991","Unicode hex":"2707"},{"Typeface name":"Wingdings","Dingbat dec":"63","Dingbat hex":"3F","Unicode dec":"9997","Unicode hex":"270D"},{"Typeface name":"Wingdings","Dingbat dec":"64","Dingbat hex":"40","Unicode dec":"128398","Unicode hex":"1F58E"},{"Typeface name":"Wingdings","Dingbat dec":"65","Dingbat hex":"41","Unicode dec":"9996","Unicode hex":"270C"},{"Typeface name":"Wingdings","Dingbat dec":"66","Dingbat hex":"42","Unicode dec":"128399","Unicode hex":"1F58F"},{"Typeface name":"Wingdings","Dingbat dec":"67","Dingbat hex":"43","Unicode dec":"128077","Unicode hex":"1F44D"},{"Typeface name":"Wingdings","Dingbat dec":"68","Dingbat hex":"44","Unicode dec":"128078","Unicode hex":"1F44E"},{"Typeface name":"Wingdings","Dingbat dec":"69","Dingbat hex":"45","Unicode dec":"9756","Unicode hex":"261C"},{"Typeface name":"Wingdings","Dingbat dec":"70","Dingbat hex":"46","Unicode dec":"9758","Unicode hex":"261E"},{"Typeface name":"Wingdings","Dingbat dec":"71","Dingbat hex":"47","Unicode dec":"9757","Unicode hex":"261D"},{"Typeface name":"Wingdings","Dingbat dec":"72","Dingbat hex":"48","Unicode dec":"9759","Unicode hex":"261F"},{"Typeface name":"Wingdings","Dingbat dec":"73","Dingbat hex":"49","Unicode dec":"128400","Unicode hex":"1F590"},{"Typeface name":"Wingdings","Dingbat dec":"74","Dingbat hex":"4A","Unicode dec":"9786","Unicode hex":"263A"},{"Typeface name":"Wingdings","Dingbat dec":"75","Dingbat hex":"4B","Unicode dec":"128528","Unicode hex":"1F610"},{"Typeface name":"Wingdings","Dingbat dec":"76","Dingbat hex":"4C","Unicode dec":"9785","Unicode hex":"2639"},{"Typeface name":"Wingdings","Dingbat dec":"77","Dingbat hex":"4D","Unicode dec":"128163","Unicode hex":"1F4A3"},{"Typeface name":"Wingdings","Dingbat dec":"78","Dingbat hex":"4E","Unicode dec":"128369","Unicode hex":"1F571"},{"Typeface name":"Wingdings","Dingbat dec":"79","Dingbat hex":"4F","Unicode dec":"127987","Unicode hex":"1F3F3"},{"Typeface name":"Wingdings","Dingbat dec":"80","Dingbat hex":"50","Unicode dec":"127985","Unicode hex":"1F3F1"},{"Typeface name":"Wingdings","Dingbat dec":"81","Dingbat hex":"51","Unicode dec":"9992","Unicode hex":"2708"},{"Typeface name":"Wingdings","Dingbat dec":"82","Dingbat hex":"52","Unicode dec":"9788","Unicode hex":"263C"},{"Typeface name":"Wingdings","Dingbat dec":"83","Dingbat hex":"53","Unicode dec":"127778","Unicode hex":"1F322"},{"Typeface name":"Wingdings","Dingbat dec":"84","Dingbat hex":"54","Unicode dec":"10052","Unicode hex":"2744"},{"Typeface name":"Wingdings","Dingbat dec":"85","Dingbat hex":"55","Unicode dec":"128326","Unicode hex":"1F546"},{"Typeface name":"Wingdings","Dingbat dec":"86","Dingbat hex":"56","Unicode dec":"10014","Unicode hex":"271E"},{"Typeface name":"Wingdings","Dingbat dec":"87","Dingbat hex":"57","Unicode dec":"128328","Unicode hex":"1F548"},{"Typeface name":"Wingdings","Dingbat dec":"88","Dingbat hex":"58","Unicode dec":"10016","Unicode hex":"2720"},{"Typeface name":"Wingdings","Dingbat dec":"89","Dingbat hex":"59","Unicode dec":"10017","Unicode hex":"2721"},{"Typeface name":"Wingdings","Dingbat dec":"90","Dingbat hex":"5A","Unicode dec":"9770","Unicode hex":"262A"},{"Typeface name":"Wingdings","Dingbat dec":"91","Dingbat hex":"5B","Unicode dec":"9775","Unicode hex":"262F"},{"Typeface name":"Wingdings","Dingbat dec":"92","Dingbat hex":"5C","Unicode dec":"128329","Unicode hex":"1F549"},{"Typeface name":"Wingdings","Dingbat dec":"93","Dingbat hex":"5D","Unicode dec":"9784","Unicode hex":"2638"},{"Typeface name":"Wingdings","Dingbat dec":"94","Dingbat hex":"5E","Unicode dec":"9800","Unicode hex":"2648"},{"Typeface name":"Wingdings","Dingbat dec":"95","Dingbat hex":"5F","Unicode dec":"9801","Unicode hex":"2649"},{"Typeface name":"Wingdings","Dingbat dec":"96","Dingbat hex":"60","Unicode dec":"9802","Unicode hex":"264A"},{"Typeface name":"Wingdings","Dingbat dec":"97","Dingbat hex":"61","Unicode dec":"9803","Unicode hex":"264B"},{"Typeface name":"Wingdings","Dingbat dec":"98","Dingbat hex":"62","Unicode dec":"9804","Unicode hex":"264C"},{"Typeface name":"Wingdings","Dingbat dec":"99","Dingbat hex":"63","Unicode dec":"9805","Unicode hex":"264D"},{"Typeface name":"Wingdings","Dingbat dec":"100","Dingbat hex":"64","Unicode dec":"9806","Unicode hex":"264E"},{"Typeface name":"Wingdings","Dingbat dec":"101","Dingbat hex":"65","Unicode dec":"9807","Unicode hex":"264F"},{"Typeface name":"Wingdings","Dingbat dec":"102","Dingbat hex":"66","Unicode dec":"9808","Unicode hex":"2650"},{"Typeface name":"Wingdings","Dingbat dec":"103","Dingbat hex":"67","Unicode dec":"9809","Unicode hex":"2651"},{"Typeface name":"Wingdings","Dingbat dec":"104","Dingbat hex":"68","Unicode dec":"9810","Unicode hex":"2652"},{"Typeface name":"Wingdings","Dingbat dec":"105","Dingbat hex":"69","Unicode dec":"9811","Unicode hex":"2653"},{"Typeface name":"Wingdings","Dingbat dec":"106","Dingbat hex":"6A","Unicode dec":"128624","Unicode hex":"1F670"},{"Typeface name":"Wingdings","Dingbat dec":"107","Dingbat hex":"6B","Unicode dec":"128629","Unicode hex":"1F675"},{"Typeface name":"Wingdings","Dingbat dec":"108","Dingbat hex":"6C","Unicode dec":"9899","Unicode hex":"26AB"},{"Typeface name":"Wingdings","Dingbat dec":"109","Dingbat hex":"6D","Unicode dec":"128318","Unicode hex":"1F53E"},{"Typeface name":"Wingdings","Dingbat dec":"110","Dingbat hex":"6E","Unicode dec":"9724","Unicode hex":"25FC"},{"Typeface name":"Wingdings","Dingbat dec":"111","Dingbat hex":"6F","Unicode dec":"128911","Unicode hex":"1F78F"},{"Typeface name":"Wingdings","Dingbat dec":"112","Dingbat hex":"70","Unicode dec":"128912","Unicode hex":"1F790"},{"Typeface name":"Wingdings","Dingbat dec":"113","Dingbat hex":"71","Unicode dec":"10065","Unicode hex":"2751"},{"Typeface name":"Wingdings","Dingbat dec":"114","Dingbat hex":"72","Unicode dec":"10066","Unicode hex":"2752"},{"Typeface name":"Wingdings","Dingbat dec":"115","Dingbat hex":"73","Unicode dec":"128927","Unicode hex":"1F79F"},{"Typeface name":"Wingdings","Dingbat dec":"116","Dingbat hex":"74","Unicode dec":"10731","Unicode hex":"29EB"},{"Typeface name":"Wingdings","Dingbat dec":"117","Dingbat hex":"75","Unicode dec":"9670","Unicode hex":"25C6"},{"Typeface name":"Wingdings","Dingbat dec":"118","Dingbat hex":"76","Unicode dec":"10070","Unicode hex":"2756"},{"Typeface name":"Wingdings","Dingbat dec":"119","Dingbat hex":"77","Unicode dec":"11049","Unicode hex":"2B29"},{"Typeface name":"Wingdings","Dingbat dec":"120","Dingbat hex":"78","Unicode dec":"8999","Unicode hex":"2327"},{"Typeface name":"Wingdings","Dingbat dec":"121","Dingbat hex":"79","Unicode dec":"11193","Unicode hex":"2BB9"},{"Typeface name":"Wingdings","Dingbat dec":"122","Dingbat hex":"7A","Unicode dec":"8984","Unicode hex":"2318"},{"Typeface name":"Wingdings","Dingbat dec":"123","Dingbat hex":"7B","Unicode dec":"127989","Unicode hex":"1F3F5"},{"Typeface name":"Wingdings","Dingbat dec":"124","Dingbat hex":"7C","Unicode dec":"127990","Unicode hex":"1F3F6"},{"Typeface name":"Wingdings","Dingbat dec":"125","Dingbat hex":"7D","Unicode dec":"128630","Unicode hex":"1F676"},{"Typeface name":"Wingdings","Dingbat dec":"126","Dingbat hex":"7E","Unicode dec":"128631","Unicode hex":"1F677"},{"Typeface name":"Wingdings","Dingbat dec":"127","Dingbat hex":"7F","Unicode dec":"9647","Unicode hex":"25AF"},{"Typeface name":"Wingdings","Dingbat dec":"128","Dingbat hex":"80","Unicode dec":"127243","Unicode hex":"1F10B"},{"Typeface name":"Wingdings","Dingbat dec":"129","Dingbat hex":"81","Unicode dec":"10112","Unicode hex":"2780"},{"Typeface name":"Wingdings","Dingbat dec":"130","Dingbat hex":"82","Unicode dec":"10113","Unicode hex":"2781"},{"Typeface name":"Wingdings","Dingbat dec":"131","Dingbat hex":"83","Unicode dec":"10114","Unicode hex":"2782"},{"Typeface name":"Wingdings","Dingbat dec":"132","Dingbat hex":"84","Unicode dec":"10115","Unicode hex":"2783"},{"Typeface name":"Wingdings","Dingbat dec":"133","Dingbat hex":"85","Unicode dec":"10116","Unicode hex":"2784"},{"Typeface name":"Wingdings","Dingbat dec":"134","Dingbat hex":"86","Unicode dec":"10117","Unicode hex":"2785"},{"Typeface name":"Wingdings","Dingbat dec":"135","Dingbat hex":"87","Unicode dec":"10118","Unicode hex":"2786"},{"Typeface name":"Wingdings","Dingbat dec":"136","Dingbat hex":"88","Unicode dec":"10119","Unicode hex":"2787"},{"Typeface name":"Wingdings","Dingbat dec":"137","Dingbat hex":"89","Unicode dec":"10120","Unicode hex":"2788"},{"Typeface name":"Wingdings","Dingbat dec":"138","Dingbat hex":"8A","Unicode dec":"10121","Unicode hex":"2789"},{"Typeface name":"Wingdings","Dingbat dec":"139","Dingbat hex":"8B","Unicode dec":"127244","Unicode hex":"1F10C"},{"Typeface name":"Wingdings","Dingbat dec":"140","Dingbat hex":"8C","Unicode dec":"10122","Unicode hex":"278A"},{"Typeface name":"Wingdings","Dingbat dec":"141","Dingbat hex":"8D","Unicode dec":"10123","Unicode hex":"278B"},{"Typeface name":"Wingdings","Dingbat dec":"142","Dingbat hex":"8E","Unicode dec":"10124","Unicode hex":"278C"},{"Typeface name":"Wingdings","Dingbat dec":"143","Dingbat hex":"8F","Unicode dec":"10125","Unicode hex":"278D"},{"Typeface name":"Wingdings","Dingbat dec":"144","Dingbat hex":"90","Unicode dec":"10126","Unicode hex":"278E"},{"Typeface name":"Wingdings","Dingbat dec":"145","Dingbat hex":"91","Unicode dec":"10127","Unicode hex":"278F"},{"Typeface name":"Wingdings","Dingbat dec":"146","Dingbat hex":"92","Unicode dec":"10128","Unicode hex":"2790"},{"Typeface name":"Wingdings","Dingbat dec":"147","Dingbat hex":"93","Unicode dec":"10129","Unicode hex":"2791"},{"Typeface name":"Wingdings","Dingbat dec":"148","Dingbat hex":"94","Unicode dec":"10130","Unicode hex":"2792"},{"Typeface name":"Wingdings","Dingbat dec":"149","Dingbat hex":"95","Unicode dec":"10131","Unicode hex":"2793"},{"Typeface name":"Wingdings","Dingbat dec":"150","Dingbat hex":"96","Unicode dec":"128610","Unicode hex":"1F662"},{"Typeface name":"Wingdings","Dingbat dec":"151","Dingbat hex":"97","Unicode dec":"128608","Unicode hex":"1F660"},{"Typeface name":"Wingdings","Dingbat dec":"152","Dingbat hex":"98","Unicode dec":"128609","Unicode hex":"1F661"},{"Typeface name":"Wingdings","Dingbat dec":"153","Dingbat hex":"99","Unicode dec":"128611","Unicode hex":"1F663"},{"Typeface name":"Wingdings","Dingbat dec":"154","Dingbat hex":"9A","Unicode dec":"128606","Unicode hex":"1F65E"},{"Typeface name":"Wingdings","Dingbat dec":"155","Dingbat hex":"9B","Unicode dec":"128604","Unicode hex":"1F65C"},{"Typeface name":"Wingdings","Dingbat dec":"156","Dingbat hex":"9C","Unicode dec":"128605","Unicode hex":"1F65D"},{"Typeface name":"Wingdings","Dingbat dec":"157","Dingbat hex":"9D","Unicode dec":"128607","Unicode hex":"1F65F"},{"Typeface name":"Wingdings","Dingbat dec":"158","Dingbat hex":"9E","Unicode dec":"8729","Unicode hex":"2219"},{"Typeface name":"Wingdings","Dingbat dec":"159","Dingbat hex":"9F","Unicode dec":"8226","Unicode hex":"2022"},{"Typeface name":"Wingdings","Dingbat dec":"160","Dingbat hex":"A0","Unicode dec":"11037","Unicode hex":"2B1D"},{"Typeface name":"Wingdings","Dingbat dec":"161","Dingbat hex":"A1","Unicode dec":"11096","Unicode hex":"2B58"},{"Typeface name":"Wingdings","Dingbat dec":"162","Dingbat hex":"A2","Unicode dec":"128902","Unicode hex":"1F786"},{"Typeface name":"Wingdings","Dingbat dec":"163","Dingbat hex":"A3","Unicode dec":"128904","Unicode hex":"1F788"},{"Typeface name":"Wingdings","Dingbat dec":"164","Dingbat hex":"A4","Unicode dec":"128906","Unicode hex":"1F78A"},{"Typeface name":"Wingdings","Dingbat dec":"165","Dingbat hex":"A5","Unicode dec":"128907","Unicode hex":"1F78B"},{"Typeface name":"Wingdings","Dingbat dec":"166","Dingbat hex":"A6","Unicode dec":"128319","Unicode hex":"1F53F"},{"Typeface name":"Wingdings","Dingbat dec":"167","Dingbat hex":"A7","Unicode dec":"9642","Unicode hex":"25AA"},{"Typeface name":"Wingdings","Dingbat dec":"168","Dingbat hex":"A8","Unicode dec":"128910","Unicode hex":"1F78E"},{"Typeface name":"Wingdings","Dingbat dec":"169","Dingbat hex":"A9","Unicode dec":"128961","Unicode hex":"1F7C1"},{"Typeface name":"Wingdings","Dingbat dec":"170","Dingbat hex":"AA","Unicode dec":"128965","Unicode hex":"1F7C5"},{"Typeface name":"Wingdings","Dingbat dec":"171","Dingbat hex":"AB","Unicode dec":"9733","Unicode hex":"2605"},{"Typeface name":"Wingdings","Dingbat dec":"172","Dingbat hex":"AC","Unicode dec":"128971","Unicode hex":"1F7CB"},{"Typeface name":"Wingdings","Dingbat dec":"173","Dingbat hex":"AD","Unicode dec":"128975","Unicode hex":"1F7CF"},{"Typeface name":"Wingdings","Dingbat dec":"174","Dingbat hex":"AE","Unicode dec":"128979","Unicode hex":"1F7D3"},{"Typeface name":"Wingdings","Dingbat dec":"175","Dingbat hex":"AF","Unicode dec":"128977","Unicode hex":"1F7D1"},{"Typeface name":"Wingdings","Dingbat dec":"176","Dingbat hex":"B0","Unicode dec":"11216","Unicode hex":"2BD0"},{"Typeface name":"Wingdings","Dingbat dec":"177","Dingbat hex":"B1","Unicode dec":"8982","Unicode hex":"2316"},{"Typeface name":"Wingdings","Dingbat dec":"178","Dingbat hex":"B2","Unicode dec":"11214","Unicode hex":"2BCE"},{"Typeface name":"Wingdings","Dingbat dec":"179","Dingbat hex":"B3","Unicode dec":"11215","Unicode hex":"2BCF"},{"Typeface name":"Wingdings","Dingbat dec":"180","Dingbat hex":"B4","Unicode dec":"11217","Unicode hex":"2BD1"},{"Typeface name":"Wingdings","Dingbat dec":"181","Dingbat hex":"B5","Unicode dec":"10026","Unicode hex":"272A"},{"Typeface name":"Wingdings","Dingbat dec":"182","Dingbat hex":"B6","Unicode dec":"10032","Unicode hex":"2730"},{"Typeface name":"Wingdings","Dingbat dec":"183","Dingbat hex":"B7","Unicode dec":"128336","Unicode hex":"1F550"},{"Typeface name":"Wingdings","Dingbat dec":"184","Dingbat hex":"B8","Unicode dec":"128337","Unicode hex":"1F551"},{"Typeface name":"Wingdings","Dingbat dec":"185","Dingbat hex":"B9","Unicode dec":"128338","Unicode hex":"1F552"},{"Typeface name":"Wingdings","Dingbat dec":"186","Dingbat hex":"BA","Unicode dec":"128339","Unicode hex":"1F553"},{"Typeface name":"Wingdings","Dingbat dec":"187","Dingbat hex":"BB","Unicode dec":"128340","Unicode hex":"1F554"},{"Typeface name":"Wingdings","Dingbat dec":"188","Dingbat hex":"BC","Unicode dec":"128341","Unicode hex":"1F555"},{"Typeface name":"Wingdings","Dingbat dec":"189","Dingbat hex":"BD","Unicode dec":"128342","Unicode hex":"1F556"},{"Typeface name":"Wingdings","Dingbat dec":"190","Dingbat hex":"BE","Unicode dec":"128343","Unicode hex":"1F557"},{"Typeface name":"Wingdings","Dingbat dec":"191","Dingbat hex":"BF","Unicode dec":"128344","Unicode hex":"1F558"},{"Typeface name":"Wingdings","Dingbat dec":"192","Dingbat hex":"C0","Unicode dec":"128345","Unicode hex":"1F559"},{"Typeface name":"Wingdings","Dingbat dec":"193","Dingbat hex":"C1","Unicode dec":"128346","Unicode hex":"1F55A"},{"Typeface name":"Wingdings","Dingbat dec":"194","Dingbat hex":"C2","Unicode dec":"128347","Unicode hex":"1F55B"},{"Typeface name":"Wingdings","Dingbat dec":"195","Dingbat hex":"C3","Unicode dec":"11184","Unicode hex":"2BB0"},{"Typeface name":"Wingdings","Dingbat dec":"196","Dingbat hex":"C4","Unicode dec":"11185","Unicode hex":"2BB1"},{"Typeface name":"Wingdings","Dingbat dec":"197","Dingbat hex":"C5","Unicode dec":"11186","Unicode hex":"2BB2"},{"Typeface name":"Wingdings","Dingbat dec":"198","Dingbat hex":"C6","Unicode dec":"11187","Unicode hex":"2BB3"},{"Typeface name":"Wingdings","Dingbat dec":"199","Dingbat hex":"C7","Unicode dec":"11188","Unicode hex":"2BB4"},{"Typeface name":"Wingdings","Dingbat dec":"200","Dingbat hex":"C8","Unicode dec":"11189","Unicode hex":"2BB5"},{"Typeface name":"Wingdings","Dingbat dec":"201","Dingbat hex":"C9","Unicode dec":"11190","Unicode hex":"2BB6"},{"Typeface name":"Wingdings","Dingbat dec":"202","Dingbat hex":"CA","Unicode dec":"11191","Unicode hex":"2BB7"},{"Typeface name":"Wingdings","Dingbat dec":"203","Dingbat hex":"CB","Unicode dec":"128618","Unicode hex":"1F66A"},{"Typeface name":"Wingdings","Dingbat dec":"204","Dingbat hex":"CC","Unicode dec":"128619","Unicode hex":"1F66B"},{"Typeface name":"Wingdings","Dingbat dec":"205","Dingbat hex":"CD","Unicode dec":"128597","Unicode hex":"1F655"},{"Typeface name":"Wingdings","Dingbat dec":"206","Dingbat hex":"CE","Unicode dec":"128596","Unicode hex":"1F654"},{"Typeface name":"Wingdings","Dingbat dec":"207","Dingbat hex":"CF","Unicode dec":"128599","Unicode hex":"1F657"},{"Typeface name":"Wingdings","Dingbat dec":"208","Dingbat hex":"D0","Unicode dec":"128598","Unicode hex":"1F656"},{"Typeface name":"Wingdings","Dingbat dec":"209","Dingbat hex":"D1","Unicode dec":"128592","Unicode hex":"1F650"},{"Typeface name":"Wingdings","Dingbat dec":"210","Dingbat hex":"D2","Unicode dec":"128593","Unicode hex":"1F651"},{"Typeface name":"Wingdings","Dingbat dec":"211","Dingbat hex":"D3","Unicode dec":"128594","Unicode hex":"1F652"},{"Typeface name":"Wingdings","Dingbat dec":"212","Dingbat hex":"D4","Unicode dec":"128595","Unicode hex":"1F653"},{"Typeface name":"Wingdings","Dingbat dec":"213","Dingbat hex":"D5","Unicode dec":"9003","Unicode hex":"232B"},{"Typeface name":"Wingdings","Dingbat dec":"214","Dingbat hex":"D6","Unicode dec":"8998","Unicode hex":"2326"},{"Typeface name":"Wingdings","Dingbat dec":"215","Dingbat hex":"D7","Unicode dec":"11160","Unicode hex":"2B98"},{"Typeface name":"Wingdings","Dingbat dec":"216","Dingbat hex":"D8","Unicode dec":"11162","Unicode hex":"2B9A"},{"Typeface name":"Wingdings","Dingbat dec":"217","Dingbat hex":"D9","Unicode dec":"11161","Unicode hex":"2B99"},{"Typeface name":"Wingdings","Dingbat dec":"218","Dingbat hex":"DA","Unicode dec":"11163","Unicode hex":"2B9B"},{"Typeface name":"Wingdings","Dingbat dec":"219","Dingbat hex":"DB","Unicode dec":"11144","Unicode hex":"2B88"},{"Typeface name":"Wingdings","Dingbat dec":"220","Dingbat hex":"DC","Unicode dec":"11146","Unicode hex":"2B8A"},{"Typeface name":"Wingdings","Dingbat dec":"221","Dingbat hex":"DD","Unicode dec":"11145","Unicode hex":"2B89"},{"Typeface name":"Wingdings","Dingbat dec":"222","Dingbat hex":"DE","Unicode dec":"11147","Unicode hex":"2B8B"},{"Typeface name":"Wingdings","Dingbat dec":"223","Dingbat hex":"DF","Unicode dec":"129128","Unicode hex":"1F868"},{"Typeface name":"Wingdings","Dingbat dec":"224","Dingbat hex":"E0","Unicode dec":"129130","Unicode hex":"1F86A"},{"Typeface name":"Wingdings","Dingbat dec":"225","Dingbat hex":"E1","Unicode dec":"129129","Unicode hex":"1F869"},{"Typeface name":"Wingdings","Dingbat dec":"226","Dingbat hex":"E2","Unicode dec":"129131","Unicode hex":"1F86B"},{"Typeface name":"Wingdings","Dingbat dec":"227","Dingbat hex":"E3","Unicode dec":"129132","Unicode hex":"1F86C"},{"Typeface name":"Wingdings","Dingbat dec":"228","Dingbat hex":"E4","Unicode dec":"129133","Unicode hex":"1F86D"},{"Typeface name":"Wingdings","Dingbat dec":"229","Dingbat hex":"E5","Unicode dec":"129135","Unicode hex":"1F86F"},{"Typeface name":"Wingdings","Dingbat dec":"230","Dingbat hex":"E6","Unicode dec":"129134","Unicode hex":"1F86E"},{"Typeface name":"Wingdings","Dingbat dec":"231","Dingbat hex":"E7","Unicode dec":"129144","Unicode hex":"1F878"},{"Typeface name":"Wingdings","Dingbat dec":"232","Dingbat hex":"E8","Unicode dec":"129146","Unicode hex":"1F87A"},{"Typeface name":"Wingdings","Dingbat dec":"233","Dingbat hex":"E9","Unicode dec":"129145","Unicode hex":"1F879"},{"Typeface name":"Wingdings","Dingbat dec":"234","Dingbat hex":"EA","Unicode dec":"129147","Unicode hex":"1F87B"},{"Typeface name":"Wingdings","Dingbat dec":"235","Dingbat hex":"EB","Unicode dec":"129148","Unicode hex":"1F87C"},{"Typeface name":"Wingdings","Dingbat dec":"236","Dingbat hex":"EC","Unicode dec":"129149","Unicode hex":"1F87D"},{"Typeface name":"Wingdings","Dingbat dec":"237","Dingbat hex":"ED","Unicode dec":"129151","Unicode hex":"1F87F"},{"Typeface name":"Wingdings","Dingbat dec":"238","Dingbat hex":"EE","Unicode dec":"129150","Unicode hex":"1F87E"},{"Typeface name":"Wingdings","Dingbat dec":"239","Dingbat hex":"EF","Unicode dec":"8678","Unicode hex":"21E6"},{"Typeface name":"Wingdings","Dingbat dec":"240","Dingbat hex":"F0","Unicode dec":"8680","Unicode hex":"21E8"},{"Typeface name":"Wingdings","Dingbat dec":"241","Dingbat hex":"F1","Unicode dec":"8679","Unicode hex":"21E7"},{"Typeface name":"Wingdings","Dingbat dec":"242","Dingbat hex":"F2","Unicode dec":"8681","Unicode hex":"21E9"},{"Typeface name":"Wingdings","Dingbat dec":"243","Dingbat hex":"F3","Unicode dec":"11012","Unicode hex":"2B04"},{"Typeface name":"Wingdings","Dingbat dec":"244","Dingbat hex":"F4","Unicode dec":"8691","Unicode hex":"21F3"},{"Typeface name":"Wingdings","Dingbat dec":"245","Dingbat hex":"F5","Unicode dec":"11009","Unicode hex":"2B01"},{"Typeface name":"Wingdings","Dingbat dec":"246","Dingbat hex":"F6","Unicode dec":"11008","Unicode hex":"2B00"},{"Typeface name":"Wingdings","Dingbat dec":"247","Dingbat hex":"F7","Unicode dec":"11011","Unicode hex":"2B03"},{"Typeface name":"Wingdings","Dingbat dec":"248","Dingbat hex":"F8","Unicode dec":"11010","Unicode hex":"2B02"},{"Typeface name":"Wingdings","Dingbat dec":"249","Dingbat hex":"F9","Unicode dec":"129196","Unicode hex":"1F8AC"},{"Typeface name":"Wingdings","Dingbat dec":"250","Dingbat hex":"FA","Unicode dec":"129197","Unicode hex":"1F8AD"},{"Typeface name":"Wingdings","Dingbat dec":"251","Dingbat hex":"FB","Unicode dec":"128502","Unicode hex":"1F5F6"},{"Typeface name":"Wingdings","Dingbat dec":"252","Dingbat hex":"FC","Unicode dec":"10003","Unicode hex":"2713"},{"Typeface name":"Wingdings","Dingbat dec":"253","Dingbat hex":"FD","Unicode dec":"128503","Unicode hex":"1F5F7"},{"Typeface name":"Wingdings","Dingbat dec":"254","Dingbat hex":"FE","Unicode dec":"128505","Unicode hex":"1F5F9"},{"Typeface name":"Wingdings 2","Dingbat dec":"32","Dingbat hex":"20","Unicode dec":"32","Unicode hex":"20"},{"Typeface name":"Wingdings 2","Dingbat dec":"33","Dingbat hex":"21","Unicode dec":"128394","Unicode hex":"1F58A"},{"Typeface name":"Wingdings 2","Dingbat dec":"34","Dingbat hex":"22","Unicode dec":"128395","Unicode hex":"1F58B"},{"Typeface name":"Wingdings 2","Dingbat dec":"35","Dingbat hex":"23","Unicode dec":"128396","Unicode hex":"1F58C"},{"Typeface name":"Wingdings 2","Dingbat dec":"36","Dingbat hex":"24","Unicode dec":"128397","Unicode hex":"1F58D"},{"Typeface name":"Wingdings 2","Dingbat dec":"37","Dingbat hex":"25","Unicode dec":"9988","Unicode hex":"2704"},{"Typeface name":"Wingdings 2","Dingbat dec":"38","Dingbat hex":"26","Unicode dec":"9984","Unicode hex":"2700"},{"Typeface name":"Wingdings 2","Dingbat dec":"39","Dingbat hex":"27","Unicode dec":"128382","Unicode hex":"1F57E"},{"Typeface name":"Wingdings 2","Dingbat dec":"40","Dingbat hex":"28","Unicode dec":"128381","Unicode hex":"1F57D"},{"Typeface name":"Wingdings 2","Dingbat dec":"41","Dingbat hex":"29","Unicode dec":"128453","Unicode hex":"1F5C5"},{"Typeface name":"Wingdings 2","Dingbat dec":"42","Dingbat hex":"2A","Unicode dec":"128454","Unicode hex":"1F5C6"},{"Typeface name":"Wingdings 2","Dingbat dec":"43","Dingbat hex":"2B","Unicode dec":"128455","Unicode hex":"1F5C7"},{"Typeface name":"Wingdings 2","Dingbat dec":"44","Dingbat hex":"2C","Unicode dec":"128456","Unicode hex":"1F5C8"},{"Typeface name":"Wingdings 2","Dingbat dec":"45","Dingbat hex":"2D","Unicode dec":"128457","Unicode hex":"1F5C9"},{"Typeface name":"Wingdings 2","Dingbat dec":"46","Dingbat hex":"2E","Unicode dec":"128458","Unicode hex":"1F5CA"},{"Typeface name":"Wingdings 2","Dingbat dec":"47","Dingbat hex":"2F","Unicode dec":"128459","Unicode hex":"1F5CB"},{"Typeface name":"Wingdings 2","Dingbat dec":"48","Dingbat hex":"30","Unicode dec":"128460","Unicode hex":"1F5CC"},{"Typeface name":"Wingdings 2","Dingbat dec":"49","Dingbat hex":"31","Unicode dec":"128461","Unicode hex":"1F5CD"},{"Typeface name":"Wingdings 2","Dingbat dec":"50","Dingbat hex":"32","Unicode dec":"128203","Unicode hex":"1F4CB"},{"Typeface name":"Wingdings 2","Dingbat dec":"51","Dingbat hex":"33","Unicode dec":"128465","Unicode hex":"1F5D1"},{"Typeface name":"Wingdings 2","Dingbat dec":"52","Dingbat hex":"34","Unicode dec":"128468","Unicode hex":"1F5D4"},{"Typeface name":"Wingdings 2","Dingbat dec":"53","Dingbat hex":"35","Unicode dec":"128437","Unicode hex":"1F5B5"},{"Typeface name":"Wingdings 2","Dingbat dec":"54","Dingbat hex":"36","Unicode dec":"128438","Unicode hex":"1F5B6"},{"Typeface name":"Wingdings 2","Dingbat dec":"55","Dingbat hex":"37","Unicode dec":"128439","Unicode hex":"1F5B7"},{"Typeface name":"Wingdings 2","Dingbat dec":"56","Dingbat hex":"38","Unicode dec":"128440","Unicode hex":"1F5B8"},{"Typeface name":"Wingdings 2","Dingbat dec":"57","Dingbat hex":"39","Unicode dec":"128429","Unicode hex":"1F5AD"},{"Typeface name":"Wingdings 2","Dingbat dec":"58","Dingbat hex":"3A","Unicode dec":"128431","Unicode hex":"1F5AF"},{"Typeface name":"Wingdings 2","Dingbat dec":"59","Dingbat hex":"3B","Unicode dec":"128433","Unicode hex":"1F5B1"},{"Typeface name":"Wingdings 2","Dingbat dec":"60","Dingbat hex":"3C","Unicode dec":"128402","Unicode hex":"1F592"},{"Typeface name":"Wingdings 2","Dingbat dec":"61","Dingbat hex":"3D","Unicode dec":"128403","Unicode hex":"1F593"},{"Typeface name":"Wingdings 2","Dingbat dec":"62","Dingbat hex":"3E","Unicode dec":"128408","Unicode hex":"1F598"},{"Typeface name":"Wingdings 2","Dingbat dec":"63","Dingbat hex":"3F","Unicode dec":"128409","Unicode hex":"1F599"},{"Typeface name":"Wingdings 2","Dingbat dec":"64","Dingbat hex":"40","Unicode dec":"128410","Unicode hex":"1F59A"},{"Typeface name":"Wingdings 2","Dingbat dec":"65","Dingbat hex":"41","Unicode dec":"128411","Unicode hex":"1F59B"},{"Typeface name":"Wingdings 2","Dingbat dec":"66","Dingbat hex":"42","Unicode dec":"128072","Unicode hex":"1F448"},{"Typeface name":"Wingdings 2","Dingbat dec":"67","Dingbat hex":"43","Unicode dec":"128073","Unicode hex":"1F449"},{"Typeface name":"Wingdings 2","Dingbat dec":"68","Dingbat hex":"44","Unicode dec":"128412","Unicode hex":"1F59C"},{"Typeface name":"Wingdings 2","Dingbat dec":"69","Dingbat hex":"45","Unicode dec":"128413","Unicode hex":"1F59D"},{"Typeface name":"Wingdings 2","Dingbat dec":"70","Dingbat hex":"46","Unicode dec":"128414","Unicode hex":"1F59E"},{"Typeface name":"Wingdings 2","Dingbat dec":"71","Dingbat hex":"47","Unicode dec":"128415","Unicode hex":"1F59F"},{"Typeface name":"Wingdings 2","Dingbat dec":"72","Dingbat hex":"48","Unicode dec":"128416","Unicode hex":"1F5A0"},{"Typeface name":"Wingdings 2","Dingbat dec":"73","Dingbat hex":"49","Unicode dec":"128417","Unicode hex":"1F5A1"},{"Typeface name":"Wingdings 2","Dingbat dec":"74","Dingbat hex":"4A","Unicode dec":"128070","Unicode hex":"1F446"},{"Typeface name":"Wingdings 2","Dingbat dec":"75","Dingbat hex":"4B","Unicode dec":"128071","Unicode hex":"1F447"},{"Typeface name":"Wingdings 2","Dingbat dec":"76","Dingbat hex":"4C","Unicode dec":"128418","Unicode hex":"1F5A2"},{"Typeface name":"Wingdings 2","Dingbat dec":"77","Dingbat hex":"4D","Unicode dec":"128419","Unicode hex":"1F5A3"},{"Typeface name":"Wingdings 2","Dingbat dec":"78","Dingbat hex":"4E","Unicode dec":"128401","Unicode hex":"1F591"},{"Typeface name":"Wingdings 2","Dingbat dec":"79","Dingbat hex":"4F","Unicode dec":"128500","Unicode hex":"1F5F4"},{"Typeface name":"Wingdings 2","Dingbat dec":"80","Dingbat hex":"50","Unicode dec":"128504","Unicode hex":"1F5F8"},{"Typeface name":"Wingdings 2","Dingbat dec":"81","Dingbat hex":"51","Unicode dec":"128501","Unicode hex":"1F5F5"},{"Typeface name":"Wingdings 2","Dingbat dec":"82","Dingbat hex":"52","Unicode dec":"9745","Unicode hex":"2611"},{"Typeface name":"Wingdings 2","Dingbat dec":"83","Dingbat hex":"53","Unicode dec":"11197","Unicode hex":"2BBD"},{"Typeface name":"Wingdings 2","Dingbat dec":"84","Dingbat hex":"54","Unicode dec":"9746","Unicode hex":"2612"},{"Typeface name":"Wingdings 2","Dingbat dec":"85","Dingbat hex":"55","Unicode dec":"11198","Unicode hex":"2BBE"},{"Typeface name":"Wingdings 2","Dingbat dec":"86","Dingbat hex":"56","Unicode dec":"11199","Unicode hex":"2BBF"},{"Typeface name":"Wingdings 2","Dingbat dec":"87","Dingbat hex":"57","Unicode dec":"128711","Unicode hex":"1F6C7"},{"Typeface name":"Wingdings 2","Dingbat dec":"88","Dingbat hex":"58","Unicode dec":"10680","Unicode hex":"29B8"},{"Typeface name":"Wingdings 2","Dingbat dec":"89","Dingbat hex":"59","Unicode dec":"128625","Unicode hex":"1F671"},{"Typeface name":"Wingdings 2","Dingbat dec":"90","Dingbat hex":"5A","Unicode dec":"128628","Unicode hex":"1F674"},{"Typeface name":"Wingdings 2","Dingbat dec":"91","Dingbat hex":"5B","Unicode dec":"128626","Unicode hex":"1F672"},{"Typeface name":"Wingdings 2","Dingbat dec":"92","Dingbat hex":"5C","Unicode dec":"128627","Unicode hex":"1F673"},{"Typeface name":"Wingdings 2","Dingbat dec":"93","Dingbat hex":"5D","Unicode dec":"8253","Unicode hex":"203D"},{"Typeface name":"Wingdings 2","Dingbat dec":"94","Dingbat hex":"5E","Unicode dec":"128633","Unicode hex":"1F679"},{"Typeface name":"Wingdings 2","Dingbat dec":"95","Dingbat hex":"5F","Unicode dec":"128634","Unicode hex":"1F67A"},{"Typeface name":"Wingdings 2","Dingbat dec":"96","Dingbat hex":"60","Unicode dec":"128635","Unicode hex":"1F67B"},{"Typeface name":"Wingdings 2","Dingbat dec":"97","Dingbat hex":"61","Unicode dec":"128614","Unicode hex":"1F666"},{"Typeface name":"Wingdings 2","Dingbat dec":"98","Dingbat hex":"62","Unicode dec":"128612","Unicode hex":"1F664"},{"Typeface name":"Wingdings 2","Dingbat dec":"99","Dingbat hex":"63","Unicode dec":"128613","Unicode hex":"1F665"},{"Typeface name":"Wingdings 2","Dingbat dec":"100","Dingbat hex":"64","Unicode dec":"128615","Unicode hex":"1F667"},{"Typeface name":"Wingdings 2","Dingbat dec":"101","Dingbat hex":"65","Unicode dec":"128602","Unicode hex":"1F65A"},{"Typeface name":"Wingdings 2","Dingbat dec":"102","Dingbat hex":"66","Unicode dec":"128600","Unicode hex":"1F658"},{"Typeface name":"Wingdings 2","Dingbat dec":"103","Dingbat hex":"67","Unicode dec":"128601","Unicode hex":"1F659"},{"Typeface name":"Wingdings 2","Dingbat dec":"104","Dingbat hex":"68","Unicode dec":"128603","Unicode hex":"1F65B"},{"Typeface name":"Wingdings 2","Dingbat dec":"105","Dingbat hex":"69","Unicode dec":"9450","Unicode hex":"24EA"},{"Typeface name":"Wingdings 2","Dingbat dec":"106","Dingbat hex":"6A","Unicode dec":"9312","Unicode hex":"2460"},{"Typeface name":"Wingdings 2","Dingbat dec":"107","Dingbat hex":"6B","Unicode dec":"9313","Unicode hex":"2461"},{"Typeface name":"Wingdings 2","Dingbat dec":"108","Dingbat hex":"6C","Unicode dec":"9314","Unicode hex":"2462"},{"Typeface name":"Wingdings 2","Dingbat dec":"109","Dingbat hex":"6D","Unicode dec":"9315","Unicode hex":"2463"},{"Typeface name":"Wingdings 2","Dingbat dec":"110","Dingbat hex":"6E","Unicode dec":"9316","Unicode hex":"2464"},{"Typeface name":"Wingdings 2","Dingbat dec":"111","Dingbat hex":"6F","Unicode dec":"9317","Unicode hex":"2465"},{"Typeface name":"Wingdings 2","Dingbat dec":"112","Dingbat hex":"70","Unicode dec":"9318","Unicode hex":"2466"},{"Typeface name":"Wingdings 2","Dingbat dec":"113","Dingbat hex":"71","Unicode dec":"9319","Unicode hex":"2467"},{"Typeface name":"Wingdings 2","Dingbat dec":"114","Dingbat hex":"72","Unicode dec":"9320","Unicode hex":"2468"},{"Typeface name":"Wingdings 2","Dingbat dec":"115","Dingbat hex":"73","Unicode dec":"9321","Unicode hex":"2469"},{"Typeface name":"Wingdings 2","Dingbat dec":"116","Dingbat hex":"74","Unicode dec":"9471","Unicode hex":"24FF"},{"Typeface name":"Wingdings 2","Dingbat dec":"117","Dingbat hex":"75","Unicode dec":"10102","Unicode hex":"2776"},{"Typeface name":"Wingdings 2","Dingbat dec":"118","Dingbat hex":"76","Unicode dec":"10103","Unicode hex":"2777"},{"Typeface name":"Wingdings 2","Dingbat dec":"119","Dingbat hex":"77","Unicode dec":"10104","Unicode hex":"2778"},{"Typeface name":"Wingdings 2","Dingbat dec":"120","Dingbat hex":"78","Unicode dec":"10105","Unicode hex":"2779"},{"Typeface name":"Wingdings 2","Dingbat dec":"121","Dingbat hex":"79","Unicode dec":"10106","Unicode hex":"277A"},{"Typeface name":"Wingdings 2","Dingbat dec":"122","Dingbat hex":"7A","Unicode dec":"10107","Unicode hex":"277B"},{"Typeface name":"Wingdings 2","Dingbat dec":"123","Dingbat hex":"7B","Unicode dec":"10108","Unicode hex":"277C"},{"Typeface name":"Wingdings 2","Dingbat dec":"124","Dingbat hex":"7C","Unicode dec":"10109","Unicode hex":"277D"},{"Typeface name":"Wingdings 2","Dingbat dec":"125","Dingbat hex":"7D","Unicode dec":"10110","Unicode hex":"277E"},{"Typeface name":"Wingdings 2","Dingbat dec":"126","Dingbat hex":"7E","Unicode dec":"10111","Unicode hex":"277F"},{"Typeface name":"Wingdings 2","Dingbat dec":"128","Dingbat hex":"80","Unicode dec":"9737","Unicode hex":"2609"},{"Typeface name":"Wingdings 2","Dingbat dec":"129","Dingbat hex":"81","Unicode dec":"127765","Unicode hex":"1F315"},{"Typeface name":"Wingdings 2","Dingbat dec":"130","Dingbat hex":"82","Unicode dec":"9789","Unicode hex":"263D"},{"Typeface name":"Wingdings 2","Dingbat dec":"131","Dingbat hex":"83","Unicode dec":"9790","Unicode hex":"263E"},{"Typeface name":"Wingdings 2","Dingbat dec":"132","Dingbat hex":"84","Unicode dec":"11839","Unicode hex":"2E3F"},{"Typeface name":"Wingdings 2","Dingbat dec":"133","Dingbat hex":"85","Unicode dec":"10013","Unicode hex":"271D"},{"Typeface name":"Wingdings 2","Dingbat dec":"134","Dingbat hex":"86","Unicode dec":"128327","Unicode hex":"1F547"},{"Typeface name":"Wingdings 2","Dingbat dec":"135","Dingbat hex":"87","Unicode dec":"128348","Unicode hex":"1F55C"},{"Typeface name":"Wingdings 2","Dingbat dec":"136","Dingbat hex":"88","Unicode dec":"128349","Unicode hex":"1F55D"},{"Typeface name":"Wingdings 2","Dingbat dec":"137","Dingbat hex":"89","Unicode dec":"128350","Unicode hex":"1F55E"},{"Typeface name":"Wingdings 2","Dingbat dec":"138","Dingbat hex":"8A","Unicode dec":"128351","Unicode hex":"1F55F"},{"Typeface name":"Wingdings 2","Dingbat dec":"139","Dingbat hex":"8B","Unicode dec":"128352","Unicode hex":"1F560"},{"Typeface name":"Wingdings 2","Dingbat dec":"140","Dingbat hex":"8C","Unicode dec":"128353","Unicode hex":"1F561"},{"Typeface name":"Wingdings 2","Dingbat dec":"141","Dingbat hex":"8D","Unicode dec":"128354","Unicode hex":"1F562"},{"Typeface name":"Wingdings 2","Dingbat dec":"142","Dingbat hex":"8E","Unicode dec":"128355","Unicode hex":"1F563"},{"Typeface name":"Wingdings 2","Dingbat dec":"143","Dingbat hex":"8F","Unicode dec":"128356","Unicode hex":"1F564"},{"Typeface name":"Wingdings 2","Dingbat dec":"144","Dingbat hex":"90","Unicode dec":"128357","Unicode hex":"1F565"},{"Typeface name":"Wingdings 2","Dingbat dec":"145","Dingbat hex":"91","Unicode dec":"128358","Unicode hex":"1F566"},{"Typeface name":"Wingdings 2","Dingbat dec":"146","Dingbat hex":"92","Unicode dec":"128359","Unicode hex":"1F567"},{"Typeface name":"Wingdings 2","Dingbat dec":"147","Dingbat hex":"93","Unicode dec":"128616","Unicode hex":"1F668"},{"Typeface name":"Wingdings 2","Dingbat dec":"148","Dingbat hex":"94","Unicode dec":"128617","Unicode hex":"1F669"},{"Typeface name":"Wingdings 2","Dingbat dec":"149","Dingbat hex":"95","Unicode dec":"8901","Unicode hex":"22C5"},{"Typeface name":"Wingdings 2","Dingbat dec":"150","Dingbat hex":"96","Unicode dec":"128900","Unicode hex":"1F784"},{"Typeface name":"Wingdings 2","Dingbat dec":"151","Dingbat hex":"97","Unicode dec":"10625","Unicode hex":"2981"},{"Typeface name":"Wingdings 2","Dingbat dec":"152","Dingbat hex":"98","Unicode dec":"9679","Unicode hex":"25CF"},{"Typeface name":"Wingdings 2","Dingbat dec":"153","Dingbat hex":"99","Unicode dec":"9675","Unicode hex":"25CB"},{"Typeface name":"Wingdings 2","Dingbat dec":"154","Dingbat hex":"9A","Unicode dec":"128901","Unicode hex":"1F785"},{"Typeface name":"Wingdings 2","Dingbat dec":"155","Dingbat hex":"9B","Unicode dec":"128903","Unicode hex":"1F787"},{"Typeface name":"Wingdings 2","Dingbat dec":"156","Dingbat hex":"9C","Unicode dec":"128905","Unicode hex":"1F789"},{"Typeface name":"Wingdings 2","Dingbat dec":"157","Dingbat hex":"9D","Unicode dec":"8857","Unicode hex":"2299"},{"Typeface name":"Wingdings 2","Dingbat dec":"158","Dingbat hex":"9E","Unicode dec":"10687","Unicode hex":"29BF"},{"Typeface name":"Wingdings 2","Dingbat dec":"159","Dingbat hex":"9F","Unicode dec":"128908","Unicode hex":"1F78C"},{"Typeface name":"Wingdings 2","Dingbat dec":"160","Dingbat hex":"A0","Unicode dec":"128909","Unicode hex":"1F78D"},{"Typeface name":"Wingdings 2","Dingbat dec":"161","Dingbat hex":"A1","Unicode dec":"9726","Unicode hex":"25FE"},{"Typeface name":"Wingdings 2","Dingbat dec":"162","Dingbat hex":"A2","Unicode dec":"9632","Unicode hex":"25A0"},{"Typeface name":"Wingdings 2","Dingbat dec":"163","Dingbat hex":"A3","Unicode dec":"9633","Unicode hex":"25A1"},{"Typeface name":"Wingdings 2","Dingbat dec":"164","Dingbat hex":"A4","Unicode dec":"128913","Unicode hex":"1F791"},{"Typeface name":"Wingdings 2","Dingbat dec":"165","Dingbat hex":"A5","Unicode dec":"128914","Unicode hex":"1F792"},{"Typeface name":"Wingdings 2","Dingbat dec":"166","Dingbat hex":"A6","Unicode dec":"128915","Unicode hex":"1F793"},{"Typeface name":"Wingdings 2","Dingbat dec":"167","Dingbat hex":"A7","Unicode dec":"128916","Unicode hex":"1F794"},{"Typeface name":"Wingdings 2","Dingbat dec":"168","Dingbat hex":"A8","Unicode dec":"9635","Unicode hex":"25A3"},{"Typeface name":"Wingdings 2","Dingbat dec":"169","Dingbat hex":"A9","Unicode dec":"128917","Unicode hex":"1F795"},{"Typeface name":"Wingdings 2","Dingbat dec":"170","Dingbat hex":"AA","Unicode dec":"128918","Unicode hex":"1F796"},{"Typeface name":"Wingdings 2","Dingbat dec":"171","Dingbat hex":"AB","Unicode dec":"128919","Unicode hex":"1F797"},{"Typeface name":"Wingdings 2","Dingbat dec":"172","Dingbat hex":"AC","Unicode dec":"128920","Unicode hex":"1F798"},{"Typeface name":"Wingdings 2","Dingbat dec":"173","Dingbat hex":"AD","Unicode dec":"11049","Unicode hex":"2B29"},{"Typeface name":"Wingdings 2","Dingbat dec":"174","Dingbat hex":"AE","Unicode dec":"11045","Unicode hex":"2B25"},{"Typeface name":"Wingdings 2","Dingbat dec":"175","Dingbat hex":"AF","Unicode dec":"9671","Unicode hex":"25C7"},{"Typeface name":"Wingdings 2","Dingbat dec":"176","Dingbat hex":"B0","Unicode dec":"128922","Unicode hex":"1F79A"},{"Typeface name":"Wingdings 2","Dingbat dec":"177","Dingbat hex":"B1","Unicode dec":"9672","Unicode hex":"25C8"},{"Typeface name":"Wingdings 2","Dingbat dec":"178","Dingbat hex":"B2","Unicode dec":"128923","Unicode hex":"1F79B"},{"Typeface name":"Wingdings 2","Dingbat dec":"179","Dingbat hex":"B3","Unicode dec":"128924","Unicode hex":"1F79C"},{"Typeface name":"Wingdings 2","Dingbat dec":"180","Dingbat hex":"B4","Unicode dec":"128925","Unicode hex":"1F79D"},{"Typeface name":"Wingdings 2","Dingbat dec":"181","Dingbat hex":"B5","Unicode dec":"128926","Unicode hex":"1F79E"},{"Typeface name":"Wingdings 2","Dingbat dec":"182","Dingbat hex":"B6","Unicode dec":"11050","Unicode hex":"2B2A"},{"Typeface name":"Wingdings 2","Dingbat dec":"183","Dingbat hex":"B7","Unicode dec":"11047","Unicode hex":"2B27"},{"Typeface name":"Wingdings 2","Dingbat dec":"184","Dingbat hex":"B8","Unicode dec":"9674","Unicode hex":"25CA"},{"Typeface name":"Wingdings 2","Dingbat dec":"185","Dingbat hex":"B9","Unicode dec":"128928","Unicode hex":"1F7A0"},{"Typeface name":"Wingdings 2","Dingbat dec":"186","Dingbat hex":"BA","Unicode dec":"9686","Unicode hex":"25D6"},{"Typeface name":"Wingdings 2","Dingbat dec":"187","Dingbat hex":"BB","Unicode dec":"9687","Unicode hex":"25D7"},{"Typeface name":"Wingdings 2","Dingbat dec":"188","Dingbat hex":"BC","Unicode dec":"11210","Unicode hex":"2BCA"},{"Typeface name":"Wingdings 2","Dingbat dec":"189","Dingbat hex":"BD","Unicode dec":"11211","Unicode hex":"2BCB"},{"Typeface name":"Wingdings 2","Dingbat dec":"190","Dingbat hex":"BE","Unicode dec":"11200","Unicode hex":"2BC0"},{"Typeface name":"Wingdings 2","Dingbat dec":"191","Dingbat hex":"BF","Unicode dec":"11201","Unicode hex":"2BC1"},{"Typeface name":"Wingdings 2","Dingbat dec":"192","Dingbat hex":"C0","Unicode dec":"11039","Unicode hex":"2B1F"},{"Typeface name":"Wingdings 2","Dingbat dec":"193","Dingbat hex":"C1","Unicode dec":"11202","Unicode hex":"2BC2"},{"Typeface name":"Wingdings 2","Dingbat dec":"194","Dingbat hex":"C2","Unicode dec":"11043","Unicode hex":"2B23"},{"Typeface name":"Wingdings 2","Dingbat dec":"195","Dingbat hex":"C3","Unicode dec":"11042","Unicode hex":"2B22"},{"Typeface name":"Wingdings 2","Dingbat dec":"196","Dingbat hex":"C4","Unicode dec":"11203","Unicode hex":"2BC3"},{"Typeface name":"Wingdings 2","Dingbat dec":"197","Dingbat hex":"C5","Unicode dec":"11204","Unicode hex":"2BC4"},{"Typeface name":"Wingdings 2","Dingbat dec":"198","Dingbat hex":"C6","Unicode dec":"128929","Unicode hex":"1F7A1"},{"Typeface name":"Wingdings 2","Dingbat dec":"199","Dingbat hex":"C7","Unicode dec":"128930","Unicode hex":"1F7A2"},{"Typeface name":"Wingdings 2","Dingbat dec":"200","Dingbat hex":"C8","Unicode dec":"128931","Unicode hex":"1F7A3"},{"Typeface name":"Wingdings 2","Dingbat dec":"201","Dingbat hex":"C9","Unicode dec":"128932","Unicode hex":"1F7A4"},{"Typeface name":"Wingdings 2","Dingbat dec":"202","Dingbat hex":"CA","Unicode dec":"128933","Unicode hex":"1F7A5"},{"Typeface name":"Wingdings 2","Dingbat dec":"203","Dingbat hex":"CB","Unicode dec":"128934","Unicode hex":"1F7A6"},{"Typeface name":"Wingdings 2","Dingbat dec":"204","Dingbat hex":"CC","Unicode dec":"128935","Unicode hex":"1F7A7"},{"Typeface name":"Wingdings 2","Dingbat dec":"205","Dingbat hex":"CD","Unicode dec":"128936","Unicode hex":"1F7A8"},{"Typeface name":"Wingdings 2","Dingbat dec":"206","Dingbat hex":"CE","Unicode dec":"128937","Unicode hex":"1F7A9"},{"Typeface name":"Wingdings 2","Dingbat dec":"207","Dingbat hex":"CF","Unicode dec":"128938","Unicode hex":"1F7AA"},{"Typeface name":"Wingdings 2","Dingbat dec":"208","Dingbat hex":"D0","Unicode dec":"128939","Unicode hex":"1F7AB"},{"Typeface name":"Wingdings 2","Dingbat dec":"209","Dingbat hex":"D1","Unicode dec":"128940","Unicode hex":"1F7AC"},{"Typeface name":"Wingdings 2","Dingbat dec":"210","Dingbat hex":"D2","Unicode dec":"128941","Unicode hex":"1F7AD"},{"Typeface name":"Wingdings 2","Dingbat dec":"211","Dingbat hex":"D3","Unicode dec":"128942","Unicode hex":"1F7AE"},{"Typeface name":"Wingdings 2","Dingbat dec":"212","Dingbat hex":"D4","Unicode dec":"128943","Unicode hex":"1F7AF"},{"Typeface name":"Wingdings 2","Dingbat dec":"213","Dingbat hex":"D5","Unicode dec":"128944","Unicode hex":"1F7B0"},{"Typeface name":"Wingdings 2","Dingbat dec":"214","Dingbat hex":"D6","Unicode dec":"128945","Unicode hex":"1F7B1"},{"Typeface name":"Wingdings 2","Dingbat dec":"215","Dingbat hex":"D7","Unicode dec":"128946","Unicode hex":"1F7B2"},{"Typeface name":"Wingdings 2","Dingbat dec":"216","Dingbat hex":"D8","Unicode dec":"128947","Unicode hex":"1F7B3"},{"Typeface name":"Wingdings 2","Dingbat dec":"217","Dingbat hex":"D9","Unicode dec":"128948","Unicode hex":"1F7B4"},{"Typeface name":"Wingdings 2","Dingbat dec":"218","Dingbat hex":"DA","Unicode dec":"128949","Unicode hex":"1F7B5"},{"Typeface name":"Wingdings 2","Dingbat dec":"219","Dingbat hex":"DB","Unicode dec":"128950","Unicode hex":"1F7B6"},{"Typeface name":"Wingdings 2","Dingbat dec":"220","Dingbat hex":"DC","Unicode dec":"128951","Unicode hex":"1F7B7"},{"Typeface name":"Wingdings 2","Dingbat dec":"221","Dingbat hex":"DD","Unicode dec":"128952","Unicode hex":"1F7B8"},{"Typeface name":"Wingdings 2","Dingbat dec":"222","Dingbat hex":"DE","Unicode dec":"128953","Unicode hex":"1F7B9"},{"Typeface name":"Wingdings 2","Dingbat dec":"223","Dingbat hex":"DF","Unicode dec":"128954","Unicode hex":"1F7BA"},{"Typeface name":"Wingdings 2","Dingbat dec":"224","Dingbat hex":"E0","Unicode dec":"128955","Unicode hex":"1F7BB"},{"Typeface name":"Wingdings 2","Dingbat dec":"225","Dingbat hex":"E1","Unicode dec":"128956","Unicode hex":"1F7BC"},{"Typeface name":"Wingdings 2","Dingbat dec":"226","Dingbat hex":"E2","Unicode dec":"128957","Unicode hex":"1F7BD"},{"Typeface name":"Wingdings 2","Dingbat dec":"227","Dingbat hex":"E3","Unicode dec":"128958","Unicode hex":"1F7BE"},{"Typeface name":"Wingdings 2","Dingbat dec":"228","Dingbat hex":"E4","Unicode dec":"128959","Unicode hex":"1F7BF"},{"Typeface name":"Wingdings 2","Dingbat dec":"229","Dingbat hex":"E5","Unicode dec":"128960","Unicode hex":"1F7C0"},{"Typeface name":"Wingdings 2","Dingbat dec":"230","Dingbat hex":"E6","Unicode dec":"128962","Unicode hex":"1F7C2"},{"Typeface name":"Wingdings 2","Dingbat dec":"231","Dingbat hex":"E7","Unicode dec":"128964","Unicode hex":"1F7C4"},{"Typeface name":"Wingdings 2","Dingbat dec":"232","Dingbat hex":"E8","Unicode dec":"128966","Unicode hex":"1F7C6"},{"Typeface name":"Wingdings 2","Dingbat dec":"233","Dingbat hex":"E9","Unicode dec":"128969","Unicode hex":"1F7C9"},{"Typeface name":"Wingdings 2","Dingbat dec":"234","Dingbat hex":"EA","Unicode dec":"128970","Unicode hex":"1F7CA"},{"Typeface name":"Wingdings 2","Dingbat dec":"235","Dingbat hex":"EB","Unicode dec":"10038","Unicode hex":"2736"},{"Typeface name":"Wingdings 2","Dingbat dec":"236","Dingbat hex":"EC","Unicode dec":"128972","Unicode hex":"1F7CC"},{"Typeface name":"Wingdings 2","Dingbat dec":"237","Dingbat hex":"ED","Unicode dec":"128974","Unicode hex":"1F7CE"},{"Typeface name":"Wingdings 2","Dingbat dec":"238","Dingbat hex":"EE","Unicode dec":"128976","Unicode hex":"1F7D0"},{"Typeface name":"Wingdings 2","Dingbat dec":"239","Dingbat hex":"EF","Unicode dec":"128978","Unicode hex":"1F7D2"},{"Typeface name":"Wingdings 2","Dingbat dec":"240","Dingbat hex":"F0","Unicode dec":"10041","Unicode hex":"2739"},{"Typeface name":"Wingdings 2","Dingbat dec":"241","Dingbat hex":"F1","Unicode dec":"128963","Unicode hex":"1F7C3"},{"Typeface name":"Wingdings 2","Dingbat dec":"242","Dingbat hex":"F2","Unicode dec":"128967","Unicode hex":"1F7C7"},{"Typeface name":"Wingdings 2","Dingbat dec":"243","Dingbat hex":"F3","Unicode dec":"10031","Unicode hex":"272F"},{"Typeface name":"Wingdings 2","Dingbat dec":"244","Dingbat hex":"F4","Unicode dec":"128973","Unicode hex":"1F7CD"},{"Typeface name":"Wingdings 2","Dingbat dec":"245","Dingbat hex":"F5","Unicode dec":"128980","Unicode hex":"1F7D4"},{"Typeface name":"Wingdings 2","Dingbat dec":"246","Dingbat hex":"F6","Unicode dec":"11212","Unicode hex":"2BCC"},{"Typeface name":"Wingdings 2","Dingbat dec":"247","Dingbat hex":"F7","Unicode dec":"11213","Unicode hex":"2BCD"},{"Typeface name":"Wingdings 2","Dingbat dec":"248","Dingbat hex":"F8","Unicode dec":"8251","Unicode hex":"203B"},{"Typeface name":"Wingdings 2","Dingbat dec":"249","Dingbat hex":"F9","Unicode dec":"8258","Unicode hex":"2042"},{"Typeface name":"Wingdings 3","Dingbat dec":"32","Dingbat hex":"20","Unicode dec":"32","Unicode hex":"20"},{"Typeface name":"Wingdings 3","Dingbat dec":"33","Dingbat hex":"21","Unicode dec":"11104","Unicode hex":"2B60"},{"Typeface name":"Wingdings 3","Dingbat dec":"34","Dingbat hex":"22","Unicode dec":"11106","Unicode hex":"2B62"},{"Typeface name":"Wingdings 3","Dingbat dec":"35","Dingbat hex":"23","Unicode dec":"11105","Unicode hex":"2B61"},{"Typeface name":"Wingdings 3","Dingbat dec":"36","Dingbat hex":"24","Unicode dec":"11107","Unicode hex":"2B63"},{"Typeface name":"Wingdings 3","Dingbat dec":"37","Dingbat hex":"25","Unicode dec":"11110","Unicode hex":"2B66"},{"Typeface name":"Wingdings 3","Dingbat dec":"38","Dingbat hex":"26","Unicode dec":"11111","Unicode hex":"2B67"},{"Typeface name":"Wingdings 3","Dingbat dec":"39","Dingbat hex":"27","Unicode dec":"11113","Unicode hex":"2B69"},{"Typeface name":"Wingdings 3","Dingbat dec":"40","Dingbat hex":"28","Unicode dec":"11112","Unicode hex":"2B68"},{"Typeface name":"Wingdings 3","Dingbat dec":"41","Dingbat hex":"29","Unicode dec":"11120","Unicode hex":"2B70"},{"Typeface name":"Wingdings 3","Dingbat dec":"42","Dingbat hex":"2A","Unicode dec":"11122","Unicode hex":"2B72"},{"Typeface name":"Wingdings 3","Dingbat dec":"43","Dingbat hex":"2B","Unicode dec":"11121","Unicode hex":"2B71"},{"Typeface name":"Wingdings 3","Dingbat dec":"44","Dingbat hex":"2C","Unicode dec":"11123","Unicode hex":"2B73"},{"Typeface name":"Wingdings 3","Dingbat dec":"45","Dingbat hex":"2D","Unicode dec":"11126","Unicode hex":"2B76"},{"Typeface name":"Wingdings 3","Dingbat dec":"46","Dingbat hex":"2E","Unicode dec":"11128","Unicode hex":"2B78"},{"Typeface name":"Wingdings 3","Dingbat dec":"47","Dingbat hex":"2F","Unicode dec":"11131","Unicode hex":"2B7B"},{"Typeface name":"Wingdings 3","Dingbat dec":"48","Dingbat hex":"30","Unicode dec":"11133","Unicode hex":"2B7D"},{"Typeface name":"Wingdings 3","Dingbat dec":"49","Dingbat hex":"31","Unicode dec":"11108","Unicode hex":"2B64"},{"Typeface name":"Wingdings 3","Dingbat dec":"50","Dingbat hex":"32","Unicode dec":"11109","Unicode hex":"2B65"},{"Typeface name":"Wingdings 3","Dingbat dec":"51","Dingbat hex":"33","Unicode dec":"11114","Unicode hex":"2B6A"},{"Typeface name":"Wingdings 3","Dingbat dec":"52","Dingbat hex":"34","Unicode dec":"11116","Unicode hex":"2B6C"},{"Typeface name":"Wingdings 3","Dingbat dec":"53","Dingbat hex":"35","Unicode dec":"11115","Unicode hex":"2B6B"},{"Typeface name":"Wingdings 3","Dingbat dec":"54","Dingbat hex":"36","Unicode dec":"11117","Unicode hex":"2B6D"},{"Typeface name":"Wingdings 3","Dingbat dec":"55","Dingbat hex":"37","Unicode dec":"11085","Unicode hex":"2B4D"},{"Typeface name":"Wingdings 3","Dingbat dec":"56","Dingbat hex":"38","Unicode dec":"11168","Unicode hex":"2BA0"},{"Typeface name":"Wingdings 3","Dingbat dec":"57","Dingbat hex":"39","Unicode dec":"11169","Unicode hex":"2BA1"},{"Typeface name":"Wingdings 3","Dingbat dec":"58","Dingbat hex":"3A","Unicode dec":"11170","Unicode hex":"2BA2"},{"Typeface name":"Wingdings 3","Dingbat dec":"59","Dingbat hex":"3B","Unicode dec":"11171","Unicode hex":"2BA3"},{"Typeface name":"Wingdings 3","Dingbat dec":"60","Dingbat hex":"3C","Unicode dec":"11172","Unicode hex":"2BA4"},{"Typeface name":"Wingdings 3","Dingbat dec":"61","Dingbat hex":"3D","Unicode dec":"11173","Unicode hex":"2BA5"},{"Typeface name":"Wingdings 3","Dingbat dec":"62","Dingbat hex":"3E","Unicode dec":"11174","Unicode hex":"2BA6"},{"Typeface name":"Wingdings 3","Dingbat dec":"63","Dingbat hex":"3F","Unicode dec":"11175","Unicode hex":"2BA7"},{"Typeface name":"Wingdings 3","Dingbat dec":"64","Dingbat hex":"40","Unicode dec":"11152","Unicode hex":"2B90"},{"Typeface name":"Wingdings 3","Dingbat dec":"65","Dingbat hex":"41","Unicode dec":"11153","Unicode hex":"2B91"},{"Typeface name":"Wingdings 3","Dingbat dec":"66","Dingbat hex":"42","Unicode dec":"11154","Unicode hex":"2B92"},{"Typeface name":"Wingdings 3","Dingbat dec":"67","Dingbat hex":"43","Unicode dec":"11155","Unicode hex":"2B93"},{"Typeface name":"Wingdings 3","Dingbat dec":"68","Dingbat hex":"44","Unicode dec":"11136","Unicode hex":"2B80"},{"Typeface name":"Wingdings 3","Dingbat dec":"69","Dingbat hex":"45","Unicode dec":"11139","Unicode hex":"2B83"},{"Typeface name":"Wingdings 3","Dingbat dec":"70","Dingbat hex":"46","Unicode dec":"11134","Unicode hex":"2B7E"},{"Typeface name":"Wingdings 3","Dingbat dec":"71","Dingbat hex":"47","Unicode dec":"11135","Unicode hex":"2B7F"},{"Typeface name":"Wingdings 3","Dingbat dec":"72","Dingbat hex":"48","Unicode dec":"11140","Unicode hex":"2B84"},{"Typeface name":"Wingdings 3","Dingbat dec":"73","Dingbat hex":"49","Unicode dec":"11142","Unicode hex":"2B86"},{"Typeface name":"Wingdings 3","Dingbat dec":"74","Dingbat hex":"4A","Unicode dec":"11141","Unicode hex":"2B85"},{"Typeface name":"Wingdings 3","Dingbat dec":"75","Dingbat hex":"4B","Unicode dec":"11143","Unicode hex":"2B87"},{"Typeface name":"Wingdings 3","Dingbat dec":"76","Dingbat hex":"4C","Unicode dec":"11151","Unicode hex":"2B8F"},{"Typeface name":"Wingdings 3","Dingbat dec":"77","Dingbat hex":"4D","Unicode dec":"11149","Unicode hex":"2B8D"},{"Typeface name":"Wingdings 3","Dingbat dec":"78","Dingbat hex":"4E","Unicode dec":"11150","Unicode hex":"2B8E"},{"Typeface name":"Wingdings 3","Dingbat dec":"79","Dingbat hex":"4F","Unicode dec":"11148","Unicode hex":"2B8C"},{"Typeface name":"Wingdings 3","Dingbat dec":"80","Dingbat hex":"50","Unicode dec":"11118","Unicode hex":"2B6E"},{"Typeface name":"Wingdings 3","Dingbat dec":"81","Dingbat hex":"51","Unicode dec":"11119","Unicode hex":"2B6F"},{"Typeface name":"Wingdings 3","Dingbat dec":"82","Dingbat hex":"52","Unicode dec":"9099","Unicode hex":"238B"},{"Typeface name":"Wingdings 3","Dingbat dec":"83","Dingbat hex":"53","Unicode dec":"8996","Unicode hex":"2324"},{"Typeface name":"Wingdings 3","Dingbat dec":"84","Dingbat hex":"54","Unicode dec":"8963","Unicode hex":"2303"},{"Typeface name":"Wingdings 3","Dingbat dec":"85","Dingbat hex":"55","Unicode dec":"8997","Unicode hex":"2325"},{"Typeface name":"Wingdings 3","Dingbat dec":"86","Dingbat hex":"56","Unicode dec":"9251","Unicode hex":"2423"},{"Typeface name":"Wingdings 3","Dingbat dec":"87","Dingbat hex":"57","Unicode dec":"9085","Unicode hex":"237D"},{"Typeface name":"Wingdings 3","Dingbat dec":"88","Dingbat hex":"58","Unicode dec":"8682","Unicode hex":"21EA"},{"Typeface name":"Wingdings 3","Dingbat dec":"89","Dingbat hex":"59","Unicode dec":"11192","Unicode hex":"2BB8"},{"Typeface name":"Wingdings 3","Dingbat dec":"90","Dingbat hex":"5A","Unicode dec":"129184","Unicode hex":"1F8A0"},{"Typeface name":"Wingdings 3","Dingbat dec":"91","Dingbat hex":"5B","Unicode dec":"129185","Unicode hex":"1F8A1"},{"Typeface name":"Wingdings 3","Dingbat dec":"92","Dingbat hex":"5C","Unicode dec":"129186","Unicode hex":"1F8A2"},{"Typeface name":"Wingdings 3","Dingbat dec":"93","Dingbat hex":"5D","Unicode dec":"129187","Unicode hex":"1F8A3"},{"Typeface name":"Wingdings 3","Dingbat dec":"94","Dingbat hex":"5E","Unicode dec":"129188","Unicode hex":"1F8A4"},{"Typeface name":"Wingdings 3","Dingbat dec":"95","Dingbat hex":"5F","Unicode dec":"129189","Unicode hex":"1F8A5"},{"Typeface name":"Wingdings 3","Dingbat dec":"96","Dingbat hex":"60","Unicode dec":"129190","Unicode hex":"1F8A6"},{"Typeface name":"Wingdings 3","Dingbat dec":"97","Dingbat hex":"61","Unicode dec":"129191","Unicode hex":"1F8A7"},{"Typeface name":"Wingdings 3","Dingbat dec":"98","Dingbat hex":"62","Unicode dec":"129192","Unicode hex":"1F8A8"},{"Typeface name":"Wingdings 3","Dingbat dec":"99","Dingbat hex":"63","Unicode dec":"129193","Unicode hex":"1F8A9"},{"Typeface name":"Wingdings 3","Dingbat dec":"100","Dingbat hex":"64","Unicode dec":"129194","Unicode hex":"1F8AA"},{"Typeface name":"Wingdings 3","Dingbat dec":"101","Dingbat hex":"65","Unicode dec":"129195","Unicode hex":"1F8AB"},{"Typeface name":"Wingdings 3","Dingbat dec":"102","Dingbat hex":"66","Unicode dec":"129104","Unicode hex":"1F850"},{"Typeface name":"Wingdings 3","Dingbat dec":"103","Dingbat hex":"67","Unicode dec":"129106","Unicode hex":"1F852"},{"Typeface name":"Wingdings 3","Dingbat dec":"104","Dingbat hex":"68","Unicode dec":"129105","Unicode hex":"1F851"},{"Typeface name":"Wingdings 3","Dingbat dec":"105","Dingbat hex":"69","Unicode dec":"129107","Unicode hex":"1F853"},{"Typeface name":"Wingdings 3","Dingbat dec":"106","Dingbat hex":"6A","Unicode dec":"129108","Unicode hex":"1F854"},{"Typeface name":"Wingdings 3","Dingbat dec":"107","Dingbat hex":"6B","Unicode dec":"129109","Unicode hex":"1F855"},{"Typeface name":"Wingdings 3","Dingbat dec":"108","Dingbat hex":"6C","Unicode dec":"129111","Unicode hex":"1F857"},{"Typeface name":"Wingdings 3","Dingbat dec":"109","Dingbat hex":"6D","Unicode dec":"129110","Unicode hex":"1F856"},{"Typeface name":"Wingdings 3","Dingbat dec":"110","Dingbat hex":"6E","Unicode dec":"129112","Unicode hex":"1F858"},{"Typeface name":"Wingdings 3","Dingbat dec":"111","Dingbat hex":"6F","Unicode dec":"129113","Unicode hex":"1F859"},{"Typeface name":"Wingdings 3","Dingbat dec":"112","Dingbat hex":"70","Unicode dec":"9650","Unicode hex":"25B2"},{"Typeface name":"Wingdings 3","Dingbat dec":"113","Dingbat hex":"71","Unicode dec":"9660","Unicode hex":"25BC"},{"Typeface name":"Wingdings 3","Dingbat dec":"114","Dingbat hex":"72","Unicode dec":"9651","Unicode hex":"25B3"},{"Typeface name":"Wingdings 3","Dingbat dec":"115","Dingbat hex":"73","Unicode dec":"9661","Unicode hex":"25BD"},{"Typeface name":"Wingdings 3","Dingbat dec":"116","Dingbat hex":"74","Unicode dec":"9664","Unicode hex":"25C0"},{"Typeface name":"Wingdings 3","Dingbat dec":"117","Dingbat hex":"75","Unicode dec":"9654","Unicode hex":"25B6"},{"Typeface name":"Wingdings 3","Dingbat dec":"118","Dingbat hex":"76","Unicode dec":"9665","Unicode hex":"25C1"},{"Typeface name":"Wingdings 3","Dingbat dec":"119","Dingbat hex":"77","Unicode dec":"9655","Unicode hex":"25B7"},{"Typeface name":"Wingdings 3","Dingbat dec":"120","Dingbat hex":"78","Unicode dec":"9699","Unicode hex":"25E3"},{"Typeface name":"Wingdings 3","Dingbat dec":"121","Dingbat hex":"79","Unicode dec":"9698","Unicode hex":"25E2"},{"Typeface name":"Wingdings 3","Dingbat dec":"122","Dingbat hex":"7A","Unicode dec":"9700","Unicode hex":"25E4"},{"Typeface name":"Wingdings 3","Dingbat dec":"123","Dingbat hex":"7B","Unicode dec":"9701","Unicode hex":"25E5"},{"Typeface name":"Wingdings 3","Dingbat dec":"124","Dingbat hex":"7C","Unicode dec":"128896","Unicode hex":"1F780"},{"Typeface name":"Wingdings 3","Dingbat dec":"125","Dingbat hex":"7D","Unicode dec":"128898","Unicode hex":"1F782"},{"Typeface name":"Wingdings 3","Dingbat dec":"126","Dingbat hex":"7E","Unicode dec":"128897","Unicode hex":"1F781"},{"Typeface name":"Wingdings 3","Dingbat dec":"128","Dingbat hex":"80","Unicode dec":"128899","Unicode hex":"1F783"},{"Typeface name":"Wingdings 3","Dingbat dec":"129","Dingbat hex":"81","Unicode dec":"11205","Unicode hex":"2BC5"},{"Typeface name":"Wingdings 3","Dingbat dec":"130","Dingbat hex":"82","Unicode dec":"11206","Unicode hex":"2BC6"},{"Typeface name":"Wingdings 3","Dingbat dec":"131","Dingbat hex":"83","Unicode dec":"11207","Unicode hex":"2BC7"},{"Typeface name":"Wingdings 3","Dingbat dec":"132","Dingbat hex":"84","Unicode dec":"11208","Unicode hex":"2BC8"},{"Typeface name":"Wingdings 3","Dingbat dec":"133","Dingbat hex":"85","Unicode dec":"11164","Unicode hex":"2B9C"},{"Typeface name":"Wingdings 3","Dingbat dec":"134","Dingbat hex":"86","Unicode dec":"11166","Unicode hex":"2B9E"},{"Typeface name":"Wingdings 3","Dingbat dec":"135","Dingbat hex":"87","Unicode dec":"11165","Unicode hex":"2B9D"},{"Typeface name":"Wingdings 3","Dingbat dec":"136","Dingbat hex":"88","Unicode dec":"11167","Unicode hex":"2B9F"},{"Typeface name":"Wingdings 3","Dingbat dec":"137","Dingbat hex":"89","Unicode dec":"129040","Unicode hex":"1F810"},{"Typeface name":"Wingdings 3","Dingbat dec":"138","Dingbat hex":"8A","Unicode dec":"129042","Unicode hex":"1F812"},{"Typeface name":"Wingdings 3","Dingbat dec":"139","Dingbat hex":"8B","Unicode dec":"129041","Unicode hex":"1F811"},{"Typeface name":"Wingdings 3","Dingbat dec":"140","Dingbat hex":"8C","Unicode dec":"129043","Unicode hex":"1F813"},{"Typeface name":"Wingdings 3","Dingbat dec":"141","Dingbat hex":"8D","Unicode dec":"129044","Unicode hex":"1F814"},{"Typeface name":"Wingdings 3","Dingbat dec":"142","Dingbat hex":"8E","Unicode dec":"129046","Unicode hex":"1F816"},{"Typeface name":"Wingdings 3","Dingbat dec":"143","Dingbat hex":"8F","Unicode dec":"129045","Unicode hex":"1F815"},{"Typeface name":"Wingdings 3","Dingbat dec":"144","Dingbat hex":"90","Unicode dec":"129047","Unicode hex":"1F817"},{"Typeface name":"Wingdings 3","Dingbat dec":"145","Dingbat hex":"91","Unicode dec":"129048","Unicode hex":"1F818"},{"Typeface name":"Wingdings 3","Dingbat dec":"146","Dingbat hex":"92","Unicode dec":"129050","Unicode hex":"1F81A"},{"Typeface name":"Wingdings 3","Dingbat dec":"147","Dingbat hex":"93","Unicode dec":"129049","Unicode hex":"1F819"},{"Typeface name":"Wingdings 3","Dingbat dec":"148","Dingbat hex":"94","Unicode dec":"129051","Unicode hex":"1F81B"},{"Typeface name":"Wingdings 3","Dingbat dec":"149","Dingbat hex":"95","Unicode dec":"129052","Unicode hex":"1F81C"},{"Typeface name":"Wingdings 3","Dingbat dec":"150","Dingbat hex":"96","Unicode dec":"129054","Unicode hex":"1F81E"},{"Typeface name":"Wingdings 3","Dingbat dec":"151","Dingbat hex":"97","Unicode dec":"129053","Unicode hex":"1F81D"},{"Typeface name":"Wingdings 3","Dingbat dec":"152","Dingbat hex":"98","Unicode dec":"129055","Unicode hex":"1F81F"},{"Typeface name":"Wingdings 3","Dingbat dec":"153","Dingbat hex":"99","Unicode dec":"129024","Unicode hex":"1F800"},{"Typeface name":"Wingdings 3","Dingbat dec":"154","Dingbat hex":"9A","Unicode dec":"129026","Unicode hex":"1F802"},{"Typeface name":"Wingdings 3","Dingbat dec":"155","Dingbat hex":"9B","Unicode dec":"129025","Unicode hex":"1F801"},{"Typeface name":"Wingdings 3","Dingbat dec":"156","Dingbat hex":"9C","Unicode dec":"129027","Unicode hex":"1F803"},{"Typeface name":"Wingdings 3","Dingbat dec":"157","Dingbat hex":"9D","Unicode dec":"129028","Unicode hex":"1F804"},{"Typeface name":"Wingdings 3","Dingbat dec":"158","Dingbat hex":"9E","Unicode dec":"129030","Unicode hex":"1F806"},{"Typeface name":"Wingdings 3","Dingbat dec":"159","Dingbat hex":"9F","Unicode dec":"129029","Unicode hex":"1F805"},{"Typeface name":"Wingdings 3","Dingbat dec":"160","Dingbat hex":"A0","Unicode dec":"129031","Unicode hex":"1F807"},{"Typeface name":"Wingdings 3","Dingbat dec":"161","Dingbat hex":"A1","Unicode dec":"129032","Unicode hex":"1F808"},{"Typeface name":"Wingdings 3","Dingbat dec":"162","Dingbat hex":"A2","Unicode dec":"129034","Unicode hex":"1F80A"},{"Typeface name":"Wingdings 3","Dingbat dec":"163","Dingbat hex":"A3","Unicode dec":"129033","Unicode hex":"1F809"},{"Typeface name":"Wingdings 3","Dingbat dec":"164","Dingbat hex":"A4","Unicode dec":"129035","Unicode hex":"1F80B"},{"Typeface name":"Wingdings 3","Dingbat dec":"165","Dingbat hex":"A5","Unicode dec":"129056","Unicode hex":"1F820"},{"Typeface name":"Wingdings 3","Dingbat dec":"166","Dingbat hex":"A6","Unicode dec":"129058","Unicode hex":"1F822"},{"Typeface name":"Wingdings 3","Dingbat dec":"167","Dingbat hex":"A7","Unicode dec":"129060","Unicode hex":"1F824"},{"Typeface name":"Wingdings 3","Dingbat dec":"168","Dingbat hex":"A8","Unicode dec":"129062","Unicode hex":"1F826"},{"Typeface name":"Wingdings 3","Dingbat dec":"169","Dingbat hex":"A9","Unicode dec":"129064","Unicode hex":"1F828"},{"Typeface name":"Wingdings 3","Dingbat dec":"170","Dingbat hex":"AA","Unicode dec":"129066","Unicode hex":"1F82A"},{"Typeface name":"Wingdings 3","Dingbat dec":"171","Dingbat hex":"AB","Unicode dec":"129068","Unicode hex":"1F82C"},{"Typeface name":"Wingdings 3","Dingbat dec":"172","Dingbat hex":"AC","Unicode dec":"129180","Unicode hex":"1F89C"},{"Typeface name":"Wingdings 3","Dingbat dec":"173","Dingbat hex":"AD","Unicode dec":"129181","Unicode hex":"1F89D"},{"Typeface name":"Wingdings 3","Dingbat dec":"174","Dingbat hex":"AE","Unicode dec":"129182","Unicode hex":"1F89E"},{"Typeface name":"Wingdings 3","Dingbat dec":"175","Dingbat hex":"AF","Unicode dec":"129183","Unicode hex":"1F89F"},{"Typeface name":"Wingdings 3","Dingbat dec":"176","Dingbat hex":"B0","Unicode dec":"129070","Unicode hex":"1F82E"},{"Typeface name":"Wingdings 3","Dingbat dec":"177","Dingbat hex":"B1","Unicode dec":"129072","Unicode hex":"1F830"},{"Typeface name":"Wingdings 3","Dingbat dec":"178","Dingbat hex":"B2","Unicode dec":"129074","Unicode hex":"1F832"},{"Typeface name":"Wingdings 3","Dingbat dec":"179","Dingbat hex":"B3","Unicode dec":"129076","Unicode hex":"1F834"},{"Typeface name":"Wingdings 3","Dingbat dec":"180","Dingbat hex":"B4","Unicode dec":"129078","Unicode hex":"1F836"},{"Typeface name":"Wingdings 3","Dingbat dec":"181","Dingbat hex":"B5","Unicode dec":"129080","Unicode hex":"1F838"},{"Typeface name":"Wingdings 3","Dingbat dec":"182","Dingbat hex":"B6","Unicode dec":"129082","Unicode hex":"1F83A"},{"Typeface name":"Wingdings 3","Dingbat dec":"183","Dingbat hex":"B7","Unicode dec":"129081","Unicode hex":"1F839"},{"Typeface name":"Wingdings 3","Dingbat dec":"184","Dingbat hex":"B8","Unicode dec":"129083","Unicode hex":"1F83B"},{"Typeface name":"Wingdings 3","Dingbat dec":"185","Dingbat hex":"B9","Unicode dec":"129176","Unicode hex":"1F898"},{"Typeface name":"Wingdings 3","Dingbat dec":"186","Dingbat hex":"BA","Unicode dec":"129178","Unicode hex":"1F89A"},{"Typeface name":"Wingdings 3","Dingbat dec":"187","Dingbat hex":"BB","Unicode dec":"129177","Unicode hex":"1F899"},{"Typeface name":"Wingdings 3","Dingbat dec":"188","Dingbat hex":"BC","Unicode dec":"129179","Unicode hex":"1F89B"},{"Typeface name":"Wingdings 3","Dingbat dec":"189","Dingbat hex":"BD","Unicode dec":"129084","Unicode hex":"1F83C"},{"Typeface name":"Wingdings 3","Dingbat dec":"190","Dingbat hex":"BE","Unicode dec":"129086","Unicode hex":"1F83E"},{"Typeface name":"Wingdings 3","Dingbat dec":"191","Dingbat hex":"BF","Unicode dec":"129085","Unicode hex":"1F83D"},{"Typeface name":"Wingdings 3","Dingbat dec":"192","Dingbat hex":"C0","Unicode dec":"129087","Unicode hex":"1F83F"},{"Typeface name":"Wingdings 3","Dingbat dec":"193","Dingbat hex":"C1","Unicode dec":"129088","Unicode hex":"1F840"},{"Typeface name":"Wingdings 3","Dingbat dec":"194","Dingbat hex":"C2","Unicode dec":"129090","Unicode hex":"1F842"},{"Typeface name":"Wingdings 3","Dingbat dec":"195","Dingbat hex":"C3","Unicode dec":"129089","Unicode hex":"1F841"},{"Typeface name":"Wingdings 3","Dingbat dec":"196","Dingbat hex":"C4","Unicode dec":"129091","Unicode hex":"1F843"},{"Typeface name":"Wingdings 3","Dingbat dec":"197","Dingbat hex":"C5","Unicode dec":"129092","Unicode hex":"1F844"},{"Typeface name":"Wingdings 3","Dingbat dec":"198","Dingbat hex":"C6","Unicode dec":"129094","Unicode hex":"1F846"},{"Typeface name":"Wingdings 3","Dingbat dec":"199","Dingbat hex":"C7","Unicode dec":"129093","Unicode hex":"1F845"},{"Typeface name":"Wingdings 3","Dingbat dec":"200","Dingbat hex":"C8","Unicode dec":"129095","Unicode hex":"1F847"},{"Typeface name":"Wingdings 3","Dingbat dec":"201","Dingbat hex":"C9","Unicode dec":"11176","Unicode hex":"2BA8"},{"Typeface name":"Wingdings 3","Dingbat dec":"202","Dingbat hex":"CA","Unicode dec":"11177","Unicode hex":"2BA9"},{"Typeface name":"Wingdings 3","Dingbat dec":"203","Dingbat hex":"CB","Unicode dec":"11178","Unicode hex":"2BAA"},{"Typeface name":"Wingdings 3","Dingbat dec":"204","Dingbat hex":"CC","Unicode dec":"11179","Unicode hex":"2BAB"},{"Typeface name":"Wingdings 3","Dingbat dec":"205","Dingbat hex":"CD","Unicode dec":"11180","Unicode hex":"2BAC"},{"Typeface name":"Wingdings 3","Dingbat dec":"206","Dingbat hex":"CE","Unicode dec":"11181","Unicode hex":"2BAD"},{"Typeface name":"Wingdings 3","Dingbat dec":"207","Dingbat hex":"CF","Unicode dec":"11182","Unicode hex":"2BAE"},{"Typeface name":"Wingdings 3","Dingbat dec":"208","Dingbat hex":"D0","Unicode dec":"11183","Unicode hex":"2BAF"},{"Typeface name":"Wingdings 3","Dingbat dec":"209","Dingbat hex":"D1","Unicode dec":"129120","Unicode hex":"1F860"},{"Typeface name":"Wingdings 3","Dingbat dec":"210","Dingbat hex":"D2","Unicode dec":"129122","Unicode hex":"1F862"},{"Typeface name":"Wingdings 3","Dingbat dec":"211","Dingbat hex":"D3","Unicode dec":"129121","Unicode hex":"1F861"},{"Typeface name":"Wingdings 3","Dingbat dec":"212","Dingbat hex":"D4","Unicode dec":"129123","Unicode hex":"1F863"},{"Typeface name":"Wingdings 3","Dingbat dec":"213","Dingbat hex":"D5","Unicode dec":"129124","Unicode hex":"1F864"},{"Typeface name":"Wingdings 3","Dingbat dec":"214","Dingbat hex":"D6","Unicode dec":"129125","Unicode hex":"1F865"},{"Typeface name":"Wingdings 3","Dingbat dec":"215","Dingbat hex":"D7","Unicode dec":"129127","Unicode hex":"1F867"},{"Typeface name":"Wingdings 3","Dingbat dec":"216","Dingbat hex":"D8","Unicode dec":"129126","Unicode hex":"1F866"},{"Typeface name":"Wingdings 3","Dingbat dec":"217","Dingbat hex":"D9","Unicode dec":"129136","Unicode hex":"1F870"},{"Typeface name":"Wingdings 3","Dingbat dec":"218","Dingbat hex":"DA","Unicode dec":"129138","Unicode hex":"1F872"},{"Typeface name":"Wingdings 3","Dingbat dec":"219","Dingbat hex":"DB","Unicode dec":"129137","Unicode hex":"1F871"},{"Typeface name":"Wingdings 3","Dingbat dec":"220","Dingbat hex":"DC","Unicode dec":"129139","Unicode hex":"1F873"},{"Typeface name":"Wingdings 3","Dingbat dec":"221","Dingbat hex":"DD","Unicode dec":"129140","Unicode hex":"1F874"},{"Typeface name":"Wingdings 3","Dingbat dec":"222","Dingbat hex":"DE","Unicode dec":"129141","Unicode hex":"1F875"},{"Typeface name":"Wingdings 3","Dingbat dec":"223","Dingbat hex":"DF","Unicode dec":"129143","Unicode hex":"1F877"},{"Typeface name":"Wingdings 3","Dingbat dec":"224","Dingbat hex":"E0","Unicode dec":"129142","Unicode hex":"1F876"},{"Typeface name":"Wingdings 3","Dingbat dec":"225","Dingbat hex":"E1","Unicode dec":"129152","Unicode hex":"1F880"},{"Typeface name":"Wingdings 3","Dingbat dec":"226","Dingbat hex":"E2","Unicode dec":"129154","Unicode hex":"1F882"},{"Typeface name":"Wingdings 3","Dingbat dec":"227","Dingbat hex":"E3","Unicode dec":"129153","Unicode hex":"1F881"},{"Typeface name":"Wingdings 3","Dingbat dec":"228","Dingbat hex":"E4","Unicode dec":"129155","Unicode hex":"1F883"},{"Typeface name":"Wingdings 3","Dingbat dec":"229","Dingbat hex":"E5","Unicode dec":"129156","Unicode hex":"1F884"},{"Typeface name":"Wingdings 3","Dingbat dec":"230","Dingbat hex":"E6","Unicode dec":"129157","Unicode hex":"1F885"},{"Typeface name":"Wingdings 3","Dingbat dec":"231","Dingbat hex":"E7","Unicode dec":"129159","Unicode hex":"1F887"},{"Typeface name":"Wingdings 3","Dingbat dec":"232","Dingbat hex":"E8","Unicode dec":"129158","Unicode hex":"1F886"},{"Typeface name":"Wingdings 3","Dingbat dec":"233","Dingbat hex":"E9","Unicode dec":"129168","Unicode hex":"1F890"},{"Typeface name":"Wingdings 3","Dingbat dec":"234","Dingbat hex":"EA","Unicode dec":"129170","Unicode hex":"1F892"},{"Typeface name":"Wingdings 3","Dingbat dec":"235","Dingbat hex":"EB","Unicode dec":"129169","Unicode hex":"1F891"},{"Typeface name":"Wingdings 3","Dingbat dec":"236","Dingbat hex":"EC","Unicode dec":"129171","Unicode hex":"1F893"},{"Typeface name":"Wingdings 3","Dingbat dec":"237","Dingbat hex":"ED","Unicode dec":"129172","Unicode hex":"1F894"},{"Typeface name":"Wingdings 3","Dingbat dec":"238","Dingbat hex":"EE","Unicode dec":"129174","Unicode hex":"1F896"},{"Typeface name":"Wingdings 3","Dingbat dec":"239","Dingbat hex":"EF","Unicode dec":"129173","Unicode hex":"1F895"},{"Typeface name":"Wingdings 3","Dingbat dec":"240","Dingbat hex":"F0","Unicode dec":"129175","Unicode hex":"1F897"}];return $a.default=n,$a}var ov;function wM(){if(ov)return ln;ov=1;var n=ln&&ln.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(ln,"__esModule",{value:!0}),ln.hex=ln.dec=ln.codePoint=void 0;for(var e=n(AM()),t={},i=String.fromCodePoint?String.fromCodePoint:h,r=0,s=e.default;r<s.length;r++){var a=s[r],o=parseInt(a["Unicode dec"],10),c={codePoint:o,string:i(o)};t[a["Typeface name"].toUpperCase()+"_"+a["Dingbat dec"]]=c}function l(f,p){return t[f.toUpperCase()+"_"+p]}ln.codePoint=l;function u(f,p){return l(f,parseInt(p,10))}ln.dec=u;function d(f,p){return l(f,parseInt(p,16))}ln.hex=d;function h(f){if(f<=65535)return String.fromCharCode(f);var p=Math.floor((f-65536)/1024)+55296,m=(f-65536)%1024+56320;return String.fromCharCode(p,m)}return ln}var oi={},cv;function sD(){if(cv)return oi;cv=1;var n=ut;oi.paragraph=e,oi.run=t,oi._elements=r,oi._elementsOfType=i,oi.getDescendantsOfType=s,oi.getDescendants=a;function e(c){return i("paragraph",c)}function t(c){return i("run",c)}function i(c,l){return r(function(u){return u.type===c?l(u):u})}function r(c){return function l(u){if(u.children){var d=n.map(u.children,l);u=n.extend(u,{children:d})}return c(u)}}function s(c,l){return a(c).filter(function(u){return u.type===l})}function a(c){var l=[];return o(c,function(u){l.push(u)}),l}function o(c,l){c.children&&c.children.forEach(function(u){o(u,l),l(u)})}return oi}var Wa={},lv;function IM(){if(lv)return Wa;lv=1,Wa.uriToZipEntryName=n,Wa.replaceFragment=e;function n(t,i){return i.charAt(0)==="/"?i.substr(1):t+"/"+i}function e(t,i){var r=t.indexOf("#");return r!==-1&&(t=t.substring(0,r)),t+"#"+i}return Wa}var uv;function CM(){if(uv)return Na;uv=1,Na.createBodyReader=c,Na._readNumberingProperties=u;var n=wM(),e=ut,t=mr(),i=ti().Result,r=ti().warning,s=Ep(),a=sD(),o=IM();function c(x){return{readXmlElement:function(_){return new l(x).readXmlElement(_)},readXmlElements:function(_){return new l(x).readXmlElements(_)}}}function l(x){var _=[],D=[],w=[],S=x.relationships,C=x.contentTypes,O=x.docxFile,I=x.files,L=x.numbering,E=x.styles;function $(J){var de=J.map(U);return v(de)}function U(J){if(J.type==="element"){var de=N[J.name];if(de)return de(J);if(!Object.prototype.hasOwnProperty.call(h,J.name)){var be=r("An unrecognised element was ignored: "+J.name);return f([be])}}return p()}function F(J){return te(J).map(function(de){return{type:"paragraphProperties",styleId:de.styleId,styleName:de.name,alignment:J.firstOrEmpty("w:jc").attributes["w:val"],numbering:u(de.styleId,J.firstOrEmpty("w:numPr"),L),indent:G(J.firstOrEmpty("w:ind"))}})}function G(J){return{start:J.attributes["w:start"]||J.attributes["w:left"],end:J.attributes["w:end"]||J.attributes["w:right"],firstLine:J.attributes["w:firstLine"],hanging:J.attributes["w:hanging"]}}function W(J){return ne(J).map(function(de){var be=J.firstOrEmpty("w:sz").attributes["w:val"],Ee=/^[0-9]+$/.test(be)?parseInt(be,10)/2:null;return{type:"runProperties",styleId:de.styleId,styleName:de.name,verticalAlignment:J.firstOrEmpty("w:vertAlign").attributes["w:val"],font:J.firstOrEmpty("w:rFonts").attributes["w:ascii"],fontSize:Ee,isBold:P(J.first("w:b")),isUnderline:Y(J.first("w:u")),isItalic:P(J.first("w:i")),isStrikethrough:P(J.first("w:strike")),isAllCaps:P(J.first("w:caps")),isSmallCaps:P(J.first("w:smallCaps")),highlight:j(J.firstOrEmpty("w:highlight").attributes["w:val"])}})}function Y(J){if(J){var de=J.attributes["w:val"];return de!==void 0&&de!=="false"&&de!=="0"&&de!=="none"}else return!1}function P(J){if(J){var de=J.attributes["w:val"];return de!=="false"&&de!=="0"}else return!1}function V(J){return J!=="false"&&J!=="0"}function j(J){return!J||J==="none"?null:J}function te(J){return he(J,"w:pStyle","Paragraph",E.findParagraphStyleById)}function ne(J){return he(J,"w:rStyle","Run",E.findCharacterStyleById)}function ue(J){return he(J,"w:tblStyle","Table",E.findTableStyleById)}function he(J,de,be,Ee){var Fe=[],$e=J.first(de),it=null,St=null;if($e&&(it=$e.attributes["w:val"],it)){var vn=Ee(it);vn?St=vn.name:Fe.push(Ve(be,it))}return g({styleId:it,name:St},Fe)}function fe(J){var de=J.attributes["w:fldCharType"];if(de==="begin")_.push({type:"begin",fldChar:J}),D=[];else if(de==="end"){var be=_.pop();if(be.type==="begin"&&(be=ve(be)),be.type==="checkbox")return m(t.checkbox({checked:be.checked}))}else if(de==="separate"){var Ee=_.pop(),Fe=ve(Ee);_.push(Fe)}return p()}function me(){var J=e.last(_.filter(function(de){return de.type==="hyperlink"}));return J?J.options:null}function ve(J){return De(D.join(""),J.type==="begin"?J.fldChar:s.emptyElement)}function De(J,de){var be=/\s*HYPERLINK "(.*)"/.exec(J);if(be)return{type:"hyperlink",options:{href:be[1]}};var Ee=/\s*HYPERLINK\s+\\l\s+"(.*)"/.exec(J);if(Ee)return{type:"hyperlink",options:{anchor:Ee[1]}};var Fe=/\s*FORMCHECKBOX\s*/.exec(J);if(Fe){var $e=de.firstOrEmpty("w:ffData").firstOrEmpty("w:checkBox"),it=$e.first("w:checked"),St=it==null?P($e.first("w:default")):P(it);return{type:"checkbox",checked:St}}return{type:"unknown"}}function Oe(J){return D.push(J.text()),p()}function We(J){var de=J.attributes["w:font"],be=J.attributes["w:char"],Ee=n.hex(de,be);return Ee==null&&/^F0..$/.test(be)&&(Ee=n.hex(de,be.substring(2))),Ee==null?f([r("A w:sym element with an unsupported character was ignored: char "+be+" in font "+de)]):m(new t.Text(Ee.string))}function A(J){return function(de){var be=de.attributes["w:id"];return m(new t.NoteReference({noteType:J,noteId:be}))}}function Z(J){return m(t.commentReference({commentId:J.attributes["w:id"]}))}function q(J){return $(J.children)}var N={"w:p":function(J){var de=J.firstOrEmpty("w:pPr"),be=!!de.firstOrEmpty("w:rPr").first("w:del");if(be)return J.children.forEach(function(Fe){w.push(Fe)}),p();var Ee=J.children;return w.length>0&&(Ee=w.concat(Ee),w=[]),y.map(F(de),$(Ee),function(Fe,$e){return new t.Paragraph($e,Fe)}).insertExtra()},"w:r":function(J){return y.map(W(J.firstOrEmpty("w:rPr")),$(J.children),function(de,be){var Ee=me();return Ee!==null&&(be=[new t.Hyperlink(be,Ee)]),new t.Run(be,de)})},"w:fldChar":fe,"w:instrText":Oe,"w:t":function(J){return m(new t.Text(J.text()))},"w:tab":function(J){return m(new t.Tab)},"w:noBreakHyphen":function(){return m(new t.Text("â€‘"))},"w:softHyphen":function(J){return m(new t.Text("Â­"))},"w:sym":We,"w:hyperlink":function(J){var de=J.attributes["r:id"],be=J.attributes["w:anchor"];return $(J.children).map(function(Ee){function Fe(it){var St=J.attributes["w:tgtFrame"]||null;return new t.Hyperlink(Ee,e.extend({targetFrame:St},it))}if(de){var $e=S.findTargetByRelationshipId(de);return be&&($e=o.replaceFragment($e,be)),Fe({href:$e})}else return be?Fe({anchor:be}):Ee})},"w:tbl":B,"w:tr":se,"w:tc":ce,"w:footnoteReference":A("footnote"),"w:endnoteReference":A("endnote"),"w:commentReference":Z,"w:br":function(J){var de=J.attributes["w:type"];return de==null||de==="textWrapping"?m(t.lineBreak):de==="page"?m(t.pageBreak):de==="column"?m(t.columnBreak):f([r("Unsupported break type: "+de)])},"w:bookmarkStart":function(J){var de=J.attributes["w:name"];return de==="_GoBack"?p():m(new t.BookmarkStart({name:de}))},"mc:AlternateContent":function(J){return q(J.firstOrEmpty("mc:Fallback"))},"w:sdt":function(J){var de=$(J.firstOrEmpty("w:sdtContent").children);return de.map(function(be){var Ee=J.firstOrEmpty("w:sdtPr").first("wordml:checkbox");if(Ee){var Fe=Ee.first("wordml:checked"),$e=!!Fe&&V(Fe.attributes["wordml:val"]),it=t.checkbox({checked:$e}),St=!1,vn=be.map(a._elementsOfType(t.types.text,function(k){return k.value.length>0&&!St?(St=!0,it):k}));return St?vn:it}else return be})},"w:ins":q,"w:object":q,"w:smartTag":q,"w:drawing":q,"w:pict":function(J){return q(J).toExtra()},"v:roundrect":q,"v:shape":q,"v:textbox":q,"w:txbxContent":q,"wp:inline":ee,"wp:anchor":ee,"v:imagedata":Ce,"v:group":q,"v:rect":q};return{readXmlElement:U,readXmlElements:$};function B(J){var de=z(J.firstOrEmpty("w:tblPr"));return $(J.children).flatMap(H).flatMap(function(be){return de.map(function(Ee){return t.Table(be,Ee)})})}function z(J){return ue(J).map(function(de){return{styleId:de.styleId,styleName:de.name}})}function se(J){var de=J.firstOrEmpty("w:trPr"),be=!!de.first("w:del");if(be)return p();var Ee=!!de.first("w:tblHeader");return $(J.children).map(function(Fe){return t.TableRow(Fe,{isHeader:Ee})})}function ce(J){return $(J.children).map(function(de){var be=J.firstOrEmpty("w:tcPr"),Ee=be.firstOrEmpty("w:gridSpan").attributes["w:val"],Fe=Ee?parseInt(Ee,10):1,$e=t.TableCell(de,{colSpan:Fe});return $e._vMerge=Q(be),$e})}function Q(J){var de=J.first("w:vMerge");if(de){var be=de.attributes["w:val"];return be==="continue"||!be}else return null}function H(J){var de=e.any(J,function(Fe){return Fe.type!==t.types.tableRow});if(de)return X(J),g(J,[r("unexpected non-row element in table, cell merging may be incorrect")]);var be=e.any(J,function(Fe){return e.any(Fe.children,function($e){return $e.type!==t.types.tableCell})});if(be)return X(J),g(J,[r("unexpected non-cell element in table row, cell merging may be incorrect")]);var Ee={};return J.forEach(function(Fe){var $e=0;Fe.children.forEach(function(it){it._vMerge&&Ee[$e]?Ee[$e].rowSpan++:(Ee[$e]=it,it._vMerge=!1),$e+=it.colSpan})}),J.forEach(function(Fe){Fe.children=Fe.children.filter(function($e){return!$e._vMerge}),Fe.children.forEach(function($e){delete $e._vMerge})}),m(J)}function X(J){J.forEach(function(de){var be=a.getDescendantsOfType(de,t.types.tableCell);be.forEach(function(Ee){delete Ee._vMerge})})}function ee(J){var de=J.getElementsByTagName("a:graphic").getElementsByTagName("a:graphicData").getElementsByTagName("pic:pic").getElementsByTagName("pic:blipFill").getElementsByTagName("a:blip");return v(de.map(ae.bind(null,J)))}function ae(J,de){var be=J.first("wp:docPr").attributes,Ee=pe(be.descr)?be.title:be.descr,Fe=Te(de);return Fe===null?f([r("Could not find image file for a:blip element")]):we(Fe,Ee)}function pe(J){return J==null||/^\s*$/.test(J)}function Te(J){var de=J.attributes["r:embed"],be=J.attributes["r:link"];if(de)return Se(de);if(be){var Ee=S.findTargetByRelationshipId(be);return{path:Ee,read:I.read.bind(I,Ee)}}else return null}function Ce(J){var de=J.attributes["r:id"];return de?we(Se(de),J.attributes["o:title"]):f([r("A v:imagedata element without a relationship ID was ignored")])}function Se(J){var de=o.uriToZipEntryName("word",S.findTargetByRelationshipId(J));return{path:de,read:O.read.bind(O,de)}}function we(J,de){var be=C.findContentType(J.path),Ee=t.Image({readImage:J.read,altText:de,contentType:be}),Fe=d[be]?[]:r("Image of type "+be+" is unlikely to display in web browsers");return g(Ee,Fe)}function Ve(J,de){return r(J+" style with ID "+de+" was referenced but not defined in the document")}}function u(x,_,D){var w=_.firstOrEmpty("w:ilvl").attributes["w:val"],S=_.firstOrEmpty("w:numId").attributes["w:val"];if(w!==void 0&&S!==void 0)return D.findLevel(S,w);if(x!=null){var C=D.findLevelByParagraphStyleId(x);if(C!=null)return C}return S!==void 0?D.findLevel(S,"0"):null}var d={"image/png":!0,"image/gif":!0,"image/jpeg":!0,"image/svg+xml":!0,"image/tiff":!0},h={"office-word:wrap":!0,"v:shadow":!0,"v:shapetype":!0,"w:annotationRef":!0,"w:bookmarkEnd":!0,"w:sectPr":!0,"w:proofErr":!0,"w:lastRenderedPageBreak":!0,"w:commentRangeStart":!0,"w:commentRangeEnd":!0,"w:del":!0,"w:footnoteRef":!0,"w:endnoteRef":!0,"w:pPr":!0,"w:rPr":!0,"w:tblPr":!0,"w:tblGrid":!0,"w:trPr":!0,"w:tcPr":!0};function f(x){return new y(null,null,x)}function p(){return new y(null)}function m(x){return new y(x)}function g(x,_){return new y(x,null,_)}function y(x,_,D){this.value=x||[],this.extra=_||[],this._result=new i({element:this.value,extra:_},D),this.messages=this._result.messages}y.prototype.toExtra=function(){return new y(null,b(this.extra,this.value),this.messages)},y.prototype.insertExtra=function(){var x=this.extra;return x&&x.length?new y(b(this.value,x),null,this.messages):this},y.prototype.map=function(x){var _=this._result.map(function(D){return x(D.element)});return new y(_.value,this.extra,_.messages)},y.prototype.flatMap=function(x){var _=this._result.flatMap(function(D){return x(D.element)._result});return new y(_.value.element,b(this.extra,_.value.extra),_.messages)},y.map=function(x,_,D){return new y(D(x.value,_.value),b(x.extra,_.extra),x.messages.concat(_.messages))};function v(x){var _=i.combine(e.pluck(x,"_result"));return new y(e.flatten(e.pluck(_.value,"element")),e.filter(e.flatten(e.pluck(_.value,"extra")),T),_.messages)}function b(x,_){return e.flatten([x,_])}function T(x){return x}return Na}var Lu={},dv;function RM(){if(dv)return Lu;dv=1,Lu.DocumentXmlReader=t;var n=mr(),e=ti().Result;function t(i){var r=i.bodyReader;function s(a){var o=a.first("w:body");if(o==null)throw new Error("Could not find the body element: are you sure this is a docx file?");var c=r.readXmlElements(o.children).map(function(l){return new n.Document(l,{notes:i.notes,comments:i.comments})});return new e(c.value,c.messages)}return{convertXmlToDocument:s}}return Lu}var gs={},hv;function LM(){if(hv)return gs;hv=1,gs.readRelationships=n,gs.defaultValue=new e([]),gs.Relationships=e;function n(t){var i=[];return t.children.forEach(function(r){if(r.name==="relationships:Relationship"){var s={relationshipId:r.attributes.Id,target:r.attributes.Target,type:r.attributes.Type};i.push(s)}}),new e(i)}function e(t){var i={};t.forEach(function(s){i[s.relationshipId]=s.target});var r={};return t.forEach(function(s){r[s.type]||(r[s.type]=[]),r[s.type].push(s.target)}),{findTargetByRelationshipId:function(s){return i[s]},findTargetsByType:function(s){return r[s]||[]}}}return gs}var Va={},fv;function UM(){if(fv)return Va;fv=1,Va.readContentTypesFromXml=e;var n={png:"png",gif:"gif",jpeg:"jpeg",jpg:"jpeg",tif:"tiff",tiff:"tiff",bmp:"bmp"};Va.defaultContentTypes=t({},{});function e(i){var r={},s={};return i.children.forEach(function(a){if(a.name==="content-types:Default"&&(r[a.attributes.Extension]=a.attributes.ContentType),a.name==="content-types:Override"){var o=a.attributes.PartName;o.charAt(0)==="/"&&(o=o.substring(1)),s[o]=a.attributes.ContentType}}),t(s,r)}function t(i,r){return{findContentType:function(s){var a=i[s];if(a)return a;var o=s.split("."),c=o[o.length-1];if(r.hasOwnProperty(c))return r[c];var l=n[c.toLowerCase()];return l?"image/"+l:null}}}return Va}var ms={},pv;function kM(){if(pv)return ms;pv=1;var n=ut;ms.readNumberingXml=t,ms.Numbering=e,ms.defaultNumbering=new e({},{});function e(a,o,c){var l=n.flatten(n.values(o).map(function(f){return n.values(f.levels)})),u=n.indexBy(l.filter(function(f){return f.paragraphStyleId!=null}),"paragraphStyleId");function d(f,p){var m=a[f];if(m){var g=o[m.abstractNumId];if(g){if(g.numStyleLink==null)return o[m.abstractNumId].levels[p];var y=c.findNumberingStyleById(g.numStyleLink);return d(y.numId,p)}else return null}else return null}function h(f){return u[f]||null}return{findLevel:d,findLevelByParagraphStyleId:h}}function t(a,o){if(!o||!o.styles)throw new Error("styles is missing");var c=i(a),l=s(a);return new e(l,c,o.styles)}function i(a){var o={};return a.getElementsByTagName("w:abstractNum").forEach(function(c){var l=c.attributes["w:abstractNumId"];o[l]=r(c)}),o}function r(a){var o={},c=null;a.getElementsByTagName("w:lvl").forEach(function(u){var d=u.attributes["w:ilvl"],h=u.firstOrEmpty("w:numFmt").attributes["w:val"],f=h!=="bullet",p=u.firstOrEmpty("w:pStyle").attributes["w:val"];d===void 0?c={isOrdered:f,level:"0",paragraphStyleId:p}:o[d]={isOrdered:f,level:d,paragraphStyleId:p}}),c!==null&&o[c.level]===void 0&&(o[c.level]=c);var l=a.firstOrEmpty("w:numStyleLink").attributes["w:val"];return{levels:o,numStyleLink:l}}function s(a){var o={};return a.getElementsByTagName("w:num").forEach(function(c){var l=c.attributes["w:numId"],u=c.first("w:abstractNumId").attributes["w:val"];o[l]={abstractNumId:u}}),o}return ms}var ys={},gv;function FM(){if(gv)return ys;gv=1,ys.readStylesXml=e,ys.Styles=n,ys.defaultStyles=new n({},{});function n(a,o,c,l){return{findParagraphStyleById:function(u){return a[u]},findCharacterStyleById:function(u){return o[u]},findTableStyleById:function(u){return c[u]},findNumberingStyleById:function(u){return l[u]}}}n.EMPTY=new n({},{},{},{});function e(a){var o={},c={},l={},u={},d={paragraph:o,character:c,table:l,numbering:u};return a.getElementsByTagName("w:style").forEach(function(h){var f=t(h),p=d[f.type];p&&p[f.styleId]===void 0&&(p[f.styleId]=f)}),new n(o,c,l,u)}function t(a){var o=a.attributes["w:type"];if(o==="numbering")return r(o,a);var c=s(a),l=i(a);return{type:o,styleId:c,name:l}}function i(a){var o=a.first("w:name");return o?o.attributes["w:val"]:null}function r(a,o){var c=s(o),l=o.firstOrEmpty("w:pPr").firstOrEmpty("w:numPr").firstOrEmpty("w:numId").attributes["w:val"];return{type:a,numId:l,styleId:c}}function s(a){return a.attributes["w:styleId"]}return ys}var xr={},mv;function PM(){if(mv)return xr;mv=1;var n=mr(),e=ti().Result;xr.createFootnotesReader=t.bind(xr,"footnote"),xr.createEndnotesReader=t.bind(xr,"endnote");function t(i,r){function s(c){return e.combine(c.getElementsByTagName("w:"+i).filter(a).map(o))}function a(c){var l=c.attributes["w:type"];return l!=="continuationSeparator"&&l!=="separator"}function o(c){var l=c.attributes["w:id"];return r.readXmlElements(c.children).map(function(u){return n.Note({noteType:i,noteId:l,body:u})})}return s}return xr}var Uu={},yv;function OM(){if(yv)return Uu;yv=1;var n=mr(),e=ti().Result;function t(i){function r(a){return e.combine(a.getElementsByTagName("w:comment").map(s))}function s(a){var o=a.attributes["w:id"];function c(l){return(a.attributes[l]||"").trim()||null}return i.readXmlElements(a.children).map(function(l){return n.comment({commentId:o,body:l,authorName:c("w:author"),authorInitials:c("w:initials")})})}return r}return Uu.createCommentsReader=t,Uu}var ku={},vv;function MM(){if(vv)return ku;vv=1;var n=Pi();ku.Files=e;function e(){function t(i){return n.reject(new Error("could not open external image: '"+i+`'
cannot open linked files from a web browser`))}return{read:t}}return ku}var bv;function BM(){if(bv)return Ua;bv=1,Ua.read=p,Ua._findPartPaths=m;var n=Pi(),e=mr(),t=ti().Result,i=eD(),r=SM().readXmlFromZipFile,s=CM().createBodyReader,a=RM().DocumentXmlReader,o=LM(),c=UM(),l=kM(),u=FM(),d=PM(),h=OM(),f=MM().Files;function p(S,C,O){C=C||{},O=O||{};var I=new f({externalFileAccess:O.externalFileAccess,relativeToFile:C.path});return n.props({contentTypes:x(S),partPaths:m(S),docxFile:S,files:I}).also(function(L){return{styles:D(S,L.partPaths.styles)}}).also(function(L){return{numbering:_(S,L.partPaths.numbering,L.styles)}}).also(function(L){return{footnotes:b(L.partPaths.footnotes,L,function(E,$){return $?d.createFootnotesReader(E)($):new t([])}),endnotes:b(L.partPaths.endnotes,L,function(E,$){return $?d.createEndnotesReader(E)($):new t([])}),comments:b(L.partPaths.comments,L,function(E,$){return $?h.createCommentsReader(E)($):new t([])})}}).also(function(L){return{notes:L.footnotes.flatMap(function(E){return L.endnotes.map(function($){return new e.Notes(E.concat($))})})}}).then(function(L){return b(L.partPaths.mainDocument,L,function(E,$){return L.notes.flatMap(function(U){return L.comments.flatMap(function(F){var G=new a({bodyReader:E,notes:U,comments:F});return G.convertXmlToDocument($)})})})})}function m(S){return w(S).then(function(C){var O=g({docxFile:S,relationships:C,relationshipType:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",basePath:"",fallbackPath:"word/document.xml"});if(!S.exists(O))throw new Error("Could not find main document part. Are you sure this is a valid .docx file?");return v({filename:T(O),readElement:o.readRelationships,defaultValue:o.defaultValue})(S).then(function(I){function L(E){return g({docxFile:S,relationships:I,relationshipType:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/"+E,basePath:i.splitPath(O).dirname,fallbackPath:"word/"+E+".xml"})}return{mainDocument:O,comments:L("comments"),endnotes:L("endnotes"),footnotes:L("footnotes"),numbering:L("numbering"),styles:L("styles")}})})}function g(S){var C=S.docxFile,O=S.relationships,I=S.relationshipType,L=S.basePath,E=S.fallbackPath,$=O.findTargetsByType(I),U=$.map(function(G){return y(i.joinPath(L,G),"/")}),F=U.filter(function(G){return C.exists(G)});return F.length===0?E:F[0]}function y(S,C){return S.substring(0,C.length)===C?S.substring(C.length):S}function v(S){return function(C){return r(C,S.filename).then(function(O){return O?S.readElement(O):S.defaultValue})}}function b(S,C,O){var I=v({filename:T(S),readElement:o.readRelationships,defaultValue:o.defaultValue});return I(C.docxFile).then(function(L){var E=new s({relationships:L,contentTypes:C.contentTypes,docxFile:C.docxFile,numbering:C.numbering,styles:C.styles,files:C.files});return r(C.docxFile,S).then(function($){return O(E,$)})})}function T(S){var C=i.splitPath(S);return i.joinPath(C.dirname,"_rels",C.basename+".rels")}var x=v({filename:"[Content_Types].xml",readElement:c.readContentTypesFromXml,defaultValue:c.defaultContentTypes});function _(S,C,O){return v({filename:C,readElement:function(I){return l.readNumberingXml(I,{styles:O})},defaultValue:l.defaultNumbering})(S)}function D(S,C){return v({filename:C,readElement:u.readStylesXml,defaultValue:u.defaultStyles})(S)}var w=v({filename:"_rels/.rels",readElement:o.readRelationships,defaultValue:o.defaultValue});return Ua}var Ga={},xv;function NM(){if(xv)return Ga;xv=1;var n=ut,e=Pi(),t=Ep();Ga.writeStyleMap=a,Ga.readStyleMap=u;var i="http://schemas.zwobble.org/mammoth/style-map",r="mammoth/style-map",s="/"+r;function a(d,h){return d.write(r,h),o(d).then(function(){return c(d)})}function o(d){var h="word/_rels/document.xml.rels",f="http://schemas.openxmlformats.org/package/2006/relationships",p="{"+f+"}Relationship";return d.read(h,"utf8").then(t.readString).then(function(m){var g=m.children;l(g,p,"Id",{Id:"rMammothStyleMap",Type:i,Target:s});var y={"":f};return d.write(h,t.writeString(m,y))})}function c(d){var h="[Content_Types].xml",f="http://schemas.openxmlformats.org/package/2006/content-types",p="{"+f+"}Override";return d.read(h,"utf8").then(t.readString).then(function(m){var g=m.children;l(g,p,"PartName",{PartName:s,ContentType:"text/prs.mammoth.style-map"});var y={"":f};return d.write(h,t.writeString(m,y))})}function l(d,h,f,p){var m=n.find(d,function(g){return g.name===h&&g.attributes[f]===p[f]});m?m.attributes=p:d.push(t.element(h,p))}function u(d){return d.exists(r)?d.read(r,"utf8"):e.resolve(null)}return Ga}var Ha={},Hi={},On={},ci={},Tv;function aD(){if(Tv)return ci;Tv=1;var n=cl();function e(c,l,u){return i(n.element(c,l,{fresh:!1}),u)}function t(c,l,u){var d=n.element(c,l,{fresh:!0});return i(d,u)}function i(c,l){return{type:"element",tag:c,children:l||[]}}function r(c){return{type:"text",value:c}}var s={type:"forceWrite"};ci.freshElement=t,ci.nonFreshElement=e,ci.elementWithTag=i,ci.text=r,ci.forceWrite=s;var a={br:!0,hr:!0,img:!0,input:!0};function o(c){return c.children.length===0&&a[c.tag.tagName]}return ci.isVoidElement=o,ci}var Fu,_v;function $M(){if(_v)return Fu;_v=1;var n=ut,e=aD();function t(m){return i(l(m))}function i(m){var g=[];return m.map(r).forEach(function(y){c(g,y)}),g}function r(m){return s[m.type](m)}var s={element:a,text:o,forceWrite:o};function a(m){return e.elementWithTag(m.tag,i(m.children))}function o(m){return m}function c(m,g){var y=m[m.length-1];g.type==="element"&&!g.tag.fresh&&y&&y.type==="element"&&g.tag.matchesElement(y.tag)?(g.tag.separator&&c(y.children,e.text(g.tag.separator)),g.children.forEach(function(v){c(y.children,v)})):m.push(g)}function l(m){return u(m,function(g){return d[g.type](g)})}function u(m,g){return n.flatten(n.map(m,g),!0)}var d={element:f,text:p,forceWrite:h};function h(m){return[m]}function f(m){var g=l(m.children);return g.length===0&&!e.isVoidElement(m)?[]:[e.elementWithTag(m.tag,g)]}function p(m){return m.value.length===0?[]:[m]}return Fu=t,Fu}var Dv;function ol(){if(Dv)return On;Dv=1;var n=aD();On.freshElement=n.freshElement,On.nonFreshElement=n.nonFreshElement,On.elementWithTag=n.elementWithTag,On.text=n.text,On.forceWrite=n.forceWrite,On.simplify=$M();function e(a,o){o.forEach(function(c){t(a,c)})}function t(a,o){i[o.type](a,o)}var i={element:r,text:s,forceWrite:function(){}};function r(a,o){n.isVoidElement(o)?a.selfClosing(o.tag.tagName,o.tag.attributes):(a.open(o.tag.tagName,o.tag.attributes),e(a,o.children),a.close(o.tag.tagName))}function s(a,o){a.text(o.value)}return On.write=e,On}var Ev;function cl(){if(Ev)return Hi;Ev=1;var n=ut,e=ol();Hi.topLevelElement=t,Hi.elements=i,Hi.element=s;function t(o,c){return i([s(o,c,{fresh:!0})])}function i(o){return new r(o.map(function(c){return n.isString(c)?s(c):c}))}function r(o){this._elements=o}r.prototype.wrap=function(c){for(var l=c(),u=this._elements.length-1;u>=0;u--)l=this._elements[u].wrapNodes(l);return l};function s(o,c,l){return l=l||{},new a(o,c,l)}function a(o,c,l){var u={};n.isArray(o)?(o.forEach(function(d){u[d]=!0}),o=o[0]):u[o]=!0,this.tagName=o,this.tagNames=u,this.attributes=c||{},this.fresh=l.fresh,this.separator=l.separator}return a.prototype.matchesElement=function(o){return this.tagNames[o.tagName]&&n.isEqual(this.attributes||{},o.attributes||{})},a.prototype.wrap=function(c){return this.wrapNodes(c())},a.prototype.wrapNodes=function(c){return[e.elementWithTag(this,c)]},Hi.empty=i([]),Hi.ignore={wrap:function(){return[]}},Hi}var Pu={},Sv;function oD(){return Sv||(Sv=1,(function(n){var e=ut,t=Pi(),i=ol();n.imgElement=r;function r(s){return function(a,o){return t.when(s(a)).then(function(c){var l={};return a.altText&&(l.alt=a.altText),e.extend(l,c),[i.freshElement("img",l)]})}}n.inline=n.imgElement,n.dataUri=r(function(s){return s.readAsBase64String().then(function(a){return{src:"data:"+s.contentType+";base64,"+a}})})})(Pu)),Pu}var Ou={},Mu={},Av;function WM(){if(Av)return Mu;Av=1;var n=ut;Mu.writer=e;function e(o){return o=o||{},o.prettyPrint?i():r()}var t={div:!0,p:!0,ul:!0,li:!0};function i(){var o=0,c="  ",l=[],u=!0,d=!1,h=r();function f(x,_){t[x]&&b(),l.push(x),h.open(x,_),t[x]&&o++,u=!1}function p(x){t[x]&&(o--,b()),l.pop(),h.close(x)}function m(x){v();var _=T()?x:x.replace(`
`,`
`+c);h.text(_)}function g(x,_){b(),h.selfClosing(x,_)}function y(){return l.length===0||t[l[l.length-1]]}function v(){d||(b(),d=!0)}function b(){if(d=!1,!u&&y()&&!T()){h._append(`
`);for(var x=0;x<o;x++)h._append(c)}}function T(){return n.some(l,function(x){return x==="pre"})}return{asString:h.asString,open:f,close:p,text:m,selfClosing:g}}function r(){var o=[];function c(m,g){var y=d(g);o.push("<"+m+y+">")}function l(m){o.push("</"+m+">")}function u(m,g){var y=d(g);o.push("<"+m+y+" />")}function d(m){return n.map(m,function(g,y){return" "+y+'="'+a(g)+'"'}).join("")}function h(m){o.push(s(m))}function f(m){o.push(m)}function p(){return o.join("")}return{asString:p,open:c,close:l,text:h,selfClosing:u,_append:f}}function s(o){return o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function a(o){return o.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}return Mu}var Bu={},wv;function VM(){if(wv)return Bu;wv=1;var n=ut;function e(d){return t(d,d)}function t(d,h){return function(){return{start:d,end:h}}}function i(d){var h=d.href||"";return h?{start:"[",end:"]("+h+")",anchorPosition:"before"}:{}}function r(d){var h=d.src||"",f=d.alt||"";return h||f?{start:"!["+f+"]("+h+")"}:{}}function s(d){return function(h,f){return{start:f?`
`:"",end:f?"":`
`,list:{isOrdered:d.isOrdered,indent:f?f.indent+1:0,count:0}}}}function a(d,h,f){h=h||{indent:0,isOrdered:!1,count:0},h.count++,f.hasClosed=!1;var p=h.isOrdered?h.count+".":"-",m=c("	",h.indent)+p+" ";return{start:m,end:function(){if(!f.hasClosed)return f.hasClosed=!0,`
`}}}var o={p:t("",`

`),br:t("",`  
`),ul:s({isOrdered:!1}),ol:s({isOrdered:!0}),li:a,strong:e("__"),em:e("*"),a:i,img:r};(function(){for(var d=1;d<=6;d++)o["h"+d]=t(c("#",d)+" ",`

`)})();function c(d,h){return new Array(h+1).join(d)}function l(){var d=[],h=[],f=null,p={};function m(x,_){_=_||{};var D=o[x]||function(){return{}},w=D(_,f,p);h.push({end:w.end,list:f}),w.list&&(f=w.list);var S=w.anchorPosition==="before";S&&g(_),d.push(w.start||""),S||g(_)}function g(x){x.id&&d.push('<a id="'+x.id+'"></a>')}function y(x){var _=h.pop();f=_.list;var D=n.isFunction(_.end)?_.end():_.end;d.push(D||"")}function v(x,_){m(x,_),y()}function b(x){d.push(u(x))}function T(){return d.join("")}return{asString:T,open:m,close:y,text:b,selfClosing:v}}Bu.writer=l;function u(d){return d.replace(/\\/g,"\\\\").replace(/([\`\*_\{\}\[\]\(\)\#\+\-\.\!])/g,"\\$1")}return Bu}var Iv;function GM(){if(Iv)return Ou;Iv=1;var n=WM(),e=VM();Ou.writer=t;function t(i){return i=i||{},i.outputFormat==="markdown"?e.writer():n.writer(i)}return Ou}var Cv;function HM(){if(Cv)return Ha;Cv=1;var n=ut,e=Pi(),t=mr(),i=cl(),r=ti(),s=oD(),a=ol(),o=GM();Ha.DocumentConverter=c;function c(g){return{convertToHtml:function(y){var v=n.indexBy(y.type===t.types.document?y.comments:[],"commentId"),b=new l(g,v);return b.convertToHtml(y)}}}function l(g,y){var v=1,b=[],T=[];g=n.extend({ignoreEmptyParagraphs:!0},g);var x=g.idPrefix===void 0?"":g.idPrefix,_=g.ignoreEmptyParagraphs,D=i.topLevelElement("p"),w=g.styleMap||[];function S(A){var Z=[],q=O(A,Z,{}),N=[];p(q,function(z){z.type==="deferred"&&N.push(z)});var B={};return e.mapSeries(N,function(z){return z.value().then(function(se){B[z.id]=se})}).then(function(){function z(ce){return f(ce,function(Q){return Q.type==="deferred"?B[Q.id]:Q.children?[n.extend({},Q,{children:z(Q.children)})]:[Q]})}var se=o.writer({prettyPrint:g.prettyPrint,outputFormat:g.outputFormat});return a.write(se,a.simplify(z(q))),new r.Result(se.asString(),Z)})}function C(A,Z,q){return f(A,function(N){return O(N,Z,q)})}function O(A,Z,q){if(!q)throw new Error("options not set");var N=We[A.type];return N?N(A,Z,q):[]}function I(A,Z,q){return L(A,Z).wrap(function(){var N=C(A.children,Z,q);return _?N:[a.forceWrite].concat(N)})}function L(A,Z){var q=F(A);return q?q.to:(A.styleId&&Z.push(h("paragraph",A)),D)}function E(A,Z,q){var N=function(){return C(A.children,Z,q)},B=[];if(A.highlight!==null){var z=U({type:"highlight",color:A.highlight});z&&B.push(z)}A.isSmallCaps&&B.push($("smallCaps")),A.isAllCaps&&B.push($("allCaps")),A.isStrikethrough&&B.push($("strikethrough","s")),A.isUnderline&&B.push($("underline")),A.verticalAlignment===t.verticalAlignment.subscript&&B.push(i.element("sub",{},{fresh:!1})),A.verticalAlignment===t.verticalAlignment.superscript&&B.push(i.element("sup",{},{fresh:!1})),A.isItalic&&B.push($("italic","em")),A.isBold&&B.push($("bold","strong"));var se=i.empty,ce=F(A);return ce?se=ce.to:A.styleId&&Z.push(h("run",A)),B.push(se),B.forEach(function(Q){N=Q.wrap.bind(Q,N)}),N()}function $(A,Z){var q=U({type:A});return q||(Z?i.element(Z,{},{fresh:!1}):i.empty)}function U(A,Z){var q=F(A);return q?q.to:Z}function F(A){for(var Z=0;Z<w.length;Z++)if(w[Z].from.matches(A))return w[Z]}function G(A){return function(Z,q){return e.attempt(function(){return A(Z,q)}).caught(function(N){return q.push(r.error(N)),[]})}}function W(A){return P(A.noteType,A.noteId)}function Y(A){return V(A.noteType,A.noteId)}function P(A,Z){return j(A+"-"+Z)}function V(A,Z){return j(A+"-ref-"+Z)}function j(A){return x+A}var te=i.elements([i.element("table",{},{fresh:!0})]);function ne(A,Z,q){return U(A,te).wrap(function(){return ue(A,Z,q)})}function ue(A,Z,q){var N=n.findIndex(A.children,function(ce){return!ce.type===t.types.tableRow||!ce.isHeader});N===-1&&(N=A.children.length);var B;if(N===0)B=C(A.children,Z,n.extend({},q,{isTableHeader:!1}));else{var z=C(A.children.slice(0,N),Z,n.extend({},q,{isTableHeader:!0})),se=C(A.children.slice(N),Z,n.extend({},q,{isTableHeader:!1}));B=[a.freshElement("thead",{},z),a.freshElement("tbody",{},se)]}return[a.forceWrite].concat(B)}function he(A,Z,q){var N=C(A.children,Z,q);return[a.freshElement("tr",{},[a.forceWrite].concat(N))]}function fe(A,Z,q){var N=q.isTableHeader?"th":"td",B=C(A.children,Z,q),z={};return A.colSpan!==1&&(z.colspan=A.colSpan.toString()),A.rowSpan!==1&&(z.rowspan=A.rowSpan.toString()),[a.freshElement(N,z,[a.forceWrite].concat(B))]}function me(A,Z,q){return U(A,i.ignore).wrap(function(){var N=y[A.commentId],B=T.length+1,z="["+m(N)+B+"]";return T.push({label:z,comment:N}),[a.freshElement("a",{href:"#"+P("comment",A.commentId),id:V("comment",A.commentId)},[a.text(z)])]})}function ve(A,Z,q){var N=A.label,B=A.comment,z=C(B.body,Z,q).concat([a.nonFreshElement("p",{},[a.text(" "),a.freshElement("a",{href:"#"+V("comment",B.commentId)},[a.text("â†‘")])])]);return[a.freshElement("dt",{id:P("comment",B.commentId)},[a.text("Comment "+N)]),a.freshElement("dd",{},z)]}function De(A,Z,q){return Oe(A).wrap(function(){return[]})}function Oe(A){var Z=F(A);return Z?Z.to:A.breakType==="line"?i.topLevelElement("br"):i.empty}var We={document:function(A,Z,q){var N=C(A.children,Z,q),B=b.map(function(se){return A.notes.resolve(se)}),z=C(B,Z,q);return N.concat([a.freshElement("ol",{},z),a.freshElement("dl",{},f(T,function(se){return ve(se,Z,q)}))])},paragraph:I,run:E,text:function(A,Z,q){return[a.text(A.value)]},tab:function(A,Z,q){return[a.text("	")]},hyperlink:function(A,Z,q){var N=A.anchor?"#"+j(A.anchor):A.href,B={href:N};A.targetFrame!=null&&(B.target=A.targetFrame);var z=C(A.children,Z,q);return[a.nonFreshElement("a",B,z)]},checkbox:function(A){var Z={type:"checkbox"};return A.checked&&(Z.checked="checked"),[a.freshElement("input",Z)]},bookmarkStart:function(A,Z,q){var N=a.freshElement("a",{id:j(A.name)},[a.forceWrite]);return[N]},noteReference:function(A,Z,q){b.push(A);var N=a.freshElement("a",{href:"#"+W(A),id:Y(A)},[a.text("["+v+++"]")]);return[a.freshElement("sup",{},[N])]},note:function(A,Z,q){var N=C(A.body,Z,q),B=a.elementWithTag(i.element("p",{},{fresh:!1}),[a.text(" "),a.freshElement("a",{href:"#"+Y(A)},[a.text("â†‘")])]),z=N.concat([B]);return a.freshElement("li",{id:W(A)},z)},commentReference:me,comment:ve,image:d(G(g.convertImage||s.dataUri)),table:ne,tableRow:he,tableCell:fe,break:De};return{convertToHtml:S}}var u=1;function d(g){return function(y,v,b){return[{type:"deferred",id:u++,value:function(){return g(y,v,b)}}]}}function h(g,y){return r.warning("Unrecognised "+g+" style: '"+y.styleName+"' (Style ID: "+y.styleId+")")}function f(g,y){return n.flatten(g.map(y),!0)}function p(g,y){g.forEach(function(v){y(v),v.children&&p(v.children,y)})}var m=Ha.commentAuthorLabel=function(y){return y.authorInitials||""};return Ha}var Nu={},Rv;function qM(){if(Rv)return Nu;Rv=1;var n=mr();function e(t){if(t.type==="text")return t.value;if(t.type===n.types.tab)return"	";var i=t.type==="paragraph"?`

`:"";return(t.children||[]).map(e).join("")+i}return Nu.convertElementToRawText=e,Nu}var vs={},un={},$u={},Wu={exports:{}},Lv;function jM(){if(Lv)return Wu.exports;Lv=1;var n=Wu.exports=function(e,t){this._tokens=e,this._startIndex=t||0};return n.prototype.head=function(){return this._tokens[this._startIndex]},n.prototype.tail=function(e){return new n(this._tokens,this._startIndex+1)},n.prototype.toArray=function(){return this._tokens.slice(this._startIndex)},n.prototype.end=function(){return this._tokens[this._tokens.length-1]},n.prototype.to=function(e){var t=this.head().source,i=e.head()||e.end();return t.to(i.source)},Wu.exports}var Uv;function KM(){if(Uv)return $u;Uv=1;var n=jM();return $u.Parser=function(e){var t=function(i,r){return i(new n(r))};return{parseTokens:t}},$u}var Vu={},Gu={},kv;function zM(){return kv||(kv=1,(function(n){n.none=Object.create({value:function(){throw new Error("Called value on none")},isNone:function(){return!0},isSome:function(){return!1},map:function(){return n.none},flatMap:function(){return n.none},filter:function(){return n.none},toArray:function(){return[]},orElse:e,valueOrElse:e});function e(i){return typeof i=="function"?i():i}n.some=function(i){return new t(i)};var t=function(i){this._value=i};t.prototype.value=function(){return this._value},t.prototype.isNone=function(){return!1},t.prototype.isSome=function(){return!0},t.prototype.map=function(i){return new t(i(this._value))},t.prototype.flatMap=function(i){return i(this._value)},t.prototype.filter=function(i){return i(this._value)?this:n.none},t.prototype.toArray=function(){return[this._value]},t.prototype.orElse=function(i){return this},t.prototype.valueOrElse=function(i){return this._value},n.isOption=function(i){return i===n.none||i instanceof t},n.fromNullable=function(i){return i==null?n.none:new t(i)}})(Gu)),Gu}var Hu,Fv;function Sp(){if(Fv)return Hu;Fv=1,Hu={failure:function(e,t){if(e.length<1)throw new Error("Failure must have errors");return new n({status:"failure",remaining:t,errors:e})},error:function(e,t){if(e.length<1)throw new Error("Failure must have errors");return new n({status:"error",remaining:t,errors:e})},success:function(e,t,i){return new n({status:"success",value:e,source:i,remaining:t,errors:[]})},cut:function(e){return new n({status:"cut",remaining:e,errors:[]})}};var n=function(e){this._value=e.value,this._status=e.status,this._hasValue=e.value!==void 0,this._remaining=e.remaining,this._source=e.source,this._errors=e.errors};return n.prototype.map=function(e){return this._hasValue?new n({value:e(this._value,this._source),status:this._status,remaining:this._remaining,source:this._source,errors:this._errors}):this},n.prototype.changeRemaining=function(e){return new n({value:this._value,status:this._status,remaining:e,source:this._source,errors:this._errors})},n.prototype.isSuccess=function(){return this._status==="success"||this._status==="cut"},n.prototype.isFailure=function(){return this._status==="failure"},n.prototype.isError=function(){return this._status==="error"},n.prototype.isCut=function(){return this._status==="cut"},n.prototype.value=function(){return this._value},n.prototype.remaining=function(){return this._remaining},n.prototype.source=function(){return this._source},n.prototype.errors=function(){return this._errors},Hu}var qu={},Pv;function cD(){if(Pv)return qu;Pv=1,qu.error=function(e){return new n(e)};var n=function(e){this.expected=e.expected,this.actual=e.actual,this._location=e.location};return n.prototype.describe=function(){var e=this._location?this._location.describe()+`:
`:"";return e+"Expected "+this.expected+`
but got `+this.actual},n.prototype.lineNumber=function(){return this._location.lineNumber()},n.prototype.characterNumber=function(){return this._location.characterNumber()},qu}var ju={},Ov;function XM(){if(Ov)return ju;Ov=1,ju.fromArray=function(e){var t=0,i=function(){return t<e.length};return new n({hasNext:i,next:function(){if(i())return e[t++];throw new Error("No more elements")}})};var n=function(e){this._iterator=e};return n.prototype.map=function(e){var t=this._iterator;return new n({hasNext:function(){return t.hasNext()},next:function(){return e(t.next())}})},n.prototype.filter=function(e){var t=this._iterator,i=!1,r=!1,s,a=function(){if(!i)for(i=!0,r=!1;t.hasNext()&&!r;)s=t.next(),r=e(s)};return new n({hasNext:function(){return a(),r},next:function(){a();var o=s;return i=!1,o}})},n.prototype.first=function(){var e=this._iterator;return this._iterator.hasNext()?e.next():null},n.prototype.toArray=function(){for(var e=[];this._iterator.hasNext();)e.push(this._iterator.next());return e},ju}var Mv;function lD(){return Mv||(Mv=1,(function(n){var e=ut,t=zM(),i=Sp(),r=cD(),s=XM();n.token=function(h,f){var p=f!==void 0;return function(m){var g=m.head();if(g&&g.name===h&&(!p||g.value===f))return i.success(g.value,m.tail(),g.source);var y=u({name:h,value:f});return d(m,y)}},n.tokenOfType=function(h){return n.token(h)},n.firstOf=function(h,f){return e.isArray(f)||(f=Array.prototype.slice.call(arguments,1)),function(p){return s.fromArray(f).map(function(m){return m(p)}).filter(function(m){return m.isSuccess()||m.isError()}).first()||d(p,h)}},n.then=function(h,f){return function(p){var m=h(p);return m.map||console.log(m),m.map(f)}},n.sequence=function(){var h=Array.prototype.slice.call(arguments,0),f=function(m){var g=e.foldl(h,function(v,b){var T=v.result,x=v.hasCut;if(!T.isSuccess())return{result:T,hasCut:x};var _=b(T.remaining());if(_.isCut())return{result:T,hasCut:!0};if(_.isSuccess()){var D;b.isCaptured?D=T.value().withValue(b,_.value()):D=T.value();var w=_.remaining(),S=m.to(w);return{result:i.success(D,w,S),hasCut:x}}else return x?{result:i.error(_.errors(),_.remaining()),hasCut:x}:{result:_,hasCut:x}},{result:i.success(new a,m),hasCut:!1}).result,y=m.to(g.remaining());return g.map(function(v){return v.withValue(n.sequence.source,y)})};f.head=function(){var m=e.find(h,p);return n.then(f,n.sequence.extract(m))},f.map=function(m){return n.then(f,function(g){return m.apply(this,g.toArray())})};function p(m){return m.isCaptured}return f};var a=function(h,f){this._values=h||{},this._valuesArray=f||[]};a.prototype.withValue=function(h,f){if(h.captureName&&h.captureName in this._values)throw new Error('Cannot add second value for capture "'+h.captureName+'"');var p=e.clone(this._values);p[h.captureName]=f;var m=this._valuesArray.concat([f]);return new a(p,m)},a.prototype.get=function(h){if(h.captureName in this._values)return this._values[h.captureName];throw new Error('No value for capture "'+h.captureName+'"')},a.prototype.toArray=function(){return this._valuesArray},n.sequence.capture=function(h,f){var p=function(){return h.apply(this,arguments)};return p.captureName=f,p.isCaptured=!0,p},n.sequence.extract=function(h){return function(f){return f.get(h)}},n.sequence.applyValues=function(h){var f=Array.prototype.slice.call(arguments,1);return function(p){var m=f.map(function(g){return p.get(g)});return h.apply(this,m)}},n.sequence.source={captureName:"â˜ƒsourceâ˜ƒ"},n.sequence.cut=function(){return function(h){return i.cut(h)}},n.optional=function(h){return function(f){var p=h(f);return p.isSuccess()?p.map(t.some):p.isFailure()?i.success(t.none,f):p}},n.zeroOrMoreWithSeparator=function(h,f){return l(h,f,!1)},n.oneOrMoreWithSeparator=function(h,f){return l(h,f,!0)};var o=n.zeroOrMore=function(h){return function(f){for(var p=[],m;(m=h(f))&&m.isSuccess();)f=m.remaining(),p.push(m.value());return m.isError()?m:i.success(p,f)}};n.oneOrMore=function(h){return n.oneOrMoreWithSeparator(h,c)};function c(h){return i.success(null,h)}var l=function(h,f,p){return function(m){var g=h(m);if(g.isSuccess()){var y=n.sequence.capture(h,"main"),v=o(n.then(n.sequence(f,y),n.sequence.extract(y))),b=v(g.remaining());return i.success([g.value()].concat(b.value()),b.remaining())}else return p||g.isError()?g:i.success([],m)}};n.leftAssociative=function(h,f,p){var m;p?m=[{func:p,rule:f}]:m=f,m=m.map(function(y){return n.then(y.rule,function(v){return function(b,T){return y.func(b,v,T)}})});var g=n.firstOf.apply(null,["rules"].concat(m));return function(y){var v=y,b=h(y);if(!b.isSuccess())return b;for(var T=g(b.remaining());T.isSuccess();){var x=T.remaining(),_=v.to(T.remaining()),D=T.value();b=i.success(D(b.value(),_),x,_),T=g(b.remaining())}return T.isError()?T:b}},n.leftAssociative.firstOf=function(){return Array.prototype.slice.call(arguments,0)},n.nonConsuming=function(h){return function(f){return h(f).changeRemaining(f)}};var u=function(h){return h.value?h.name+' "'+h.value+'"':h.name};function d(h,f){var p,m=h.head();return m?p=r.error({expected:f,actual:u(m),location:m.source}):p=r.error({expected:f,actual:"end of tokens"}),i.failure([p],h)}})(Vu)),Vu}var Ku={exports:{}},Bv;function uD(){if(Bv)return Ku.exports;Bv=1,Ku.exports=function(e,t){var i={asString:function(){return e},range:function(r,s){return new n(e,t,r,s)}};return i};var n=function(e,t,i,r){this._string=e,this._description=t,this._startIndex=i,this._endIndex=r};return n.prototype.to=function(e){return new n(this._string,this._description,this._startIndex,e._endIndex)},n.prototype.describe=function(){var e=this._position(),t=this._description?this._description+`
`:"";return t+"Line number: "+e.lineNumber+`
Character number: `+e.characterNumber},n.prototype.lineNumber=function(){return this._position().lineNumber},n.prototype.characterNumber=function(){return this._position().characterNumber},n.prototype._position=function(){for(var e=this,t=0,i=function(){return e._string.indexOf(`
`,t)},r=1;i()!==-1&&i()<this._startIndex;)t=i()+1,r+=1;var s=this._startIndex-t+1;return{lineNumber:r,characterNumber:s}},Ku.exports}var zu,Nv;function dD(){return Nv||(Nv=1,zu=function(n,e,t){this.name=n,this.value=e,t&&(this.source=t)}),zu}var Xu={},$v;function YM(){return $v||($v=1,(function(n){var e=lD(),t=Sp();n.parser=function(s,a,o){var c={rule:h,leftAssociative:f,rightAssociative:p},l=new i(o.map(d)),u=e.firstOf(s,a);function d(y){return{name:y.name,rule:r(y.ruleBuilder.bind(null,c))}}function h(){return m(l)}function f(y){return m(l.untilExclusive(y))}function p(y){return m(l.untilInclusive(y))}function m(y){return g.bind(null,y)}function g(y,v){var b=u(v);return b.isSuccess()?y.apply(b):b}return c};function i(s){function a(d){return new i(s.slice(0,c().indexOf(d)))}function o(d){return new i(s.slice(0,c().indexOf(d)+1))}function c(){return s.map(function(d){return d.name})}function l(d){for(var h,f;;)if(h=u(d.remaining()),h.isSuccess())f=d.source().to(h.source()),d=t.success(h.value()(d.value(),f),h.remaining(),f);else return h.isFailure()?d:h}function u(d){return e.firstOf("infix",s.map(function(h){return h.rule}))(d)}return{apply:l,untilExclusive:a,untilInclusive:o}}n.infix=function(s,a){function o(c){return n.infix(s,function(l){var u=a(l);return function(d){var h=u(d);return h.map(function(f){return function(p,m){return c(p,f,m)}})}})}return{name:s,ruleBuilder:a,map:o}};var r=function(s){var a;return function(o){return a||(a=s()),a(o)}}})(Xu)),Xu}var Yu={},Wv;function QM(){if(Wv)return Yu;Wv=1;var n=dD(),e=uD();Yu.RegexTokeniser=t;function t(i){i=i.map(function(o){return{name:o.name,regex:new RegExp(o.regex.source,"g")}});function r(o,c){for(var l=new e(o,c),u=0,d=[];u<o.length;){var h=s(o,u,l);u=h.endIndex,d.push(h.token)}return d.push(a(o,l)),d}function s(o,c,l){for(var u=0;u<i.length;u++){var d=i[u].regex;d.lastIndex=c;var h=d.exec(o);if(h){var p=c+h[0].length;if(h.index===c&&p>c){var f=h[1],m=new n(i[u].name,f,l.range(c,p));return{token:m,endIndex:p}}}}var p=c+1,m=new n("unrecognisedCharacter",o.substring(c,p),l.range(c,p));return{token:m,endIndex:p}}function a(o,c){return new n("end",null,c.range(o.length,o.length))}return{tokenise:r}}return Yu}var Vv;function hD(){return Vv||(Vv=1,un.Parser=KM().Parser,un.rules=lD(),un.errors=cD(),un.results=Sp(),un.StringSource=uD(),un.Token=dD(),un.bottomUp=YM(),un.RegexTokeniser=QM().RegexTokeniser,un.rule=function(n){var e;return function(t){return e||(e=n()),e(t)}}),un}var yt={},Gv;function ZM(){if(Gv)return yt;Gv=1,yt.paragraph=n,yt.run=e,yt.table=t,yt.bold=new r("bold"),yt.italic=new r("italic"),yt.underline=new r("underline"),yt.strikethrough=new r("strikethrough"),yt.allCaps=new r("allCaps"),yt.smallCaps=new r("smallCaps"),yt.highlight=i,yt.commentReference=new r("commentReference"),yt.lineBreak=new a({breakType:"line"}),yt.pageBreak=new a({breakType:"page"}),yt.columnBreak=new a({breakType:"column"}),yt.equalTo=c,yt.startsWith=l;function n(h){return new r("paragraph",h)}function e(h){return new r("run",h)}function t(h){return new r("table",h)}function i(h){return new s(h)}function r(h,f){f=f||{},this._elementType=h,this._styleId=f.styleId,this._styleName=f.styleName,f.list&&(this._listIndex=f.list.levelIndex,this._listIsOrdered=f.list.isOrdered)}r.prototype.matches=function(h){return h.type===this._elementType&&(this._styleId===void 0||h.styleId===this._styleId)&&(this._styleName===void 0||h.styleName&&this._styleName.operator(this._styleName.operand,h.styleName))&&(this._listIndex===void 0||o(h,this._listIndex,this._listIsOrdered))&&(this._breakType===void 0||this._breakType===h.breakType)};function s(h){h=h||{},this._color=h.color}s.prototype.matches=function(h){return h.type==="highlight"&&(this._color===void 0||h.color===this._color)};function a(h){h=h||{},this._breakType=h.breakType}a.prototype.matches=function(h){return h.type==="break"&&(this._breakType===void 0||h.breakType===this._breakType)};function o(h,f,p){return h.numbering&&h.numbering.level==f&&h.numbering.isOrdered==p}function c(h){return{operator:u,operand:h}}function l(h){return{operator:d,operand:h}}function u(h,f){return h.toUpperCase()===f.toUpperCase()}function d(h,f){return f.toUpperCase().indexOf(h.toUpperCase())===0}return yt}var Qu={},Hv;function JM(){if(Hv)return Qu;Hv=1;var n=hD(),e=n.RegexTokeniser;Qu.tokenise=i;var t="'((?:\\\\.|[^'])*)";function i(r){var s="(?:[a-zA-Z\\-_]|\\\\.)",a=new e([{name:"identifier",regex:new RegExp("("+s+"(?:"+s+"|[0-9])*)")},{name:"dot",regex:/\./},{name:"colon",regex:/:/},{name:"gt",regex:/>/},{name:"whitespace",regex:/\s+/},{name:"arrow",regex:/=>/},{name:"equals",regex:/=/},{name:"startsWith",regex:/\^=/},{name:"open-paren",regex:/\(/},{name:"close-paren",regex:/\)/},{name:"open-square-bracket",regex:/\[/},{name:"close-square-bracket",regex:/\]/},{name:"string",regex:new RegExp(t+"'")},{name:"unterminated-string",regex:new RegExp(t)},{name:"integer",regex:/([0-9]+)/},{name:"choice",regex:/\|/},{name:"bang",regex:/(!)/}]);return a.tokenise(r)}return Qu}var qv;function e8(){if(qv)return vs;qv=1;var n=ut,e=hD(),t=ZM(),i=cl(),r=JM().tokenise,s=ti();vs.readHtmlPath=u,vs.readDocumentMatcher=c,vs.readStyle=a;function a(w){return T(D,w)}function o(){return e.rules.sequence(e.rules.sequence.capture(l()),e.rules.tokenOfType("whitespace"),e.rules.tokenOfType("arrow"),e.rules.sequence.capture(e.rules.optional(e.rules.sequence(e.rules.tokenOfType("whitespace"),e.rules.sequence.capture(d())).head())),e.rules.tokenOfType("end")).map(function(w,S){return{from:w,to:S.valueOrElse(i.empty)}})}function c(w){return T(l(),w)}function l(){var w=e.rules.sequence,S=function(ve,De){return e.rules.then(e.rules.token("identifier",ve),function(){return De})},C=S("p",t.paragraph),O=S("r",t.run),I=e.rules.firstOf("p or r or table",C,O),L=e.rules.sequence(e.rules.tokenOfType("dot"),e.rules.sequence.cut(),e.rules.sequence.capture(h)).map(function(ve){return{styleId:ve}}),E=e.rules.firstOf("style name matcher",e.rules.then(e.rules.sequence(e.rules.tokenOfType("equals"),e.rules.sequence.cut(),e.rules.sequence.capture(p)).head(),function(ve){return{styleName:t.equalTo(ve)}}),e.rules.then(e.rules.sequence(e.rules.tokenOfType("startsWith"),e.rules.sequence.cut(),e.rules.sequence.capture(p)).head(),function(ve){return{styleName:t.startsWith(ve)}})),$=e.rules.sequence(e.rules.tokenOfType("open-square-bracket"),e.rules.sequence.cut(),e.rules.token("identifier","style-name"),e.rules.sequence.capture(E),e.rules.tokenOfType("close-square-bracket")).head(),U=e.rules.firstOf("list type",S("ordered-list",{isOrdered:!0}),S("unordered-list",{isOrdered:!1})),F=w(e.rules.tokenOfType("colon"),w.capture(U),w.cut(),e.rules.tokenOfType("open-paren"),w.capture(f),e.rules.tokenOfType("close-paren")).map(function(ve,De){return{list:{isOrdered:ve.isOrdered,levelIndex:De-1}}});function G(ve){var De=e.rules.firstOf.apply(e.rules.firstOf,["matcher suffix"].concat(ve)),Oe=e.rules.zeroOrMore(De);return e.rules.then(Oe,function(We){var A={};return We.forEach(function(Z){n.extend(A,Z)}),A})}var W=w(w.capture(I),w.capture(G([L,$,F]))).map(function(ve,De){return ve(De)}),Y=w(e.rules.token("identifier","table"),w.capture(G([L,$]))).map(function(ve){return t.table(ve)}),P=S("b",t.bold),V=S("i",t.italic),j=S("u",t.underline),te=S("strike",t.strikethrough),ne=S("all-caps",t.allCaps),ue=S("small-caps",t.smallCaps),he=w(e.rules.token("identifier","highlight"),e.rules.sequence.capture(e.rules.optional(e.rules.sequence(e.rules.tokenOfType("open-square-bracket"),e.rules.sequence.cut(),e.rules.token("identifier","color"),e.rules.tokenOfType("equals"),e.rules.sequence.capture(p),e.rules.tokenOfType("close-square-bracket")).head()))).map(function(ve){return t.highlight({color:ve.valueOrElse(void 0)})}),fe=S("comment-reference",t.commentReference),me=w(e.rules.token("identifier","br"),w.cut(),e.rules.tokenOfType("open-square-bracket"),e.rules.token("identifier","type"),e.rules.tokenOfType("equals"),w.capture(p),e.rules.tokenOfType("close-square-bracket")).map(function(ve){switch(ve){case"line":return t.lineBreak;case"page":return t.pageBreak;case"column":return t.columnBreak}});return e.rules.firstOf("element type",W,Y,P,V,j,te,ne,ue,he,fe,me)}function u(w){return T(d(),w)}function d(){var w=e.rules.sequence.capture,S=e.rules.tokenOfType("whitespace"),C=e.rules.then(e.rules.optional(e.rules.sequence(e.rules.tokenOfType("colon"),e.rules.token("identifier","fresh"))),function(E){return E.map(function(){return!0}).valueOrElse(!1)}),O=e.rules.then(e.rules.optional(e.rules.sequence(e.rules.tokenOfType("colon"),e.rules.token("identifier","separator"),e.rules.tokenOfType("open-paren"),w(p),e.rules.tokenOfType("close-paren")).head()),function(E){return E.valueOrElse("")}),I=e.rules.oneOrMoreWithSeparator(h,e.rules.tokenOfType("choice")),L=e.rules.sequence(w(I),w(e.rules.zeroOrMore(b)),w(C),w(O)).map(function(E,$,U,F){var G={},W={};return $.forEach(function(Y){Y.append&&G[Y.name]?G[Y.name]+=" "+Y.value:G[Y.name]=Y.value}),U&&(W.fresh=!0),F&&(W.separator=F),i.element(E,G,W)});return e.rules.firstOf("html path",e.rules.then(e.rules.tokenOfType("bang"),function(){return i.ignore}),e.rules.then(e.rules.zeroOrMoreWithSeparator(L,e.rules.sequence(S,e.rules.tokenOfType("gt"),S)),i.elements))}var h=e.rules.then(e.rules.tokenOfType("identifier"),g),f=e.rules.tokenOfType("integer"),p=e.rules.then(e.rules.tokenOfType("string"),g),m={n:`
`,r:"\r",t:"	"};function g(w){return w.replace(/\\(.)/g,function(S,C){return m[C]||C})}var y=e.rules.sequence(e.rules.tokenOfType("open-square-bracket"),e.rules.sequence.cut(),e.rules.sequence.capture(h),e.rules.tokenOfType("equals"),e.rules.sequence.capture(p),e.rules.tokenOfType("close-square-bracket")).map(function(w,S){return{name:w,value:S,append:!1}}),v=e.rules.sequence(e.rules.tokenOfType("dot"),e.rules.sequence.cut(),e.rules.sequence.capture(h)).map(function(w){return{name:"class",value:w,append:!0}}),b=e.rules.firstOf("attribute or class",y,v);function T(w,S){var C=r(S),O=e.Parser(),I=O.parseTokens(w,C);return I.isSuccess()?s.success(I.value()):new s.Result(null,[s.warning(x(S,I))])}function x(w,S){return"Did not understand this style mapping, so ignored it: "+w+`
`+S.errors().map(_).join(`
`)}function _(w){return"Error was at character number "+w.characterNumber()+": Expected "+w.expected+" but got "+w.actual}var D=o();return vs}var bs={},jv;function t8(){if(jv)return bs;jv=1,bs.readOptions=i;var n=ut,e=bs._defaultStyleMap=["p.Heading1 => h1:fresh","p.Heading2 => h2:fresh","p.Heading3 => h3:fresh","p.Heading4 => h4:fresh","p.Heading5 => h5:fresh","p.Heading6 => h6:fresh","p[style-name='Heading 1'] => h1:fresh","p[style-name='Heading 2'] => h2:fresh","p[style-name='Heading 3'] => h3:fresh","p[style-name='Heading 4'] => h4:fresh","p[style-name='Heading 5'] => h5:fresh","p[style-name='Heading 6'] => h6:fresh","p[style-name='heading 1'] => h1:fresh","p[style-name='heading 2'] => h2:fresh","p[style-name='heading 3'] => h3:fresh","p[style-name='heading 4'] => h4:fresh","p[style-name='heading 5'] => h5:fresh","p[style-name='heading 6'] => h6:fresh","p.Heading => h1:fresh","p[style-name='Heading'] => h1:fresh","r[style-name='Strong'] => strong","p[style-name='footnote text'] => p:fresh","r[style-name='footnote reference'] =>","p[style-name='endnote text'] => p:fresh","r[style-name='endnote reference'] =>","p[style-name='annotation text'] => p:fresh","r[style-name='annotation reference'] =>","p[style-name='Footnote'] => p:fresh","r[style-name='Footnote anchor'] =>","p[style-name='Endnote'] => p:fresh","r[style-name='Endnote anchor'] =>","p:unordered-list(1) => ul > li:fresh","p:unordered-list(2) => ul|ol > li > ul > li:fresh","p:unordered-list(3) => ul|ol > li > ul|ol > li > ul > li:fresh","p:unordered-list(4) => ul|ol > li > ul|ol > li > ul|ol > li > ul > li:fresh","p:unordered-list(5) => ul|ol > li > ul|ol > li > ul|ol > li > ul|ol > li > ul > li:fresh","p:ordered-list(1) => ol > li:fresh","p:ordered-list(2) => ul|ol > li > ol > li:fresh","p:ordered-list(3) => ul|ol > li > ul|ol > li > ol > li:fresh","p:ordered-list(4) => ul|ol > li > ul|ol > li > ul|ol > li > ol > li:fresh","p:ordered-list(5) => ul|ol > li > ul|ol > li > ul|ol > li > ul|ol > li > ol > li:fresh","r[style-name='Hyperlink'] =>","p[style-name='Normal'] => p:fresh","p.Body => p:fresh","p[style-name='Body'] => p:fresh"],t=bs._standardOptions={externalFileAccess:!1,transformDocument:s,includeDefaultStyleMap:!0,includeEmbeddedStyleMap:!0};function i(a){return a=a||{},n.extend({},t,a,{customStyleMap:r(a.styleMap),readStyleMap:function(){var o=this.customStyleMap;return this.includeEmbeddedStyleMap&&(o=o.concat(r(this.embeddedStyleMap))),this.includeDefaultStyleMap&&(o=o.concat(e)),o}})}function r(a){return a?n.isString(a)?a.split(`
`).map(function(o){return o.trim()}).filter(function(o){return o!==""&&o.charAt(0)!=="#"}):a:[]}function s(a){return a}return bs}var Zu={},Kv;function n8(){if(Kv)return Zu;Kv=1;var n=Pi(),e=eD();Zu.openZip=t;function t(i){return i.arrayBuffer?n.resolve(e.openArrayBuffer(i.arrayBuffer)):n.reject(new Error("Could not find file in options"))}return Zu}var Ju={},zv;function i8(){if(zv)return Ju;zv=1;var n=cl(),e=ol();Ju.element=t;function t(i){return function(r){return e.elementWithTag(n.element(i),[r])}}return Ju}var Xv;function r8(){if(Xv)return zt;Xv=1;var n=ut,e=BM(),t=NM(),i=HM().DocumentConverter,r=qM().convertElementToRawText,s=e8().readStyle,a=t8().readOptions,o=n8(),c=ti().Result;zt.convertToHtml=l,zt.convertToMarkdown=u,zt.convert=d,zt.extractRawText=m,zt.images=oD(),zt.transforms=sD(),zt.underline=i8(),zt.embedStyleMap=g,zt.readEmbeddedStyleMap=h;function l(y,v){return d(y,v)}function u(y,v){var b=Object.create(v||{});return b.outputFormat="markdown",d(y,b)}function d(y,v){return v=a(v),o.openZip(y).tap(function(b){return t.readStyleMap(b).then(function(T){v.embeddedStyleMap=T})}).then(function(b){return e.read(b,y,v).then(function(T){return T.map(v.transformDocument)}).then(function(T){return f(T,v)})})}function h(y){return o.openZip(y).then(t.readStyleMap)}function f(y,v){var b=p(v.readStyleMap()),T=n.extend({},v,{styleMap:b.value}),x=new i(T);return y.flatMapThen(function(_){return b.flatMapThen(function(D){return x.convertToHtml(_)})})}function p(y){return c.combine((y||[]).map(s)).map(function(v){return v.filter(function(b){return!!b})})}function m(y){return o.openZip(y).then(e.read).then(function(v){return v.map(r)})}function g(y,v){return o.openZip(y).tap(function(b){return t.writeStyleMap(b,v)}).then(function(b){return b.toArrayBuffer()}).then(function(b){return{toArrayBuffer:function(){return b},toBuffer:function(){return Buffer.from(b)}}})}return zt.styleMapping=function(){throw new Error(`Use a raw string instead of mammoth.styleMapping e.g. "p[style-name='Title'] => h1" instead of mammoth.styleMapping("p[style-name='Title'] => h1")`)},zt}var f4=r8();const ye=Number.isFinite||function(n){return typeof n=="number"&&isFinite(n)},s8=Number.isSafeInteger||function(n){return typeof n=="number"&&Math.abs(n)<=a8},a8=Number.MAX_SAFE_INTEGER||9007199254740991;let _e=(function(n){return n.NETWORK_ERROR="networkError",n.MEDIA_ERROR="mediaError",n.KEY_SYSTEM_ERROR="keySystemError",n.MUX_ERROR="muxError",n.OTHER_ERROR="otherError",n})({}),re=(function(n){return n.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",n.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",n.KEY_SYSTEM_NO_SESSION="keySystemNoSession",n.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",n.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",n.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",n.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",n.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",n.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",n.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",n.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",n.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",n.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",n.MANIFEST_LOAD_ERROR="manifestLoadError",n.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",n.MANIFEST_PARSING_ERROR="manifestParsingError",n.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",n.LEVEL_EMPTY_ERROR="levelEmptyError",n.LEVEL_LOAD_ERROR="levelLoadError",n.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",n.LEVEL_PARSING_ERROR="levelParsingError",n.LEVEL_SWITCH_ERROR="levelSwitchError",n.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",n.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",n.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",n.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",n.FRAG_LOAD_ERROR="fragLoadError",n.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",n.FRAG_DECRYPT_ERROR="fragDecryptError",n.FRAG_PARSING_ERROR="fragParsingError",n.FRAG_GAP="fragGap",n.REMUX_ALLOC_ERROR="remuxAllocError",n.KEY_LOAD_ERROR="keyLoadError",n.KEY_LOAD_TIMEOUT="keyLoadTimeOut",n.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",n.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",n.BUFFER_APPEND_ERROR="bufferAppendError",n.BUFFER_APPENDING_ERROR="bufferAppendingError",n.BUFFER_STALLED_ERROR="bufferStalledError",n.BUFFER_FULL_ERROR="bufferFullError",n.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",n.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",n.ASSET_LIST_LOAD_ERROR="assetListLoadError",n.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",n.ASSET_LIST_PARSING_ERROR="assetListParsingError",n.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",n.INTERNAL_EXCEPTION="internalException",n.INTERNAL_ABORTED="aborted",n.ATTACH_MEDIA_ERROR="attachMediaError",n.UNKNOWN="unknown",n})({}),R=(function(n){return n.MEDIA_ATTACHING="hlsMediaAttaching",n.MEDIA_ATTACHED="hlsMediaAttached",n.MEDIA_DETACHING="hlsMediaDetaching",n.MEDIA_DETACHED="hlsMediaDetached",n.MEDIA_ENDED="hlsMediaEnded",n.STALL_RESOLVED="hlsStallResolved",n.BUFFER_RESET="hlsBufferReset",n.BUFFER_CODECS="hlsBufferCodecs",n.BUFFER_CREATED="hlsBufferCreated",n.BUFFER_APPENDING="hlsBufferAppending",n.BUFFER_APPENDED="hlsBufferAppended",n.BUFFER_EOS="hlsBufferEos",n.BUFFERED_TO_END="hlsBufferedToEnd",n.BUFFER_FLUSHING="hlsBufferFlushing",n.BUFFER_FLUSHED="hlsBufferFlushed",n.MANIFEST_LOADING="hlsManifestLoading",n.MANIFEST_LOADED="hlsManifestLoaded",n.MANIFEST_PARSED="hlsManifestParsed",n.LEVEL_SWITCHING="hlsLevelSwitching",n.LEVEL_SWITCHED="hlsLevelSwitched",n.LEVEL_LOADING="hlsLevelLoading",n.LEVEL_LOADED="hlsLevelLoaded",n.LEVEL_UPDATED="hlsLevelUpdated",n.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",n.LEVELS_UPDATED="hlsLevelsUpdated",n.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",n.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",n.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",n.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",n.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",n.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",n.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",n.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",n.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",n.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",n.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",n.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",n.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",n.CUES_PARSED="hlsCuesParsed",n.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",n.INIT_PTS_FOUND="hlsInitPtsFound",n.FRAG_LOADING="hlsFragLoading",n.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",n.FRAG_LOADED="hlsFragLoaded",n.FRAG_DECRYPTED="hlsFragDecrypted",n.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",n.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",n.FRAG_PARSING_METADATA="hlsFragParsingMetadata",n.FRAG_PARSED="hlsFragParsed",n.FRAG_BUFFERED="hlsFragBuffered",n.FRAG_CHANGED="hlsFragChanged",n.FPS_DROP="hlsFpsDrop",n.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",n.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",n.ERROR="hlsError",n.DESTROYING="hlsDestroying",n.KEY_LOADING="hlsKeyLoading",n.KEY_LOADED="hlsKeyLoaded",n.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",n.BACK_BUFFER_REACHED="hlsBackBufferReached",n.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",n.ASSET_LIST_LOADING="hlsAssetListLoading",n.ASSET_LIST_LOADED="hlsAssetListLoaded",n.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",n.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",n.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",n.INTERSTITIAL_STARTED="hlsInterstitialStarted",n.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",n.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",n.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",n.INTERSTITIAL_ENDED="hlsInterstitialEnded",n.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",n.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",n.EVENT_CUE_ENTER="hlsEventCueEnter",n})({});var Be={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},xe={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};class Tr{constructor(e,t=0,i=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=i}sample(e,t){const i=Math.pow(this.alpha_,e);this.estimate_=t*(1-i)+i*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class o8{constructor(e,t,i,r=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Tr(e),this.fast_=new Tr(t),this.defaultTTFB_=r,this.ttfb_=new Tr(e)}update(e,t){const{slow_:i,fast_:r,ttfb_:s}=this;i.halfLife!==e&&(this.slow_=new Tr(e,i.getEstimate(),i.getTotalWeight())),r.halfLife!==t&&(this.fast_=new Tr(t,r.getEstimate(),r.getTotalWeight())),s.halfLife!==e&&(this.ttfb_=new Tr(e,s.getEstimate(),s.getTotalWeight()))}sample(e,t){e=Math.max(e,this.minDelayMs_);const i=8*t,r=e/1e3,s=i/r;this.fast_.sample(r,s),this.slow_.sample(r,s)}sampleTTFB(e){const t=e/1e3,i=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(i,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function c8(n,e,t){return(e=u8(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ke(){return Ke=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ke.apply(null,arguments)}function Yv(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function qe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Yv(Object(t),!0).forEach(function(i){c8(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Yv(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function l8(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function u8(n){var e=l8(n,"string");return typeof e=="symbol"?e:e+""}class an{constructor(e,t){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const i=`[${e}]:`;this.trace=hi,this.debug=t.debug.bind(null,i),this.log=t.log.bind(null,i),this.warn=t.warn.bind(null,i),this.info=t.info.bind(null,i),this.error=t.error.bind(null,i)}}const hi=function(){},d8={trace:hi,debug:hi,log:hi,warn:hi,info:hi,error:hi};function hh(){return Ke({},d8)}function h8(n,e){const t=self.console[n];return t?t.bind(self.console,`${e?"["+e+"] ":""}[${n}] >`):hi}function Qv(n,e,t){return e[n]?e[n].bind(e):h8(n,t)}const fh=hh();function f8(n,e,t){const i=hh();if(typeof console=="object"&&n===!0||typeof n=="object"){const r=["debug","log","info","warn","error"];r.forEach(s=>{i[s]=Qv(s,n,t)});try{i.log(`Debug logs enabled for "${e}" in hls.js version 1.6.15`)}catch{return hh()}r.forEach(s=>{fh[s]=Qv(s,n)})}else Ke(fh,i);return i}const je=fh;function ni(n=!0){return typeof self>"u"?void 0:(n||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function p8(n){return typeof self<"u"&&n===self.ManagedMediaSource}function fD(n,e){const t=Object.keys(n),i=Object.keys(e),r=t.length,s=i.length;return!r||!s||r===s&&!t.some(a=>i.indexOf(a)===-1)}function jt(n,e=!1){if(typeof TextDecoder<"u"){const l=new TextDecoder("utf-8").decode(n);if(e){const u=l.indexOf("\0");return u!==-1?l.substring(0,u):l}return l.replace(/\0/g,"")}const t=n.length;let i,r,s,a="",o=0;for(;o<t;){if(i=n[o++],i===0&&e)return a;if(i===0||i===3)continue;switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(i);break;case 12:case 13:r=n[o++],a+=String.fromCharCode((i&31)<<6|r&63);break;case 14:r=n[o++],s=n[o++],a+=String.fromCharCode((i&15)<<12|(r&63)<<6|(s&63)<<0);break}}return a}function Dt(n){let e="";for(let t=0;t<n.length;t++){let i=n[t].toString(16);i.length<2&&(i="0"+i),e+=i}return e}function pD(n){return Uint8Array.from(n.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}function g8(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ed={exports:{}},Zv;function m8(){return Zv||(Zv=1,(function(n,e){(function(t){var i=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,r=/^(?=([^\/?#]*))\1([^]*)$/,s=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(c,l,u){if(u=u||{},c=c.trim(),l=l.trim(),!l){if(!u.alwaysNormalize)return c;var d=o.parseURL(c);if(!d)throw new Error("Error trying to parse base URL.");return d.path=o.normalizePath(d.path),o.buildURLFromParts(d)}var h=o.parseURL(l);if(!h)throw new Error("Error trying to parse relative URL.");if(h.scheme)return u.alwaysNormalize?(h.path=o.normalizePath(h.path),o.buildURLFromParts(h)):l;var f=o.parseURL(c);if(!f)throw new Error("Error trying to parse base URL.");if(!f.netLoc&&f.path&&f.path[0]!=="/"){var p=r.exec(f.path);f.netLoc=p[1],f.path=p[2]}f.netLoc&&!f.path&&(f.path="/");var m={scheme:f.scheme,netLoc:h.netLoc,path:null,params:h.params,query:h.query,fragment:h.fragment};if(!h.netLoc&&(m.netLoc=f.netLoc,h.path[0]!=="/"))if(!h.path)m.path=f.path,h.params||(m.params=f.params,h.query||(m.query=f.query));else{var g=f.path,y=g.substring(0,g.lastIndexOf("/")+1)+h.path;m.path=o.normalizePath(y)}return m.path===null&&(m.path=u.alwaysNormalize?o.normalizePath(h.path):h.path),o.buildURLFromParts(m)},parseURL:function(c){var l=i.exec(c);return l?{scheme:l[1]||"",netLoc:l[2]||"",path:l[3]||"",params:l[4]||"",query:l[5]||"",fragment:l[6]||""}:null},normalizePath:function(c){for(c=c.split("").reverse().join("").replace(s,"");c.length!==(c=c.replace(a,"")).length;);return c.split("").reverse().join("")},buildURLFromParts:function(c){return c.scheme+c.netLoc+c.path+c.params+c.query+c.fragment}};n.exports=o})()})(ed)),ed.exports}var Ap=m8();class ll{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var Xe={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class wp{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,typeof e=="string"&&(e={url:e}),this.base=e,y8(this,"stats")}setByteRange(e,t){const i=e.split("@",2);let r;i.length===1?r=t?.byteRangeEndOffset||0:r=parseInt(i[1]),this._byteRange=[r,parseInt(i[0])+r]}get baseurl(){return this.base.url}get byteRange(){return this._byteRange===null?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return this._streams===null&&(this._streams={[Xe.AUDIO]:null,[Xe.VIDEO]:null,[Xe.AUDIOVIDEO]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return this._stats!==null}get hasStreams(){return this._streams!==null}get stats(){return this._stats===null&&(this._stats=new ll),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Ap.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[Xe.AUDIO]=null,e[Xe.VIDEO]=null,e[Xe.AUDIOVIDEO]=null}}function lt(n){return n.sn!=="initSegment"}class $o extends wp{constructor(e,t){super(t),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange.length){const e=this.byteRange[0],t=this.byteRange[1];if(ye(e)&&ye(t))return t-e}return null}get bitrate(){return this.byteLength?this.byteLength*8/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){var e;const{levelkeys:t}=this;if(!t||t.NONE)return null;if(t.identity)this._decryptdata||(this._decryptdata=t.identity.getDecryptData(this.sn));else if(!((e=this._decryptdata)!=null&&e.keyId)){const i=Object.keys(t);if(i.length===1){const r=this._decryptdata=t[i[0]]||null;r&&(this._decryptdata=r.getDecryptData(this.sn,t))}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null)return null;const e=ye(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){var t;const i=Object.keys(this.levelkeys),r=i.length;if(r>1||r===1&&(t=this.levelkeys[i[0]])!=null&&t.encrypted)return!0}return!1}get programDateTime(){return this._programDateTime===null&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){if(!ye(e)){this._programDateTime=this.rawProgramDateTime=null;return}this._programDateTime=e}get ref(){return lt(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){const t=this.levelkeys;if(t){var i;const r=t[e];r&&!((i=this._decryptdata)!=null&&i.keyId)&&(this._decryptdata=r.getDecryptData(this.sn,t))}}abortRequests(){var e,t;(e=this.loader)==null||e.abort(),(t=this.keyLoader)==null||t.abort()}setElementaryStreamInfo(e,t,i,r,s,a=!1){const{elementaryStreams:o}=this,c=o[e];if(!c){o[e]={startPTS:t,endPTS:i,startDTS:r,endDTS:s,partial:a};return}c.startPTS=Math.min(c.startPTS,t),c.endPTS=Math.max(c.endPTS,i),c.startDTS=Math.min(c.startDTS,r),c.endDTS=Math.max(c.endDTS,s)}}class gD extends wp{constructor(e,t,i,r,s){super(i),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=r;const a=e.enumeratedString("BYTERANGE");a&&this.setByteRange(a,s),s&&(this.fragOffset=s.fragOffset+s.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}function mD(n,e){const t=Object.getPrototypeOf(n);if(t){const i=Object.getOwnPropertyDescriptor(t,e);return i||mD(t,e)}}function y8(n,e){const t=mD(n,e);t&&(t.enumerable=!0,Object.defineProperty(n,e,t))}const Jv=Math.pow(2,32)-1,v8=[].push,yD={video:1,audio:2,id3:3,text:4};function pt(n){return String.fromCharCode.apply(null,n)}function vD(n,e){const t=n[e]<<8|n[e+1];return t<0?65536+t:t}function Le(n,e){const t=bD(n,e);return t<0?4294967296+t:t}function e1(n,e){let t=Le(n,e);return t*=Math.pow(2,32),t+=Le(n,e+4),t}function bD(n,e){return n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]}function b8(n){const e=n.byteLength;for(let t=0;t<e;){const i=Le(n,t);if(i>8&&n[t+4]===109&&n[t+5]===111&&n[t+6]===111&&n[t+7]===102)return!0;t=i>1?t+i:e}return!1}function Me(n,e){const t=[];if(!e.length)return t;const i=n.byteLength;for(let r=0;r<i;){const s=Le(n,r),a=pt(n.subarray(r+4,r+8)),o=s>1?r+s:i;if(a===e[0])if(e.length===1)t.push(n.subarray(r+8,o));else{const c=Me(n.subarray(r+8,o),e.slice(1));c.length&&v8.apply(t,c)}r=o}return t}function x8(n){const e=[],t=n[0];let i=8;const r=Le(n,i);i+=4;let s=0,a=0;t===0?(s=Le(n,i),a=Le(n,i+4),i+=8):(s=e1(n,i),a=e1(n,i+8),i+=16),i+=2;let o=n.length+a;const c=vD(n,i);i+=2;for(let l=0;l<c;l++){let u=i;const d=Le(n,u);u+=4;const h=d&2147483647;if((d&2147483648)>>>31===1)return je.warn("SIDX has hierarchical references (not supported)"),null;const p=Le(n,u);u+=4,e.push({referenceSize:h,subsegmentDuration:p,info:{duration:p/r,start:o,end:o+h-1}}),o+=h,u+=4,i=u}return{earliestPresentationTime:s,timescale:r,version:t,referencesCount:c,references:e}}function xD(n){const e=[],t=Me(n,["moov","trak"]);for(let r=0;r<t.length;r++){const s=t[r],a=Me(s,["tkhd"])[0];if(a){let o=a[0];const c=Le(a,o===0?12:20),l=Me(s,["mdia","mdhd"])[0];if(l){o=l[0];const u=Le(l,o===0?12:20),d=Me(s,["mdia","hdlr"])[0];if(d){const h=pt(d.subarray(8,12)),f={soun:Xe.AUDIO,vide:Xe.VIDEO}[h],p=Me(s,["mdia","minf","stbl","stsd"])[0],m=T8(p);f?(e[c]={timescale:u,type:f,stsd:m},e[f]=qe({timescale:u,id:c},m)):e[c]={timescale:u,type:h,stsd:m}}}}}return Me(n,["moov","mvex","trex"]).forEach(r=>{const s=Le(r,4),a=e[s];a&&(a.default={duration:Le(r,12),flags:Le(r,20)})}),e}function T8(n){const e=n.subarray(8),t=e.subarray(86),i=pt(e.subarray(4,8));let r=i,s;const a=i==="enca"||i==="encv";if(a){const l=Me(e,[i])[0].subarray(i==="enca"?28:78);Me(l,["sinf"]).forEach(d=>{const h=Me(d,["schm"])[0];if(h){const f=pt(h.subarray(4,8));if(f==="cbcs"||f==="cenc"){const p=Me(d,["frma"])[0];p&&(r=pt(p))}}})}const o=r;switch(r){case"avc1":case"avc2":case"avc3":case"avc4":{const c=Me(t,["avcC"])[0];c&&c.length>3&&(r+="."+ja(c[1])+ja(c[2])+ja(c[3]),s=qa(o==="avc1"?"dva1":"dvav",t));break}case"mp4a":{const c=Me(e,[i])[0],l=Me(c.subarray(28),["esds"])[0];if(l&&l.length>7){let u=4;if(l[u++]!==3)break;u=td(l,u),u+=2;const d=l[u++];if(d&128&&(u+=2),d&64&&(u+=l[u++]),l[u++]!==4)break;u=td(l,u);const h=l[u++];if(h===64)r+="."+ja(h);else break;if(u+=12,l[u++]!==5)break;u=td(l,u);const f=l[u++];let p=(f&248)>>3;p===31&&(p+=1+((f&7)<<3)+((l[u]&224)>>5)),r+="."+p}break}case"hvc1":case"hev1":{const c=Me(t,["hvcC"])[0];if(c&&c.length>12){const l=c[1],u=["","A","B","C"][l>>6],d=l&31,h=Le(c,2),f=(l&32)>>5?"H":"L",p=c[12],m=c.subarray(6,12);r+="."+u+d,r+="."+_8(h).toString(16).toUpperCase(),r+="."+f+p;let g="";for(let y=m.length;y--;){const v=m[y];(v||g)&&(g="."+v.toString(16).toUpperCase()+g)}r+=g}s=qa(o=="hev1"?"dvhe":"dvh1",t);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":{r=qa(r,t)||r;break}case"vp09":{const c=Me(t,["vpcC"])[0];if(c&&c.length>6){const l=c[4],u=c[5],d=c[6]>>4&15;r+="."+Dn(l)+"."+Dn(u)+"."+Dn(d)}break}case"av01":{const c=Me(t,["av1C"])[0];if(c&&c.length>2){const l=c[1]>>>5,u=c[1]&31,d=c[2]>>>7?"H":"M",h=(c[2]&64)>>6,f=(c[2]&32)>>5,p=l===2&&h?f?12:10:h?10:8,m=(c[2]&16)>>4,g=(c[2]&8)>>3,y=(c[2]&4)>>2,v=c[2]&3;r+="."+l+"."+Dn(u)+d+"."+Dn(p)+"."+m+"."+g+y+v+"."+Dn(1)+"."+Dn(1)+"."+Dn(1)+"."+0,s=qa("dav1",t)}break}}return{codec:r,encrypted:a,supplemental:s}}function qa(n,e){const t=Me(e,["dvvC"]),i=t.length?t[0]:Me(e,["dvcC"])[0];if(i){const r=i[2]>>1&127,s=i[2]<<5&32|i[3]>>3&31;return n+"."+Dn(r)+"."+Dn(s)}}function _8(n){let e=0;for(let t=0;t<32;t++)e|=(n>>t&1)<<31-t;return e>>>0}function td(n,e){const t=e+5;for(;n[e++]&128&&e<t;);return e}function ja(n){return("0"+n.toString(16).toUpperCase()).slice(-2)}function Dn(n){return(n<10?"0":"")+n}function D8(n,e){if(!n||!e)return;const t=e.keyId;t&&e.isCommonEncryption&&TD(n,(i,r)=>{const s=i.subarray(8,24);s.some(a=>a!==0)||(je.log(`[eme] Patching keyId in 'enc${r?"a":"v"}>sinf>>tenc' box: ${Dt(s)} -> ${Dt(t)}`),i.set(t,8))})}function E8(n){const e=[];return TD(n,t=>e.push(t.subarray(8,24))),e}function TD(n,e){Me(n,["moov","trak"]).forEach(i=>{const r=Me(i,["mdia","minf","stbl","stsd"])[0];if(!r)return;const s=r.subarray(8);let a=Me(s,["enca"]);const o=a.length>0;o||(a=Me(s,["encv"])),a.forEach(c=>{const l=o?c.subarray(28):c.subarray(78);Me(l,["sinf"]).forEach(d=>{const h=_D(d);h&&e(h,o)})})})}function _D(n){const e=Me(n,["schm"])[0];if(e){const t=pt(e.subarray(4,8));if(t==="cbcs"||t==="cenc"){const i=Me(n,["schi","tenc"])[0];if(i)return i}}}function S8(n,e,t){const i={},r=Me(n,["moof","traf"]);for(let s=0;s<r.length;s++){const a=r[s],o=Me(a,["tfhd"])[0],c=Le(o,4),l=e[c];if(!l)continue;i[c]||(i[c]={start:NaN,duration:0,sampleCount:0,timescale:l.timescale,type:l.type});const u=i[c],d=Me(a,["tfdt"])[0];if(d){const b=d[0];let T=Le(d,4);b===1&&(T===Jv?t.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(T*=Jv+1,T+=Le(d,8))),ye(T)&&(!ye(u.start)||T<u.start)&&(u.start=T)}const h=l.default,f=Le(o,0)|h?.flags;let p=h?.duration||0;f&8&&(f&2?p=Le(o,12):p=Le(o,8));const m=Me(a,["trun"]);let g=u.start||0,y=0,v=p;for(let b=0;b<m.length;b++){const T=m[b],x=Le(T,4),_=u.sampleCount;u.sampleCount+=x;const D=T[3]&1,w=T[3]&4,S=T[2]&1,C=T[2]&2,O=T[2]&4,I=T[2]&8;let L=8,E=x;for(D&&(L+=4),w&&x&&(!(T[L+1]&1)&&u.keyFrameIndex===void 0&&(u.keyFrameIndex=_),L+=4,S?(v=Le(T,L),L+=4):v=p,C&&(L+=4),I&&(L+=4),g+=v,y+=v,E--);E--;)S?(v=Le(T,L),L+=4):v=p,C&&(L+=4),O&&(T[L+1]&1||u.keyFrameIndex===void 0&&(u.keyFrameIndex=u.sampleCount-(E+1),u.keyFrameStart=g),L+=4),I&&(L+=4),g+=v,y+=v;!y&&p&&(y+=p*x)}u.duration+=y}if(!Object.keys(i).some(s=>i[s].duration)){let s=1/0,a=0;const o=Me(n,["sidx"]);for(let c=0;c<o.length;c++){const l=x8(o[c]);if(l!=null&&l.references){s=Math.min(s,l.earliestPresentationTime/l.timescale);const u=l.references.reduce((d,h)=>d+h.info.duration||0,0);a=Math.max(a,u+l.earliestPresentationTime/l.timescale)}}a&&ye(a)&&Object.keys(i).forEach(c=>{i[c].duration||(i[c].duration=a*i[c].timescale-i[c].start)})}return i}function A8(n){const e={valid:null,remainder:null},t=Me(n,["moof"]);if(t.length<2)return e.remainder=n,e;const i=t[t.length-1];return e.valid=n.slice(0,i.byteOffset-8),e.remainder=n.slice(i.byteOffset-8),e}function rn(n,e){const t=new Uint8Array(n.length+e.length);return t.set(n),t.set(e,n.length),t}function t1(n,e){const t=[],i=e.samples,r=e.timescale,s=e.id;let a=!1;return Me(i,["moof"]).map(c=>{const l=c.byteOffset-8;Me(c,["traf"]).map(d=>{const h=Me(d,["tfdt"]).map(f=>{const p=f[0];let m=Le(f,4);return p===1&&(m*=Math.pow(2,32),m+=Le(f,8)),m/r})[0];return h!==void 0&&(n=h),Me(d,["tfhd"]).map(f=>{const p=Le(f,4),m=Le(f,0)&16777215,g=(m&1)!==0,y=(m&2)!==0,v=(m&8)!==0;let b=0;const T=(m&16)!==0;let x=0;const _=(m&32)!==0;let D=8;p===s&&(g&&(D+=8),y&&(D+=4),v&&(b=Le(f,D),D+=4),T&&(x=Le(f,D),D+=4),_&&(D+=4),e.type==="video"&&(a=ul(e.codec)),Me(d,["trun"]).map(w=>{const S=w[0],C=Le(w,0)&16777215,O=(C&1)!==0;let I=0;const L=(C&4)!==0,E=(C&256)!==0;let $=0;const U=(C&512)!==0;let F=0;const G=(C&1024)!==0,W=(C&2048)!==0;let Y=0;const P=Le(w,4);let V=8;O&&(I=Le(w,V),V+=4),L&&(V+=4);let j=I+l;for(let te=0;te<P;te++){if(E?($=Le(w,V),V+=4):$=b,U?(F=Le(w,V),V+=4):F=x,G&&(V+=4),W&&(S===0?Y=Le(w,V):Y=bD(w,V),V+=4),e.type===Xe.VIDEO){let ne=0;for(;ne<F;){const ue=Le(i,j);if(j+=4,w8(a,i[j])){const he=i.subarray(j,j+ue);Ip(he,a?2:1,n+Y/r,t)}j+=ue,ne+=ue+4}}n+=$/r}}))})})}),t}function ul(n){if(!n)return!1;const e=n.substring(0,4);return e==="hvc1"||e==="hev1"||e==="dvh1"||e==="dvhe"}function w8(n,e){if(n){const t=e>>1&63;return t===39||t===40}else return(e&31)===6}function Ip(n,e,t,i){const r=DD(n);let s=0;s+=e;let a=0,o=0,c=0;for(;s<r.length;){a=0;do{if(s>=r.length)break;c=r[s++],a+=c}while(c===255);o=0;do{if(s>=r.length)break;c=r[s++],o+=c}while(c===255);const l=r.length-s;let u=s;if(o<l)s+=o;else if(o>l){je.error(`Malformed SEI payload. ${o} is too small, only ${l} bytes left to parse.`);break}if(a===4){if(r[u++]===181){const h=vD(r,u);if(u+=2,h===49){const f=Le(r,u);if(u+=4,f===1195456820){const p=r[u++];if(p===3){const m=r[u++],g=31&m,y=64&m,v=y?2+g*3:0,b=new Uint8Array(v);if(y){b[0]=m;for(let T=1;T<v;T++)b[T]=r[u++]}i.push({type:p,payloadType:a,pts:t,bytes:b})}}}}}else if(a===5&&o>16){const d=[];for(let p=0;p<16;p++){const m=r[u++].toString(16);d.push(m.length==1?"0"+m:m),(p===3||p===5||p===7||p===9)&&d.push("-")}const h=o-16,f=new Uint8Array(h);for(let p=0;p<h;p++)f[p]=r[u++];i.push({payloadType:a,pts:t,uuid:d.join(""),userData:jt(f),userDataBytes:f})}}}function DD(n){const e=n.byteLength,t=[];let i=1;for(;i<e-2;)n[i]===0&&n[i+1]===0&&n[i+2]===3?(t.push(i+2),i+=2):i++;if(t.length===0)return n;const r=e-t.length,s=new Uint8Array(r);let a=0;for(i=0;i<r;a++,i++)a===t[0]&&(a++,t.shift()),s[i]=n[a];return s}function I8(n){const e=n[0];let t="",i="",r=0,s=0,a=0,o=0,c=0,l=0;if(e===0){for(;pt(n.subarray(l,l+1))!=="\0";)t+=pt(n.subarray(l,l+1)),l+=1;for(t+=pt(n.subarray(l,l+1)),l+=1;pt(n.subarray(l,l+1))!=="\0";)i+=pt(n.subarray(l,l+1)),l+=1;i+=pt(n.subarray(l,l+1)),l+=1,r=Le(n,12),s=Le(n,16),o=Le(n,20),c=Le(n,24),l=28}else if(e===1){l+=4,r=Le(n,l),l+=4;const d=Le(n,l);l+=4;const h=Le(n,l);for(l+=4,a=2**32*d+h,s8(a)||(a=Number.MAX_SAFE_INTEGER,je.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=Le(n,l),l+=4,c=Le(n,l),l+=4;pt(n.subarray(l,l+1))!=="\0";)t+=pt(n.subarray(l,l+1)),l+=1;for(t+=pt(n.subarray(l,l+1)),l+=1;pt(n.subarray(l,l+1))!=="\0";)i+=pt(n.subarray(l,l+1)),l+=1;i+=pt(n.subarray(l,l+1)),l+=1}const u=n.subarray(l,n.byteLength);return{schemeIdUri:t,value:i,timeScale:r,presentationTime:a,presentationTimeDelta:s,eventDuration:o,id:c,payload:u}}function C8(n,...e){const t=e.length;let i=8,r=t;for(;r--;)i+=e[r].byteLength;const s=new Uint8Array(i);for(s[0]=i>>24&255,s[1]=i>>16&255,s[2]=i>>8&255,s[3]=i&255,s.set(n,4),r=0,i=8;r<t;r++)s.set(e[r],i),i+=e[r].byteLength;return s}function R8(n,e,t){if(n.byteLength!==16)throw new RangeError("Invalid system id");let i,r;i=0,r=new Uint8Array;let s;i>0?(s=new Uint8Array(4),e.length>0&&new DataView(s.buffer).setUint32(0,e.length,!1)):s=new Uint8Array;const a=new Uint8Array(4);return t.byteLength>0&&new DataView(a.buffer).setUint32(0,t.byteLength,!1),C8([112,115,115,104],new Uint8Array([i,0,0,0]),n,s,r,a,t)}function L8(n){const e=[];if(n instanceof ArrayBuffer){const t=n.byteLength;let i=0;for(;i+32<t;){const r=new DataView(n,i),s=U8(r);e.push(s),i+=s.size}}return e}function U8(n){const e=n.getUint32(0),t=n.byteOffset,i=n.byteLength;if(i<e)return{offset:t,size:i};if(n.getUint32(4)!==1886614376)return{offset:t,size:e};const s=n.getUint32(8)>>>24;if(s!==0&&s!==1)return{offset:t,size:e};const a=n.buffer,o=Dt(new Uint8Array(a,t+12,16));let c=null,l=null,u=0;if(s===0)u=28;else{const h=n.getUint32(28);if(!h||i<32+h*16)return{offset:t,size:e};c=[];for(let f=0;f<h;f++)c.push(new Uint8Array(a,t+32+f*16,16));u=32+h*16}if(!u)return{offset:t,size:e};const d=n.getUint32(u);return e-32<d?{offset:t,size:e}:(l=new Uint8Array(a,t+u+4,d),{version:s,systemId:o,kids:c,data:l,offset:t,size:e})}const ED=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),Xr={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function Cp(n,e){const t=Xr[e];return!!t&&!!t[n.slice(0,4)]}function ea(n,e,t=!0){return!n.split(",").some(i=>!Rp(i,e,t))}function Rp(n,e,t=!0){var i;const r=ni(t);return(i=r?.isTypeSupported(ta(n,e)))!=null?i:!1}function ta(n,e){return`${e}/mp4;codecs=${n}`}function n1(n){if(n){const e=n.substring(0,4);return Xr.video[e]}return 2}function pc(n){const e=ED();return n.split(",").reduce((t,i)=>{const s=e&&ul(i)?9:Xr.video[i];return s?(s*2+t)/(t?3:2):(Xr.audio[i]+t)/(t?2:1)},0)}const nd={};function k8(n,e=!0){if(nd[n])return nd[n];const t={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[n];for(let r=0;r<t.length;r++){var i;if(Rp(t[r],"audio",e))return nd[n]=t[r],t[r];if(t[r]==="mp3"&&(i=ni(e))!=null&&i.isTypeSupported("audio/mpeg"))return""}return n}const F8=/flac|opus|mp4a\.40\.34/i;function gc(n,e=!0){return n.replace(F8,t=>k8(t.toLowerCase(),e))}function P8(n,e){const t=[];if(n){const i=n.split(",");for(let r=0;r<i.length;r++)Cp(i[r],"video")||t.push(i[r])}return e&&t.push(e),t.join(",")}function Wo(n,e){if(n&&(n.length>4||["ac-3","ec-3","alac","fLaC","Opus"].indexOf(n)!==-1)&&(i1(n,"audio")||i1(n,"video")))return n;if(e){const t=e.split(",");if(t.length>1){if(n){for(let i=t.length;i--;)if(t[i].substring(0,4)===n.substring(0,4))return t[i]}return t[0]}}return e||n}function i1(n,e){return Cp(n,e)&&Rp(n,e)}function O8(n){const e=n.split(",");for(let t=0;t<e.length;t++){const i=e[t].split(".");i.length>2&&i[0]==="avc1"&&(e[t]=`avc1.${parseInt(i[1]).toString(16)}${("000"+parseInt(i[2]).toString(16)).slice(-4)}`)}return e.join(",")}function M8(n){if(n.startsWith("av01.")){const e=n.split("."),t=["0","111","01","01","01","0"];for(let i=e.length;i>4&&i<10;i++)e[i]=t[i-4];return e.join(".")}return n}function r1(n){const e=ni(n)||{isTypeSupported:()=>!1};return{mpeg:e.isTypeSupported("audio/mpeg"),mp3:e.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:e.isTypeSupported('audio/mp4; codecs="ac-3"')}}function ph(n){return n.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const B8={supported:!0,powerEfficient:!0,smooth:!0},N8={supported:!1,smooth:!1,powerEfficient:!1},SD={supported:!0,configurations:[],decodingInfoResults:[B8]};function AD(n,e){return{supported:!1,configurations:e,decodingInfoResults:[N8],error:n}}function $8(n,e,t,i,r,s){const a=n.videoCodec,o=n.audioCodec?n.audioGroups:null,c=s?.audioCodec,l=s?.channels,u=l?parseInt(l):c?1/0:2;let d=null;if(o!=null&&o.length)try{o.length===1&&o[0]?d=e.groups[o[0]].channels:d=o.reduce((h,f)=>{if(f){const p=e.groups[f];if(!p)throw new Error(`Audio track group ${f} not found`);Object.keys(p.channels).forEach(m=>{h[m]=(h[m]||0)+p.channels[m]})}return h},{2:0})}catch{return!0}return a!==void 0&&(a.split(",").some(h=>ul(h))||n.width>1920&&n.height>1088||n.height>1920&&n.width>1088||n.frameRate>Math.max(i,30)||n.videoRange!=="SDR"&&n.videoRange!==t||n.bitrate>Math.max(r,8e6))||!!d&&ye(u)&&Object.keys(d).some(h=>parseInt(h)>u)}function wD(n,e,t,i={}){const r=n.videoCodec;if(!r&&!n.audioCodec||!t)return Promise.resolve(SD);const s=[],a=W8(n),o=a.length,c=V8(n,e,o>0),l=c.length;for(let u=o||1*l||1;u--;){const d={type:"media-source"};if(o&&(d.video=a[u%o]),l){d.audio=c[u%l];const h=d.audio.bitrate;d.video&&h&&(d.video.bitrate-=h)}s.push(d)}if(r){const u=navigator.userAgent;if(r.split(",").some(d=>ul(d))&&ED())return Promise.resolve(AD(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (${u})`),s))}return Promise.all(s.map(u=>{const d=H8(u);return i[d]||(i[d]=t.decodingInfo(u))})).then(u=>({supported:!u.some(d=>!d.supported),configurations:s,decodingInfoResults:u})).catch(u=>({supported:!1,configurations:s,decodingInfoResults:[],error:u}))}function W8(n){var e;const t=(e=n.videoCodec)==null?void 0:e.split(","),i=ID(n),r=n.width||640,s=n.height||480,a=n.frameRate||30,o=n.videoRange.toLowerCase();return t?t.map(c=>{const l={contentType:ta(M8(c),"video"),width:r,height:s,bitrate:i,framerate:a};return o!=="sdr"&&(l.transferFunction=o),l}):[]}function V8(n,e,t){var i;const r=(i=n.audioCodec)==null?void 0:i.split(","),s=ID(n);return r&&n.audioGroups?n.audioGroups.reduce((a,o)=>{var c;const l=o?(c=e.groups[o])==null?void 0:c.tracks:null;return l?l.reduce((u,d)=>{if(d.groupId===o){const h=parseFloat(d.channels||"");r.forEach(f=>{const p={contentType:ta(f,"audio"),bitrate:t?G8(f,s):s};h&&(p.channels=""+h),u.push(p)})}return u},a):a},[]):[]}function G8(n,e){if(e<=1)return 1;let t=128e3;return n==="ec-3"?t=768e3:n==="ac-3"&&(t=64e4),Math.min(e/2,t)}function ID(n){return Math.ceil(Math.max(n.bitrate*.9,n.averageBitrate)/1e3)*1e3||1}function H8(n){let e="";const{audio:t,video:i}=n;if(i){const r=ph(i.contentType);e+=`${r}_r${i.height}x${i.width}f${Math.ceil(i.framerate)}${i.transferFunction||"sd"}_${Math.ceil(i.bitrate/1e5)}`}if(t){const r=ph(t.contentType);e+=`${i?"_":""}${r}_c${t.channels}`}return e}const gh=["NONE","TYPE-0","TYPE-1",null];function q8(n){return gh.indexOf(n)>-1}const mc=["SDR","PQ","HLG"];function j8(n){return!!n&&mc.indexOf(n)>-1}var ks={No:"",Yes:"YES",v2:"v2"};function s1(n){const{canSkipUntil:e,canSkipDateRanges:t,age:i}=n,r=i<e/2;return e&&r?t?ks.v2:ks.Yes:ks.No}class mh{constructor(e,t,i){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=i}addDirectives(e){const t=new self.URL(e);return this.msn!==void 0&&t.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class Yr{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(i=>!!i).map(i=>i.substring(0,4)).join(","),"supplemental"in e){var t;this.supplemental=e.supplemental;const i=(t=e.supplemental)==null?void 0:t.videoCodec;i&&i!==e.videoCodec&&(this.codecSet+=`,${i.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return a1(this._audioGroups,e)}hasSubtitleGroup(e){return a1(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t){if(e==="audio"){let i=this._audioGroups;i||(i=this._audioGroups=[]),i.indexOf(t)===-1&&i.push(t)}else if(e==="text"){let i=this._subtitleGroups;i||(i=this._subtitleGroups=[]),i.indexOf(t)===-1&&i.push(t)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function a1(n,e){return!e||!n?!1:n.indexOf(e)!==-1}function K8(){if(typeof matchMedia=="function"){const n=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(n.media!==e.media)return n.matches===!0}return!1}function z8(n,e){let t=!1,i=[];if(n&&(t=n!=="SDR",i=[n]),e){i=e.allowedVideoRanges||mc.slice(0);const r=i.join("")!=="SDR"&&!e.videoCodec;t=e.preferHDR!==void 0?e.preferHDR:r&&K8(),t||(i=["SDR"])}return{preferHDR:t,allowedVideoRanges:i}}const X8=n=>{const e=new WeakSet;return(t,i)=>{if(n&&(i=n(t,i)),typeof i=="object"&&i!==null){if(e.has(i))return;e.add(i)}return i}},Ye=(n,e)=>JSON.stringify(n,X8(e));function Y8(n,e,t,i,r){const s=Object.keys(n),a=i?.channels,o=i?.audioCodec,c=r?.videoCodec,l=a&&parseInt(a)===2;let u=!1,d=!1,h=1/0,f=1/0,p=1/0,m=1/0,g=0,y=[];const{preferHDR:v,allowedVideoRanges:b}=z8(e,r);for(let w=s.length;w--;){const S=n[s[w]];u||(u=S.channels[2]>0),h=Math.min(h,S.minHeight),f=Math.min(f,S.minFramerate),p=Math.min(p,S.minBitrate),b.filter(O=>S.videoRanges[O]>0).length>0&&(d=!0)}h=ye(h)?h:0,f=ye(f)?f:0;const T=Math.max(1080,h),x=Math.max(30,f);p=ye(p)?p:t,t=Math.max(p,t),d||(e=void 0);const _=s.length>1;return{codecSet:s.reduce((w,S)=>{const C=n[S];if(S===w)return w;if(y=d?b.filter(O=>C.videoRanges[O]>0):[],_){if(C.minBitrate>t)return Tn(S,`min bitrate of ${C.minBitrate} > current estimate of ${t}`),w;if(!C.hasDefaultAudio)return Tn(S,"no renditions with default or auto-select sound found"),w;if(o&&S.indexOf(o.substring(0,4))%5!==0)return Tn(S,`audio codec preference "${o}" not found`),w;if(a&&!l){if(!C.channels[a])return Tn(S,`no renditions with ${a} channel sound found (channels options: ${Object.keys(C.channels)})`),w}else if((!o||l)&&u&&C.channels[2]===0)return Tn(S,"no renditions with stereo sound found"),w;if(C.minHeight>T)return Tn(S,`min resolution of ${C.minHeight} > maximum of ${T}`),w;if(C.minFramerate>x)return Tn(S,`min framerate of ${C.minFramerate} > maximum of ${x}`),w;if(!y.some(O=>C.videoRanges[O]>0))return Tn(S,`no variants with VIDEO-RANGE of ${Ye(y)} found`),w;if(c&&S.indexOf(c.substring(0,4))%5!==0)return Tn(S,`video codec preference "${c}" not found`),w;if(C.maxScore<g)return Tn(S,`max score of ${C.maxScore} < selected max of ${g}`),w}return w&&(pc(S)>=pc(w)||C.fragmentError>n[w].fragmentError)?w:(m=C.minIndex,g=C.maxScore,S)},void 0),videoRanges:y,preferHDR:v,minFramerate:f,minBitrate:p,minIndex:m}}function Tn(n,e){je.log(`[abr] start candidates with "${n}" ignored because ${e}`)}function CD(n){return n.reduce((e,t)=>{let i=e.groups[t.groupId];i||(i=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),i.tracks.push(t);const r=t.channels||"2";return i.channels[r]=(i.channels[r]||0)+1,i.hasDefault=i.hasDefault||t.default,i.hasAutoSelect=i.hasAutoSelect||t.autoselect,i.hasDefault&&(e.hasDefaultAudio=!0),i.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function Q8(n,e,t,i){return n.slice(t,i+1).reduce((r,s,a)=>{if(!s.codecSet)return r;const o=s.audioGroups;let c=r[s.codecSet];c||(r[s.codecSet]=c={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:a,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!o,fragmentError:0}),c.minBitrate=Math.min(c.minBitrate,s.bitrate);const l=Math.min(s.height,s.width);return c.minHeight=Math.min(c.minHeight,l),c.minFramerate=Math.min(c.minFramerate,s.frameRate),c.minIndex=Math.min(c.minIndex,a),c.maxScore=Math.max(c.maxScore,s.score),c.fragmentError+=s.fragmentError,c.videoRanges[s.videoRange]=(c.videoRanges[s.videoRange]||0)+1,o&&o.forEach(u=>{if(!u)return;const d=e.groups[u];d&&(c.hasDefaultAudio=c.hasDefaultAudio||e.hasDefaultAudio?d.hasDefault:d.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(d.channels).forEach(h=>{c.channels[h]=(c.channels[h]||0)+d.channels[h]}))}),r},{})}function o1(n){if(!n)return n;const{lang:e,assocLang:t,characteristics:i,channels:r,audioCodec:s}=n;return{lang:e,assocLang:t,characteristics:i,channels:r,audioCodec:s}}function wn(n,e,t){if("attrs"in n){const i=e.indexOf(n);if(i!==-1)return i}for(let i=0;i<e.length;i++){const r=e[i];if(rr(n,r,t))return i}return-1}function rr(n,e,t){const{groupId:i,name:r,lang:s,assocLang:a,default:o}=n,c=n.forced;return(i===void 0||e.groupId===i)&&(r===void 0||e.name===r)&&(s===void 0||Z8(s,e.lang))&&(s===void 0||e.assocLang===a)&&(o===void 0||e.default===o)&&(c===void 0||e.forced===c)&&(!("characteristics"in n)||J8(n.characteristics||"",e.characteristics))&&(t===void 0||t(n,e))}function Z8(n,e="--"){return n.length===e.length?n===e:n.startsWith(e)||e.startsWith(n)}function J8(n,e=""){const t=n.split(","),i=e.split(",");return t.length===i.length&&!t.some(r=>i.indexOf(r)===-1)}function Xi(n,e){const{audioCodec:t,channels:i}=n;return(t===void 0||(e.audioCodec||"").substring(0,4)===t.substring(0,4))&&(i===void 0||i===(e.channels||"2"))}function eB(n,e,t,i,r){const s=e[i],o=e.reduce((h,f,p)=>{const m=f.uri;return(h[m]||(h[m]=[])).push(p),h},{})[s.uri];o.length>1&&(i=Math.max.apply(Math,o));const c=s.videoRange,l=s.frameRate,u=s.codecSet.substring(0,4),d=c1(e,i,h=>{if(h.videoRange!==c||h.frameRate!==l||h.codecSet.substring(0,4)!==u)return!1;const f=h.audioGroups,p=t.filter(m=>!f||f.indexOf(m.groupId)!==-1);return wn(n,p,r)>-1});return d>-1?d:c1(e,i,h=>{const f=h.audioGroups,p=t.filter(m=>!f||f.indexOf(m.groupId)!==-1);return wn(n,p,r)>-1})}function c1(n,e,t){for(let i=e;i>-1;i--)if(t(n[i]))return i;for(let i=e+1;i<n.length;i++)if(t(n[i]))return i;return-1}function yc(n,e){var t;return!!n&&n!==((t=e.loadLevelObj)==null?void 0:t.uri)}class RD extends an{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.supportedCache={},this.bwEstimator=void 0,this._abandonRulesCheck=t=>{var i;const{fragCurrent:r,partCurrent:s,hls:a}=this,{autoLevelEnabled:o,media:c}=a;if(!r||!c)return;const l=performance.now(),u=s?s.stats:r.stats,d=s?s.duration:r.duration,h=l-u.loading.start,f=a.minAutoLevel,p=r.level,m=this._nextAutoLevel;if(u.aborted||u.loaded&&u.loaded===u.total||p<=f){this.clearTimer(),this._nextAutoLevel=-1;return}if(!o)return;const g=m>-1&&m!==p,y=!!t||g;if(!y&&(c.paused||!c.playbackRate||!c.readyState))return;const v=a.mainForwardBufferInfo;if(!y&&v===null)return;const b=this.bwEstimator.getEstimateTTFB(),T=Math.abs(c.playbackRate);if(h<=Math.max(b,1e3*(d/(T*2))))return;const x=v?v.len/T:0,_=u.loading.first?u.loading.first-u.loading.start:-1,D=u.loaded&&_>-1,w=this.getBwEstimate(),S=a.levels,C=S[p],O=Math.max(u.loaded,Math.round(d*(r.bitrate||C.averageBitrate)/8));let I=D?h-_:h;I<1&&D&&(I=Math.min(h,u.loaded*8/w));const L=D?u.loaded*1e3/I:0,E=b/1e3,$=L?(O-u.loaded)/L:O*8/w+E;if($<=x)return;const U=L?L*8:w,F=((i=t?.details||this.hls.latestLevelDetails)==null?void 0:i.live)===!0,G=this.hls.config.abrBandWidthUpFactor;let W=Number.POSITIVE_INFINITY,Y;for(Y=p-1;Y>f;Y--){const te=S[Y].maxBitrate,ne=!S[Y].details||F;if(W=this.getTimeToLoadFrag(E,U,d*te,ne),W<Math.min(x,d+E))break}if(W>=$||W>d*10)return;D?this.bwEstimator.sample(h-Math.min(b,_),u.loaded):this.bwEstimator.sampleTTFB(h);const P=S[Y].maxBitrate;this.getBwEstimate()*G>P&&this.resetEstimator(P);const V=this.findBestLevel(P,f,Y,0,x,1,1);V>-1&&(Y=V),this.warn(`Fragment ${r.sn}${s?" part "+s.index:""} of level ${p} is loading too slowly;
      Fragment duration: ${r.duration.toFixed(3)}
      Time to underbuffer: ${x.toFixed(3)} s
      Estimated load time for current fragment: ${$.toFixed(3)} s
      Estimated load time for down switch fragment: ${W.toFixed(3)} s
      TTFB estimate: ${_|0} ms
      Current BW estimate: ${ye(w)?w|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${Y} @ ${P|0} bps`),a.nextLoadLevel=a.nextAutoLevel=Y,this.clearTimer();const j=()=>{if(this.clearTimer(),this.fragCurrent===r&&this.hls.loadLevel===Y&&Y>0){const te=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${Y>0?"and switching down":""}
      Fragment duration: ${r.duration.toFixed(3)} s
      Time to underbuffer: ${te.toFixed(3)} s`),r.abortRequests(),this.fragCurrent=this.partCurrent=null,Y>f){let ne=this.findBestLevel(this.hls.levels[f].bitrate,f,Y,0,te,1,1);ne===-1&&(ne=f),this.hls.nextLoadLevel=this.hls.nextAutoLevel=ne,this.resetEstimator(this.hls.levels[ne].bitrate)}}};g||$>W*2?j():this.timer=self.setInterval(j,W*1e3),a.trigger(R.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,part:s,stats:u})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new o8(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(R.MANIFEST_LOADING,this.onManifestLoading,this),e.on(R.FRAG_LOADING,this.onFragLoading,this),e.on(R.FRAG_LOADED,this.onFragLoaded,this),e.on(R.FRAG_BUFFERED,this.onFragBuffered,this),e.on(R.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(R.LEVEL_LOADED,this.onLevelLoaded,this),e.on(R.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(R.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(R.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(R.MANIFEST_LOADING,this.onManifestLoading,this),e.off(R.FRAG_LOADING,this.onFragLoading,this),e.off(R.FRAG_LOADED,this.onFragLoaded,this),e.off(R.FRAG_BUFFERED,this.onFragBuffered,this),e.off(R.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(R.LEVEL_LOADED,this.onLevelLoaded,this),e.off(R.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(R.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(R.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const i=t.frag;if(!this.ignoreFragment(i)){if(!i.bitrateTest){var r;this.fragCurrent=i,this.partCurrent=(r=t.part)!=null?r:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case re.BUFFER_ADD_CODEC_ERROR:case re.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case re.FRAG_LOAD_TIMEOUT:{const i=t.frag,{fragCurrent:r,partCurrent:s}=this;if(i&&r&&i.sn===r.sn&&i.level===r.level){const a=performance.now(),o=s?s.stats:i.stats,c=a-o.loading.start,l=o.loading.first?o.loading.first-o.loading.start:-1;if(o.loaded&&l>-1){const d=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(c-Math.min(d,l),o.loaded)}else this.bwEstimator.sampleTTFB(c)}break}}}getTimeToLoadFrag(e,t,i,r){const s=e+i/t,a=r?e+this.lastLevelLoadSec:0;return s+a}onLevelLoaded(e,t){const i=this.hls.config,{loading:r}=t.stats,s=r.end-r.first;ye(s)&&(this.lastLevelLoadSec=s/1e3),t.details.live?this.bwEstimator.update(i.abrEwmaSlowLive,i.abrEwmaFastLive):this.bwEstimator.update(i.abrEwmaSlowVoD,i.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(t.levelInfo)}onFragLoaded(e,{frag:t,part:i}){const r=i?i.stats:t.stats;if(t.type===xe.MAIN&&this.bwEstimator.sampleTTFB(r.loading.first-r.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const s=i?i.duration:t.duration,a=this.hls.levels[t.level],o=(a.loaded?a.loaded.bytes:0)+r.loaded,c=(a.loaded?a.loaded.duration:0)+s;a.loaded={bytes:o,duration:c},a.realBitrate=Math.round(8*o/c)}if(t.bitrateTest){const s={stats:r,frag:t,part:i,id:t.type};this.onFragBuffered(R.FRAG_BUFFERED,s),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){const{frag:i,part:r}=t,s=r!=null&&r.stats.loaded?r.stats:i.stats;if(s.aborted||this.ignoreFragment(i))return;const a=s.parsing.end-s.loading.start-Math.min(s.loading.first-s.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(a,s.loaded),s.bwEstimate=this.getBwEstimate(),i.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==xe.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,i=this.getBwEstimate(),r=this.hls.config.maxStarvationDelay,s=this.findBestLevel(i,t,e,0,r,1,1);if(s>-1)return s;const a=this.hls.firstLevel,o=Math.min(Math.max(a,t),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${a} clamped to ${o}`),o}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,i=this.bwEstimator.canEstimate(),r=this.lastLoadedFragLevel>-1;if(e!==-1&&(!i||!r||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const s=i&&r?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const a=this.hls.levels;if(a.length>Math.max(e,s)&&a[e].loadError<=a[s].loadError)return e}return this._nextAutoLevel=s,this.nextAutoLevelKey=this.getAutoLevelKey(),s}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:i}=this;if(i.levels.length<=1)return i.loadLevel;const{maxAutoLevel:r,config:s,minAutoLevel:a}=i,o=t?t.duration:e?e.duration:0,c=this.getBwEstimate(),l=this.getStarvationDelay();let u=s.abrBandWidthFactor,d=s.abrBandWidthUpFactor;if(l){const g=this.findBestLevel(c,a,r,l,0,u,d);if(g>=0)return this.rebufferNotice=-1,g}let h=o?Math.min(o,s.maxStarvationDelay):s.maxStarvationDelay;if(!l){const g=this.bitrateTestDelay;g&&(h=(o?Math.min(o,s.maxLoadingDelay):s.maxLoadingDelay)-g,this.info(`bitrate test took ${Math.round(1e3*g)}ms, set first fragment max fetchDuration to ${Math.round(1e3*h)} ms`),u=d=1)}const f=this.findBestLevel(c,a,r,l,h,u,d);if(this.rebufferNotice!==f&&(this.rebufferNotice=f,this.info(`${l?"rebuffering expected":"buffer is empty"}, optimal quality level ${f}`)),f>-1)return f;const p=i.levels[a],m=i.loadLevelObj;return m&&p?.bitrate<m.bitrate?a:i.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const i=t&&t.playbackRate!==0?Math.abs(t.playbackRate):1,r=e.mainForwardBufferInfo;return(r?r.len:0)/i}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,i,r,s,a,o){var c;const l=r+s,u=this.lastLoadedFragLevel,d=u===-1?this.hls.firstLevel:u,{fragCurrent:h,partCurrent:f}=this,{levels:p,allAudioTracks:m,loadLevel:g,config:y}=this.hls;if(p.length===1)return 0;const v=p[d],b=!!((c=this.hls.latestLevelDetails)!=null&&c.live),T=g===-1||u===-1;let x,_="SDR",D=v?.frameRate||0;const{audioPreference:w,videoPreference:S}=y,C=this.audioTracksByGroup||(this.audioTracksByGroup=CD(m));let O=-1;if(T){if(this.firstSelection!==-1)return this.firstSelection;const U=this.codecTiers||(this.codecTiers=Q8(p,C,t,i)),F=Y8(U,_,e,w,S),{codecSet:G,videoRanges:W,minFramerate:Y,minBitrate:P,minIndex:V,preferHDR:j}=F;O=V,x=G,_=j?W[W.length-1]:W[0],D=Y,e=Math.max(e,P),this.log(`picked start tier ${Ye(F)}`)}else x=v?.codecSet,_=v?.videoRange;const I=f?f.duration:h?h.duration:0,L=this.bwEstimator.getEstimateTTFB()/1e3,E=[];for(let U=i;U>=t;U--){var $;const F=p[U],G=U>d;if(!F)continue;if(y.useMediaCapabilities&&!F.supportedResult&&!F.supportedPromise){const ne=navigator.mediaCapabilities;typeof ne?.decodingInfo=="function"&&$8(F,C,_,D,e,w)?(F.supportedPromise=wD(F,C,ne,this.supportedCache),F.supportedPromise.then(ue=>{if(!this.hls)return;F.supportedResult=ue;const he=this.hls.levels,fe=he.indexOf(F);ue.error?this.warn(`MediaCapabilities decodingInfo error: "${ue.error}" for level ${fe} ${Ye(ue)}`):ue.supported?ue.decodingInfoResults.some(me=>me.smooth===!1||me.powerEfficient===!1)&&this.log(`MediaCapabilities decodingInfo for level ${fe} not smooth or powerEfficient: ${Ye(ue)}`):(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${fe} ${Ye(ue)}`),fe>-1&&he.length>1&&(this.log(`Removing unsupported level ${fe}`),this.hls.removeLevel(fe),this.hls.loadLevel===-1&&(this.hls.nextLoadLevel=0)))}).catch(ue=>{this.warn(`Error handling MediaCapabilities decodingInfo: ${ue}`)})):F.supportedResult=SD}if((x&&F.codecSet!==x||_&&F.videoRange!==_||G&&D>F.frameRate||!G&&D>0&&D<F.frameRate||($=F.supportedResult)!=null&&($=$.decodingInfoResults)!=null&&$.some(ne=>ne.smooth===!1))&&(!T||U!==O)){E.push(U);continue}const W=F.details,Y=(f?W?.partTarget:W?.averagetargetduration)||I;let P;G?P=o*e:P=a*e;const V=I&&r>=I*2&&s===0?F.averageBitrate:F.maxBitrate,j=this.getTimeToLoadFrag(L,P,V*Y,W===void 0);if(P>=V&&(U===u||F.loadError===0&&F.fragmentError===0)&&(j<=L||!ye(j)||b&&!this.bitrateTestDelay||j<l)){const ne=this.forcedAutoLevel;return U!==g&&(ne===-1||ne!==g)&&(E.length&&this.trace(`Skipped level(s) ${E.join(",")} of ${i} max with CODECS and VIDEO-RANGE:"${p[E[0]].codecs}" ${p[E[0]].videoRange}; not compatible with "${x}" ${_}`),this.info(`switch candidate:${d}->${U} adjustedbw(${Math.round(P)})-bitrate=${Math.round(P-V)} ttfb:${L.toFixed(1)} avgDuration:${Y.toFixed(1)} maxFetchDuration:${l.toFixed(1)} fetchDuration:${j.toFixed(1)} firstSelection:${T} codecSet:${F.codecSet} videoRange:${F.videoRange} hls.loadLevel:${g}`)),T&&(this.firstSelection=U),U}}return-1}set nextAutoLevel(e){const t=this.deriveNextAutoLevel(e);this._nextAutoLevel!==t&&(this.nextAutoLevelKey="",this._nextAutoLevel=t)}deriveNextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:i}=this.hls;return Math.min(Math.max(e,i),t)}}const LD={search:function(n,e){let t=0,i=n.length-1,r=null,s=null;for(;t<=i;){r=(t+i)/2|0,s=n[r];const a=e(s);if(a>0)t=r+1;else if(a<0)i=r-1;else return s}return null}};function tB(n,e,t){if(e===null||!Array.isArray(n)||!n.length||!ye(e))return null;const i=n[0].programDateTime;if(e<(i||0))return null;const r=n[n.length-1].endProgramDateTime;if(e>=(r||0))return null;for(let s=0;s<n.length;++s){const a=n[s];if(iB(e,t,a))return a}return null}function lr(n,e,t=0,i=0,r=.005){let s=null;if(n){s=e[1+n.sn-e[0].sn]||null;const o=n.endDTS-t;o>0&&o<15e-7&&(t+=15e-7),s&&n.level!==s.level&&s.end<=n.end&&(s=e[2+n.sn-e[0].sn]||null)}else t===0&&e[0].start===0&&(s=e[0]);if(s&&((!n||n.level===s.level)&&l1(t,i,s)===0||nB(s,n,Math.min(r,i))))return s;const a=LD.search(e,l1.bind(null,t,i));return a&&(a!==n||!s)?a:s}function nB(n,e,t){if(e&&e.start===0&&e.level<n.level&&(e.endPTS||0)>0){const i=e.tagList.reduce((r,s)=>(s[0]==="INF"&&(r+=parseFloat(s[1])),r),t);return n.start<=i}return!1}function l1(n=0,e=0,t){if(t.start<=n&&t.start+t.duration>n)return 0;const i=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-i<=n?1:t.start-i>n&&t.start?-1:0}function iB(n,e,t){const i=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0))*1e3;return(t.endProgramDateTime||0)-i>n}function UD(n,e,t){if(n&&n.startCC<=e&&n.endCC>=e){let i=n.fragments;const{fragmentHint:r}=n;r&&(i=i.concat(r));let s;return LD.search(i,a=>a.cc<e?1:a.cc>e?-1:(s=a,a.end<=t?1:a.start>t?-1:0)),s||null}return null}function vc(n){switch(n.details){case re.FRAG_LOAD_TIMEOUT:case re.KEY_LOAD_TIMEOUT:case re.LEVEL_LOAD_TIMEOUT:case re.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function kD(n){return n.details.startsWith("key")}function FD(n){return kD(n)&&!!n.frag&&!n.frag.decryptdata}function u1(n,e){const t=vc(e);return n.default[`${t?"timeout":"error"}Retry`]}function Lp(n,e){const t=n.backoff==="linear"?1:Math.pow(2,e);return Math.min(t*n.retryDelayMs,n.maxRetryDelayMs)}function d1(n){return qe(qe({},n),{errorRetry:null,timeoutRetry:null})}function bc(n,e,t,i){if(!n)return!1;const r=i?.code,s=e<n.maxNumRetry&&(rB(r)||!!t);return n.shouldRetry?n.shouldRetry(n,e,t,i,s):s}function rB(n){return yh(n)||!!n&&(n<400||n>499)}function yh(n){return n===0&&navigator.onLine===!1}var bt={DoNothing:0,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,RetryRequest:5},Mt={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,MoveAllAlternatesMatchingKey:4};class PD extends an{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(R.ERROR,this.onError,this),e.on(R.MANIFEST_LOADING,this.onManifestLoading,this),e.on(R.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(R.ERROR,this.onError,this),e.off(R.ERROR,this.onErrorOut,this),e.off(R.MANIFEST_LOADING,this.onManifestLoading,this),e.off(R.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return e?.type===xe.MAIN?e.level:this.getVariantIndex()}getVariantIndex(){var e;const t=this.hls,i=t.currentLevel;return(e=t.loadLevelObj)!=null&&e.details||i===-1?t.loadLevel:i}variantHasKey(e,t){if(e){var i;if((i=e.details)!=null&&i.hasKey(t))return!0;const r=e.audioGroups;if(r)return this.hls.allAudioTracks.filter(a=>r.indexOf(a.groupId)>=0).some(a=>{var o;return(o=a.details)==null?void 0:o.hasKey(t)})}return!1}onManifestLoading(){this.playlistError=0}onLevelUpdated(){this.playlistError=0}onError(e,t){var i;if(t.fatal)return;const r=this.hls,s=t.context;switch(t.details){case re.FRAG_LOAD_ERROR:case re.FRAG_LOAD_TIMEOUT:case re.KEY_LOAD_ERROR:case re.KEY_LOAD_TIMEOUT:t.errorAction=this.getFragRetryOrSwitchAction(t);return;case re.FRAG_PARSING_ERROR:if((i=t.frag)!=null&&i.gap){t.errorAction=Nr();return}case re.FRAG_GAP:case re.FRAG_DECRYPT_ERROR:{t.errorAction=this.getFragRetryOrSwitchAction(t),t.errorAction.action=bt.SendAlternateToPenaltyBox;return}case re.LEVEL_EMPTY_ERROR:case re.LEVEL_PARSING_ERROR:{var a;const c=t.parent===xe.MAIN?t.level:r.loadLevel;t.details===re.LEVEL_EMPTY_ERROR&&((a=t.context)!=null&&(a=a.levelDetails)!=null&&a.live)?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,c):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,c))}return;case re.LEVEL_LOAD_ERROR:case re.LEVEL_LOAD_TIMEOUT:typeof s?.level=="number"&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,s.level));return;case re.AUDIO_TRACK_LOAD_ERROR:case re.AUDIO_TRACK_LOAD_TIMEOUT:case re.SUBTITLE_LOAD_ERROR:case re.SUBTITLE_TRACK_LOAD_TIMEOUT:if(s){const c=r.loadLevelObj;if(c&&(s.type===Be.AUDIO_TRACK&&c.hasAudioGroup(s.groupId)||s.type===Be.SUBTITLE_TRACK&&c.hasSubtitleGroup(s.groupId))){t.errorAction=this.getPlaylistRetryOrSwitchAction(t,r.loadLevel),t.errorAction.action=bt.SendAlternateToPenaltyBox,t.errorAction.flags=Mt.MoveAllAlternatesMatchingHost;return}}return;case re.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:t.errorAction={action:bt.SendAlternateToPenaltyBox,flags:Mt.MoveAllAlternatesMatchingHDCP};return;case re.KEY_SYSTEM_SESSION_UPDATE_FAILED:case re.KEY_SYSTEM_STATUS_INTERNAL_ERROR:case re.KEY_SYSTEM_NO_SESSION:t.errorAction={action:bt.SendAlternateToPenaltyBox,flags:Mt.MoveAllAlternatesMatchingKey};return;case re.BUFFER_ADD_CODEC_ERROR:case re.REMUX_ALLOC_ERROR:case re.BUFFER_APPEND_ERROR:if(!t.errorAction){var o;t.errorAction=this.getLevelSwitchAction(t,(o=t.level)!=null?o:r.loadLevel)}return;case re.INTERNAL_EXCEPTION:case re.BUFFER_APPENDING_ERROR:case re.BUFFER_FULL_ERROR:case re.LEVEL_SWITCH_ERROR:case re.BUFFER_STALLED_ERROR:case re.BUFFER_SEEK_OVER_HOLE:case re.BUFFER_NUDGE_ON_STALL:t.errorAction=Nr();return}t.type===_e.KEY_SYSTEM_ERROR&&(t.levelRetry=!1,t.errorAction=Nr())}getPlaylistRetryOrSwitchAction(e,t){const i=this.hls,r=u1(i.config.playlistLoadPolicy,e),s=this.playlistError++;if(bc(r,s,vc(e),e.response))return{action:bt.RetryRequest,flags:Mt.None,retryConfig:r,retryCount:s};const o=this.getLevelSwitchAction(e,t);return r&&(o.retryConfig=r,o.retryCount=s),o}getFragRetryOrSwitchAction(e){const t=this.hls,i=this.getVariantLevelIndex(e.frag),r=t.levels[i],{fragLoadPolicy:s,keyLoadPolicy:a}=t.config,o=u1(kD(e)?a:s,e),c=t.levels.reduce((u,d)=>u+d.fragmentError,0);if(r&&(e.details!==re.FRAG_GAP&&r.fragmentError++,!FD(e)&&bc(o,c,vc(e),e.response)))return{action:bt.RetryRequest,flags:Mt.None,retryConfig:o,retryCount:c};const l=this.getLevelSwitchAction(e,i);return o&&(l.retryConfig=o,l.retryCount=c),l}getLevelSwitchAction(e,t){const i=this.hls;t==null&&(t=i.loadLevel);const r=this.hls.levels[t];if(r){var s,a;const l=e.details;r.loadError++,l===re.BUFFER_APPEND_ERROR&&r.fragmentError++;let u=-1;const{levels:d,loadLevel:h,minAutoLevel:f,maxAutoLevel:p}=i;!i.autoLevelEnabled&&!i.config.preserveManualLevelOnError&&(i.loadLevel=-1);const m=(s=e.frag)==null?void 0:s.type,y=(m===xe.AUDIO&&l===re.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(l===re.BUFFER_ADD_CODEC_ERROR||l===re.BUFFER_APPEND_ERROR))&&d.some(({audioCodec:_})=>r.audioCodec!==_),b=e.sourceBufferName==="video"&&(l===re.BUFFER_ADD_CODEC_ERROR||l===re.BUFFER_APPEND_ERROR)&&d.some(({codecSet:_,audioCodec:D})=>r.codecSet!==_&&r.audioCodec===D),{type:T,groupId:x}=(a=e.context)!=null?a:{};for(let _=d.length;_--;){const D=(_+h)%d.length;if(D!==h&&D>=f&&D<=p&&d[D].loadError===0){var o,c;const w=d[D];if(l===re.FRAG_GAP&&m===xe.MAIN&&e.frag){const S=d[D].details;if(S){const C=lr(e.frag,S.fragments,e.frag.start);if(C!=null&&C.gap)continue}}else{if(T===Be.AUDIO_TRACK&&w.hasAudioGroup(x)||T===Be.SUBTITLE_TRACK&&w.hasSubtitleGroup(x))continue;if(m===xe.AUDIO&&(o=r.audioGroups)!=null&&o.some(S=>w.hasAudioGroup(S))||m===xe.SUBTITLE&&(c=r.subtitleGroups)!=null&&c.some(S=>w.hasSubtitleGroup(S))||y&&r.audioCodec===w.audioCodec||b&&r.codecSet===w.codecSet||!y&&r.codecSet!==w.codecSet)continue}u=D;break}}if(u>-1&&i.loadLevel!==u)return e.levelRetry=!0,this.playlistError=0,{action:bt.SendAlternateToPenaltyBox,flags:Mt.None,nextAutoLevel:u}}return{action:bt.SendAlternateToPenaltyBox,flags:Mt.MoveAllAlternatesMatchingHost}}onErrorOut(e,t){var i;switch((i=t.errorAction)==null?void 0:i.action){case bt.DoNothing:break;case bt.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(t),!t.errorAction.resolved&&t.details!==re.FRAG_GAP?t.fatal=!0:/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(t.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const t=this.hls,i=e.errorAction;if(!i)return;const{flags:r}=i,s=i.nextAutoLevel;switch(r){case Mt.None:this.switchLevel(e,s);break;case Mt.MoveAllAlternatesMatchingHDCP:{const c=this.getVariantLevelIndex(e.frag),l=t.levels[c],u=l?.attrs["HDCP-LEVEL"];if(i.hdcpLevel=u,u==="NONE")this.warn("HDCP policy resticted output with HDCP-LEVEL=NONE");else if(u){t.maxHdcpLevel=gh[gh.indexOf(u)-1],i.resolved=!0,this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`);break}}case Mt.MoveAllAlternatesMatchingKey:{const c=e.decryptdata;if(c){const l=this.hls.levels,u=l.length;for(let h=u;h--;)if(this.variantHasKey(l[h],c)){var a,o;this.log(`Banned key found in level ${h} (${l[h].bitrate}bps) or audio group "${(a=l[h].audioGroups)==null?void 0:a.join(",")}" (${(o=e.frag)==null?void 0:o.type} fragment) ${Dt(c.keyId||[])}`),l[h].fragmentError++,l[h].loadError++,this.log(`Removing level ${h} with key error (${e.error})`),this.hls.removeLevel(h)}const d=e.frag;if(this.hls.levels.length<u)i.resolved=!0;else if(d&&d.type!==xe.MAIN){const h=d.decryptdata;h&&!c.matches(h)&&(i.resolved=!0)}}break}}i.resolved||this.switchLevel(e,s)}switchLevel(e,t){if(t!==void 0&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===re.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&e.sourceBufferName!=="audiovideo")){const i=ph(e.mimeType),r=this.hls.levels;for(let s=r.length;s--;)r[s][`${e.sourceBufferName}Codec`]===i&&(this.log(`Removing level ${s} for ${e.details} ("${i}" not supported)`),this.hls.removeLevel(s))}}}function Nr(n){const e={action:bt.DoNothing,flags:Mt.None};return n&&(e.resolved=!0),e}var gt={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class sB{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e&&(e.on(R.MANIFEST_LOADING,this.onManifestLoading,this),e.on(R.BUFFER_APPENDED,this.onBufferAppended,this),e.on(R.FRAG_BUFFERED,this.onFragBuffered,this),e.on(R.FRAG_LOADED,this.onFragLoaded,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(R.MANIFEST_LOADING,this.onManifestLoading,this),e.off(R.BUFFER_APPENDED,this.onBufferAppended,this),e.off(R.FRAG_BUFFERED,this.onFragBuffered,this),e.off(R.FRAG_LOADED,this.onFragLoaded,this))}destroy(){this._unregisterListeners(),this.hls=this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const i=this.activePartLists[t];if(i)for(let r=i.length;r--;){const s=i[r];if(!s)break;if(s.start<=e&&e<=s.end&&s.loaded)return s}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){return this.getFragAtPos(e,t,!0)}getFragAtPos(e,t,i){const{fragments:r}=this,s=Object.keys(r);for(let a=s.length;a--;){const o=r[s[a]];if(o?.body.type===t&&(!i||o.buffered)){const c=o.body;if(c.start<=e&&e<=c.end)return c}}return null}detectEvictedFragments(e,t,i,r,s){this.timeRanges&&(this.timeRanges[e]=t);const a=r?.fragment.sn||-1;Object.keys(this.fragments).forEach(o=>{const c=this.fragments[o];if(!c||a>=c.body.sn)return;if(!c.buffered&&(!c.loaded||s)){c.body.type===i&&this.removeFragment(c.body);return}const l=c.range[e];if(l){if(l.time.length===0){this.removeFragment(c.body);return}l.time.some(u=>{const d=!this.isTimeBuffered(u.startPTS,u.endPTS,t);return d&&this.removeFragment(c.body),d})}})}detectPartialFragments(e){const t=this.timeRanges;if(!t||e.frag.sn==="initSegment")return;const i=e.frag,r=_r(i),s=this.fragments[r];if(!s||s.buffered&&i.gap)return;const a=!i.relurl;Object.keys(t).forEach(o=>{const c=i.elementaryStreams[o];if(!c)return;const l=t[o],u=a||c.partial===!0;s.range[o]=this.getBufferedTimes(i,e.part,u,l)}),s.loaded=null,Object.keys(s.range).length?(this.bufferedEnd(s,i),Ka(s)||this.removeParts(i.sn-1,i.type)):this.removeFragment(s.body)}bufferedEnd(e,t){e.buffered=!0,(e.body.endList=t.endList||e.body.endList)&&(this.endListFragments[e.body.type]=e)}removeParts(e,t){const i=this.activePartLists[t];i&&(this.activePartLists[t]=h1(i,r=>r.fragment.sn>=e))}fragBuffered(e,t){const i=_r(e);let r=this.fragments[i];!r&&t&&(r=this.fragments[i]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),r&&(r.loaded=null,this.bufferedEnd(r,e))}getBufferedTimes(e,t,i,r){const s={time:[],partial:i},a=e.start,o=e.end,c=e.minEndPTS||o,l=e.maxStartPTS||a;for(let u=0;u<r.length;u++){const d=r.start(u)-this.bufferPadding,h=r.end(u)+this.bufferPadding;if(l>=d&&c<=h){s.time.push({startPTS:Math.max(a,r.start(u)),endPTS:Math.min(o,r.end(u))});break}else if(a<h&&o>d){const f=Math.max(a,r.start(u)),p=Math.min(o,r.end(u));p>f&&(s.partial=!0,s.time.push({startPTS:f,endPTS:p}))}else if(o<=d)break}return s}getPartialFragment(e){let t=null,i,r,s,a=0;const{bufferPadding:o,fragments:c}=this;return Object.keys(c).forEach(l=>{const u=c[l];u&&Ka(u)&&(r=u.body.start-o,s=u.body.end+o,e>=r&&e<=s&&(i=Math.min(e-r,s-e),a<=i&&(t=u.body,a=i)))}),t}isEndListAppended(e){const t=this.endListFragments[e];return t!==void 0&&(t.buffered||Ka(t))}getState(e){const t=_r(e),i=this.fragments[t];return i?i.buffered?Ka(i)?gt.PARTIAL:gt.OK:gt.APPENDING:gt.NOT_LOADED}isTimeBuffered(e,t,i){let r,s;for(let a=0;a<i.length;a++){if(r=i.start(a)-this.bufferPadding,s=i.end(a)+this.bufferPadding,e>=r&&t<=s)return!0;if(t<=r)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,t){if(t.frag.sn==="initSegment"||t.frag.bitrateTest)return;const i=t.frag,r=t.part?null:t,s=_r(i);this.fragments[s]={body:i,appendedPTS:null,loaded:r,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:i,part:r,timeRanges:s,type:a}=t;if(i.sn==="initSegment")return;const o=i.type;if(r){let l=this.activePartLists[o];l||(this.activePartLists[o]=l=[]),l.push(r)}this.timeRanges=s;const c=s[a];this.detectEvictedFragments(a,c,o,r)}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=_r(e);return!!this.fragments[t]}hasFragments(e){const{fragments:t}=this,i=Object.keys(t);if(!e)return i.length>0;for(let r=i.length;r--;){const s=t[i[r]];if(s?.body.type===e)return!0}return!1}hasParts(e){var t;return!!((t=this.activePartLists[e])!=null&&t.length)}removeFragmentsInRange(e,t,i,r,s){r&&!this.hasGaps||Object.keys(this.fragments).forEach(a=>{const o=this.fragments[a];if(!o)return;const c=o.body;c.type!==i||r&&!c.gap||c.start<t&&c.end>e&&(o.buffered||s)&&this.removeFragment(c)})}removeFragment(e){const t=_r(e);e.clearElementaryStreamInfo();const i=this.activePartLists[e.type];if(i){const r=e.sn;this.activePartLists[e.type]=h1(i,s=>s.fragment.sn!==r)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const t=(e=this.hls)==null||(e=e.latestLevelDetails)==null?void 0:e.partList;t&&t.forEach(i=>i.clearElementaryStreamInfo())}}function Ka(n){var e,t,i;return n.buffered&&!!(n.body.gap||(e=n.range.video)!=null&&e.partial||(t=n.range.audio)!=null&&t.partial||(i=n.range.audiovideo)!=null&&i.partial)}function _r(n){return`${n.type}_${n.level}_${n.sn}`}function h1(n,e){return n.filter(t=>{const i=e(t);return i||t.clearElementaryStreamInfo(),i})}var Ii={cbc:0,ctr:1};class aB{constructor(e,t,i){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=t,this.aesMode=i}decrypt(e,t){switch(this.aesMode){case Ii.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e);case Ii.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},t,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}function oB(n){const e=n.byteLength,t=e&&new DataView(n.buffer).getUint8(e-1);return t?n.slice(0,e-t):n}class cB{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),i=new Uint32Array(4);for(let r=0;r<4;r++)i[r]=t.getUint32(r*4);return i}initTable(){const e=this.sBox,t=this.invSBox,i=this.subMix,r=i[0],s=i[1],a=i[2],o=i[3],c=this.invSubMix,l=c[0],u=c[1],d=c[2],h=c[3],f=new Uint32Array(256);let p=0,m=0,g=0;for(g=0;g<256;g++)g<128?f[g]=g<<1:f[g]=g<<1^283;for(g=0;g<256;g++){let y=m^m<<1^m<<2^m<<3^m<<4;y=y>>>8^y&255^99,e[p]=y,t[y]=p;const v=f[p],b=f[v],T=f[b];let x=f[y]*257^y*16843008;r[p]=x<<24|x>>>8,s[p]=x<<16|x>>>16,a[p]=x<<8|x>>>24,o[p]=x,x=T*16843009^b*65537^v*257^p*16843008,l[y]=x<<24|x>>>8,u[y]=x<<16|x>>>16,d[y]=x<<8|x>>>24,h[y]=x,p?(p=v^f[f[f[T^v]]],m^=f[f[m]]):p=m=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let i=!0,r=0;for(;r<t.length&&i;)i=t[r]===this.key[r],r++;if(i)return;this.key=t;const s=this.keySize=t.length;if(s!==4&&s!==6&&s!==8)throw new Error("Invalid aes key size="+s);const a=this.ksRows=(s+6+1)*4;let o,c;const l=this.keySchedule=new Uint32Array(a),u=this.invKeySchedule=new Uint32Array(a),d=this.sBox,h=this.rcon,f=this.invSubMix,p=f[0],m=f[1],g=f[2],y=f[3];let v,b;for(o=0;o<a;o++){if(o<s){v=l[o]=t[o];continue}b=v,o%s===0?(b=b<<8|b>>>24,b=d[b>>>24]<<24|d[b>>>16&255]<<16|d[b>>>8&255]<<8|d[b&255],b^=h[o/s|0]<<24):s>6&&o%s===4&&(b=d[b>>>24]<<24|d[b>>>16&255]<<16|d[b>>>8&255]<<8|d[b&255]),l[o]=v=(l[o-s]^b)>>>0}for(c=0;c<a;c++)o=a-c,c&3?b=l[o]:b=l[o-4],c<4||o<=4?u[c]=b:u[c]=p[d[b>>>24]]^m[d[b>>>16&255]]^g[d[b>>>8&255]]^y[d[b&255]],u[c]=u[c]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,t,i){const r=this.keySize+6,s=this.invKeySchedule,a=this.invSBox,o=this.invSubMix,c=o[0],l=o[1],u=o[2],d=o[3],h=this.uint8ArrayToUint32Array_(i);let f=h[0],p=h[1],m=h[2],g=h[3];const y=new Int32Array(e),v=new Int32Array(y.length);let b,T,x,_,D,w,S,C,O,I,L,E,$,U;const F=this.networkToHostOrderSwap;for(;t<y.length;){for(O=F(y[t]),I=F(y[t+1]),L=F(y[t+2]),E=F(y[t+3]),D=O^s[0],w=E^s[1],S=L^s[2],C=I^s[3],$=4,U=1;U<r;U++)b=c[D>>>24]^l[w>>16&255]^u[S>>8&255]^d[C&255]^s[$],T=c[w>>>24]^l[S>>16&255]^u[C>>8&255]^d[D&255]^s[$+1],x=c[S>>>24]^l[C>>16&255]^u[D>>8&255]^d[w&255]^s[$+2],_=c[C>>>24]^l[D>>16&255]^u[w>>8&255]^d[S&255]^s[$+3],D=b,w=T,S=x,C=_,$=$+4;b=a[D>>>24]<<24^a[w>>16&255]<<16^a[S>>8&255]<<8^a[C&255]^s[$],T=a[w>>>24]<<24^a[S>>16&255]<<16^a[C>>8&255]<<8^a[D&255]^s[$+1],x=a[S>>>24]<<24^a[C>>16&255]<<16^a[D>>8&255]<<8^a[w&255]^s[$+2],_=a[C>>>24]<<24^a[D>>16&255]<<16^a[w>>8&255]<<8^a[S&255]^s[$+3],v[t]=F(b^f),v[t+1]=F(_^p),v[t+2]=F(x^m),v[t+3]=F(T^g),f=O,p=I,m=L,g=E,t=t+4}return v.buffer}}class lB{constructor(e,t,i){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=t,this.aesMode=i}expandKey(){const e=uB(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}function uB(n){switch(n){case Ii.cbc:return"AES-CBC";case Ii.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${n}`)}}const dB=16;class Up{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const i=self.crypto;i&&(this.subtle=i.subtle||i.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const i=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?oB(i):i}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,i,r){return this.useSoftware?new Promise((s,a)=>{const o=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(o,t,i,r);const c=this.flush();c?s(c.buffer):a(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,i,r)}softwareDecrypt(e,t,i,r){const{currentIV:s,currentResult:a,remainderData:o}=this;if(r!==Ii.cbc||t.byteLength!==16)return je.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),o&&(e=rn(o,e),this.remainderData=null);const c=this.getValidChunk(e);if(!c.length)return null;s&&(i=s);let l=this.softwareDecrypter;l||(l=this.softwareDecrypter=new cB),l.expandKey(t);const u=a;return this.currentResult=l.decrypt(c.buffer,0,i),this.currentIV=c.slice(-16).buffer,u||null}webCryptoDecrypt(e,t,i,r){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,i,r));this.key=t,this.fastAesKey=new lB(this.subtle,t,r)}return this.fastAesKey.expandKey().then(s=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new aB(this.subtle,new Uint8Array(i),r).decrypt(e.buffer,s)):Promise.reject(new Error("web crypto not initialized"))).catch(s=>(je.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${s.name}: ${s.message}`),this.onWebCryptoError(e,t,i,r)))}onWebCryptoError(e,t,i,r){const s=this.enableSoftwareAES;if(s){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,i,r);const a=this.flush();if(a)return a.buffer}throw new Error("WebCrypto"+(s?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let t=e;const i=e.length-e.length%dB;return i!==e.length&&(t=e.slice(0,i),this.remainderData=e.slice(i)),t}logOnce(e){this.logEnabled&&(je.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const f1=Math.pow(2,17);class hB{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const i=e.url;if(!i)return Promise.reject(new Nn({type:_e.NETWORK_ERROR,details:re.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${i?"part list":"url"}`),networkDetails:null}));this.abort();const r=this.config,s=r.fLoader,a=r.loader;return new Promise((o,c)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(p=>p[0]==="GAP")){c(g1(e));return}else e.gap=!1;const l=this.loader=s?new s(r):new a(r),u=p1(e);e.loader=l;const d=d1(r.fragLoadPolicy.default),h={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:f1};e.stats=l.stats;const f={onSuccess:(p,m,g,y)=>{this.resetLoader(e,l);let v=p.data;g.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(v.slice(0,16)),v=v.slice(16)),o({frag:e,part:null,payload:v,networkDetails:y})},onError:(p,m,g,y)=>{this.resetLoader(e,l),c(new Nn({type:_e.NETWORK_ERROR,details:re.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:qe({url:i,data:void 0},p),error:new Error(`HTTP Error ${p.code} ${p.text}`),networkDetails:g,stats:y}))},onAbort:(p,m,g)=>{this.resetLoader(e,l),c(new Nn({type:_e.NETWORK_ERROR,details:re.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:g,stats:p}))},onTimeout:(p,m,g)=>{this.resetLoader(e,l),c(new Nn({type:_e.NETWORK_ERROR,details:re.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${h.timeout}ms`),networkDetails:g,stats:p}))}};t&&(f.onProgress=(p,m,g,y)=>t({frag:e,part:null,payload:g,networkDetails:y})),l.load(u,h,f)})}loadPart(e,t,i){this.abort();const r=this.config,s=r.fLoader,a=r.loader;return new Promise((o,c)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap){c(g1(e,t));return}const l=this.loader=s?new s(r):new a(r),u=p1(e,t);e.loader=l;const d=d1(r.fragLoadPolicy.default),h={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:f1};t.stats=l.stats,l.load(u,h,{onSuccess:(f,p,m,g)=>{this.resetLoader(e,l),this.updateStatsFromPart(e,t);const y={frag:e,part:t,payload:f.data,networkDetails:g};i(y),o(y)},onError:(f,p,m,g)=>{this.resetLoader(e,l),c(new Nn({type:_e.NETWORK_ERROR,details:re.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:qe({url:u.url,data:void 0},f),error:new Error(`HTTP Error ${f.code} ${f.text}`),networkDetails:m,stats:g}))},onAbort:(f,p,m)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,l),c(new Nn({type:_e.NETWORK_ERROR,details:re.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:m,stats:f}))},onTimeout:(f,p,m)=>{this.resetLoader(e,l),c(new Nn({type:_e.NETWORK_ERROR,details:re.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${h.timeout}ms`),networkDetails:m,stats:f}))}})})}updateStatsFromPart(e,t){const i=e.stats,r=t.stats,s=r.total;if(i.loaded+=r.loaded,s){const c=Math.round(e.duration/t.duration),l=Math.min(Math.round(i.loaded/s),c),d=(c-l)*Math.round(i.loaded/l);i.total=i.loaded+d}else i.total=Math.max(i.loaded,i.total);const a=i.loading,o=r.loading;a.start?a.first+=o.first-o.start:(a.start=o.start,a.first=o.first),a.end=o.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function p1(n,e=null){const t=e||n,i={frag:n,part:e,responseType:"arraybuffer",url:t.url,headers:{},rangeStart:0,rangeEnd:0},r=t.byteRangeStartOffset,s=t.byteRangeEndOffset;if(ye(r)&&ye(s)){var a;let o=r,c=s;if(n.sn==="initSegment"&&fB((a=n.decryptdata)==null?void 0:a.method)){const l=s-r;l%16&&(c=s+(16-l%16)),r!==0&&(i.resetIV=!0,o=r-16)}i.rangeStart=o,i.rangeEnd=c}return i}function g1(n,e){const t=new Error(`GAP ${n.gap?"tag":"attribute"} found`),i={type:_e.MEDIA_ERROR,details:re.FRAG_GAP,fatal:!1,frag:n,error:t,networkDetails:null};return e&&(i.part=e),(e||n).stats.aborted=!0,new Nn(i)}function fB(n){return n==="AES-128"||n==="AES-256"}class Nn extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class OD extends an{constructor(e,t){super(e,t),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class dl{constructor(e,t,i,r=0,s=-1,a=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=za(),this.buffering={audio:za(),video:za(),audiovideo:za()},this.level=e,this.sn=t,this.id=i,this.size=r,this.part=s,this.partial=a}}function za(){return{start:0,executeStart:0,executeEnd:0,end:0}}const m1={length:0,start:()=>0,end:()=>0};class ke{static isBuffered(e,t){if(e){const i=ke.getBuffered(e);for(let r=i.length;r--;)if(t>=i.start(r)&&t<=i.end(r))return!0}return!1}static bufferedRanges(e){if(e){const t=ke.getBuffered(e);return ke.timeRangesToArray(t)}return[]}static timeRangesToArray(e){const t=[];for(let i=0;i<e.length;i++)t.push({start:e.start(i),end:e.end(i)});return t}static bufferInfo(e,t,i){if(e){const r=ke.bufferedRanges(e);if(r.length)return ke.bufferedInfo(r,t,i)}return{len:0,start:t,end:t,bufferedIndex:-1}}static bufferedInfo(e,t,i){t=Math.max(0,t),e.length>1&&e.sort((u,d)=>u.start-d.start||d.end-u.end);let r=-1,s=[];if(i)for(let u=0;u<e.length;u++){t>=e[u].start&&t<=e[u].end&&(r=u);const d=s.length;if(d){const h=s[d-1].end;e[u].start-h<i?e[u].end>h&&(s[d-1].end=e[u].end):s.push(e[u])}else s.push(e[u])}else s=e;let a=0,o,c=t,l=t;for(let u=0;u<s.length;u++){const d=s[u].start,h=s[u].end;if(r===-1&&t>=d&&t<=h&&(r=u),t+i>=d&&t<h)c=d,l=h,a=l-t;else if(t+i<d){o=d;break}}return{len:a,start:c||0,end:l||0,nextStart:o,buffered:e,bufferedIndex:r}}static getBuffered(e){try{return e.buffered||m1}catch(t){return je.log("failed to get media.buffered",t),m1}}}const MD=/\{\$([a-zA-Z0-9-_]+)\}/g;function y1(n){return MD.test(n)}function vh(n,e){if(n.variableList!==null||n.hasVariableRefs){const t=n.variableList;return e.replace(MD,i=>{const r=i.substring(2,i.length-1),s=t?.[r];return s===void 0?(n.playlistParsingError||(n.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${r}"`)),i):s})}return e}function v1(n,e,t){let i=n.variableList;i||(n.variableList=i={});let r,s;if("QUERYPARAM"in e){r=e.QUERYPARAM;try{const a=new self.URL(t).searchParams;if(a.has(r))s=a.get(r);else throw new Error(`"${r}" does not match any query parameter in URI: "${t}"`)}catch(a){n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${a.message}`))}}else r=e.NAME,s=e.VALUE;r in i?n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${r}"`)):i[r]=s||""}function pB(n,e,t){const i=e.IMPORT;if(t&&i in t){let r=n.variableList;r||(n.variableList=r={}),r[i]=t[i]}else n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${i}"`))}const gB=/^(\d+)x(\d+)$/,b1=/(.+?)=(".*?"|.*?)(?:,|$)/g;class tt{constructor(e,t){typeof e=="string"&&(e=tt.parseAttrList(e,t)),Ke(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(t.length&1?"0":"")+t;const i=new Uint8Array(t.length/2);for(let r=0;r<t.length/2;r++)i[r]=parseInt(t.slice(r*2,r*2+2),16);return i}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const i=this[e];return i?parseFloat(i):t}enumeratedString(e){return this[e]}enumeratedStringList(e,t){const i=this[e];return(i?i.split(/[ ,]+/):[]).reduce((r,s)=>(r[s.toLowerCase()]=!0,r),t)}bool(e){return this[e]==="YES"}decimalResolution(e){const t=gB.exec(this[e]);if(t!==null)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e,t){let i;const r={};for(b1.lastIndex=0;(i=b1.exec(e))!==null;){const a=i[1].trim();let o=i[2];const c=o.indexOf('"')===0&&o.lastIndexOf('"')===o.length-1;let l=!1;if(c)o=o.slice(1,-1);else switch(a){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":l=!0}if(t&&(c||l))o=vh(t,o);else if(!l&&!c)switch(a){case"CLOSED-CAPTIONS":if(o==="NONE")break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":je.warn(`${e}: attribute ${a} is missing quotes`)}r[a]=o}return r}}const mB="com.apple.hls.interstitial";function yB(n){return n!=="ID"&&n!=="CLASS"&&n!=="CUE"&&n!=="START-DATE"&&n!=="DURATION"&&n!=="END-DATE"&&n!=="END-ON-NEXT"}function vB(n){return n==="SCTE35-OUT"||n==="SCTE35-IN"||n==="SCTE35-CMD"}class kp{constructor(e,t,i=0){var r;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=t?.tagAnchor||null,this.tagOrder=(r=t?.tagOrder)!=null?r:i,t){const s=t.attr;for(const a in s)if(Object.prototype.hasOwnProperty.call(e,a)&&e[a]!==s[a]){je.warn(`DATERANGE tag attribute: "${a}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=a;break}e=Ke(new tt({}),s,e)}if(this.attr=e,t?(this._startDate=t._startDate,this._cue=t._cue,this._endDate=t._endDate,this._dateAtEnd=t._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const s=t?.endDate||new Date(this.attr["END-DATE"]);ye(s.getTime())&&(this._endDate=s)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return e===void 0?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return e===null||e.programDateTime===null?(je.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const t=this.duration;return t!==null?this._dateAtEnd=new Date(this._startDate.getTime()+t*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(ye(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===mB}get isValid(){return!!this.id&&!this._badValueForSameId&&ye(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}const bB=10;class BD{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const t=this.lastPartSn-e.lastPartSn,i=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!i||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||t===0&&i>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1}hasKey(e){return this.encryptedFragments.some(t=>{let i=t.decryptdata;return i||(t.setKeyFormat(e.keyFormat),i=t.decryptdata),!!i&&e.matches(i)})}get hasProgramDateTime(){return this.fragments.length?ye(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||bB}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){return this.fragments.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){return this.fragments.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const t=this.lastPartIndex;if(t!==-1){for(let i=e.length;i--;)if(e[i].index>t)return e[i].index;return t}}return 0}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function xc(n,e){return n.length===e.length?!n.some((t,i)=>t!==e[i]):!1}function x1(n,e){return!n&&!e?!0:!n||!e?!1:xc(n,e)}function $r(n){return n==="AES-128"||n==="AES-256"||n==="AES-256-CTR"}function Fp(n){switch(n){case"AES-128":case"AES-256":return Ii.cbc;case"AES-256-CTR":return Ii.ctr;default:throw new Error(`invalid full segment method ${n}`)}}function Pp(n){return Uint8Array.from(atob(n),e=>e.charCodeAt(0))}function bh(n){return Uint8Array.from(unescape(encodeURIComponent(n)),e=>e.charCodeAt(0))}function xB(n){const e=bh(n).subarray(0,16),t=new Uint8Array(16);return t.set(e,16-e.length),t}function ND(n){const e=function(i,r,s){const a=i[r];i[r]=i[s],i[s]=a};e(n,0,3),e(n,1,2),e(n,4,5),e(n,6,7)}function $D(n){const e=n.split(":");let t=null;if(e[0]==="data"&&e.length===2){const i=e[1].split(";"),r=i[i.length-1].split(",");if(r.length===2){const s=r[0]==="base64",a=r[1];s?(i.splice(-1,1),t=Pp(a)):t=xB(a)}}return t}const Tc=typeof self<"u"?self:void 0;var nt={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},xt={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function Vo(n){switch(n){case xt.FAIRPLAY:return nt.FAIRPLAY;case xt.PLAYREADY:return nt.PLAYREADY;case xt.WIDEVINE:return nt.WIDEVINE;case xt.CLEARKEY:return nt.CLEARKEY}}function id(n){switch(n){case nt.FAIRPLAY:return xt.FAIRPLAY;case nt.PLAYREADY:return xt.PLAYREADY;case nt.WIDEVINE:return xt.WIDEVINE;case nt.CLEARKEY:return xt.CLEARKEY}}function _s(n){const{drmSystems:e,widevineLicenseUrl:t}=n,i=e?[nt.FAIRPLAY,nt.WIDEVINE,nt.PLAYREADY,nt.CLEARKEY].filter(r=>!!e[r]):[];return!i[nt.WIDEVINE]&&t&&i.push(nt.WIDEVINE),i}const Op=(function(n){return Tc!=null&&(n=Tc.navigator)!=null&&n.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null})();function TB(n,e,t,i){let r;switch(n){case nt.FAIRPLAY:r=["cenc","sinf"];break;case nt.WIDEVINE:case nt.PLAYREADY:r=["cenc"];break;case nt.CLEARKEY:r=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${n}`)}return _B(r,e,t,i)}function _B(n,e,t,i){return[{initDataTypes:n,persistentState:i.persistentState||"optional",distinctiveIdentifier:i.distinctiveIdentifier||"optional",sessionTypes:i.sessionTypes||[i.sessionType||"temporary"],audioCapabilities:e.map(s=>({contentType:`audio/mp4; codecs=${s}`,robustness:i.audioRobustness||"",encryptionScheme:i.audioEncryptionScheme||null})),videoCapabilities:t.map(s=>({contentType:`video/mp4; codecs=${s}`,robustness:i.videoRobustness||"",encryptionScheme:i.videoEncryptionScheme||null}))}]}function DB(n){var e;return!!n&&(n.sessionType==="persistent-license"||!!((e=n.sessionTypes)!=null&&e.some(t=>t==="persistent-license")))}function WD(n){const e=new Uint16Array(n.buffer,n.byteOffset,n.byteLength/2),t=String.fromCharCode.apply(null,Array.from(e)),i=t.substring(t.indexOf("<"),t.length),a=new DOMParser().parseFromString(i,"text/xml").getElementsByTagName("KID")[0];if(a){const o=a.childNodes[0]?a.childNodes[0].nodeValue:a.getAttribute("VALUE");if(o){const c=Pp(o).subarray(0,16);return ND(c),c}}return null}let Dr={};class jn{static clearKeyUriToKeyIdMap(){Dr={}}static setKeyIdForUri(e,t){Dr[e]=t}static addKeyIdForUri(e){const t=Object.keys(Dr).length%Number.MAX_SAFE_INTEGER,i=new Uint8Array(16);return new DataView(i.buffer,12,4).setUint32(0,t),Dr[e]=i,i}constructor(e,t,i,r=[1],s=null,a){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=i,this.keyFormatVersions=r,this.iv=s,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&!$r(e),a!=null&&a.startsWith("0x")&&(this.keyId=new Uint8Array(pD(a)))}matches(e){return e.uri===this.uri&&e.method===this.method&&e.encrypted===this.encrypted&&e.keyFormat===this.keyFormat&&xc(e.keyFormatVersions,this.keyFormatVersions)&&x1(e.iv,this.iv)&&x1(e.keyId,this.keyId)}isSupported(){if(this.method){if($r(this.method)||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case xt.FAIRPLAY:case xt.WIDEVINE:case xt.PLAYREADY:case xt.CLEARKEY:return["SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e,t){if(!this.encrypted||!this.uri)return null;if($r(this.method)){let s=this.iv;return s||(typeof e!="number"&&(je.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0),s=SB(e)),new jn(this.method,this.uri,"identity",this.keyFormatVersions,s)}if(this.keyId){const s=Dr[this.uri];if(s&&!xc(this.keyId,s)&&jn.setKeyIdForUri(this.uri,this.keyId),this.pssh)return this}const i=$D(this.uri);if(i)switch(this.keyFormat){case xt.WIDEVINE:if(this.pssh=i,!this.keyId){const s=L8(i.buffer);if(s.length){var r;const a=s[0];this.keyId=(r=a.kids)!=null&&r.length?a.kids[0]:null}}this.keyId||(this.keyId=T1(t));break;case xt.PLAYREADY:{const s=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=R8(s,null,i),this.keyId=WD(i);break}default:{let s=i.subarray(0,16);if(s.length!==16){const a=new Uint8Array(16);a.set(s,16-s.length),s=a}this.keyId=s;break}}if(!this.keyId||this.keyId.byteLength!==16){let s;s=EB(t),s||(s=T1(t),s||(s=Dr[this.uri])),s&&(this.keyId=s,jn.setKeyIdForUri(this.uri,s))}return this}}function EB(n){const e=n?.[xt.WIDEVINE];return e?e.keyId:null}function T1(n){const e=n?.[xt.PLAYREADY];if(e){const t=$D(e.uri);if(t)return WD(t)}return null}function SB(n){const e=new Uint8Array(16);for(let t=12;t<16;t++)e[t]=n>>8*(15-t)&255;return e}const _1=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,D1=/#EXT-X-MEDIA:(.*)/g,AB=/^#EXT(?:INF|-X-TARGETDURATION):/m,rd=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),wB=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class gn{static findGroup(e,t){for(let i=0;i<e.length;i++){const r=e[i];if(r.id===t)return r}}static resolve(e,t){return Ap.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return AB.test(e)}static parseMasterPlaylist(e,t){const i=y1(e),r={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:i},s=[];if(_1.lastIndex=0,!e.startsWith("#EXTM3U"))return r.playlistParsingError=new Error("no EXTM3U delimiter"),r;let a;for(;(a=_1.exec(e))!=null;)if(a[1]){var o;const l=new tt(a[1],r),u=vh(r,a[2]),d={attrs:l,bitrate:l.decimalInteger("BANDWIDTH")||l.decimalInteger("AVERAGE-BANDWIDTH"),name:l.NAME,url:gn.resolve(u,t)},h=l.decimalResolution("RESOLUTION");h&&(d.width=h.width,d.height=h.height),A1(l.CODECS,d);const f=l["SUPPLEMENTAL-CODECS"];f&&(d.supplemental={},A1(f,d.supplemental)),(o=d.unknownCodecs)!=null&&o.length||s.push(d),r.levels.push(d)}else if(a[3]){const l=a[3],u=a[4];switch(l){case"SESSION-DATA":{const d=new tt(u,r),h=d["DATA-ID"];h&&(r.sessionData===null&&(r.sessionData={}),r.sessionData[h]=d);break}case"SESSION-KEY":{const d=E1(u,t,r);d.encrypted&&d.isSupported()?(r.sessionKeys===null&&(r.sessionKeys=[]),r.sessionKeys.push(d)):je.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${u}"`);break}case"DEFINE":{{const d=new tt(u,r);v1(r,d,t)}break}case"CONTENT-STEERING":{const d=new tt(u,r);r.contentSteering={uri:gn.resolve(d["SERVER-URI"],t),pathwayId:d["PATHWAY-ID"]||"."};break}case"START":{r.startTimeOffset=S1(u);break}}}const c=s.length>0&&s.length<r.levels.length;return r.levels=c?s:r.levels,r.levels.length===0&&(r.playlistParsingError=new Error("no levels found in manifest")),r}static parseMasterPlaylistMedia(e,t,i){let r;const s={},a=i.levels,o={AUDIO:a.map(l=>({id:l.attrs.AUDIO,audioCodec:l.audioCodec})),SUBTITLES:a.map(l=>({id:l.attrs.SUBTITLES,textCodec:l.textCodec})),"CLOSED-CAPTIONS":[]};let c=0;for(D1.lastIndex=0;(r=D1.exec(e))!==null;){const l=new tt(r[1],i),u=l.TYPE;if(u){const d=o[u],h=s[u]||[];s[u]=h;const f=l.LANGUAGE,p=l["ASSOC-LANGUAGE"],m=l.CHANNELS,g=l.CHARACTERISTICS,y=l["INSTREAM-ID"],v={attrs:l,bitrate:0,id:c++,groupId:l["GROUP-ID"]||"",name:l.NAME||f||"",type:u,default:l.bool("DEFAULT"),autoselect:l.bool("AUTOSELECT"),forced:l.bool("FORCED"),lang:f,url:l.URI?gn.resolve(l.URI,t):""};if(p&&(v.assocLang=p),m&&(v.channels=m),g&&(v.characteristics=g),y&&(v.instreamId=y),d!=null&&d.length){const b=gn.findGroup(d,v.groupId)||d[0];w1(v,b,"audioCodec"),w1(v,b,"textCodec")}h.push(v)}}return s}static parseLevelPlaylist(e,t,i,r,s,a){var o;const c={url:t},l=new BD(t),u=l.fragments,d=[];let h=null,f=0,p=0,m=0,g=0,y=0,v=null,b=new $o(r,c),T,x,_,D=-1,w=!1,S=null,C;if(rd.lastIndex=0,l.m3u8=e,l.hasVariableRefs=y1(e),((o=rd.exec(e))==null?void 0:o[0])!=="#EXTM3U")return l.playlistParsingError=new Error("Missing format identifier #EXTM3U"),l;for(;(T=rd.exec(e))!==null;){w&&(w=!1,b=new $o(r,c),b.playlistOffset=m,b.setStart(m),b.sn=f,b.cc=g,y&&(b.bitrate=y),b.level=i,h&&(b.initSegment=h,h.rawProgramDateTime&&(b.rawProgramDateTime=h.rawProgramDateTime,h.rawProgramDateTime=null),S&&(b.setByteRange(S),S=null)));const E=T[1];if(E){b.duration=parseFloat(E);const $=(" "+T[2]).slice(1);b.title=$||null,b.tagList.push($?["INF",E,$]:["INF",E])}else if(T[3]){if(ye(b.duration)){b.playlistOffset=m,b.setStart(m),_&&C1(b,_,l),b.sn=f,b.level=i,b.cc=g,u.push(b);const $=(" "+T[3]).slice(1);b.relurl=vh(l,$),xh(b,v,d),v=b,m+=b.duration,f++,p=0,w=!0}}else{if(T=T[0].match(wB),!T){je.warn("No matches on slow regex match for level playlist!");continue}for(x=1;x<T.length&&T[x]===void 0;x++);const $=(" "+T[x]).slice(1),U=(" "+T[x+1]).slice(1),F=T[x+2]?(" "+T[x+2]).slice(1):null;switch($){case"BYTERANGE":v?b.setByteRange(U,v):b.setByteRange(U);break;case"PROGRAM-DATE-TIME":b.rawProgramDateTime=U,b.tagList.push(["PROGRAM-DATE-TIME",U]),D===-1&&(D=u.length);break;case"PLAYLIST-TYPE":l.type&&Mn(l,$,T),l.type=U.toUpperCase();break;case"MEDIA-SEQUENCE":l.startSN!==0?Mn(l,$,T):u.length>0&&R1(l,$,T),f=l.startSN=parseInt(U);break;case"SKIP":{l.skippedSegments&&Mn(l,$,T);const G=new tt(U,l),W=G.decimalInteger("SKIPPED-SEGMENTS");if(ye(W)){l.skippedSegments+=W;for(let P=W;P--;)u.push(null);f+=W}const Y=G.enumeratedString("RECENTLY-REMOVED-DATERANGES");Y&&(l.recentlyRemovedDateranges=(l.recentlyRemovedDateranges||[]).concat(Y.split("	")));break}case"TARGETDURATION":l.targetduration!==0&&Mn(l,$,T),l.targetduration=Math.max(parseInt(U),1);break;case"VERSION":l.version!==null&&Mn(l,$,T),l.version=parseInt(U);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":l.live||Mn(l,$,T),l.live=!1;break;case"#":(U||F)&&b.tagList.push(F?[U,F]:[U]);break;case"DISCONTINUITY":g++,b.tagList.push(["DIS"]);break;case"GAP":b.gap=!0,b.tagList.push([$]);break;case"BITRATE":b.tagList.push([$,U]),y=parseInt(U)*1e3,ye(y)?b.bitrate=y:y=0;break;case"DATERANGE":{const G=new tt(U,l),W=new kp(G,l.dateRanges[G.ID],l.dateRangeTagCount);l.dateRangeTagCount++,W.isValid||l.skippedSegments?l.dateRanges[W.id]=W:je.warn(`Ignoring invalid DATERANGE tag: "${U}"`),b.tagList.push(["EXT-X-DATERANGE",U]);break}case"DEFINE":{{const G=new tt(U,l);"IMPORT"in G?pB(l,G,a):v1(l,G,t)}break}case"DISCONTINUITY-SEQUENCE":l.startCC!==0?Mn(l,$,T):u.length>0&&R1(l,$,T),l.startCC=g=parseInt(U);break;case"KEY":{const G=E1(U,t,l);if(G.isSupported()){if(G.method==="NONE"){_=void 0;break}_||(_={});const W=_[G.keyFormat];W!=null&&W.matches(G)||(W&&(_=Ke({},_)),_[G.keyFormat]=G)}else je.warn(`[Keys] Ignoring unsupported EXT-X-KEY tag: "${U}"`);break}case"START":l.startTimeOffset=S1(U);break;case"MAP":{const G=new tt(U,l);if(b.duration){const W=new $o(r,c);I1(W,G,i,_),h=W,b.initSegment=h,h.rawProgramDateTime&&!b.rawProgramDateTime&&(b.rawProgramDateTime=h.rawProgramDateTime)}else{const W=b.byteRangeEndOffset;if(W){const Y=b.byteRangeStartOffset;S=`${W-Y}@${Y}`}else S=null;I1(b,G,i,_),h=b,w=!0}h.cc=g;break}case"SERVER-CONTROL":{C&&Mn(l,$,T),C=new tt(U),l.canBlockReload=C.bool("CAN-BLOCK-RELOAD"),l.canSkipUntil=C.optionalFloat("CAN-SKIP-UNTIL",0),l.canSkipDateRanges=l.canSkipUntil>0&&C.bool("CAN-SKIP-DATERANGES"),l.partHoldBack=C.optionalFloat("PART-HOLD-BACK",0),l.holdBack=C.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{l.partTarget&&Mn(l,$,T);const G=new tt(U);l.partTarget=G.decimalFloatingPoint("PART-TARGET");break}case"PART":{let G=l.partList;G||(G=l.partList=[]);const W=p>0?G[G.length-1]:void 0,Y=p++,P=new tt(U,l),V=new gD(P,b,c,Y,W);G.push(V),b.duration+=V.duration;break}case"PRELOAD-HINT":{const G=new tt(U,l);l.preloadHint=G;break}case"RENDITION-REPORT":{const G=new tt(U,l);l.renditionReports=l.renditionReports||[],l.renditionReports.push(G);break}default:je.warn(`line parsed but not handled: ${T}`);break}}}v&&!v.relurl?(u.pop(),m-=v.duration,l.partList&&(l.fragmentHint=v)):l.partList&&(xh(b,v,d),b.cc=g,l.fragmentHint=b,_&&C1(b,_,l)),l.targetduration||(l.playlistParsingError=new Error("Missing Target Duration"));const O=u.length,I=u[0],L=u[O-1];if(m+=l.skippedSegments*l.targetduration,m>0&&O&&L){l.averagetargetduration=m/O;const E=L.sn;l.endSN=E!=="initSegment"?E:0,l.live||(L.endList=!0),D>0&&(CB(u,D),I&&d.unshift(I))}return l.fragmentHint&&(m+=l.fragmentHint.duration),l.totalduration=m,d.length&&l.dateRangeTagCount&&I&&VD(d,l),l.endCC=g,l}}function VD(n,e){let t=n.length;if(!t)if(e.hasProgramDateTime){const o=e.fragments[e.fragments.length-1];n.push(o),t++}else return;const i=n[t-1],r=e.live?1/0:e.totalduration,s=Object.keys(e.dateRanges);for(let o=s.length;o--;){const c=e.dateRanges[s[o]],l=c.startDate.getTime();c.tagAnchor=i.ref;for(let u=t;u--;){var a;if(((a=n[u])==null?void 0:a.sn)<e.startSN)break;const d=IB(e,l,n,u,r);if(d!==-1){c.tagAnchor=e.fragments[d].ref;break}}}}function IB(n,e,t,i,r){const s=t[i];if(s){const o=s.programDateTime;if(e>=o||i===0){var a;const c=(((a=t[i+1])==null?void 0:a.start)||r)-s.start;if(e<=o+c*1e3){const l=t[i].sn-n.startSN;if(l<0)return-1;const u=n.fragments;if(u.length>t.length){const h=(t[i+1]||u[u.length-1]).sn-n.startSN;for(let f=h;f>l;f--){const p=u[f].programDateTime;if(e>=p&&e<p+u[f].duration*1e3)return f}}return l}}}return-1}function E1(n,e,t){var i,r;const s=new tt(n,t),a=(i=s.METHOD)!=null?i:"",o=s.URI,c=s.hexadecimalInteger("IV"),l=s.KEYFORMATVERSIONS,u=(r=s.KEYFORMAT)!=null?r:"identity";o&&s.IV&&!c&&je.error(`Invalid IV: ${s.IV}`);const d=o?gn.resolve(o,e):"",h=(l||"1").split("/").map(Number).filter(Number.isFinite);return new jn(a,d,u,h,c,s.KEYID)}function S1(n){const t=new tt(n).decimalFloatingPoint("TIME-OFFSET");return ye(t)?t:null}function A1(n,e){let t=(n||"").split(/[ ,]+/).filter(i=>i);["video","audio","text"].forEach(i=>{const r=t.filter(s=>Cp(s,i));r.length&&(e[`${i}Codec`]=r.map(s=>s.split("/")[0]).join(","),t=t.filter(s=>r.indexOf(s)===-1))}),e.unknownCodecs=t}function w1(n,e,t){const i=e[t];i&&(n[t]=i)}function CB(n,e){let t=n[e];for(let i=e;i--;){const r=n[i];if(!r)return;r.programDateTime=t.programDateTime-r.duration*1e3,t=r}}function xh(n,e,t){n.rawProgramDateTime?t.push(n):e!=null&&e.programDateTime&&(n.programDateTime=e.endProgramDateTime)}function I1(n,e,t,i){n.relurl=e.URI,e.BYTERANGE&&n.setByteRange(e.BYTERANGE),n.level=t,n.sn="initSegment",i&&(n.levelkeys=i),n.initSegment=null}function C1(n,e,t){n.levelkeys=e;const{encryptedFragments:i}=t;(!i.length||i[i.length-1].levelkeys!==e)&&Object.keys(e).some(r=>e[r].isCommonEncryption)&&i.push(n)}function Mn(n,e,t){n.playlistParsingError=new Error(`#EXT-X-${e} must not appear more than once (${t[0]})`)}function R1(n,e,t){n.playlistParsingError=new Error(`#EXT-X-${e} must appear before the first Media Segment (${t[0]})`)}function sd(n,e){const t=e.startPTS;if(ye(t)){let i=0,r;e.sn>n.sn?(i=t-n.start,r=n):(i=n.start-t,r=e),r.duration!==i&&r.setDuration(i)}else e.sn>n.sn?n.cc===e.cc&&n.minEndPTS?e.setStart(n.start+(n.minEndPTS-n.start)):e.setStart(n.start+n.duration):e.setStart(Math.max(n.start-e.duration,0))}function GD(n,e,t,i,r,s,a){i-t<=0&&(a.warn("Fragment should have a positive duration",e),i=t+e.duration,s=r+e.duration);let c=t,l=i;const u=e.startPTS,d=e.endPTS;if(ye(u)){const y=Math.abs(u-t);n&&y>n.totalduration?a.warn(`media timestamps and playlist times differ by ${y}s for level ${e.level} ${n.url}`):ye(e.deltaPTS)?e.deltaPTS=Math.max(y,e.deltaPTS):e.deltaPTS=y,c=Math.max(t,u),t=Math.min(t,u),r=e.startDTS!==void 0?Math.min(r,e.startDTS):r,l=Math.min(i,d),i=Math.max(i,d),s=e.endDTS!==void 0?Math.max(s,e.endDTS):s}const h=t-e.start;e.start!==0&&e.setStart(t),e.setDuration(i-e.start),e.startPTS=t,e.maxStartPTS=c,e.startDTS=r,e.endPTS=i,e.minEndPTS=l,e.endDTS=s;const f=e.sn;if(!n||f<n.startSN||f>n.endSN)return 0;let p;const m=f-n.startSN,g=n.fragments;for(g[m]=e,p=m;p>0;p--)sd(g[p],g[p-1]);for(p=m;p<g.length-1;p++)sd(g[p],g[p+1]);return n.fragmentHint&&sd(g[g.length-1],n.fragmentHint),n.PTSKnown=n.alignedSliding=!0,h}function RB(n,e,t){if(n===e)return;let i=null;const r=n.fragments;for(let u=r.length-1;u>=0;u--){const d=r[u].initSegment;if(d){i=d;break}}n.fragmentHint&&delete n.fragmentHint.endPTS;let s;kB(n,e,(u,d,h,f)=>{if((!e.startCC||e.skippedSegments)&&d.cc!==u.cc){const p=u.cc-d.cc;for(let m=h;m<f.length;m++)f[m].cc+=p;e.endCC=f[f.length-1].cc}ye(u.startPTS)&&ye(u.endPTS)&&(d.setStart(d.startPTS=u.startPTS),d.startDTS=u.startDTS,d.maxStartPTS=u.maxStartPTS,d.endPTS=u.endPTS,d.endDTS=u.endDTS,d.minEndPTS=u.minEndPTS,d.setDuration(u.endPTS-u.startPTS),d.duration&&(s=d),e.PTSKnown=e.alignedSliding=!0),u.hasStreams&&(d.elementaryStreams=u.elementaryStreams),d.loader=u.loader,u.hasStats&&(d.stats=u.stats),u.initSegment&&(d.initSegment=u.initSegment,i=u.initSegment)});const a=e.fragments,o=e.fragmentHint?a.concat(e.fragmentHint):a;if(i&&o.forEach(u=>{var d;u&&(!u.initSegment||u.initSegment.relurl===((d=i)==null?void 0:d.relurl))&&(u.initSegment=i)}),e.skippedSegments){if(e.deltaUpdateFailed=a.some(u=>!u),e.deltaUpdateFailed){t.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let u=e.skippedSegments;u--;)a.shift();e.startSN=a[0].sn}else{e.canSkipDateRanges&&(e.dateRanges=LB(n.dateRanges,e,t));const u=n.fragments.filter(d=>d.rawProgramDateTime);if(n.hasProgramDateTime&&!e.hasProgramDateTime)for(let d=1;d<o.length;d++)o[d].programDateTime===null&&xh(o[d],o[d-1],u);VD(u,e)}e.endCC=a[a.length-1].cc}if(!e.startCC){var c;const u=jD(n,e.startSN-1);e.startCC=(c=u?.cc)!=null?c:a[0].cc}UB(n.partList,e.partList,(u,d)=>{d.elementaryStreams=u.elementaryStreams,d.stats=u.stats}),s?GD(e,s,s.startPTS,s.endPTS,s.startDTS,s.endDTS,t):HD(n,e),a.length&&(e.totalduration=e.edge-a[0].start),e.driftStartTime=n.driftStartTime,e.driftStart=n.driftStart;const l=e.advancedDateTime;if(e.advanced&&l){const u=e.edge;e.driftStart||(e.driftStartTime=l,e.driftStart=u),e.driftEndTime=l,e.driftEnd=u}else e.driftEndTime=n.driftEndTime,e.driftEnd=n.driftEnd,e.advancedDateTime=n.advancedDateTime;e.requestScheduled===-1&&(e.requestScheduled=n.requestScheduled)}function LB(n,e,t){const{dateRanges:i,recentlyRemovedDateranges:r}=e,s=Ke({},n);r&&r.forEach(c=>{delete s[c]});const o=Object.keys(s).length;return o?(Object.keys(i).forEach(c=>{const l=s[c],u=new kp(i[c].attr,l);u.isValid?(s[c]=u,l||(u.tagOrder+=o)):t.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${Ye(i[c].attr)}"`)}),s):i}function UB(n,e,t){if(n&&e){let i=0;for(let r=0,s=n.length;r<=s;r++){const a=n[r],o=e[r+i];a&&o&&a.index===o.index&&a.fragment.sn===o.fragment.sn?t(a,o):i--}}}function kB(n,e,t){const i=e.skippedSegments,r=Math.max(n.startSN,e.startSN)-e.startSN,s=(n.fragmentHint?1:0)+(i?e.endSN:Math.min(n.endSN,e.endSN))-e.startSN,a=e.startSN-n.startSN,o=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,c=n.fragmentHint?n.fragments.concat(n.fragmentHint):n.fragments;for(let l=r;l<=s;l++){const u=c[a+l];let d=o[l];if(i&&!d&&u&&(d=e.fragments[l]=u),u&&d){t(u,d,l,o);const h=u.relurl,f=d.relurl;if(h&&FB(h,f)){e.playlistParsingError=L1(`media sequence mismatch ${d.sn}:`,n,e,u,d);return}else if(u.cc!==d.cc){e.playlistParsingError=L1(`discontinuity sequence mismatch (${u.cc}!=${d.cc})`,n,e,u,d);return}}}}function L1(n,e,t,i,r){return new Error(`${n} ${r.url}
Playlist starting @${e.startSN}
${e.m3u8}

Playlist starting @${t.startSN}
${t.m3u8}`)}function HD(n,e,t=!0){const i=e.startSN+e.skippedSegments-n.startSN,r=n.fragments,s=i>=0;let a=0;if(s&&i<r.length)a=r[i].start;else if(s&&e.startSN===n.endSN+1)a=n.fragmentEnd;else if(s&&t)a=n.fragmentStart+i*e.levelTargetDuration;else if(!e.skippedSegments&&e.fragmentStart===0)a=n.fragmentStart;else return;Th(e,a)}function Th(n,e){if(e){const t=n.fragments;for(let i=n.skippedSegments;i<t.length;i++)t[i].addStart(e);n.fragmentHint&&n.fragmentHint.addStart(e)}}function qD(n,e=1/0){let t=1e3*n.targetduration;if(n.updated){const i=n.fragments;if(i.length&&t*4>e){const s=i[i.length-1].duration*1e3;s<t&&(t=s)}}else t/=2;return Math.round(t)}function jD(n,e,t){if(!n)return null;let i=n.fragments[e-n.startSN];return i||(i=n.fragmentHint,i&&i.sn===e)?i:e<n.startSN&&t&&t.sn===e?t:null}function U1(n,e,t){return n?KD(n.partList,e,t):null}function KD(n,e,t){if(n)for(let i=n.length;i--;){const r=n[i];if(r.index===t&&r.fragment.sn===e)return r}return null}function zD(n){n.forEach((e,t)=>{var i;(i=e.details)==null||i.fragments.forEach(r=>{r.level=t,r.initSegment&&(r.initSegment.level=t)})})}function FB(n,e){return n!==e&&e?k1(n)!==k1(e):!1}function k1(n){return n.replace(/\?[^?]*$/,"")}function Fs(n,e){for(let i=0,r=n.length;i<r;i++){var t;if(((t=n[i])==null?void 0:t.cc)===e)return n[i]}return null}function PB(n,e){return!!(n&&e.startCC<n.endCC&&e.endCC>n.startCC)}function F1(n,e){const t=n.start+e;n.startPTS=t,n.setStart(t),n.endPTS=t+n.duration}function XD(n,e){const t=e.fragments;for(let i=0,r=t.length;i<r;i++)F1(t[i],n);e.fragmentHint&&F1(e.fragmentHint,n),e.alignedSliding=!0}function OB(n,e){n&&(YD(e,n),e.alignedSliding||_c(e,n),!e.alignedSliding&&!e.skippedSegments&&HD(n,e,!1))}function YD(n,e){if(!PB(e,n))return;const t=Math.min(e.endCC,n.endCC),i=Fs(e.fragments,t),r=Fs(n.fragments,t);if(!i||!r)return;je.log(`Aligning playlist at start of dicontinuity sequence ${t}`);const s=i.start-r.start;XD(s,n)}function _c(n,e){if(!n.hasProgramDateTime||!e.hasProgramDateTime)return;const t=n.fragments,i=e.fragments;if(!t.length||!i.length)return;let r,s;const a=Math.min(e.endCC,n.endCC);e.startCC<a&&n.startCC<a&&(r=Fs(i,a),s=Fs(t,a)),(!r||!s)&&(r=i[Math.floor(i.length/2)],s=Fs(t,r.cc)||t[Math.floor(t.length/2)]);const o=r.programDateTime,c=s.programDateTime;if(!o||!c)return;const l=(c-o)/1e3-(s.start-r.start);XD(l,n)}function Ut(n,e,t){$t(n,e,t),n.addEventListener(e,t)}function $t(n,e,t){n.removeEventListener(e,t)}const MB={toString:function(n){let e="";const t=n.length;for(let i=0;i<t;i++)e+=`[${n.start(i).toFixed(3)}-${n.end(i).toFixed(3)}]`;return e}},le={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class hl extends OD{constructor(e,t,i,r,s){super(r,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=le.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:a,fragCurrent:o,media:c,mediaBuffer:l,state:u}=this,d=c?c.currentTime:0,h=ke.bufferInfo(l||c,d,a.maxBufferHole),f=!h.len;if(this.log(`Media seeking to ${ye(d)?d.toFixed(3):d}, state: ${u}, ${f?"out of":"in"} buffer`),this.state===le.ENDED)this.resetLoadingState();else if(o){const p=a.maxFragLookUpTolerance,m=o.start-p,g=o.start+o.duration+p;if(f||g<h.start||m>h.end){const y=d>g;(d<m||y)&&(y&&o.loader&&(this.log(`Cancelling fragment load for seek (sn: ${o.sn})`),o.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(c){this.fragmentTracker.removeFragmentsInRange(d,1/0,this.playlistType,!0);const p=this.lastCurrentTime;if(d>p&&(this.lastCurrentTime=d),!this.loadingParts){const m=Math.max(h.end,d),g=this.shouldLoadParts(this.getLevelDetails(),m);g&&(this.log(`LL-Part loading ON after seeking to ${d.toFixed(2)} with buffer @${m.toFixed(2)}`),this.loadingParts=g)}}this.hls.hasEnoughToStart||(this.log(`Setting ${f?"startPosition":"nextLoadPosition"} to ${d} for seek without enough to start`),this.nextLoadPosition=d,f&&(this.startPosition=d)),f&&this.state===le.IDLE&&this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=s,this.hls=e,this.fragmentLoader=new hB(e.config),this.keyLoader=i,this.fragmentTracker=t,this.config=e.config,this.decrypter=new Up(e.config)}registerListeners(){const{hls:e}=this;e.on(R.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(R.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(R.MANIFEST_LOADING,this.onManifestLoading,this),e.on(R.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(R.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(R.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(R.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(R.MANIFEST_LOADING,this.onManifestLoading,this),e.off(R.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(R.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===le.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=le.STOPPED}get startPositionValue(){const{nextLoadPosition:e,startPosition:t}=this;return t===-1&&e?e:t}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,t){if(t.live||!this.media)return!1;const i=e.end||0,r=this.config.timelineOffset||0;if(i<=r)return!1;const s=e.buffered;this.config.maxBufferHole&&s&&s.length>1&&(e=ke.bufferedInfo(s,e.start,0));const a=e.nextStart;if(a&&a>r&&a<t.edge||this.media.currentTime<e.start)return!1;const c=t.partList;if(c!=null&&c.length){const u=c[c.length-1];return ke.isBuffered(this.media,u.start+u.duration/2)}const l=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(l)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null)return this.levelLastLoaded.details}get timelineOffset(){const e=this.config.timelineOffset;if(e){var t;return((t=this.getLevelDetails())==null?void 0:t.appliedTimelineOffset)||e}return 0}onMediaAttached(e,t){const i=this.media=this.mediaBuffer=t.media;Ut(i,"seeking",this.onMediaSeeking),Ut(i,"ended",this.onMediaEnded);const r=this.config;this.levels&&r.autoStartLoad&&this.state===le.STOPPED&&this.startLoad(r.startPosition)}onMediaDetaching(e,t){const i=!!t.transferMedia,r=this.media;if(r!==null){if(r.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),$t(r,"seeking",this.onMediaSeeking),$t(r,"ended",this.onMediaEnded),this.keyLoader&&!i&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,i){this.resetLoadingState(),this.resetTransmuxer();return}this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,t){}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=le.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,i){this.startFragRequested=!0,this._loadFragForPlayback(e,t,i)}_loadFragForPlayback(e,t,i){const r=s=>{const a=s.frag;if(this.fragContextChanged(a)){this.warn(`${a.type} sn: ${a.sn}${s.part?" part: "+s.part.index:""} of ${this.fragInfo(a,!1,s.part)}) was dropped during download.`),this.fragmentTracker.removeFragment(a);return}a.stats.chunkCount++,this._handleFragmentLoadProgress(s)};this._doFragLoad(e,t,i,r).then(s=>{if(!s)return;const a=this.state,o=s.frag;if(this.fragContextChanged(o)){(a===le.FRAG_LOADING||!this.fragCurrent&&a===le.PARSING)&&(this.fragmentTracker.removeFragment(o),this.state=le.IDLE);return}"payload"in s&&(this.log(`Loaded ${o.type} sn: ${o.sn} of ${this.playlistLabel()} ${o.level}`),this.hls.trigger(R.FRAG_LOADED,s)),this._handleFragmentLoadComplete(s)}).catch(s=>{this.state===le.STOPPED||this.state===le.ERROR||(this.warn(`Frag error: ${s?.message||s}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;const{fragmentTracker:i}=this;if(i.getState(e)===gt.APPENDING){const s=e.type,a=this.getFwdBufferInfo(this.mediaBuffer,s),o=Math.max(e.duration,a?a.len:this.config.maxBufferLength),c=this.backtrackFragment;((c?e.sn-c.sn:0)===1||this.reduceMaxBufferLength(o,e.duration))&&i.removeFragment(e)}else((t=this.mediaBuffer)==null?void 0:t.buffered.length)===0?i.removeAllFragments():i.hasParts(e.type)&&(i.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),i.getState(e)===gt.PARTIAL&&i.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const t=e.details;return t?.live&&t.type!=="EVENT"&&(this.levelLastLoaded!==e||t.expired)}flushMainBuffer(e,t,i=null){if(!(e-t))return;const r={startOffset:e,endOffset:t,type:i};this.hls.trigger(R.BUFFER_FLUSHING,r)}_loadInitSegment(e,t){this._doFragLoad(e,t).then(i=>{const r=i?.frag;if(!r||this.fragContextChanged(r)||!this.levels)throw new Error("init load aborted");return i}).then(i=>{const{hls:r}=this,{frag:s,payload:a}=i,o=s.decryptdata;if(a&&a.byteLength>0&&o!=null&&o.key&&o.iv&&$r(o.method)){const c=self.performance.now();return this.decrypter.decrypt(new Uint8Array(a),o.key.buffer,o.iv.buffer,Fp(o.method)).catch(l=>{throw r.trigger(R.ERROR,{type:_e.MEDIA_ERROR,details:re.FRAG_DECRYPT_ERROR,fatal:!1,error:l,reason:l.message,frag:s}),l}).then(l=>{const u=self.performance.now();return r.trigger(R.FRAG_DECRYPTED,{frag:s,payload:l,stats:{tstart:c,tdecrypt:u}}),i.payload=l,this.completeInitSegmentLoad(i)})}return this.completeInitSegmentLoad(i)}).catch(i=>{this.state===le.STOPPED||this.state===le.ERROR||(this.warn(i),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const i=e.frag.stats;this.state!==le.STOPPED&&(this.state=le.IDLE),e.frag.data=new Uint8Array(e.payload),i.parsing.start=i.buffering.start=self.performance.now(),i.parsing.end=i.buffering.end=self.performance.now(),this.tick()}unhandledEncryptionError(e,t){var i,r;const s=e.tracks;if(s&&!t.encrypted&&((i=s.audio)!=null&&i.encrypted||(r=s.video)!=null&&r.encrypted)&&(!this.config.emeEnabled||!this.keyLoader.emeController)){const a=this.media,o=new Error(`Encrypted track with no key in ${this.fragInfo(t)} (media ${a?"attached mediaKeys: "+a.mediaKeys:"detached"})`);return this.warn(o.message),!a||a.mediaKeys?!1:(this.hls.trigger(R.ERROR,{type:_e.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_NO_KEYS,fatal:!1,error:o,frag:t}),this.resetTransmuxer(),!0)}return!1}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){const i=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)} > buffer:${i?MB.toString(ke.getBuffered(i)):"(detached)"})`),lt(e)){var r;if(e.type!==xe.SUBTITLE){const a=e.elementaryStreams;if(!Object.keys(a).some(o=>!!a[o])){this.state=le.IDLE;return}}const s=(r=this.levels)==null?void 0:r[e.level];s!=null&&s.fragmentError&&(this.log(`Resetting level fragment error count of ${s.fragmentError} on frag buffered`),s.fragmentError=0)}this.state=le.IDLE}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:i,part:r,partsLoaded:s}=e,a=!s||s.length===0||s.some(c=>!c),o=new dl(i.level,i.sn,i.stats.chunkCount+1,0,r?r.index:-1,!a);t.flush(o)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,i=null,r){var s;this.fragCurrent=e;const a=t.details;if(!this.levels||!a)throw new Error(`frag load aborted, missing level${a?"":" detail"}s`);let o=null;if(e.encrypted&&!((s=e.decryptdata)!=null&&s.key)){if(this.log(`Loading key for ${e.sn} of [${a.startSN}-${a.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=le.KEY_LOADING,this.fragCurrent=e,o=this.keyLoader.load(e).then(h=>{if(!this.fragContextChanged(h.frag))return this.hls.trigger(R.KEY_LOADED,h),this.state===le.KEY_LOADING&&(this.state=le.IDLE),h}),this.hls.trigger(R.KEY_LOADING,{frag:e}),this.fragCurrent===null)return this.log("context changed in KEY_LOADING"),Promise.resolve(null)}else e.encrypted||(o=this.keyLoader.loadClear(e,a.encryptedFragments,this.startFragRequested),o&&this.log("[eme] blocking frag load until media-keys acquired"));const c=this.fragPrevious;if(lt(e)&&(!c||e.sn!==c.sn)){const h=this.shouldLoadParts(t.details,e.end);h!==this.loadingParts&&(this.log(`LL-Part loading ${h?"ON":"OFF"} loading sn ${c?.sn}->${e.sn}`),this.loadingParts=h)}if(i=Math.max(e.start,i||0),this.loadingParts&&lt(e)){const h=a.partList;if(h&&r){i>a.fragmentEnd&&a.fragmentHint&&(e=a.fragmentHint);const f=this.getNextPart(h,e,i);if(f>-1){const p=h[f];e=this.fragCurrent=p.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${p.index} (${f}/${h.length-1}) of ${this.fragInfo(e,!1,p)}) cc: ${e.cc} [${a.startSN}-${a.endSN}], target: ${parseFloat(i.toFixed(3))}`),this.nextLoadPosition=p.start+p.duration,this.state=le.FRAG_LOADING;let m;return o?m=o.then(g=>!g||this.fragContextChanged(g.frag)?null:this.doFragPartsLoad(e,p,t,r)).catch(g=>this.handleFragLoadError(g)):m=this.doFragPartsLoad(e,p,t,r).catch(g=>this.handleFragLoadError(g)),this.hls.trigger(R.FRAG_LOADING,{frag:e,part:p,targetBufferTime:i}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):m}else if(!e.url||this.loadedEndOfParts(h,i))return Promise.resolve(null)}}if(lt(e)&&this.loadingParts){var l;this.log(`LL-Part loading OFF after next part miss @${i.toFixed(2)} Check buffer at sn: ${e.sn} loaded parts: ${(l=a.partList)==null?void 0:l.filter(h=>h.loaded).map(h=>`[${h.start}-${h.end}]`)}`),this.loadingParts=!1}else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${"["+a.startSN+"-"+a.endSN+"]"}, target: ${parseFloat(i.toFixed(3))}`),ye(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=le.FRAG_LOADING;const u=this.config.progressive&&e.type!==xe.SUBTITLE;let d;return u&&o?d=o.then(h=>!h||this.fragContextChanged(h.frag)?null:this.fragmentLoader.load(e,r)).catch(h=>this.handleFragLoadError(h)):d=Promise.all([this.fragmentLoader.load(e,u?r:void 0),o]).then(([h])=>(!u&&r&&r(h),h)).catch(h=>this.handleFragLoadError(h)),this.hls.trigger(R.FRAG_LOADING,{frag:e,targetBufferTime:i}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):d}doFragPartsLoad(e,t,i,r){return new Promise((s,a)=>{var o;const c=[],l=(o=i.details)==null?void 0:o.partList,u=d=>{this.fragmentLoader.loadPart(e,d,r).then(h=>{c[d.index]=h;const f=h.part;this.hls.trigger(R.FRAG_LOADED,h);const p=U1(i.details,e.sn,d.index+1)||KD(l,e.sn,d.index+1);if(p)u(p);else return s({frag:e,part:f,partsLoaded:c})}).catch(a)};u(t)})}handleFragLoadError(e){if("data"in e){const t=e.data;t.frag&&t.details===re.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):t.frag&&t.type===_e.KEY_SYSTEM_ERROR?(t.frag.abortRequests(),this.resetStartWhenNotLoaded(),this.resetFragmentLoading(t.frag)):this.hls.trigger(R.ERROR,t)}else this.hls.trigger(R.ERROR,{type:_e.OTHER_ERROR,details:re.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==le.PARSING){!this.fragCurrent&&this.state!==le.STOPPED&&this.state!==le.ERROR&&(this.state=le.IDLE);return}const{frag:i,part:r,level:s}=t,a=self.performance.now();i.stats.parsing.end=a,r&&(r.stats.parsing.end=a);const o=this.getLevelDetails(),l=o&&i.sn>o.endSN||this.shouldLoadParts(o,i.end);l!==this.loadingParts&&(this.log(`LL-Part loading ${l?"ON":"OFF"} after parsing segment ending @${i.end.toFixed(2)}`),this.loadingParts=l),this.updateLevelTiming(i,r,s,e.partial)}shouldLoadParts(e,t){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(e.partList){var i;const s=e.partList[0];if(s.fragment.type===xe.SUBTITLE)return!1;const a=s.end+(((i=e.fragmentHint)==null?void 0:i.duration)||0);if(t>=a){var r;if((this.hls.hasEnoughToStart?((r=this.media)==null?void 0:r.currentTime)||this.lastCurrentTime:this.getLoadPosition())>s.start-s.fragment.duration)return!0}}}return!1}getCurrentContext(e){const{levels:t,fragCurrent:i}=this,{level:r,sn:s,part:a}=e;if(!(t!=null&&t[r]))return this.warn(`Levels object was unset while buffering fragment ${s} of ${this.playlistLabel()} ${r}. The current chunk will not be buffered.`),null;const o=t[r],c=o.details,l=a>-1?U1(c,s,a):null,u=l?l.fragment:jD(c,s,i);return u?(i&&i!==u&&(u.stats=i.stats),{frag:u,part:l,level:o}):null}bufferFragmentData(e,t,i,r,s){if(this.state!==le.PARSING)return;const{data1:a,data2:o}=e;let c=a;if(o&&(c=rn(a,o)),!c.length)return;const l=this.initPTS[t.cc],u=l?-l.baseTime/l.timescale:void 0,d={type:e.type,frag:t,part:i,chunkMeta:r,offset:u,parent:t.type,data:c};if(this.hls.trigger(R.BUFFER_APPENDING,d),e.dropped&&e.independent&&!i){if(s)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!ke.isBuffered(t,t.currentTime)){this.flushMainBuffer(0,e.start);return}const i=t.currentTime,r=ke.bufferInfo(t,i,0),s=e.duration,a=Math.min(this.config.maxFragLookUpTolerance*2,s*.25),o=Math.max(Math.min(e.start-a,r.end-a),i+a);e.start-o>a&&this.flushMainBuffer(o,e.start)}getFwdBufferInfo(e,t){var i;const r=this.getLoadPosition();if(!ye(r))return null;const a=this.lastCurrentTime>r||(i=this.media)!=null&&i.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,r,t,a)}getFwdBufferInfoAtPos(e,t,i,r){const s=ke.bufferInfo(e,t,r);if(s.len===0&&s.nextStart!==void 0){const a=this.fragmentTracker.getBufferedFrag(t,i);if(a&&(s.nextStart<=a.end||a.gap)){const o=Math.max(Math.min(s.nextStart,a.end)-t,r);return ke.bufferInfo(e,t,o)}}return s}getMaxBufferLength(e){const{config:t}=this;let i;return e?i=Math.max(8*t.maxBufferSize/e,t.maxBufferLength):i=t.maxBufferLength,Math.min(i,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const i=this.config,r=Math.max(Math.min(e-t,i.maxBufferLength),t),s=Math.max(e-t*3,i.maxMaxBufferLength/2,r);return s>=r?(i.maxMaxBufferLength=s,this.warn(`Reduce max buffer length to ${s}s`),!0):!1}getAppendedFrag(e,t=xe.MAIN){const i=this.fragmentTracker?this.fragmentTracker.getAppendedFrag(e,t):null;return i&&"fragment"in i?i.fragment:i}getNextFragment(e,t){const i=t.fragments,r=i.length;if(!r)return null;const{config:s}=this,a=i[0].start,o=s.lowLatencyMode&&!!t.partList;let c=null;if(t.live){const d=s.initialLiveManifestSize;if(r<d)return this.warn(`Not enough fragments to start playback (have: ${r}, need: ${d})`),null;if(!t.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<a){var l;o&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),c=this.getInitialLiveFragment(t);const h=this.hls.startPosition,f=this.hls.liveSyncPosition,p=c?(h!==-1&&h>=a?h:f)||c.start:e;this.log(`Setting startPosition to ${p} to match start frag at live edge. mainStart: ${h} liveSyncPosition: ${f} frag.start: ${(l=c)==null?void 0:l.start}`),this.startPosition=this.nextLoadPosition=p}}else e<=a&&(c=i[0]);if(!c){const d=this.loadingParts?t.partEnd:t.fragmentEnd;c=this.getFragmentAtPosition(e,d,t)}let u=this.filterReplacedPrimary(c,t);if(!u&&c){const d=c.sn-t.startSN;u=this.filterReplacedPrimary(i[d+1]||null,t)}return this.mapToInitFragWhenRequired(u)}isLoopLoading(e,t){const i=this.fragmentTracker.getState(e);return(i===gt.OK||i===gt.PARTIAL&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,i,r,s){let a=null;if(e.gap&&(a=this.getNextFragment(this.nextLoadPosition,t),a&&!a.gap&&i.nextStart)){const o=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,i.nextStart,r,0);if(o!==null&&i.len+o.len>=s){const c=a.sn;return this.loopSn!==c&&(this.log(`buffer full after gaps in "${r}" playlist starting at sn: ${c}`),this.loopSn=c),null}}return this.loopSn=void 0,a}get primaryPrefetch(){if(P1(this.config)){var e;if((e=this.hls.interstitialsManager)==null||(e=e.playingItem)==null?void 0:e.event)return!0}return!1}filterReplacedPrimary(e,t){if(!e)return e;if(P1(this.config)&&e.type!==xe.SUBTITLE){const i=this.hls.interstitialsManager,r=i?.bufferingItem;if(r){const a=r.event;if(a){if(a.appendInPlace||Math.abs(e.start-r.start)>1||r.start===0)return null}else if(e.end<=r.start&&t?.live===!1||e.start>r.end&&r.nextEvent&&(r.nextEvent.appendInPlace||e.start-r.end>1))return null}const s=i?.playerQueue;if(s)for(let a=s.length;a--;){const o=s[a].interstitial;if(o.appendInPlace&&e.start>=o.startTime&&e.end<=o.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!e.initSegment.data&&!this.bitrateTest?e.initSegment:e}getNextPart(e,t,i){let r=-1,s=!1,a=!0;for(let o=0,c=e.length;o<c;o++){const l=e[o];if(a=a&&!l.independent,r>-1&&i<l.start)break;const u=l.loaded;u?r=-1:(s||(l.independent||a)&&l.fragment===t)&&(l.fragment!==t&&this.warn(`Need buffer at ${i} but next unloaded part starts at ${l.start}`),r=o),s=u}return r}loadedEndOfParts(e,t){let i;for(let r=e.length;r--;){if(i=e[r],!i.loaded)return!1;if(t>i.start)return!0}return!1}getInitialLiveFragment(e){const t=e.fragments,i=this.fragPrevious;let r=null;if(i){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${i.programDateTime}`),r=tB(t,i.endProgramDateTime,this.config.maxFragLookUpTolerance)),!r){const s=i.sn+1;if(s>=e.startSN&&s<=e.endSN){const a=t[s-e.startSN];i.cc===a.cc&&(r=a,this.log(`Live playlist, switching playlist, load frag with next SN: ${r.sn}`))}r||(r=UD(e,i.cc,i.end),r&&this.log(`Live playlist, switching playlist, load frag with same CC: ${r.sn}`))}}else{const s=this.hls.liveSyncPosition;s!==null&&(r=this.getFragmentAtPosition(s,this.bitrateTest?e.fragmentEnd:e.edge,e))}return r}getFragmentAtPosition(e,t,i){const{config:r}=this;let{fragPrevious:s}=this,{fragments:a,endSN:o}=i;const{fragmentHint:c}=i,{maxFragLookUpTolerance:l}=r,u=i.partList,d=!!(this.loadingParts&&u!=null&&u.length&&c);d&&!this.bitrateTest&&u[u.length-1].fragment.sn===c.sn&&(a=a.concat(c),o=c.sn);let h;if(e<t){var f;const m=e<this.lastCurrentTime||e>t-l||(f=this.media)!=null&&f.paused||!this.startFragRequested?0:l;h=lr(s,a,e,m)}else h=a[a.length-1];if(h){const p=h.sn-i.startSN,m=this.fragmentTracker.getState(h);if((m===gt.OK||m===gt.PARTIAL&&h.gap)&&(s=h),s&&h.sn===s.sn&&(!d||u[0].fragment.sn>h.sn||!i.live)&&h.level===s.level){const y=a[p+1];h.sn<o&&this.fragmentTracker.getState(y)!==gt.OK?h=y:h=null}}return h}alignPlaylists(e,t,i){const r=e.fragments.length;if(!r)return this.warn("No fragments in live playlist"),0;const s=e.fragmentStart,a=!t,o=e.alignedSliding&&ye(s);if(a||!o&&!s){OB(i,e);const c=e.fragmentStart;return this.log(`Live playlist sliding: ${c.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} fragments: ${r}`),c}return s}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,t){let i=this.startPosition;i<t&&(i=-1);const r=this.timelineOffset;if(i===-1){const s=this.startTimeOffset!==null,a=s?this.startTimeOffset:e.startTimeOffset;a!==null&&ye(a)?(i=t+a,a<0&&(i+=e.edge),i=Math.min(Math.max(t,i),t+e.totalduration),this.log(`Setting startPosition to ${i} for start time offset ${a} found in ${s?"multivariant":"media"} playlist`),this.startPosition=i):e.live?(i=this.hls.liveSyncPosition||t,this.log(`Setting startPosition to -1 to start at live edge ${i}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=i=0),this.lastCurrentTime=i+r}this.nextLoadPosition=i+r}getLoadPosition(){var e;const{media:t}=this;let i=0;return(e=this.hls)!=null&&e.hasEnoughToStart&&t?i=t.currentTime:this.nextLoadPosition>=0&&(i=this.nextLoadPosition),i}handleFragLoadAborted(e,t){this.transmuxer&&e.type===this.playlistType&&lt(e)&&e.stats.aborted&&(this.log(`Fragment ${e.sn}${t?" part "+t.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==le.FRAG_LOADING_WAITING_RETRY)&&(this.state=le.IDLE)}onFragmentOrKeyLoadError(e,t){var i;if(t.chunkMeta&&!t.frag){const y=this.getCurrentContext(t.chunkMeta);y&&(t.frag=y.frag)}const r=t.frag;if(!r||r.type!==e||!this.levels)return;if(this.fragContextChanged(r)){var s;this.warn(`Frag load error must match current frag to retry ${r.url} > ${(s=this.fragCurrent)==null?void 0:s.url}`);return}const a=t.details===re.FRAG_GAP;a&&this.fragmentTracker.fragBuffered(r,!0);const o=t.errorAction;if(!o){this.state=le.ERROR;return}const{action:c,flags:l,retryCount:u=0,retryConfig:d}=o,h=!!d,f=h&&c===bt.RetryRequest,p=h&&!o.resolved&&l===Mt.MoveAllAlternatesMatchingHost,m=(i=this.hls.latestLevelDetails)==null?void 0:i.live;if(!f&&p&&lt(r)&&!r.endList&&m&&!FD(t))this.resetFragmentErrors(e),this.treatAsGap(r),o.resolved=!0;else if((f||p)&&u<d.maxNumRetry){var g;const y=yh((g=t.response)==null?void 0:g.code),v=Lp(d,u);if(this.resetStartWhenNotLoaded(),this.retryDate=self.performance.now()+v,this.state=le.FRAG_LOADING_WAITING_RETRY,o.resolved=!0,y){this.log("Waiting for connection (offline)"),this.retryDate=1/0,t.reason="offline";return}this.warn(`Fragment ${r.sn} of ${e} ${r.level} errored with ${t.details}, retrying loading ${u+1}/${d.maxNumRetry} in ${v}ms`)}else if(d)if(this.resetFragmentErrors(e),u<d.maxNumRetry)!a&&c!==bt.RemoveAlternatePermanently&&(o.resolved=!0);else{this.warn(`${t.details} reached or exceeded max retry (${u})`);return}else c===bt.SendAlternateToPenaltyBox?this.state=le.WAITING_LEVEL:this.state=le.ERROR;this.tickImmediate()}checkRetryDate(){const e=self.performance.now(),t=this.retryDate,i=t===1/0;(!t||e>=t||i&&!yh(0))&&(i&&this.log("Connection restored (online)"),this.resetStartWhenNotLoaded(),this.state=le.IDLE)}reduceLengthAndFlushBuffer(e){if(this.state===le.PARSING||this.state===le.PARSED){const t=e.frag,i=e.parent,r=this.getFwdBufferInfo(this.mediaBuffer,i),s=r&&r.len>.5;s&&this.reduceMaxBufferLength(r.len,t?.duration||10);const a=!s;return a&&this.warn(`Buffer full error while media.currentTime (${this.getLoadPosition()}) is not buffered, flush ${i} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),a}return!1}resetFragmentErrors(e){e===xe.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==le.STOPPED&&(this.state=le.IDLE)}afterBufferFlushed(e,t,i){if(!e)return;const r=ke.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,r,i),this.state===le.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==le.STOPPED&&(this.state=le.IDLE)}resetStartWhenNotLoaded(){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const e=this.levelLastLoaded,t=e?e.details:null;t!=null&&t.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(t,t.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.log(`Loading context changed while buffering sn ${e.sn} of ${this.playlistLabel()} ${e.level===-1?"<removed>":e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,i,r){const s=i.details;if(!s){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((c,l)=>{const u=e.elementaryStreams[l];if(u){const d=u.endPTS-u.startPTS;if(d<=0)return this.warn(`Could not parse fragment ${e.sn} ${l} duration reliably (${d})`),c||!1;const h=r?0:GD(s,e,u.startPTS,u.endPTS,u.startDTS,u.endDTS,this);return this.hls.trigger(R.LEVEL_PTS_UPDATED,{details:s,level:i,drift:h,type:l,frag:e,start:u.startPTS,end:u.endPTS}),!0}return c},!1)){var o;const c=((o=this.transmuxer)==null?void 0:o.error)===null;if((i.fragmentError===0||c&&(i.fragmentError<2||e.endList))&&this.treatAsGap(e,i),c){const l=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(l.message),this.hls.trigger(R.ERROR,{type:_e.MEDIA_ERROR,details:re.FRAG_PARSING_ERROR,fatal:!1,error:l,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${i.url}"`}),!this.hls)return;this.resetTransmuxer()}}this.state=le.PARSED,this.log(`Parsed ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)})`),this.hls.trigger(R.FRAG_PARSED,{frag:e,part:t})}playlistLabel(){return this.playlistType===xe.MAIN?"level":"track"}fragInfo(e,t=!0,i){var r,s;return`${this.playlistLabel()} ${e.level} (${i?"part":"frag"}:[${((r=t&&!i?e.startPTS:(i||e).start)!=null?r:NaN).toFixed(3)}-${((s=t&&!i?e.endPTS:(i||e).end)!=null?s:NaN).toFixed(3)}]${i&&e.type==="main"?"INDEPENDENT="+(i.independent?"YES":"NO"):""}`}treatAsGap(e,t){t&&t.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;(e=this.transmuxer)==null||e.reset()}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}function P1(n){return!!n.interstitialsController&&n.enableInterstitialPlayback!==!1}class QD{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let i;if(e.length)e.length===1?i=e[0]:i=BB(e,t);else return new Uint8Array(0);return this.reset(),i}reset(){this.chunks.length=0,this.dataLength=0}}function BB(n,e){const t=new Uint8Array(e);let i=0;for(let r=0;r<n.length;r++){const s=n[r];t.set(s,i),i+=s.length}return t}var ad={exports:{}},O1;function NB(){return O1||(O1=1,(function(n){var e=Object.prototype.hasOwnProperty,t="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1));function r(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function s(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new r(u,d||c,h),p=t?t+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function a(c,l){--c._eventsCount===0?c._events=new i:delete c._events[l]}function o(){this._events=new i,this._eventsCount=0}o.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(t?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},o.prototype.listeners=function(l){var u=t?t+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},o.prototype.listenerCount=function(l){var u=t?t+l:l,d=this._events[u];return d?d.fn?1:d.length:0},o.prototype.emit=function(l,u,d,h,f,p){var m=t?t+l:l;if(!this._events[m])return!1;var g=this._events[m],y=arguments.length,v,b;if(g.fn){switch(g.once&&this.removeListener(l,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,d),!0;case 4:return g.fn.call(g.context,u,d,h),!0;case 5:return g.fn.call(g.context,u,d,h,f),!0;case 6:return g.fn.call(g.context,u,d,h,f,p),!0}for(b=1,v=new Array(y-1);b<y;b++)v[b-1]=arguments[b];g.fn.apply(g.context,v)}else{var T=g.length,x;for(b=0;b<T;b++)switch(g[b].once&&this.removeListener(l,g[b].fn,void 0,!0),y){case 1:g[b].fn.call(g[b].context);break;case 2:g[b].fn.call(g[b].context,u);break;case 3:g[b].fn.call(g[b].context,u,d);break;case 4:g[b].fn.call(g[b].context,u,d,h);break;default:if(!v)for(x=1,v=new Array(y-1);x<y;x++)v[x-1]=arguments[x];g[b].fn.apply(g[b].context,v)}}return!0},o.prototype.on=function(l,u,d){return s(this,l,u,d,!1)},o.prototype.once=function(l,u,d){return s(this,l,u,d,!0)},o.prototype.removeListener=function(l,u,d,h){var f=t?t+l:l;if(!this._events[f])return this;if(!u)return a(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&a(this,f);else{for(var m=0,g=[],y=p.length;m<y;m++)(p[m].fn!==u||h&&!p[m].once||d&&p[m].context!==d)&&g.push(p[m]);g.length?this._events[f]=g.length===1?g[0]:g:a(this,f)}return this},o.prototype.removeAllListeners=function(l){var u;return l?(u=t?t+l:l,this._events[u]&&a(this,u)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,n.exports=o})(ad)),ad.exports}var $B=NB(),Mp=g8($B);const na="1.6.15",Qr={};function WB(){return typeof __HLS_WORKER_BUNDLE__=="function"}function VB(){const n=Qr[na];if(n)return n.clientCount++,n;const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),t=self.URL.createObjectURL(e),r={worker:new self.Worker(t),objectURL:t,clientCount:1};return Qr[na]=r,r}function GB(n){const e=Qr[n];if(e)return e.clientCount++,e;const t=new self.URL(n,self.location.href).href,r={worker:new self.Worker(t),scriptURL:t,clientCount:1};return Qr[n]=r,r}function HB(n){const e=Qr[n||na];if(e&&e.clientCount--===1){const{worker:i,objectURL:r}=e;delete Qr[n||na],r&&self.URL.revokeObjectURL(r),i.terminate()}}function ZD(n,e){return e+10<=n.length&&n[e]===51&&n[e+1]===68&&n[e+2]===73&&n[e+3]<255&&n[e+4]<255&&n[e+6]<128&&n[e+7]<128&&n[e+8]<128&&n[e+9]<128}function Bp(n,e){return e+10<=n.length&&n[e]===73&&n[e+1]===68&&n[e+2]===51&&n[e+3]<255&&n[e+4]<255&&n[e+6]<128&&n[e+7]<128&&n[e+8]<128&&n[e+9]<128}function fl(n,e){let t=0;return t=(n[e]&127)<<21,t|=(n[e+1]&127)<<14,t|=(n[e+2]&127)<<7,t|=n[e+3]&127,t}function ia(n,e){const t=e;let i=0;for(;Bp(n,e);){i+=10;const r=fl(n,e+6);i+=r,ZD(n,e+10)&&(i+=10),e+=i}if(i>0)return n.subarray(t,t+i)}function qB(n,e,t,i){const r=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],s=e[t+2],a=s>>2&15;if(a>12){const f=new Error(`invalid ADTS sampling index:${a}`);n.emit(R.ERROR,R.ERROR,{type:_e.MEDIA_ERROR,details:re.FRAG_PARSING_ERROR,fatal:!0,error:f,reason:f.message});return}const o=(s>>6&3)+1,c=e[t+3]>>6&3|(s&1)<<2,l="mp4a.40."+o,u=r[a];let d=a;(o===5||o===29)&&(d-=3);const h=[o<<3|(d&14)>>1,(d&1)<<7|c<<3];return je.log(`manifest codec:${i}, parsed codec:${l}, channels:${c}, rate:${u} (ADTS object type:${o} sampling index:${a})`),{config:h,samplerate:u,channelCount:c,codec:l,parsedCodec:l,manifestCodec:i}}function JD(n,e){return n[e]===255&&(n[e+1]&246)===240}function eE(n,e){return n[e+1]&1?7:9}function Np(n,e){return(n[e+3]&3)<<11|n[e+4]<<3|(n[e+5]&224)>>>5}function jB(n,e){return e+5<n.length}function Dc(n,e){return e+1<n.length&&JD(n,e)}function KB(n,e){return jB(n,e)&&JD(n,e)&&Np(n,e)<=n.length-e}function zB(n,e){if(Dc(n,e)){const t=eE(n,e);if(e+t>=n.length)return!1;const i=Np(n,e);if(i<=t)return!1;const r=e+i;return r===n.length||Dc(n,r)}return!1}function tE(n,e,t,i,r){if(!n.samplerate){const s=qB(e,t,i,r);if(!s)return;Ke(n,s)}}function nE(n){return 1024*9e4/n}function XB(n,e){const t=eE(n,e);if(e+t<=n.length){const i=Np(n,e)-t;if(i>0)return{headerLength:t,frameLength:i}}}function iE(n,e,t,i,r){const s=nE(n.samplerate),a=i+r*s,o=XB(e,t);let c;if(o){const{frameLength:d,headerLength:h}=o,f=h+d,p=Math.max(0,t+f-e.length);p?(c=new Uint8Array(f-h),c.set(e.subarray(t+h,e.length),0)):c=e.subarray(t+h,t+f);const m={unit:c,pts:a};return p||n.samples.push(m),{sample:m,length:f,missing:p}}const l=e.length-t;return c=new Uint8Array(l),c.set(e.subarray(t,e.length),0),{sample:{unit:c,pts:a},length:l,missing:-1}}function YB(n,e){return Bp(n,e)&&fl(n,e+6)+10<=n.length-e}function QB(n){return n instanceof ArrayBuffer?n:n.byteOffset==0&&n.byteLength==n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer}function od(n,e=0,t=1/0){return ZB(n,e,t,Uint8Array)}function ZB(n,e,t,i){const r=JB(n);let s=1;"BYTES_PER_ELEMENT"in i&&(s=i.BYTES_PER_ELEMENT);const a=e5(n)?n.byteOffset:0,o=(a+n.byteLength)/s,c=(a+e)/s,l=Math.floor(Math.max(0,Math.min(c,o))),u=Math.floor(Math.min(l+Math.max(t,0),o));return new i(r,l,u-l)}function JB(n){return n instanceof ArrayBuffer?n:n.buffer}function e5(n){return n&&n.buffer instanceof ArrayBuffer&&n.byteLength!==void 0&&n.byteOffset!==void 0}function t5(n){const e={key:n.type,description:"",data:"",mimeType:null,pictureType:null},t=3;if(n.size<2)return;if(n.data[0]!==t){console.log("Ignore frame with unrecognized character encoding");return}const i=n.data.subarray(1).indexOf(0);if(i===-1)return;const r=jt(od(n.data,1,i)),s=n.data[2+i],a=n.data.subarray(3+i).indexOf(0);if(a===-1)return;const o=jt(od(n.data,3+i,a));let c;return r==="-->"?c=jt(od(n.data,4+i+a)):c=QB(n.data.subarray(4+i+a)),e.mimeType=r,e.pictureType=s,e.description=o,e.data=c,e}function n5(n){if(n.size<2)return;const e=jt(n.data,!0),t=new Uint8Array(n.data.subarray(e.length+1));return{key:n.type,info:e,data:t.buffer}}function i5(n){if(n.size<2)return;if(n.type==="TXXX"){let t=1;const i=jt(n.data.subarray(t),!0);t+=i.length+1;const r=jt(n.data.subarray(t));return{key:n.type,info:i,data:r}}const e=jt(n.data.subarray(1));return{key:n.type,info:"",data:e}}function r5(n){if(n.type==="WXXX"){if(n.size<2)return;let t=1;const i=jt(n.data.subarray(t),!0);t+=i.length+1;const r=jt(n.data.subarray(t));return{key:n.type,info:i,data:r}}const e=jt(n.data);return{key:n.type,info:"",data:e}}function s5(n){return n.type==="PRIV"?n5(n):n.type[0]==="W"?r5(n):n.type==="APIC"?t5(n):i5(n)}function a5(n){const e=String.fromCharCode(n[0],n[1],n[2],n[3]),t=fl(n,4),i=10;return{type:e,size:t,data:n.subarray(i,i+t)}}const Xa=10,o5=10;function rE(n){let e=0;const t=[];for(;Bp(n,e);){const i=fl(n,e+6);n[e+5]>>6&1&&(e+=Xa),e+=Xa;const r=e+i;for(;e+o5<r;){const s=a5(n.subarray(e)),a=s5(s);a&&t.push(a),e+=s.size+Xa}ZD(n,e)&&(e+=Xa)}return t}function sE(n){return n&&n.key==="PRIV"&&n.info==="com.apple.streaming.transportStreamTimestamp"}function c5(n){if(n.data.byteLength===8){const e=new Uint8Array(n.data),t=e[3]&1;let i=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return i/=45,t&&(i+=4772185884e-2),Math.round(i)}}function $p(n){const e=rE(n);for(let t=0;t<e.length;t++){const i=e[t];if(sE(i))return c5(i)}}let Bt=(function(n){return n.audioId3="org.id3",n.dateRange="com.apple.quicktime.HLS",n.emsg="https://aomedia.org/emsg/ID3",n.misbklv="urn:misb:KLV:bin:1910.1",n})({});function En(n="",e=9e4){return{type:n,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class Wp{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,i,r){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,i){}demux(e,t){this.cachedData&&(e=rn(this.cachedData,e),this.cachedData=null);let i=ia(e,0),r=i?i.length:0,s;const a=this._audioTrack,o=this._id3Track,c=i?$p(i):void 0,l=e.length;for((this.basePTS===null||this.frameIndex===0&&ye(c))&&(this.basePTS=l5(c,t,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),i&&i.length>0&&o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:Bt.audioId3,duration:Number.POSITIVE_INFINITY});r<l;){if(this.canParse(e,r)){const u=this.appendFrame(a,e,r);u?(this.frameIndex++,this.lastPTS=u.sample.pts,r+=u.length,s=r):r=l}else YB(e,r)?(i=ia(e,r),o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:Bt.audioId3,duration:Number.POSITIVE_INFINITY}),r+=i.length,s=r):r++;if(r===l&&s!==l){const u=e.slice(s);this.cachedData?this.cachedData=rn(this.cachedData,u):this.cachedData=u}}return{audioTrack:a,videoTrack:En(),id3Track:o,textTrack:En()}}demuxSampleAes(e,t,i){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:En(),id3Track:this._id3Track,textTrack:En()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const l5=(n,e,t)=>{if(ye(n))return n*90;const i=t?t.baseTime*9e4/t.timescale:0;return e*9e4+i};let Ya=null;const u5=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],d5=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],h5=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],f5=[0,1,1,4];function aE(n,e,t,i,r){if(t+24>e.length)return;const s=oE(e,t);if(s&&t+s.frameLength<=e.length){const a=s.samplesPerFrame*9e4/s.sampleRate,o=i+r*a,c={unit:e.subarray(t,t+s.frameLength),pts:o,dts:o};return n.config=[],n.channelCount=s.channelCount,n.samplerate=s.sampleRate,n.samples.push(c),{sample:c,length:s.frameLength,missing:0}}}function oE(n,e){const t=n[e+1]>>3&3,i=n[e+1]>>1&3,r=n[e+2]>>4&15,s=n[e+2]>>2&3;if(t!==1&&r!==0&&r!==15&&s!==3){const a=n[e+2]>>1&1,o=n[e+3]>>6,c=t===3?3-i:i===3?3:4,l=u5[c*14+r-1]*1e3,d=d5[(t===3?0:t===2?1:2)*3+s],h=o===3?1:2,f=h5[t][i],p=f5[i],m=f*8*p,g=Math.floor(f*l/d+a)*p;if(Ya===null){const b=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Ya=b?parseInt(b[1]):0}return Ya&&Ya<=87&&i===2&&l>=224e3&&o===0&&(n[e+3]=n[e+3]|128),{sampleRate:d,channelCount:h,frameLength:g,samplesPerFrame:m}}}function Vp(n,e){return n[e]===255&&(n[e+1]&224)===224&&(n[e+1]&6)!==0}function cE(n,e){return e+1<n.length&&Vp(n,e)}function p5(n,e){return Vp(n,e)&&4<=n.length-e}function lE(n,e){if(e+1<n.length&&Vp(n,e)){const i=oE(n,e);let r=4;i!=null&&i.frameLength&&(r=i.frameLength);const s=e+r;return s===n.length||cE(n,s)}return!1}class g5 extends Wp{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,i,r){super.resetInitSegment(e,t,i,r),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e,t){if(!e)return!1;const i=ia(e,0);let r=i?.length||0;if(lE(e,r))return!1;for(let s=e.length;r<s;r++)if(zB(e,r))return t.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return KB(e,t)}appendFrame(e,t,i){tE(e,this.observer,t,i,e.manifestCodec);const r=iE(e,t,i,this.basePTS,this.frameIndex);if(r&&r.missing===0)return r}}const uE=(n,e)=>{let t=0,i=5;e+=i;const r=new Uint32Array(1),s=new Uint32Array(1),a=new Uint8Array(1);for(;i>0;){a[0]=n[e];const o=Math.min(i,8),c=8-o;s[0]=4278190080>>>24+c<<c,r[0]=(a[0]&s[0])>>c,t=t?t<<o|r[0]:r[0],e+=1,i-=o}return t};class m5 extends Wp{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,i,r){super.resetInitSegment(e,t,i,r),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,i){const r=dE(e,t,i,this.basePTS,this.frameIndex);if(r!==-1)return{sample:e.samples[e.samples.length-1],length:r,missing:0}}static probe(e){if(!e)return!1;const t=ia(e,0);if(!t)return!1;const i=t.length;return e[i]===11&&e[i+1]===119&&$p(t)!==void 0&&uE(e,i)<16}}function dE(n,e,t,i,r){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return-1;const s=e[t+4]>>6;if(s>=3)return-1;const o=[48e3,44100,32e3][s],c=e[t+4]&63,u=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][c*3+s]*2;if(t+u>e.length)return-1;const d=e[t+6]>>5;let h=0;d===2?h+=2:(d&1&&d!==1&&(h+=2),d&4&&(h+=2));const f=(e[t+6]<<8|e[t+7])>>12-h&1,m=[2,1,2,3,3,4,4,5][d]+f,g=e[t+5]>>3,y=e[t+5]&7,v=new Uint8Array([s<<6|g<<1|y>>2,(y&3)<<6|d<<3|f<<2|c>>4,c<<4&224]),b=1536/o*9e4,T=i+r*b,x=e.subarray(t,t+u);return n.config=v,n.channelCount=m,n.samplerate=o,n.samples.push({unit:x,pts:T}),u}class y5 extends Wp{resetInitSegment(e,t,i,r){super.resetInitSegment(e,t,i,r),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=ia(e,0);let i=t?.length||0;if(t&&e[i]===11&&e[i+1]===119&&$p(t)!==void 0&&uE(e,i)<=16)return!1;for(let r=e.length;i<r;i++)if(lE(e,i))return je.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return p5(e,t)}appendFrame(e,t,i){if(this.basePTS!==null)return aE(e,t,i,this.basePTS,this.frameIndex)}}const v5=/\/emsg[-/]ID3/i;class b5{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,i,r){const s=this.videoTrack=En("video",1),a=this.audioTrack=En("audio",1),o=this.txtTrack=En("text",1);if(this.id3Track=En("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const c=xD(e);if(c.video){const{id:l,timescale:u,codec:d,supplemental:h}=c.video;s.id=l,s.timescale=o.timescale=u,s.codec=d,s.supplemental=h}if(c.audio){const{id:l,timescale:u,codec:d}=c.audio;a.id=l,a.timescale=u,a.codec=d}o.id=yD.text,s.sampleDuration=0,s.duration=a.duration=r}resetContiguity(){this.remainderData=null}static probe(e){return b8(e)}demux(e,t){this.timeOffset=t;let i=e;const r=this.videoTrack,s=this.txtTrack;if(this.config.progressive){this.remainderData&&(i=rn(this.remainderData,e));const o=A8(i);this.remainderData=o.remainder,r.samples=o.valid||new Uint8Array}else r.samples=i;const a=this.extractID3Track(r,t);return s.samples=t1(t,r),{videoTrack:r,audioTrack:this.audioTrack,id3Track:a,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,i=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const r=this.extractID3Track(t,this.timeOffset);return i.samples=t1(e,t),{videoTrack:t,audioTrack:En(),id3Track:r,textTrack:En()}}extractID3Track(e,t){const i=this.id3Track;if(e.samples.length){const r=Me(e.samples,["emsg"]);r&&r.forEach(s=>{const a=I8(s);if(v5.test(a.schemeIdUri)){const o=M1(a,t);let c=a.eventDuration===4294967295?Number.POSITIVE_INFINITY:a.eventDuration/a.timeScale;c<=.001&&(c=Number.POSITIVE_INFINITY);const l=a.payload;i.samples.push({data:l,len:l.byteLength,dts:o,pts:o,type:Bt.emsg,duration:c})}else if(this.config.enableEmsgKLVMetadata&&a.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const o=M1(a,t);i.samples.push({data:a.payload,len:a.payload.byteLength,dts:o,pts:o,type:Bt.misbklv,duration:Number.POSITIVE_INFINITY})}})}return i}demuxSampleAes(e,t,i){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}}function M1(n,e){return ye(n.presentationTime)?n.presentationTime/n.timeScale:e+n.presentationTimeDelta/n.timeScale}class x5{constructor(e,t,i){this.keyData=void 0,this.decrypter=void 0,this.keyData=i,this.decrypter=new Up(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,Ii.cbc)}decryptAacSample(e,t,i){const r=e[t].unit;if(r.length<=16)return;const s=r.subarray(16,r.length-r.length%16),a=s.buffer.slice(s.byteOffset,s.byteOffset+s.length);this.decryptBuffer(a).then(o=>{const c=new Uint8Array(o);r.set(c,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,i)}).catch(i)}decryptAacSamples(e,t,i){for(;;t++){if(t>=e.length){i();return}if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,i),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=Math.floor((e.length-48)/160)*16+16,i=new Int8Array(t);let r=0;for(let s=32;s<e.length-16;s+=160,r+=16)i.set(e.subarray(s,s+16),r);return i}getAvcDecryptedUnit(e,t){const i=new Uint8Array(t);let r=0;for(let s=32;s<e.length-16;s+=160,r+=16)e.set(i.subarray(r,r+16),s);return e}decryptAvcSample(e,t,i,r,s){const a=DD(s.data),o=this.getAvcEncryptedData(a);this.decryptBuffer(o.buffer).then(c=>{s.data=this.getAvcDecryptedUnit(a,c),this.decrypter.isSync()||this.decryptAvcSamples(e,t,i+1,r)}).catch(r)}decryptAvcSamples(e,t,i,r){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,i=0){if(t>=e.length){r();return}const s=e[t].units;for(;!(i>=s.length);i++){const a=s[i];if(!(a.data.length<=48||a.type!==1&&a.type!==5)&&(this.decryptAvcSample(e,t,i,r,a),!this.decrypter.isSync()))return}}}}class hE{constructor(){this.VideoSample=null}createVideoSample(e,t,i){return{key:e,frame:!1,pts:t,dts:i,units:[],length:0}}getLastNalUnit(e){var t;let i=this.VideoSample,r;if((!i||i.units.length===0)&&(i=e[e.length-1]),(t=i)!=null&&t.units){const s=i.units;r=s[s.length-1]}return r}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(e.pts===void 0){const i=t.samples,r=i.length;if(r){const s=i[r-1];e.pts=s.pts,e.dts=s.dts}else{t.dropped++;return}}t.samples.push(e)}}parseNALu(e,t,i){const r=t.byteLength;let s=e.naluState||0;const a=s,o=[];let c=0,l,u,d,h=-1,f=0;for(s===-1&&(h=0,f=this.getNALuType(t,0),s=0,c=1);c<r;){if(l=t[c++],!s){s=l?0:1;continue}if(s===1){s=l?0:2;continue}if(!l)s=3;else if(l===1){if(u=c-s-1,h>=0){const p={data:t.subarray(h,u),type:f};o.push(p)}else{const p=this.getLastNalUnit(e.samples);p&&(a&&c<=4-a&&p.state&&(p.data=p.data.subarray(0,p.data.byteLength-a)),u>0&&(p.data=rn(p.data,t.subarray(0,u)),p.state=0))}c<r?(d=this.getNALuType(t,c),h=c,f=d,s=0):s=-1}else s=0}if(h>=0&&s>=0){const p={data:t.subarray(h,r),type:f,state:s};o.push(p)}if(o.length===0){const p=this.getLastNalUnit(e.samples);p&&(p.data=rn(p.data,t))}return e.naluState=s,o}}class Ps{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,i=e.byteLength-t,r=new Uint8Array(4),s=Math.min(4,t);if(s===0)throw new Error("no bytes available");r.set(e.subarray(i,i+s)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=s*8,this.bytesAvailable-=s}skipBits(e){let t;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const i=this.word>>>32-t;if(e>32&&je.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return t=e-t,t>0&&this.bitsAvailable?i<<t|this.readBits(t):i}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if((this.word&2147483648>>>e)!==0)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class T5 extends hE{parsePES(e,t,i,r){const s=this.parseNALu(e,i.data,r);let a=this.VideoSample,o,c=!1;i.data=null,a&&s.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts)),s.forEach(l=>{var u,d;switch(l.type){case 1:{let m=!1;o=!0;const g=l.data;if(c&&g.length>4){const y=this.readSliceType(g);(y===2||y===4||y===7||y===9)&&(m=!0)}if(m){var h;(h=a)!=null&&h.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null)}a||(a=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),a.frame=!0,a.key=m;break}case 5:o=!0,(u=a)!=null&&u.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),a.key=!0,a.frame=!0;break;case 6:{o=!0,Ip(l.data,1,i.pts,t.samples);break}case 7:{var f,p;o=!0,c=!0;const m=l.data,g=this.readSPS(m);if(!e.sps||e.width!==g.width||e.height!==g.height||((f=e.pixelRatio)==null?void 0:f[0])!==g.pixelRatio[0]||((p=e.pixelRatio)==null?void 0:p[1])!==g.pixelRatio[1]){e.width=g.width,e.height=g.height,e.pixelRatio=g.pixelRatio,e.sps=[m];const y=m.subarray(1,4);let v="avc1.";for(let b=0;b<3;b++){let T=y[b].toString(16);T.length<2&&(T="0"+T),v+=T}e.codec=v}break}case 8:o=!0,e.pps=[l.data];break;case 9:o=!0,e.audFound=!0,(d=a)!=null&&d.frame&&(this.pushAccessUnit(a,e),a=null),a||(a=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts));break;case 12:o=!0;break;default:o=!1;break}a&&o&&a.units.push(l)}),r&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}getNALuType(e,t){return e[t]&31}readSliceType(e){const t=new Ps(e);return t.readUByte(),t.readUEG(),t.readUEG()}skipScalingList(e,t){let i=8,r=8,s;for(let a=0;a<e;a++)r!==0&&(s=t.readEG(),r=(i+s+256)%256),i=r===0?i:r}readSPS(e){const t=new Ps(e);let i=0,r=0,s=0,a=0,o,c,l;const u=t.readUByte.bind(t),d=t.readBits.bind(t),h=t.readUEG.bind(t),f=t.readBoolean.bind(t),p=t.skipBits.bind(t),m=t.skipEG.bind(t),g=t.skipUEG.bind(t),y=this.skipScalingList.bind(this);u();const v=u();if(d(5),p(3),u(),g(),v===100||v===110||v===122||v===244||v===44||v===83||v===86||v===118||v===128){const w=h();if(w===3&&p(1),g(),g(),p(1),f())for(c=w!==3?8:12,l=0;l<c;l++)f()&&(l<6?y(16,t):y(64,t))}g();const b=h();if(b===0)h();else if(b===1)for(p(1),m(),m(),o=h(),l=0;l<o;l++)m();g(),p(1);const T=h(),x=h(),_=d(1);_===0&&p(1),p(1),f()&&(i=h(),r=h(),s=h(),a=h());let D=[1,1];if(f()&&f())switch(u()){case 1:D=[1,1];break;case 2:D=[12,11];break;case 3:D=[10,11];break;case 4:D=[16,11];break;case 5:D=[40,33];break;case 6:D=[24,11];break;case 7:D=[20,11];break;case 8:D=[32,11];break;case 9:D=[80,33];break;case 10:D=[18,11];break;case 11:D=[15,11];break;case 12:D=[64,33];break;case 13:D=[160,99];break;case 14:D=[4,3];break;case 15:D=[3,2];break;case 16:D=[2,1];break;case 255:{D=[u()<<8|u(),u()<<8|u()];break}}return{width:Math.ceil((T+1)*16-i*2-r*2),height:(2-_)*(x+1)*16-(_?2:4)*(s+a),pixelRatio:D}}}class _5 extends hE{constructor(...e){super(...e),this.initVPS=null}parsePES(e,t,i,r){const s=this.parseNALu(e,i.data,r);let a=this.VideoSample,o,c=!1;i.data=null,a&&s.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts)),s.forEach(l=>{var u,d;switch(l.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:a||(a=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts)),a.frame=!0,o=!0;break;case 16:case 17:case 18:case 21:if(o=!0,c){var h;(h=a)!=null&&h.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null)}a||(a=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),a.key=!0,a.frame=!0;break;case 19:case 20:o=!0,(u=a)!=null&&u.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),a.key=!0,a.frame=!0;break;case 39:o=!0,Ip(l.data,2,i.pts,t.samples);break;case 32:o=!0,e.vps||(typeof e.params!="object"&&(e.params={}),e.params=Ke(e.params,this.readVPS(l.data)),this.initVPS=l.data),e.vps=[l.data];break;case 33:if(o=!0,c=!0,e.vps!==void 0&&e.vps[0]!==this.initVPS&&e.sps!==void 0&&!this.matchSPS(e.sps[0],l.data)&&(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const f=this.readSPS(l.data);e.width=f.width,e.height=f.height,e.pixelRatio=f.pixelRatio,e.codec=f.codecString,e.sps=[],typeof e.params!="object"&&(e.params={});for(const p in f.params)e.params[p]=f.params[p]}this.pushParameterSet(e.sps,l.data,e.vps),a||(a=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),a.key=!0;break;case 34:if(o=!0,typeof e.params=="object"){if(!e.pps){e.pps=[];const f=this.readPPS(l.data);for(const p in f)e.params[p]=f[p]}this.pushParameterSet(e.pps,l.data,e.vps)}break;case 35:o=!0,e.audFound=!0,(d=a)!=null&&d.frame&&(this.pushAccessUnit(a,e),a=null),a||(a=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts));break;default:o=!1;break}a&&o&&a.units.push(l)}),r&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}pushParameterSet(e,t,i){(i&&i[0]===this.initVPS||!i&&!e.length)&&e.push(t)}getNALuType(e,t){return(e[t]&126)>>>1}ebsp2rbsp(e){const t=new Uint8Array(e.byteLength);let i=0;for(let r=0;r<e.byteLength;r++)r>=2&&e[r]===3&&e[r-1]===0&&e[r-2]===0||(t[i]=e[r],i++);return new Uint8Array(t.buffer,0,i)}pushAccessUnit(e,t){super.pushAccessUnit(e,t),this.initVPS&&(this.initVPS=null)}readVPS(e){const t=new Ps(e);t.readUByte(),t.readUByte(),t.readBits(4),t.skipBits(2),t.readBits(6);const i=t.readBits(3),r=t.readBoolean();return{numTemporalLayers:i+1,temporalIdNested:r}}readSPS(e){const t=new Ps(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.readBits(4);const i=t.readBits(3);t.readBoolean();const r=t.readBits(2),s=t.readBoolean(),a=t.readBits(5),o=t.readUByte(),c=t.readUByte(),l=t.readUByte(),u=t.readUByte(),d=t.readUByte(),h=t.readUByte(),f=t.readUByte(),p=t.readUByte(),m=t.readUByte(),g=t.readUByte(),y=t.readUByte(),v=[],b=[];for(let q=0;q<i;q++)v.push(t.readBoolean()),b.push(t.readBoolean());if(i>0)for(let q=i;q<8;q++)t.readBits(2);for(let q=0;q<i;q++)v[q]&&(t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte()),b[q]&&t.readUByte();t.readUEG();const T=t.readUEG();T==3&&t.skipBits(1);const x=t.readUEG(),_=t.readUEG(),D=t.readBoolean();let w=0,S=0,C=0,O=0;D&&(w+=t.readUEG(),S+=t.readUEG(),C+=t.readUEG(),O+=t.readUEG());const I=t.readUEG(),L=t.readUEG(),E=t.readUEG(),$=t.readBoolean();for(let q=$?0:i;q<=i;q++)t.skipUEG(),t.skipUEG(),t.skipUEG();if(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.readBoolean()&&t.readBoolean())for(let N=0;N<4;N++)for(let B=0;B<(N===3?2:6);B++)if(!t.readBoolean())t.readUEG();else{const se=Math.min(64,1<<4+(N<<1));N>1&&t.readEG();for(let ce=0;ce<se;ce++)t.readEG()}t.readBoolean(),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.skipUEG(),t.skipUEG(),t.readBoolean());const G=t.readUEG();let W=0;for(let q=0;q<G;q++){let N=!1;if(q!==0&&(N=t.readBoolean()),N){q===G&&t.readUEG(),t.readBoolean(),t.readUEG();let B=0;for(let z=0;z<=W;z++){const se=t.readBoolean();let ce=!1;se||(ce=t.readBoolean()),(se||ce)&&B++}W=B}else{const B=t.readUEG(),z=t.readUEG();W=B+z;for(let se=0;se<B;se++)t.readUEG(),t.readBoolean();for(let se=0;se<z;se++)t.readUEG(),t.readBoolean()}}if(t.readBoolean()){const q=t.readUEG();for(let N=0;N<q;N++){for(let B=0;B<E+4;B++)t.readBits(1);t.readBits(1)}}let P=0,V=1,j=1,te=!0,ne=1,ue=0;t.readBoolean(),t.readBoolean();let he=!1;if(t.readBoolean()){if(t.readBoolean()){const Q=t.readUByte(),H=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],X=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];Q>0&&Q<16?(V=H[Q-1],j=X[Q-1]):Q===255&&(V=t.readBits(16),j=t.readBits(16))}if(t.readBoolean()&&t.readBoolean(),t.readBoolean()&&(t.readBits(3),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.readUByte(),t.readUByte())),t.readBoolean()&&(t.readUEG(),t.readUEG()),t.readBoolean(),t.readBoolean(),t.readBoolean(),he=t.readBoolean(),he&&(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG()),t.readBoolean()&&(ne=t.readBits(32),ue=t.readBits(32),t.readBoolean()&&t.readUEG(),t.readBoolean())){const X=t.readBoolean(),ee=t.readBoolean();let ae=!1;(X||ee)&&(ae=t.readBoolean(),ae&&(t.readUByte(),t.readBits(5),t.readBoolean(),t.readBits(5)),t.readBits(4),t.readBits(4),ae&&t.readBits(4),t.readBits(5),t.readBits(5),t.readBits(5));for(let pe=0;pe<=i;pe++){te=t.readBoolean();const Te=te||t.readBoolean();let Ce=!1;Te?t.readEG():Ce=t.readBoolean();const Se=Ce?1:t.readUEG()+1;if(X)for(let we=0;we<Se;we++)t.readUEG(),t.readUEG(),ae&&(t.readUEG(),t.readUEG()),t.skipBits(1);if(ee)for(let we=0;we<Se;we++)t.readUEG(),t.readUEG(),ae&&(t.readUEG(),t.readUEG()),t.skipBits(1)}}t.readBoolean()&&(t.readBoolean(),t.readBoolean(),t.readBoolean(),P=t.readUEG())}let me=x,ve=_;if(D){let q=1,N=1;T===1?q=N=2:T==2&&(q=2),me=x-q*S-q*w,ve=_-N*O-N*C}const De=r?["A","B","C"][r]:"",Oe=o<<24|c<<16|l<<8|u;let We=0;for(let q=0;q<32;q++)We=(We|(Oe>>q&1)<<31-q)>>>0;let A=We.toString(16);return a===1&&A==="2"&&(A="6"),{codecString:`hvc1.${De}${a}.${A}.${s?"H":"L"}${y}.B0`,params:{general_tier_flag:s,general_profile_idc:a,general_profile_space:r,general_profile_compatibility_flags:[o,c,l,u],general_constraint_indicator_flags:[d,h,f,p,m,g],general_level_idc:y,bit_depth:I+8,bit_depth_luma_minus8:I,bit_depth_chroma_minus8:L,min_spatial_segmentation_idc:P,chroma_format_idc:T,frame_rate:{fixed:te,fps:ue/ne}},width:me,height:ve,pixelRatio:[V,j]}}readPPS(e){const t=new Ps(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.skipUEG(),t.skipUEG(),t.skipBits(2),t.skipBits(3),t.skipBits(2),t.skipUEG(),t.skipUEG(),t.skipEG(),t.skipBits(2),t.readBoolean()&&t.skipUEG(),t.skipEG(),t.skipEG(),t.skipBits(4);const r=t.readBoolean(),s=t.readBoolean();let a=1;return s&&r?a=0:s?a=3:r&&(a=2),{parallelismType:a}}matchSPS(e,t){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,t).substr(3)}}const vt=188;class fi{constructor(e,t,i,r){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=i,this.logger=r,this.videoParser=null}static probe(e,t){const i=fi.syncOffset(e);return i>0&&t.warn(`MPEG2-TS detected but first sync word found @ offset ${i}`),i!==-1}static syncOffset(e){const t=e.length;let i=Math.min(vt*5,t-vt)+1,r=0;for(;r<i;){let s=!1,a=-1,o=0;for(let c=r;c<t;c+=vt)if(e[c]===71&&(t-c===vt||e[c+vt]===71)){if(o++,a===-1&&(a=c,a!==0&&(i=Math.min(a+vt*99,e.length-vt)+1)),s||(s=_h(e,c)===0),s&&o>1&&(a===0&&o>2||c+vt>i))return a}else{if(o)return-1;break}r++}return-1}static createTrack(e,t){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:yD[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?t:void 0}}resetInitSegment(e,t,i,r){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=fi.createTrack("video"),this._videoTrack.duration=r,this._audioTrack=fi.createTrack("audio",r),this._id3Track=fi.createTrack("id3"),this._txtTrack=fi.createTrack("text"),this._audioTrack.segmentCodec="aac",this.videoParser=null,this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=i}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:i}=this;e&&(e.pesData=null),t&&(t.pesData=null),i&&(i.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,i=!1,r=!1){i||(this.sampleAes=null);let s;const a=this._videoTrack,o=this._audioTrack,c=this._id3Track,l=this._txtTrack;let u=a.pid,d=a.pesData,h=o.pid,f=c.pid,p=o.pesData,m=c.pesData,g=null,y=this.pmtParsed,v=this._pmtId,b=e.length;if(this.remainderData&&(e=rn(this.remainderData,e),b=e.length,this.remainderData=null),b<vt&&!r)return this.remainderData=e,{audioTrack:o,videoTrack:a,id3Track:c,textTrack:l};const T=Math.max(0,fi.syncOffset(e));b-=(b-T)%vt,b<e.byteLength&&!r&&(this.remainderData=new Uint8Array(e.buffer,b,e.buffer.byteLength-b));let x=0;for(let D=T;D<b;D+=vt)if(e[D]===71){const w=!!(e[D+1]&64),S=_h(e,D),C=(e[D+3]&48)>>4;let O;if(C>1){if(O=D+5+e[D+4],O===D+vt)continue}else O=D+4;switch(S){case u:w&&(d&&(s=Er(d,this.logger))&&(this.readyVideoParser(a.segmentCodec),this.videoParser!==null&&this.videoParser.parsePES(a,l,s,!1)),d={data:[],size:0}),d&&(d.data.push(e.subarray(O,D+vt)),d.size+=D+vt-O);break;case h:if(w){if(p&&(s=Er(p,this.logger)))switch(o.segmentCodec){case"aac":this.parseAACPES(o,s);break;case"mp3":this.parseMPEGPES(o,s);break;case"ac3":this.parseAC3PES(o,s);break}p={data:[],size:0}}p&&(p.data.push(e.subarray(O,D+vt)),p.size+=D+vt-O);break;case f:w&&(m&&(s=Er(m,this.logger))&&this.parseID3PES(c,s),m={data:[],size:0}),m&&(m.data.push(e.subarray(O,D+vt)),m.size+=D+vt-O);break;case 0:w&&(O+=e[O]+1),v=this._pmtId=D5(e,O);break;case v:{w&&(O+=e[O]+1);const I=E5(e,O,this.typeSupported,i,this.observer,this.logger);u=I.videoPid,u>0&&(a.pid=u,a.segmentCodec=I.segmentVideoCodec),h=I.audioPid,h>0&&(o.pid=h,o.segmentCodec=I.segmentAudioCodec),f=I.id3Pid,f>0&&(c.pid=f),g!==null&&!y&&(this.logger.warn(`MPEG-TS PMT found at ${D} after unknown PID '${g}'. Backtracking to sync byte @${T} to parse all TS packets.`),g=null,D=T-188),y=this.pmtParsed=!0;break}case 17:case 8191:break;default:g=S;break}}else x++;x>0&&Dh(this.observer,new Error(`Found ${x} TS packet/s that do not start with 0x47`),void 0,this.logger),a.pesData=d,o.pesData=p,c.pesData=m;const _={audioTrack:o,videoTrack:a,id3Track:c,textTrack:l};return r&&this.extractRemainingSamples(_),_}flush(){const{remainderData:e}=this;this.remainderData=null;let t;return e?t=this.demux(e,-1,!1,!0):t={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:i,id3Track:r,textTrack:s}=e,a=i.pesData,o=t.pesData,c=r.pesData;let l;if(a&&(l=Er(a,this.logger))?(this.readyVideoParser(i.segmentCodec),this.videoParser!==null&&(this.videoParser.parsePES(i,s,l,!0),i.pesData=null)):i.pesData=a,o&&(l=Er(o,this.logger))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,l);break;case"mp3":this.parseMPEGPES(t,l);break;case"ac3":this.parseAC3PES(t,l);break}t.pesData=null}else o!=null&&o.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=o;c&&(l=Er(c,this.logger))?(this.parseID3PES(r,l),r.pesData=null):r.pesData=c}demuxSampleAes(e,t,i){const r=this.demux(e,i,!0,!this.config.progressive),s=this.sampleAes=new x5(this.observer,this.config,t);return this.decrypt(r,s)}readyVideoParser(e){this.videoParser===null&&(e==="avc"?this.videoParser=new T5:e==="hevc"&&(this.videoParser=new _5))}decrypt(e,t){return new Promise(i=>{const{audioTrack:r,videoTrack:s}=e;r.samples&&r.segmentCodec==="aac"?t.decryptAacSamples(r.samples,0,()=>{s.samples?t.decryptAvcSamples(s.samples,0,0,()=>{i(e)}):i(e)}):s.samples&&t.decryptAvcSamples(s.samples,0,0,()=>{i(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,t){let i=0;const r=this.aacOverFlow;let s=t.data;if(r){this.aacOverFlow=null;const d=r.missing,h=r.sample.unit.byteLength;if(d===-1)s=rn(r.sample.unit,s);else{const f=h-d;r.sample.unit.set(s.subarray(0,d),f),e.samples.push(r.sample),i=r.missing}}let a,o;for(a=i,o=s.length;a<o-1&&!Dc(s,a);a++);if(a!==i){let d;const h=a<o-1;if(h?d=`AAC PES did not start with ADTS header,offset:${a}`:d="No ADTS header found in AAC PES",Dh(this.observer,new Error(d),h,this.logger),!h)return}tE(e,this.observer,s,a,this.audioCodec);let c;if(t.pts!==void 0)c=t.pts;else if(r){const d=nE(e.samplerate);c=r.sample.pts+d}else{this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let l=0,u;for(;a<o;)if(u=iE(e,s,a,c,l),a+=u.length,u.missing){this.aacOverFlow=u;break}else for(l++;a<o-1&&!Dc(s,a);a++);}parseMPEGPES(e,t){const i=t.data,r=i.length;let s=0,a=0;const o=t.pts;if(o===void 0){this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;a<r;)if(cE(i,a)){const c=aE(e,i,a,o,s);if(c)a+=c.length,s++;else break}else a++}parseAC3PES(e,t){{const i=t.data,r=t.pts;if(r===void 0){this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const s=i.length;let a=0,o=0,c;for(;o<s&&(c=dE(e,i,o,r,a++))>0;)o+=c}}parseID3PES(e,t){if(t.pts===void 0){this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const i=Ke({},t,{type:this._videoTrack?Bt.emsg:Bt.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(i)}}function _h(n,e){return((n[e+1]&31)<<8)+n[e+2]}function D5(n,e){return(n[e+10]&31)<<8|n[e+11]}function E5(n,e,t,i,r,s){const a={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},o=(n[e+1]&15)<<8|n[e+2],c=e+3+o-4,l=(n[e+10]&15)<<8|n[e+11];for(e+=12+l;e<c;){const u=_h(n,e),d=(n[e+3]&15)<<8|n[e+4];switch(n[e]){case 207:if(!i){cd("ADTS AAC",s);break}case 15:a.audioPid===-1&&(a.audioPid=u);break;case 21:a.id3Pid===-1&&(a.id3Pid=u);break;case 219:if(!i){cd("H.264",s);break}case 27:a.videoPid===-1&&(a.videoPid=u);break;case 3:case 4:!t.mpeg&&!t.mp3?s.log("MPEG audio found, not supported in this browser"):a.audioPid===-1&&(a.audioPid=u,a.segmentAudioCodec="mp3");break;case 193:if(!i){cd("AC-3",s);break}case 129:t.ac3?a.audioPid===-1&&(a.audioPid=u,a.segmentAudioCodec="ac3"):s.log("AC-3 audio found, not supported in this browser");break;case 6:if(a.audioPid===-1&&d>0){let h=e+5,f=d;for(;f>2;){n[h]===106&&(t.ac3!==!0?s.log("AC-3 audio found, not supported in this browser for now"):(a.audioPid=u,a.segmentAudioCodec="ac3"));const m=n[h+1]+2;h+=m,f-=m}}break;case 194:case 135:return Dh(r,new Error("Unsupported EC-3 in M2TS found"),void 0,s),a;case 36:a.videoPid===-1&&(a.videoPid=u,a.segmentVideoCodec="hevc",s.log("HEVC in M2TS found"));break}e+=d+5}return a}function Dh(n,e,t,i){i.warn(`parsing error: ${e.message}`),n.emit(R.ERROR,R.ERROR,{type:_e.MEDIA_ERROR,details:re.FRAG_PARSING_ERROR,fatal:!1,levelRetry:t,error:e,reason:e.message})}function cd(n,e){e.log(`${n} with AES-128-CBC encryption found in unencrypted stream`)}function Er(n,e){let t=0,i,r,s,a,o;const c=n.data;if(!n||n.size===0)return null;for(;c[0].length<19&&c.length>1;)c[0]=rn(c[0],c[1]),c.splice(1,1);if(i=c[0],(i[0]<<16)+(i[1]<<8)+i[2]===1){if(r=(i[4]<<8)+i[5],r&&r>n.size-6)return null;const u=i[7];u&192&&(a=(i[9]&14)*536870912+(i[10]&255)*4194304+(i[11]&254)*16384+(i[12]&255)*128+(i[13]&254)/2,u&64?(o=(i[14]&14)*536870912+(i[15]&255)*4194304+(i[16]&254)*16384+(i[17]&255)*128+(i[18]&254)/2,a-o>60*9e4&&(e.warn(`${Math.round((a-o)/9e4)}s delta between PTS and DTS, align them`),a=o)):o=a),s=i[8];let d=s+9;if(n.size<=d)return null;n.size-=d;const h=new Uint8Array(n.size);for(let f=0,p=c.length;f<p;f++){i=c[f];let m=i.byteLength;if(d)if(d>m){d-=m;continue}else i=i.subarray(d),m-=d,d=0;h.set(i,t),t+=m}return r&&(r-=s+3),{data:h,pts:a,dts:o,len:r}}return null}class S5{static getSilentFrame(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const li=Math.pow(2,32)-1;class ie{static init(){ie.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in ie.types)ie.types.hasOwnProperty(e)&&(ie.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);ie.HDLR_TYPES={video:t,audio:i};const r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),s=new Uint8Array([0,0,0,0,0,0,0,0]);ie.STTS=ie.STSC=ie.STCO=s,ie.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),ie.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),ie.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),ie.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const a=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),c=new Uint8Array([0,0,0,1]);ie.FTYP=ie.box(ie.types.ftyp,a,c,a,o),ie.DINF=ie.box(ie.types.dinf,ie.box(ie.types.dref,r))}static box(e,...t){let i=8,r=t.length;const s=r;for(;r--;)i+=t[r].byteLength;const a=new Uint8Array(i);for(a[0]=i>>24&255,a[1]=i>>16&255,a[2]=i>>8&255,a[3]=i&255,a.set(e,4),r=0,i=8;r<s;r++)a.set(t[r],i),i+=t[r].byteLength;return a}static hdlr(e){return ie.box(ie.types.hdlr,ie.HDLR_TYPES[e])}static mdat(e){return ie.box(ie.types.mdat,e)}static mdhd(e,t){t*=e;const i=Math.floor(t/(li+1)),r=Math.floor(t%(li+1));return ie.box(ie.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,i>>24,i>>16&255,i>>8&255,i&255,r>>24,r>>16&255,r>>8&255,r&255,85,196,0,0]))}static mdia(e){return ie.box(ie.types.mdia,ie.mdhd(e.timescale||0,e.duration||0),ie.hdlr(e.type),ie.minf(e))}static mfhd(e){return ie.box(ie.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?ie.box(ie.types.minf,ie.box(ie.types.smhd,ie.SMHD),ie.DINF,ie.stbl(e)):ie.box(ie.types.minf,ie.box(ie.types.vmhd,ie.VMHD),ie.DINF,ie.stbl(e))}static moof(e,t,i){return ie.box(ie.types.moof,ie.mfhd(e),ie.traf(i,t))}static moov(e){let t=e.length;const i=[];for(;t--;)i[t]=ie.trak(e[t]);return ie.box.apply(null,[ie.types.moov,ie.mvhd(e[0].timescale||0,e[0].duration||0)].concat(i).concat(ie.mvex(e)))}static mvex(e){let t=e.length;const i=[];for(;t--;)i[t]=ie.trex(e[t]);return ie.box.apply(null,[ie.types.mvex,...i])}static mvhd(e,t){t*=e;const i=Math.floor(t/(li+1)),r=Math.floor(t%(li+1)),s=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,i>>24,i>>16&255,i>>8&255,i&255,r>>24,r>>16&255,r>>8&255,r&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return ie.box(ie.types.mvhd,s)}static sdtp(e){const t=e.samples||[],i=new Uint8Array(4+t.length);let r,s;for(r=0;r<t.length;r++)s=t[r].flags,i[r+4]=s.dependsOn<<4|s.isDependedOn<<2|s.hasRedundancy;return ie.box(ie.types.sdtp,i)}static stbl(e){return ie.box(ie.types.stbl,ie.stsd(e),ie.box(ie.types.stts,ie.STTS),ie.box(ie.types.stsc,ie.STSC),ie.box(ie.types.stsz,ie.STSZ),ie.box(ie.types.stco,ie.STCO))}static avc1(e){let t=[],i=[],r,s,a;for(r=0;r<e.sps.length;r++)s=e.sps[r],a=s.byteLength,t.push(a>>>8&255),t.push(a&255),t=t.concat(Array.prototype.slice.call(s));for(r=0;r<e.pps.length;r++)s=e.pps[r],a=s.byteLength,i.push(a>>>8&255),i.push(a&255),i=i.concat(Array.prototype.slice.call(s));const o=ie.box(ie.types.avcC,new Uint8Array([1,t[3],t[4],t[5],255,224|e.sps.length].concat(t).concat([e.pps.length]).concat(i))),c=e.width,l=e.height,u=e.pixelRatio[0],d=e.pixelRatio[1];return ie.box(ie.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,c>>8&255,c&255,l>>8&255,l&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,ie.box(ie.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),ie.box(ie.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,u&255,d>>24,d>>16&255,d>>8&255,d&255])))}static esds(e){const t=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...t,6,1,2])}static audioStsd(e){const t=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,t>>8&255,t&255,0,0])}static mp4a(e){return ie.box(ie.types.mp4a,ie.audioStsd(e),ie.box(ie.types.esds,ie.esds(e)))}static mp3(e){return ie.box(ie.types[".mp3"],ie.audioStsd(e))}static ac3(e){return ie.box(ie.types["ac-3"],ie.audioStsd(e),ie.box(ie.types.dac3,e.config))}static stsd(e){const{segmentCodec:t}=e;if(e.type==="audio"){if(t==="aac")return ie.box(ie.types.stsd,ie.STSD,ie.mp4a(e));if(t==="ac3"&&e.config)return ie.box(ie.types.stsd,ie.STSD,ie.ac3(e));if(t==="mp3"&&e.codec==="mp3")return ie.box(ie.types.stsd,ie.STSD,ie.mp3(e))}else if(e.pps&&e.sps){if(t==="avc")return ie.box(ie.types.stsd,ie.STSD,ie.avc1(e));if(t==="hevc"&&e.vps)return ie.box(ie.types.stsd,ie.STSD,ie.hvc1(e))}else throw new Error("video track missing pps or sps");throw new Error(`unsupported ${e.type} segment codec (${t}/${e.codec})`)}static tkhd(e){const t=e.id,i=(e.duration||0)*(e.timescale||0),r=e.width||0,s=e.height||0,a=Math.floor(i/(li+1)),o=Math.floor(i%(li+1));return ie.box(ie.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,0,0,0,0,a>>24,a>>16&255,a>>8&255,a&255,o>>24,o>>16&255,o>>8&255,o&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,r&255,0,0,s>>8&255,s&255,0,0]))}static traf(e,t){const i=ie.sdtp(e),r=e.id,s=Math.floor(t/(li+1)),a=Math.floor(t%(li+1));return ie.box(ie.types.traf,ie.box(ie.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,r&255])),ie.box(ie.types.tfdt,new Uint8Array([1,0,0,0,s>>24,s>>16&255,s>>8&255,s&255,a>>24,a>>16&255,a>>8&255,a&255])),ie.trun(e,i.length+16+20+8+16+8+8),i)}static trak(e){return e.duration=e.duration||4294967295,ie.box(ie.types.trak,ie.tkhd(e),ie.mdia(e))}static trex(e){const t=e.id;return ie.box(ie.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const i=e.samples||[],r=i.length,s=12+16*r,a=new Uint8Array(s);let o,c,l,u,d,h;for(t+=8+s,a.set([e.type==="video"?1:0,0,15,1,r>>>24&255,r>>>16&255,r>>>8&255,r&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255],0),o=0;o<r;o++)c=i[o],l=c.duration,u=c.size,d=c.flags,h=c.cts,a.set([l>>>24&255,l>>>16&255,l>>>8&255,l&255,u>>>24&255,u>>>16&255,u>>>8&255,u&255,d.isLeading<<2|d.dependsOn,d.isDependedOn<<6|d.hasRedundancy<<4|d.paddingValue<<1|d.isNonSync,d.degradPrio&61440,d.degradPrio&15,h>>>24&255,h>>>16&255,h>>>8&255,h&255],12+16*o);return ie.box(ie.types.trun,a)}static initSegment(e){ie.types||ie.init();const t=ie.moov(e);return rn(ie.FTYP,t)}static hvc1(e){const t=e.params,i=[e.vps,e.sps,e.pps],r=4,s=new Uint8Array([1,t.general_profile_space<<6|(t.general_tier_flag?32:0)|t.general_profile_idc,t.general_profile_compatibility_flags[0],t.general_profile_compatibility_flags[1],t.general_profile_compatibility_flags[2],t.general_profile_compatibility_flags[3],t.general_constraint_indicator_flags[0],t.general_constraint_indicator_flags[1],t.general_constraint_indicator_flags[2],t.general_constraint_indicator_flags[3],t.general_constraint_indicator_flags[4],t.general_constraint_indicator_flags[5],t.general_level_idc,240|t.min_spatial_segmentation_idc>>8,255&t.min_spatial_segmentation_idc,252|t.parallelismType,252|t.chroma_format_idc,248|t.bit_depth_luma_minus8,248|t.bit_depth_chroma_minus8,0,parseInt(t.frame_rate.fps),r-1|t.temporal_id_nested<<2|t.num_temporal_layers<<3|(t.frame_rate.fixed?64:0),i.length]);let a=s.length;for(let p=0;p<i.length;p+=1){a+=3;for(let m=0;m<i[p].length;m+=1)a+=2+i[p][m].length}const o=new Uint8Array(a);o.set(s,0),a=s.length;const c=i.length-1;for(let p=0;p<i.length;p+=1){o.set(new Uint8Array([32+p|(p===c?128:0),0,i[p].length]),a),a+=3;for(let m=0;m<i[p].length;m+=1)o.set(new Uint8Array([i[p][m].length>>8,i[p][m].length&255]),a),a+=2,o.set(i[p][m],a),a+=i[p][m].length}const l=ie.box(ie.types.hvcC,o),u=e.width,d=e.height,h=e.pixelRatio[0],f=e.pixelRatio[1];return ie.box(ie.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,u&255,d>>8&255,d&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),l,ie.box(ie.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),ie.box(ie.types.pasp,new Uint8Array([h>>24,h>>16&255,h>>8&255,h&255,f>>24,f>>16&255,f>>8&255,f&255])))}}ie.types=void 0;ie.HDLR_TYPES=void 0;ie.STTS=void 0;ie.STSC=void 0;ie.STCO=void 0;ie.STSZ=void 0;ie.VMHD=void 0;ie.SMHD=void 0;ie.STSD=void 0;ie.FTYP=void 0;ie.DINF=void 0;const fE=9e4;function Gp(n,e,t=1,i=!1){const r=n*e*t;return i?Math.round(r):r}function A5(n,e,t=1,i=!1){return Gp(n,e,1/t,i)}function xs(n,e=!1){return Gp(n,1e3,1/fE,e)}function w5(n,e=1){return Gp(n,fE,1/e)}function B1(n){const{baseTime:e,timescale:t,trackId:i}=n;return`${e/t} (${e}/${t}) trackId: ${i}`}const I5=10*1e3,C5=1024,R5=1152,L5=1536;let Sr=null,ld=null;function N1(n,e,t,i){return{duration:e,size:t,cts:i,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:n?2:1,isNonSync:n?0:1}}}class Go extends an{constructor(e,t,i,r){if(super("mp4-remuxer",r),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextVideoTs=null,this.nextAudioTs=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=i,this.ISGenerated=!1,Sr===null){const a=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Sr=a?parseInt(a[1]):0}if(ld===null){const s=navigator.userAgent.match(/Safari\/(\d+)/i);ld=s?parseInt(s[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){const t=this._initPTS;(!t||!e||e.trackId!==t.trackId||e.baseTime!==t.baseTime||e.timescale!==t.timescale)&&this.log(`Reset initPTS: ${t&&B1(t)} > ${e&&B1(e)}`),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const i=e[0].pts,r=e.reduce((s,a)=>{let o=a.pts,c=o-s;return c<-4294967296&&(t=!0,o=qt(o,i),c=o-s),c>0?s:o},i);return t&&this.debug("PTS rollover detected"),r}remux(e,t,i,r,s,a,o,c){let l,u,d,h,f,p,m=s,g=s;const y=e.pid>-1,v=t.pid>-1,b=t.samples.length,T=e.samples.length>0,x=o&&b>0||b>1;if((!y||T)&&(!v||x)||this.ISGenerated||o){if(this.ISGenerated){var D,w,S,C;const E=this.videoTrackConfig;(E&&(t.width!==E.width||t.height!==E.height||((D=t.pixelRatio)==null?void 0:D[0])!==((w=E.pixelRatio)==null?void 0:w[0])||((S=t.pixelRatio)==null?void 0:S[1])!==((C=E.pixelRatio)==null?void 0:C[1]))||!E&&x||this.nextAudioTs===null&&T)&&this.resetInitSegment()}this.ISGenerated||(d=this.generateIS(e,t,s,a));const O=this.isVideoContiguous;let I=-1,L;if(x&&(I=U5(t.samples),!O&&this.config.forceKeyFrameOnDiscontinuity))if(p=!0,I>0){this.warn(`Dropped ${I} out of ${b} video samples due to a missing keyframe`);const E=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(I),t.dropped+=I,g+=(t.samples[0].pts-E)/t.inputTimeScale,L=g}else I===-1&&(this.warn(`No keyframe found out of ${b} video samples`),p=!1);if(this.ISGenerated){if(T&&x){const E=this.getVideoStartPts(t.samples),U=(qt(e.samples[0].pts,E)-E)/t.inputTimeScale;m+=Math.max(0,U),g+=Math.max(0,-U)}if(T){if(e.samplerate||(this.warn("regenerate InitSegment as audio detected"),d=this.generateIS(e,t,s,a)),u=this.remuxAudio(e,m,this.isAudioContiguous,a,v||x||c===xe.AUDIO?g:void 0),x){const E=u?u.endPTS-u.startPTS:0;t.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),d=this.generateIS(e,t,s,a)),l=this.remuxVideo(t,g,O,E)}}else x&&(l=this.remuxVideo(t,g,O,0));l&&(l.firstKeyFrame=I,l.independent=I!==-1,l.firstKeyFramePTS=L)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(i.samples.length&&(f=pE(i,s,this._initPTS,this._initDTS)),r.samples.length&&(h=gE(r,s,this._initPTS))),{audio:u,video:l,initSegment:d,independent:p,text:h,id3:f}}computeInitPts(e,t,i,r){const s=Math.round(i*t);let a=qt(e,s);if(a<s+t)for(this.log(`Adjusting PTS for rollover in timeline near ${(s-a)/t} ${r}`);a<s+t;)a+=8589934592;return a-s}generateIS(e,t,i,r){const s=e.samples,a=t.samples,o=this.typeSupported,c={},l=this._initPTS;let u=!l||r,d="audio/mp4",h,f,p,m=-1;if(u&&(h=f=1/0),e.config&&s.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":o.mpeg?(d="audio/mpeg",e.codec=""):o.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}c.audio={id:"audio",container:d,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&o.mpeg?new Uint8Array(0):ie.initSegment([e]),metadata:{channelCount:e.channelCount}},u&&(m=e.id,p=e.inputTimeScale,!l||p!==l.timescale?h=f=this.computeInitPts(s[0].pts,p,i,"audio"):u=!1)}if(t.sps&&t.pps&&a.length){if(t.timescale=t.inputTimeScale,c.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:ie.initSegment([t]),metadata:{width:t.width,height:t.height}},u)if(m=t.id,p=t.inputTimeScale,!l||p!==l.timescale){const g=this.getVideoStartPts(a),y=qt(a[0].dts,g),v=this.computeInitPts(y,p,i,"video"),b=this.computeInitPts(g,p,i,"video");f=Math.min(f,v),h=Math.min(h,b)}else u=!1;this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(c).length)return this.ISGenerated=!0,u?(l&&this.warn(`Timestamps at playlist time: ${r?"":"~"}${i} ${h/p} != initPTS: ${l.baseTime/l.timescale} (${l.baseTime}/${l.timescale}) trackId: ${l.trackId}`),this.log(`Found initPTS at playlist time: ${i} offset: ${h/p} (${h}/${p}) trackId: ${m}`),this._initPTS={baseTime:h,timescale:p,trackId:m},this._initDTS={baseTime:f,timescale:p,trackId:m}):h=p=void 0,{tracks:c,initPTS:h,timescale:p,trackId:m}}remuxVideo(e,t,i,r){const s=e.inputTimeScale,a=e.samples,o=[],c=a.length,l=this._initPTS,u=l.baseTime*s/l.timescale;let d=this.nextVideoTs,h=8,f=this.videoSampleDuration,p,m,g=Number.POSITIVE_INFINITY,y=Number.NEGATIVE_INFINITY,v=!1;if(!i||d===null){const P=u+t*s,V=a[0].pts-qt(a[0].dts,a[0].pts);Sr&&d!==null&&Math.abs(P-V-(d+u))<15e3?i=!0:d=P-V-u}const b=d+u;for(let P=0;P<c;P++){const V=a[P];V.pts=qt(V.pts,b),V.dts=qt(V.dts,b),V.dts<a[P>0?P-1:P].dts&&(v=!0)}v&&a.sort(function(P,V){const j=P.dts-V.dts,te=P.pts-V.pts;return j||te}),p=a[0].dts,m=a[a.length-1].dts;const T=m-p,x=T?Math.round(T/(c-1)):f||e.inputTimeScale/30;if(i){const P=p-b,V=P>x,j=P<-1;if((V||j)&&(V?this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${xs(P,!0)} ms (${P}dts) hole between fragments detected at ${t.toFixed(3)}`):this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${xs(-P,!0)} ms (${P}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!j||b>=a[0].pts||Sr)){p=b;const te=a[0].pts-P;if(V)a[0].dts=p,a[0].pts=te;else{let ne=!0;for(let ue=0;ue<a.length&&!(a[ue].dts>te&&ne);ue++){const he=a[ue].pts;if(a[ue].dts-=P,a[ue].pts-=P,ue<a.length-1){const fe=a[ue+1].pts,me=a[ue].pts,ve=fe<=me,De=fe<=he;ne=ve==De}}}this.log(`Video: Initial PTS/DTS adjusted: ${xs(te,!0)}/${xs(p,!0)}, delta: ${xs(P,!0)} ms`)}}p=Math.max(0,p);let _=0,D=0,w=p;for(let P=0;P<c;P++){const V=a[P],j=V.units,te=j.length;let ne=0;for(let ue=0;ue<te;ue++)ne+=j[ue].data.length;D+=ne,_+=te,V.length=ne,V.dts<w?(V.dts=w,w+=x/4|0||1):w=V.dts,g=Math.min(V.pts,g),y=Math.max(V.pts,y)}m=a[c-1].dts;const S=D+4*_+8;let C;try{C=new Uint8Array(S)}catch(P){this.observer.emit(R.ERROR,R.ERROR,{type:_e.MUX_ERROR,details:re.REMUX_ALLOC_ERROR,fatal:!1,error:P,bytes:S,reason:`fail allocating video mdat ${S}`});return}const O=new DataView(C.buffer);O.setUint32(0,S),C.set(ie.types.mdat,4);let I=!1,L=Number.POSITIVE_INFINITY,E=Number.POSITIVE_INFINITY,$=Number.NEGATIVE_INFINITY,U=Number.NEGATIVE_INFINITY;for(let P=0;P<c;P++){const V=a[P],j=V.units;let te=0;for(let he=0,fe=j.length;he<fe;he++){const me=j[he],ve=me.data,De=me.data.byteLength;O.setUint32(h,De),h+=4,C.set(ve,h),h+=De,te+=4+De}let ne;if(P<c-1)f=a[P+1].dts-V.dts,ne=a[P+1].pts-V.pts;else{const he=this.config,fe=P>0?V.dts-a[P-1].dts:x;if(ne=P>0?V.pts-a[P-1].pts:x,he.stretchShortVideoTrack&&this.nextAudioTs!==null){const me=Math.floor(he.maxBufferHole*s),ve=(r?g+r*s:this.nextAudioTs+u)-V.pts;ve>me?(f=ve-fe,f<0?f=fe:I=!0,this.log(`It is approximately ${ve/90} ms to the next segment; using duration ${f/90} ms for the last video frame.`)):f=fe}else f=fe}const ue=Math.round(V.pts-V.dts);L=Math.min(L,f),$=Math.max($,f),E=Math.min(E,ne),U=Math.max(U,ne),o.push(N1(V.key,f,te,ue))}if(o.length){if(Sr){if(Sr<70){const P=o[0].flags;P.dependsOn=2,P.isNonSync=0}}else if(ld&&U-E<$-L&&x/$<.025&&o[0].cts===0){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let P=p;for(let V=0,j=o.length;V<j;V++){const te=P+o[V].duration,ne=P+o[V].cts;if(V<j-1){const ue=te+o[V+1].cts;o[V].duration=ue-ne}else o[V].duration=V?o[V-1].duration:x;o[V].cts=0,P=te}}}f=I||!f?x:f;const F=m+f;this.nextVideoTs=d=F-u,this.videoSampleDuration=f,this.isVideoContiguous=!0;const Y={data1:ie.moof(e.sequenceNumber++,p,Ke(e,{samples:o})),data2:C,startPTS:(g-u)/s,endPTS:(y+f-u)/s,startDTS:(p-u)/s,endDTS:d/s,type:"video",hasAudio:!1,hasVideo:!0,nb:o.length,dropped:e.dropped};return e.samples=[],e.dropped=0,Y}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return R5;case"ac3":return L5;default:return C5}}remuxAudio(e,t,i,r,s){const a=e.inputTimeScale,o=e.samplerate?e.samplerate:a,c=a/o,l=this.getSamplesPerFrame(e),u=l*c,d=this._initPTS,h=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,f=[],p=s!==void 0;let m=e.samples,g=h?0:8,y=this.nextAudioTs||-1;const v=d.baseTime*a/d.timescale,b=v+t*a;if(this.isAudioContiguous=i=i||m.length&&y>0&&(r&&Math.abs(b-(y+v))<9e3||Math.abs(qt(m[0].pts,b)-(y+v))<20*u),m.forEach(function(U){U.pts=qt(U.pts,b)}),!i||y<0){const U=m.length;if(m=m.filter(F=>F.pts>=0),U!==m.length&&this.warn(`Removed ${m.length-U} of ${U} samples (initPTS ${v} / ${a})`),!m.length)return;s===0?y=0:r&&!p?y=Math.max(0,b-v):y=m[0].pts-v}if(e.segmentCodec==="aac"){const U=this.config.maxAudioFramesDrift;for(let F=0,G=y+v;F<m.length;F++){const W=m[F],Y=W.pts,P=Y-G,V=Math.abs(1e3*P/a);if(P<=-U*u&&p)F===0&&(this.warn(`Audio frame @ ${(Y/a).toFixed(3)}s overlaps marker by ${Math.round(1e3*P/a)} ms.`),this.nextAudioTs=y=Y-v,G=Y);else if(P>=U*u&&V<I5&&p){let j=Math.round(P/u);for(G=Y-j*u;G<0&&j&&u;)j--,G+=u;F===0&&(this.nextAudioTs=y=G-v),this.warn(`Injecting ${j} audio frames @ ${((G-v)/a).toFixed(3)}s due to ${Math.round(1e3*P/a)} ms gap.`);for(let te=0;te<j;te++){let ne=S5.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);ne||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),ne=W.unit.subarray()),m.splice(F,0,{unit:ne,pts:G}),G+=u,F++}}W.pts=G,G+=u}}let T=null,x=null,_,D=0,w=m.length;for(;w--;)D+=m[w].unit.byteLength;for(let U=0,F=m.length;U<F;U++){const G=m[U],W=G.unit;let Y=G.pts;if(x!==null){const V=f[U-1];V.duration=Math.round((Y-x)/c)}else if(i&&e.segmentCodec==="aac"&&(Y=y+v),T=Y,D>0){D+=g;try{_=new Uint8Array(D)}catch(V){this.observer.emit(R.ERROR,R.ERROR,{type:_e.MUX_ERROR,details:re.REMUX_ALLOC_ERROR,fatal:!1,error:V,bytes:D,reason:`fail allocating audio mdat ${D}`});return}h||(new DataView(_.buffer).setUint32(0,D),_.set(ie.types.mdat,4))}else return;_.set(W,g);const P=W.byteLength;g+=P,f.push(N1(!0,l,P,0)),x=Y}const S=f.length;if(!S)return;const C=f[f.length-1];y=x-v,this.nextAudioTs=y+c*C.duration;const O=h?new Uint8Array(0):ie.moof(e.sequenceNumber++,T/c,Ke({},e,{samples:f}));e.samples=[];const I=(T-v)/a,L=this.nextAudioTs/a,$={data1:O,data2:_,startPTS:I,endPTS:L,startDTS:I,endDTS:L,type:"audio",hasAudio:!0,hasVideo:!1,nb:S};return this.isAudioContiguous=!0,$}}function qt(n,e){let t;if(e===null)return n;for(e<n?t=-8589934592:t=8589934592;Math.abs(n-e)>4294967296;)n+=t;return n}function U5(n){for(let e=0;e<n.length;e++)if(n[e].key)return e;return-1}function pE(n,e,t,i){const r=n.samples.length;if(!r)return;const s=n.inputTimeScale;for(let o=0;o<r;o++){const c=n.samples[o];c.pts=qt(c.pts-t.baseTime*s/t.timescale,e*s)/s,c.dts=qt(c.dts-i.baseTime*s/i.timescale,e*s)/s}const a=n.samples;return n.samples=[],{samples:a}}function gE(n,e,t){const i=n.samples.length;if(!i)return;const r=n.inputTimeScale;for(let a=0;a<i;a++){const o=n.samples[a];o.pts=qt(o.pts-t.baseTime*r/t.timescale,e*r)/r}n.samples.sort((a,o)=>a.pts-o.pts);const s=n.samples;return n.samples=[],{samples:s}}class k5 extends an{constructor(e,t,i,r){super("passthrough-remuxer",r),this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1}destroy(){}resetTimeStamp(e){this.lastEndTime=null;const t=this.initPTS;t&&e&&t.baseTime===e.baseTime&&t.timescale===e.timescale||(this.initPTS=e)}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(e,t,i,r){this.audioCodec=t,this.videoCodec=i,this.generateInitSegment(e,r),this.emitInitSegment=!0}generateInitSegment(e,t){let{audioCodec:i,videoCodec:r}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const{audio:s,video:a}=this.initData=xD(e);if(t)D8(e,t);else{const c=s||a;c!=null&&c.encrypted&&this.warn(`Init segment with encrypted track with has no key ("${c.codec}")!`)}s&&(i=$1(s,Xe.AUDIO,this)),a&&(r=$1(a,Xe.VIDEO,this));const o={};s&&a?o.audiovideo={container:"video/mp4",codec:i+","+r,supplemental:a.supplemental,encrypted:a.encrypted,initSegment:e,id:"main"}:s?o.audio={container:"audio/mp4",codec:i,encrypted:s.encrypted,initSegment:e,id:"audio"}:a?o.video={container:"video/mp4",codec:r,supplemental:a.supplemental,encrypted:a.encrypted,initSegment:e,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=o}remux(e,t,i,r,s,a){var o,c;let{initPTS:l,lastEndTime:u}=this;const d={audio:void 0,video:void 0,text:r,id3:i,initSegment:void 0};ye(u)||(u=this.lastEndTime=s||0);const h=t.samples;if(!h.length)return d;const f={initPTS:void 0,timescale:void 0,trackId:void 0};let p=this.initData;if((o=p)!=null&&o.length||(this.generateInitSegment(h),p=this.initData),!((c=p)!=null&&c.length))return this.warn("Failed to generate initSegment."),d;this.emitInitSegment&&(f.tracks=this.initTracks,this.emitInitSegment=!1);const m=S8(h,p,this),g=p.audio?m[p.audio.id]:null,y=p.video?m[p.video.id]:null,v=Qa(y,1/0),b=Qa(g,1/0),T=Qa(y,0,!0),x=Qa(g,0,!0);let _=s,D=0;const w=g&&(!y||!l&&b<v||l&&l.trackId===p.audio.id),S=w?g:y;if(S){const G=S.timescale,W=S.start-s*G,Y=w?p.audio.id:p.video.id;_=S.start/G,D=w?x-b:T-v,(a||!l)&&(F5(l,_,s,D)||G!==l.timescale)&&(l&&this.warn(`Timestamps at playlist time: ${a?"":"~"}${s} ${W/G} != initPTS: ${l.baseTime/l.timescale} (${l.baseTime}/${l.timescale}) trackId: ${l.trackId}`),this.log(`Found initPTS at playlist time: ${s} offset: ${_-s} (${W}/${G}) trackId: ${Y}`),l=null,f.initPTS=W,f.timescale=G,f.trackId=Y)}else this.warn(`No audio or video samples found for initPTS at playlist time: ${s}`);l?(f.initPTS=l.baseTime,f.timescale=l.timescale,f.trackId=l.trackId):((!f.timescale||f.trackId===void 0||f.initPTS===void 0)&&(this.warn("Could not set initPTS"),f.initPTS=_,f.timescale=1,f.trackId=-1),this.initPTS=l={baseTime:f.initPTS,timescale:f.timescale,trackId:f.trackId});const C=_-l.baseTime/l.timescale,O=C+D;D>0?this.lastEndTime=O:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const I=!!p.audio,L=!!p.video;let E="";I&&(E+="audio"),L&&(E+="video");const $=(p.audio?p.audio.encrypted:!1)||(p.video?p.video.encrypted:!1),U={data1:h,startPTS:C,startDTS:C,endPTS:O,endDTS:O,type:E,hasAudio:I,hasVideo:L,nb:1,dropped:0,encrypted:$};d.audio=I&&!L?U:void 0,d.video=L?U:void 0;const F=y?.sampleCount;if(F){const G=y.keyFrameIndex,W=G!==-1;U.nb=F,U.dropped=G===0||this.isVideoContiguous?0:W?G:F,U.independent=W,U.firstKeyFrame=G,W&&y.keyFrameStart&&(U.firstKeyFramePTS=(y.keyFrameStart-l.baseTime)/l.timescale),this.isVideoContiguous||(d.independent=W),this.isVideoContiguous||(this.isVideoContiguous=W),U.dropped&&this.warn(`fmp4 does not start with IDR: firstIDR ${G}/${F} dropped: ${U.dropped} start: ${U.firstKeyFramePTS||"NA"}`)}return d.initSegment=f,d.id3=pE(i,s,l,l),r.samples.length&&(d.text=gE(r,s,l)),d}}function Qa(n,e,t=!1){return n?.start!==void 0?(n.start+(t?n.duration:0))/n.timescale:e}function F5(n,e,t,i){if(n===null)return!0;const r=Math.max(i,1),s=e-n.baseTime/n.timescale;return Math.abs(s-t)>r}function $1(n,e,t){const i=n.codec;return i&&i.length>4?i:e===Xe.AUDIO?i==="ec-3"||i==="ac-3"||i==="alac"?i:i==="fLaC"||i==="Opus"?gc(i,!1):(t.warn(`Unhandled audio codec "${i}" in mp4 MAP`),i||"mp4a"):(t.warn(`Unhandled video codec "${i}" in mp4 MAP`),i||"avc1")}let $n;try{$n=self.performance.now.bind(self.performance)}catch{$n=Date.now}const Ho=[{demux:b5,remux:k5},{demux:fi,remux:Go},{demux:g5,remux:Go},{demux:y5,remux:Go}];Ho.splice(2,0,{demux:m5,remux:Go});class W1{constructor(e,t,i,r,s,a){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=i,this.id=s,this.logger=a}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,i,r){const s=i.transmuxing;s.executeStart=$n();let a=new Uint8Array(e);const{currentTransmuxState:o,transmuxConfig:c}=this;r&&(this.currentTransmuxState=r);const{contiguous:l,discontinuity:u,trackSwitch:d,accurateTimeOffset:h,timeOffset:f,initSegmentChange:p}=r||o,{audioCodec:m,videoCodec:g,defaultInitPts:y,duration:v,initSegmentData:b}=c,T=P5(a,t);if(T&&$r(T.method)){const w=this.getDecrypter(),S=Fp(T.method);if(w.isSync()){let C=w.softwareDecrypt(a,T.key.buffer,T.iv.buffer,S);if(i.part>-1){const I=w.flush();C=I&&I.buffer}if(!C)return s.executeEnd=$n(),ud(i);a=new Uint8Array(C)}else return this.asyncResult=!0,this.decryptionPromise=w.webCryptoDecrypt(a,T.key.buffer,T.iv.buffer,S).then(C=>{const O=this.push(C,null,i);return this.decryptionPromise=null,O}),this.decryptionPromise}const x=this.needsProbing(u,d);if(x){const w=this.configureTransmuxer(a);if(w)return this.logger.warn(`[transmuxer] ${w.message}`),this.observer.emit(R.ERROR,R.ERROR,{type:_e.MEDIA_ERROR,details:re.FRAG_PARSING_ERROR,fatal:!1,error:w,reason:w.message}),s.executeEnd=$n(),ud(i)}(u||d||p||x)&&this.resetInitSegment(b,m,g,v,t),(u||p||x)&&this.resetInitialTimestamp(y),l||this.resetContiguity();const _=this.transmux(a,T,f,h,i);this.asyncResult=ra(_);const D=this.currentTransmuxState;return D.contiguous=!0,D.discontinuity=!1,D.trackSwitch=!1,s.executeEnd=$n(),_}flush(e){const t=e.transmuxing;t.executeStart=$n();const{decrypter:i,currentTransmuxState:r,decryptionPromise:s}=this;if(s)return this.asyncResult=!0,s.then(()=>this.flush(e));const a=[],{timeOffset:o}=r;if(i){const d=i.flush();d&&a.push(this.push(d.buffer,null,e))}const{demuxer:c,remuxer:l}=this;if(!c||!l){t.executeEnd=$n();const d=[ud(e)];return this.asyncResult?Promise.resolve(d):d}const u=c.flush(o);return ra(u)?(this.asyncResult=!0,u.then(d=>(this.flushRemux(a,d,e),a))):(this.flushRemux(a,u,e),this.asyncResult?Promise.resolve(a):a)}flushRemux(e,t,i){const{audioTrack:r,videoTrack:s,id3Track:a,textTrack:o}=t,{accurateTimeOffset:c,timeOffset:l}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${i.sn}${i.part>-1?" part: "+i.part:""} of ${this.id===xe.MAIN?"level":"track"} ${i.level}`);const u=this.remuxer.remux(r,s,a,o,l,c,!0,this.id);e.push({remuxResult:u,chunkMeta:i}),i.transmuxing.executeEnd=$n()}resetInitialTimestamp(e){const{demuxer:t,remuxer:i}=this;!t||!i||(t.resetTimeStamp(e),i.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;!e||!t||(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,i,r,s){const{demuxer:a,remuxer:o}=this;!a||!o||(a.resetInitSegment(e,t,i,r),o.resetInitSegment(e,t,i,s))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,i,r,s){let a;return t&&t.method==="SAMPLE-AES"?a=this.transmuxSampleAes(e,t,i,r,s):a=this.transmuxUnencrypted(e,i,r,s),a}transmuxUnencrypted(e,t,i,r){const{audioTrack:s,videoTrack:a,id3Track:o,textTrack:c}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(s,a,o,c,t,i,!1,this.id),chunkMeta:r}}transmuxSampleAes(e,t,i,r,s){return this.demuxer.demuxSampleAes(e,t,i).then(a=>({remuxResult:this.remuxer.remux(a.audioTrack,a.videoTrack,a.id3Track,a.textTrack,i,r,!1,this.id),chunkMeta:s}))}configureTransmuxer(e){const{config:t,observer:i,typeSupported:r}=this;let s;for(let d=0,h=Ho.length;d<h;d++){var a;if((a=Ho[d].demux)!=null&&a.probe(e,this.logger)){s=Ho[d];break}}if(!s)return new Error("Failed to find demuxer by probing fragment data");const o=this.demuxer,c=this.remuxer,l=s.remux,u=s.demux;(!c||!(c instanceof l))&&(this.remuxer=new l(i,t,r,this.logger)),(!o||!(o instanceof u))&&(this.demuxer=new u(i,t,r,this.logger),this.probe=u.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new Up(this.config)),e}}function P5(n,e){let t=null;return n.byteLength>0&&e?.key!=null&&e.iv!==null&&e.method!=null&&(t=e),t}const ud=n=>({remuxResult:{},chunkMeta:n});function ra(n){return"then"in n&&n.then instanceof Function}class O5{constructor(e,t,i,r,s){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=i,this.duration=r,this.defaultInitPts=s||null}}class M5{constructor(e,t,i,r,s,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=i,this.trackSwitch=r,this.timeOffset=s,this.initSegmentChange=a}}let V1=0;class mE{constructor(e,t,i,r){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=V1++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=c=>{const l=c.data,u=this.hls;if(!(!u||!(l!=null&&l.event)||l.instanceNo!==this.instanceNo))switch(l.event){case"init":{var d;const h=(d=this.workerContext)==null?void 0:d.objectURL;h&&self.URL.revokeObjectURL(h);break}case"transmuxComplete":{this.handleTransmuxComplete(l.data);break}case"flush":{this.onFlush(l.data);break}case"workerLog":{u.logger[l.data.logType]&&u.logger[l.data.logType](l.data.message);break}default:{l.data=l.data||{},l.data.frag=this.frag,l.data.part=this.part,l.data.id=this.id,u.trigger(l.event,l.data);break}}},this.onWorkerError=c=>{if(!this.hls)return;const l=new Error(`${c.message}  (${c.filename}:${c.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(R.ERROR,{type:_e.OTHER_ERROR,details:re.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:l})};const s=e.config;this.hls=e,this.id=t,this.useWorker=!!s.enableWorker,this.onTransmuxComplete=i,this.onFlush=r;const a=(c,l)=>{l=l||{},l.frag=this.frag||void 0,c===R.ERROR&&(l=l,l.parent=this.id,l.part=this.part,this.error=l.error),this.hls.trigger(c,l)};this.observer=new Mp,this.observer.on(R.FRAG_DECRYPTED,a),this.observer.on(R.ERROR,a);const o=r1(s.preferManagedMediaSource);if(this.useWorker&&typeof Worker<"u"){const c=this.hls.logger;if(s.workerPath||WB()){try{s.workerPath?(c.log(`loading Web Worker ${s.workerPath} for "${t}"`),this.workerContext=GB(s.workerPath)):(c.log(`injecting Web Worker for "${t}"`),this.workerContext=VB());const{worker:u}=this.workerContext;u.addEventListener("message",this.onWorkerMessage),u.addEventListener("error",this.onWorkerError),u.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:o,id:t,config:Ye(s)})}catch(u){c.warn(`Error setting up "${t}" Web Worker, fallback to inline`,u),this.terminateWorker(),this.error=null,this.transmuxer=new W1(this.observer,o,s,"",t,e.logger)}return}}this.transmuxer=new W1(this.observer,o,s,"",t,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=V1++;const t=this.hls.config,i=r1(t.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:i,id:this.id,config:Ye(t)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),HB(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,t,i,r,s,a,o,c,l,u){var d,h;l.transmuxing.start=self.performance.now();const{instanceNo:f,transmuxer:p}=this,m=a?a.start:s.start,g=s.decryptdata,y=this.frag,v=!(y&&s.cc===y.cc),b=!(y&&l.level===y.level),T=y?l.sn-y.sn:-1,x=this.part?l.part-this.part.index:-1,_=T===0&&l.id>1&&l.id===y?.stats.chunkCount,D=!b&&(T===1||T===0&&(x===1||_&&x<=0)),w=self.performance.now();(b||T||s.stats.parsing.start===0)&&(s.stats.parsing.start=w),a&&(x||!D)&&(a.stats.parsing.start=w);const S=!(y&&((d=s.initSegment)==null?void 0:d.url)===((h=y.initSegment)==null?void 0:h.url)),C=new M5(v,D,c,b,m,S);if(!D||v||S){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${s.type} sn: ${l.sn}${l.part>-1?" part: "+l.part:""} ${this.id===xe.MAIN?"level":"track"}: ${l.level} id: ${l.id}
        discontinuity: ${v}
        trackSwitch: ${b}
        contiguous: ${D}
        accurateTimeOffset: ${c}
        timeOffset: ${m}
        initSegmentChange: ${S}`);const O=new O5(i,r,t,o,u);this.configureTransmuxer(O)}if(this.frag=s,this.part=a,this.workerContext)this.workerContext.worker.postMessage({instanceNo:f,cmd:"demux",data:e,decryptdata:g,chunkMeta:l,state:C},e instanceof ArrayBuffer?[e]:[]);else if(p){const O=p.push(e,g,l,C);ra(O)?O.then(I=>{this.handleTransmuxComplete(I)}).catch(I=>{this.transmuxerError(I,l,"transmuxer-interface push error")}):this.handleTransmuxComplete(O)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:t,transmuxer:i}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:t,cmd:"flush",chunkMeta:e});else if(i){const r=i.flush(e);ra(r)?r.then(s=>{this.handleFlushResult(s,e)}).catch(s=>{this.transmuxerError(s,e,"transmuxer-interface flush error")}):this.handleFlushResult(r,e)}}transmuxerError(e,t,i){this.hls&&(this.error=e,this.hls.trigger(R.ERROR,{type:_e.MEDIA_ERROR,details:re.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:i}))}handleFlushResult(e,t){e.forEach(i=>{this.handleTransmuxComplete(i)}),this.onFlush(t)}configureTransmuxer(e){const{instanceNo:t,transmuxer:i}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:t,cmd:"configure",config:e}):i&&i.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const G1=100;class yE extends hl{constructor(e,t,i){super(e,t,i,"audio-stream-controller",xe.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(R.LEVEL_LOADED,this.onLevelLoaded,this),e.on(R.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(R.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(R.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(R.BUFFER_RESET,this.onBufferReset,this),e.on(R.BUFFER_CREATED,this.onBufferCreated,this),e.on(R.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(R.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(R.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(R.FRAG_LOADING,this.onFragLoading,this),e.on(R.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off(R.LEVEL_LOADED,this.onLevelLoaded,this),e.off(R.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(R.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(R.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(R.BUFFER_RESET,this.onBufferReset,this),e.off(R.BUFFER_CREATED,this.onBufferCreated,this),e.off(R.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(R.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(R.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(R.FRAG_LOADING,this.onFragLoading,this),e.off(R.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:t,id:i,initPTS:r,timescale:s,trackId:a}){if(i===xe.MAIN){const o=t.cc,c=this.fragCurrent;if(this.initPTS[o]={baseTime:r,timescale:s,trackId:a},this.log(`InitPTS for cc: ${o} found from main: ${r/s} (${r}/${s}) trackId: ${a}`),this.mainAnchor=t,this.state===le.WAITING_INIT_PTS){const l=this.waitingData;(!l&&!this.loadingParts||l&&l.frag.cc!==o)&&this.syncWithAnchor(t,l?.frag)}else!this.hls.hasEnoughToStart&&c&&c.cc!==o?(c.abortRequests(),this.syncWithAnchor(t,c)):this.state===le.IDLE&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(e,t){var i;const r=((i=this.mainFragLoading)==null?void 0:i.frag)||null;if(t&&r?.cc===t.cc)return;const s=(r||e).cc,a=this.getLevelDetails(),o=this.getLoadPosition(),c=UD(a,s,o);c&&(this.log(`Syncing with main frag at ${c.start} cc ${c.cc}`),this.startFragRequested=!1,this.nextLoadPosition=c.start,this.resetLoadingState(),this.state===le.IDLE&&this.doTickIdle())}startLoad(e,t){if(!this.levels){this.startPosition=e,this.state=le.STOPPED;return}const i=this.lastCurrentTime;this.stopLoad(),this.setInterval(G1),i>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${i.toFixed(3)}`),e=i,this.state=le.IDLE):this.state=le.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}doTick(){switch(this.state){case le.IDLE:this.doTickIdle();break;case le.WAITING_TRACK:{const{levels:e,trackId:t}=this,i=e?.[t],r=i?.details;if(r&&!this.waitForLive(i)){if(this.waitForCdnTuneIn(r))break;this.state=le.WAITING_INIT_PTS}break}case le.FRAG_LOADING_WAITING_RETRY:{this.checkRetryDate();break}case le.WAITING_INIT_PTS:{const e=this.waitingData;if(e){const{frag:t,part:i,cache:r,complete:s}=e,a=this.mainAnchor;if(this.initPTS[t.cc]!==void 0){this.waitingData=null,this.state=le.FRAG_LOADING;const o=r.flush().buffer,c={frag:t,part:i,payload:o,networkDetails:null};this._handleFragmentLoadProgress(c),s&&super._handleFragmentLoadComplete(c)}else a&&a.cc!==e.frag.cc&&this.syncWithAnchor(a,e.frag)}else this.state=le.IDLE}}this.onTickEnd()}resetLoadingState(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:t,levels:i,media:r,trackId:s}=this,a=t.config;if(!this.buffering||!r&&!this.primaryPrefetch&&(this.startFragRequested||!a.startFragPrefetch)||!(i!=null&&i[s]))return;const o=i[s],c=o.details;if(!c||this.waitForLive(o)||this.waitForCdnTuneIn(c)){this.state=le.WAITING_TRACK,this.startFragRequested=!1;return}const l=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&l&&(this.bufferFlushed=!1,this.afterBufferFlushed(l,Xe.AUDIO,xe.AUDIO));const u=this.getFwdBufferInfo(l,xe.AUDIO);if(u===null)return;if(!this.switchingTrack&&this._streamEnded(u,c)){t.trigger(R.BUFFER_EOS,{type:"audio"}),this.state=le.ENDED;return}const d=u.len,h=t.maxBufferLength,f=c.fragments,p=f[0].start,m=this.getLoadPosition(),g=this.flushing?m:u.end;if(this.switchingTrack&&r){const b=m;c.PTSKnown&&b<p&&(u.end>p||u.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),r.currentTime=p+.05)}if(d>=h&&!this.switchingTrack&&g<f[f.length-1].start)return;let y=this.getNextFragment(g,c);if(y&&this.isLoopLoading(y,g)&&(y=this.getNextFragmentLoopLoading(y,c,u,xe.MAIN,h)),!y){this.bufferFlushed=!0;return}let v=((e=this.mainFragLoading)==null?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&v&&lt(y)&&!y.endList&&(!c.live||!this.loadingParts&&g<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(v)===gt.OK&&(this.mainFragLoading=v=null),v&&lt(v))){if(y.start>v.end){const T=this.fragmentTracker.getFragAtPos(g,xe.MAIN);T&&T.end>v.end&&(v=T,this.mainFragLoading={frag:T,targetBufferTime:null})}if(y.start>v.end)return}this.loadFragment(y,o,g)}onMediaDetaching(e,t){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,t)}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(i=>new Yr(i))}onAudioTrackSwitching(e,t){const i=!!t.url;this.trackId=t.id;const{fragCurrent:r}=this;r&&(r.abortRequests(),this.removeUnbufferedFrags(r.start)),this.resetLoadingState(),i?(this.switchingTrack=t,this.flushAudioIfNeeded(t),this.state!==le.STOPPED&&(this.setInterval(G1),this.state=le.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=t,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,t){this.mainDetails=t.details;const i=this.cachedTrackLoadedData;i&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(R.AUDIO_TRACK_LOADED,i))}onAudioTrackLoaded(e,t){var i;const{levels:r}=this,{details:s,id:a,groupId:o,track:c}=t;if(!r){this.warn(`Audio tracks reset while loading track ${a} "${c.name}" of "${o}"`);return}const l=this.mainDetails;if(!l||s.endCC>l.endCC||l.expired){this.cachedTrackLoadedData=t,this.state!==le.STOPPED&&(this.state=le.WAITING_TRACK);return}this.cachedTrackLoadedData=null,this.log(`Audio track ${a} "${c.name}" of "${o}" loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""},duration:${s.totalduration}`);const u=r[a];let d=0;if(s.live||(i=u.details)!=null&&i.live){if(this.checkLiveUpdate(s),s.deltaUpdateFailed)return;if(u.details){var h;d=this.alignPlaylists(s,u.details,(h=this.levelLastLoaded)==null?void 0:h.details)}s.alignedSliding||(YD(s,l),s.alignedSliding||_c(s,l),d=s.fragmentStart)}u.details=s,this.levelLastLoaded=u,this.startFragRequested||this.setStartPosition(l,d),this.hls.trigger(R.AUDIO_TRACK_UPDATED,{details:s,id:a,groupId:t.groupId}),this.state===le.WAITING_TRACK&&!this.waitForCdnTuneIn(s)&&(this.state=le.IDLE),this.tick()}_handleFragmentLoadProgress(e){var t;const i=e.frag,{part:r,payload:s}=e,{config:a,trackId:o,levels:c}=this;if(!c){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${i.sn} of level ${i.level} will not be buffered`);return}const l=c[o];if(!l){this.warn("Audio track is undefined on fragment load progress");return}const u=l.details;if(!u){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(i.start);return}const d=a.defaultAudioCodec||l.audioCodec||"mp4a.40.2";let h=this.transmuxer;h||(h=this.transmuxer=new mE(this.hls,xe.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const f=this.initPTS[i.cc],p=(t=i.initSegment)==null?void 0:t.data;if(f!==void 0){const g=r?r.index:-1,y=g!==-1,v=new dl(i.level,i.sn,i.stats.chunkCount,s.byteLength,g,y);h.push(s,p,d,"",i,r,u.totalduration,!1,v,f)}else{this.log(`Unknown video PTS for cc ${i.cc}, waiting for video PTS before demuxing audio frag ${i.sn} of [${u.startSN} ,${u.endSN}],track ${o}`);const{cache:m}=this.waitingData=this.waitingData||{frag:i,part:r,cache:new QD,complete:!1};m.push(new Uint8Array(s)),this.state!==le.STOPPED&&(this.state=le.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,t){this.bufferFlushed=this.flushing=!1;const i=t.tracks.audio;i&&(this.mediaBuffer=i.buffer||null)}onFragLoading(e,t){!this.audioOnly&&t.frag.type===xe.MAIN&&lt(t.frag)&&(this.mainFragLoading=t,this.state===le.IDLE&&this.tick())}onFragBuffered(e,t){const{frag:i,part:r}=t;if(i.type!==xe.AUDIO){!this.audioOnly&&i.type===xe.MAIN&&!i.elementaryStreams.video&&!i.elementaryStreams.audiovideo&&(this.audioOnly=!0,this.mainFragLoading=null);return}if(this.fragContextChanged(i)){this.warn(`Fragment ${i.sn}${r?" p: "+r.index:""} of level ${i.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(lt(i)){this.fragPrevious=i;const s=this.switchingTrack;s&&(this.bufferedTrack=s,this.switchingTrack=null,this.hls.trigger(R.AUDIO_TRACK_SWITCHED,qe({},s)))}this.fragBufferedComplete(i,r),this.media&&this.tick()}onError(e,t){var i;if(t.fatal){this.state=le.ERROR;return}switch(t.details){case re.FRAG_GAP:case re.FRAG_PARSING_ERROR:case re.FRAG_DECRYPT_ERROR:case re.FRAG_LOAD_ERROR:case re.FRAG_LOAD_TIMEOUT:case re.KEY_LOAD_ERROR:case re.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(xe.AUDIO,t);break;case re.AUDIO_TRACK_LOAD_ERROR:case re.AUDIO_TRACK_LOAD_TIMEOUT:case re.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===le.WAITING_TRACK&&((i=t.context)==null?void 0:i.type)===Be.AUDIO_TRACK&&(this.state=le.IDLE);break;case re.BUFFER_ADD_CODEC_ERROR:case re.BUFFER_APPEND_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)||this.resetLoadingState();break;case re.BUFFER_FULL_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case re.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onBufferFlushing(e,{type:t}){t!==Xe.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==Xe.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===le.ENDED&&(this.state=le.IDLE);const i=this.mediaBuffer||this.media;i&&(this.afterBufferFlushed(i,t,xe.AUDIO),this.tick())}}_handleTransmuxComplete(e){var t;const i="audio",{hls:r}=this,{remuxResult:s,chunkMeta:a}=e,o=this.getCurrentContext(a);if(!o){this.resetWhenMissingContext(a);return}const{frag:c,part:l,level:u}=o,{details:d}=u,{audio:h,text:f,id3:p,initSegment:m}=s;if(this.fragContextChanged(c)||!d){this.fragmentTracker.removeFragment(c);return}if(this.state=le.PARSING,this.switchingTrack&&h&&this.completeAudioSwitch(this.switchingTrack),m!=null&&m.tracks){const g=c.initSegment||c;if(this.unhandledEncryptionError(m,c))return;this._bufferInitSegment(u,m.tracks,g,a),r.trigger(R.FRAG_PARSING_INIT_SEGMENT,{frag:g,id:i,tracks:m.tracks})}if(h){const{startPTS:g,endPTS:y,startDTS:v,endDTS:b}=h;l&&(l.elementaryStreams[Xe.AUDIO]={startPTS:g,endPTS:y,startDTS:v,endDTS:b}),c.setElementaryStreamInfo(Xe.AUDIO,g,y,v,b),this.bufferFragmentData(h,c,l,a)}if(p!=null&&(t=p.samples)!=null&&t.length){const g=Ke({id:i,frag:c,details:d},p);r.trigger(R.FRAG_PARSING_METADATA,g)}if(f){const g=Ke({id:i,frag:c,details:d},f);r.trigger(R.FRAG_PARSING_USERDATA,g)}}_bufferInitSegment(e,t,i,r){if(this.state!==le.PARSING||(t.video&&delete t.video,t.audiovideo&&delete t.audiovideo,!t.audio))return;const s=t.audio;s.id=xe.AUDIO;const a=e.audioCodec;this.log(`Init audio buffer, container:${s.container}, codecs[level/parsed]=[${a}/${s.codec}]`),a&&a.split(",").length===1&&(s.levelCodec=a),this.hls.trigger(R.BUFFER_CODECS,t);const o=s.initSegment;if(o!=null&&o.byteLength){const c={type:"audio",frag:i,part:null,chunkMeta:r,parent:i.type,data:o};this.hls.trigger(R.BUFFER_APPENDING,c)}this.tickImmediate()}loadFragment(e,t,i){const r=this.fragmentTracker.getState(e);if(this.switchingTrack||r===gt.NOT_LOADED||r===gt.PARTIAL){var s;if(!lt(e))this._loadInitSegment(e,t);else if((s=t.details)!=null&&s.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=le.WAITING_INIT_PTS;const a=this.mainDetails;a&&a.fragmentStart!==t.details.fragmentStart&&_c(t.details,a)}else super.loadFragment(e,t,i)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:t,lang:i,assocLang:r,characteristics:s,audioCodec:a,channels:o}=this.bufferedTrack;rr({name:t,lang:i,assocLang:r,characteristics:s,audioCodec:a,channels:o},e,Xi)||(yc(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(R.AUDIO_TRACK_SWITCHED,qe({},e))}}class pl extends an{constructor(e,t){super(t,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,i){const r=t?.renditionReports;if(r){let s=-1;for(let a=0;a<r.length;a++){const o=r[a];let c;try{c=new self.URL(o.URI,t.url).href}catch(l){this.warn(`Could not construct new URL for Rendition Report: ${l}`),c=o.URI||""}if(c===e){s=a;break}else c===e.substring(0,c.length)&&(s=a)}if(s!==-1){const a=r[s],o=parseInt(a["LAST-MSN"])||t.lastPartSn;let c=parseInt(a["LAST-PART"])||t.lastPartIndex;if(this.hls.config.lowLatencyMode){const u=Math.min(t.age-t.partTarget,t.targetduration);c>=0&&u>t.partTarget&&(c+=1)}const l=i&&s1(i);return new mh(o,c>=0?c:void 0,l)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,t){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,t){if(t)try{return t.addDirectives(e)}catch(i){this.warn(`Could not construct new URL with HLS Delivery Directives: ${i}`)}return e}playlistLoaded(e,t,i){const{details:r,stats:s}=t,a=self.performance.now(),o=s.loading.first?Math.max(0,a-s.loading.first):0;r.advancedDateTime=Date.now()-o;const c=this.hls.config.timelineOffset;if(c!==r.appliedTimelineOffset){const u=Math.max(c||0,0);r.appliedTimelineOffset=u,r.fragments.forEach(d=>{d.setStart(d.playlistOffset+u)})}if(r.live||i!=null&&i.live){const u="levelInfo"in t?t.levelInfo:t.track;if(r.reloaded(i),i&&r.fragments.length>0){RB(i,r,this);const v=r.playlistParsingError;if(v){this.warn(v);const b=this.hls;if(!b.config.ignorePlaylistParsingErrors){var l;const{networkDetails:T}=t;b.trigger(R.ERROR,{type:_e.NETWORK_ERROR,details:re.LEVEL_PARSING_ERROR,fatal:!1,url:r.url,error:v,reason:v.message,level:t.level||void 0,parent:(l=r.fragments[0])==null?void 0:l.type,networkDetails:T,stats:s});return}r.playlistParsingError=null}}r.requestScheduled===-1&&(r.requestScheduled=s.loading.start);const d=this.hls.mainForwardBufferInfo,h=d?d.end-d.len:0,f=(r.edge-h)*1e3,p=qD(r,f);if(r.requestScheduled+p<a?r.requestScheduled=a:r.requestScheduled+=p,this.log(`live playlist ${e} ${r.advanced?"REFRESHED "+r.lastPartSn+"-"+r.lastPartIndex:r.updated?"UPDATED":"MISSED"}`),!this.canLoad||!r.live)return;let m,g,y;if(r.canBlockReload&&r.endSN&&r.advanced){const v=this.hls.config.lowLatencyMode,b=r.lastPartSn,T=r.endSN,x=r.lastPartIndex,_=x!==-1,D=b===T;_?D?(g=T+1,y=v?0:x):(g=b,y=v?x+1:r.maxPartIndex):g=T+1;const w=r.age,S=w+r.ageHeader;let C=Math.min(S-r.partTarget,r.targetduration*1.5);if(C>0){if(S>r.targetduration*3)this.log(`Playlist last advanced ${w.toFixed(2)}s ago. Omitting segment and part directives.`),g=void 0,y=void 0;else if(i!=null&&i.tuneInGoal&&S-r.partTarget>i.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${i.tuneInGoal} to: ${C} with playlist age: ${r.age}`),C=0;else{const O=Math.floor(C/r.targetduration);if(g+=O,y!==void 0){const I=Math.round(C%r.targetduration/r.partTarget);y+=I}this.log(`CDN Tune-in age: ${r.ageHeader}s last advanced ${w.toFixed(2)}s goal: ${C} skip sn ${O} to part ${y}`)}r.tuneInGoal=C}if(m=this.getDeliveryDirectives(r,t.deliveryDirectives,g,y),v||!D){r.requestScheduled=a,this.loadingPlaylist(u,m);return}}else(r.canBlockReload||r.canSkipUntil)&&(m=this.getDeliveryDirectives(r,t.deliveryDirectives,g,y));m&&g!==void 0&&r.canBlockReload&&(r.requestScheduled=s.loading.first+Math.max(p-o*2,p/2)),this.scheduleLoading(u,m,r)}else this.clearTimer()}scheduleLoading(e,t,i){const r=i||e.details;if(!r){this.loadingPlaylist(e,t);return}const s=self.performance.now(),a=r.requestScheduled;if(s>=a){this.loadingPlaylist(e,t);return}const o=a-s;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(o)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,t),o)}getDeliveryDirectives(e,t,i,r){let s=s1(e);return t!=null&&t.skip&&e.deltaUpdateFailed&&(i=t.msn,r=t.part,s=ks.No),new mh(i,r,s)}checkRetry(e){const t=e.details,i=vc(e),r=e.errorAction,{action:s,retryCount:a=0,retryConfig:o}=r||{},c=!!r&&!!o&&(s===bt.RetryRequest||!r.resolved&&s===bt.SendAlternateToPenaltyBox);if(c){var l;if(a>=o.maxNumRetry)return!1;if(i&&(l=e.context)!=null&&l.deliveryDirectives)this.warn(`Retrying playlist loading ${a+1}/${o.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const u=Lp(o,a);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),u),this.warn(`Retrying playlist loading ${a+1}/${o.maxNumRetry} after "${t}" in ${u}ms`)}e.levelRetry=!0,r.resolved=!0}return c}}function vE(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!sa(n[t].attrs,e[t].attrs))return!1;return!0}function sa(n,e,t){const i=n["STABLE-RENDITION-ID"];return i&&!t?i===e["STABLE-RENDITION-ID"]:!(t||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(r=>n[r]!==e[r])}function Eh(n,e){return e.label.toLowerCase()===n.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(n.lang||"").toLowerCase())}class bE extends pl{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(R.MANIFEST_LOADING,this.onManifestLoading,this),e.on(R.MANIFEST_PARSED,this.onManifestParsed,this),e.on(R.LEVEL_LOADING,this.onLevelLoading,this),e.on(R.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(R.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(R.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(R.MANIFEST_LOADING,this.onManifestLoading,this),e.off(R.MANIFEST_PARSED,this.onManifestParsed,this),e.off(R.LEVEL_LOADING,this.onLevelLoading,this),e.off(R.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(R.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(R.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:i,groupId:r,details:s}=t,a=this.tracksInGroup[i];if(!a||a.groupId!==r){this.warn(`Audio track with id:${i} and group:${r} not found in active group ${a?.groupId}`);return}const o=a.details;a.details=t.details,this.log(`Audio track ${i} "${a.name}" lang:${a.lang} group:${r} loaded [${s.startSN}-${s.endSN}]`),i===this.trackId&&this.playlistLoaded(i,t,o)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const i=t.audioGroups||null,r=this.groupIds;let s=this.currentTrack;if(!i||r?.length!==i?.length||i!=null&&i.some(o=>r?.indexOf(o)===-1)){this.groupIds=i,this.trackId=-1,this.currentTrack=null;const o=this.tracks.filter(h=>!i||i.indexOf(h.groupId)!==-1);if(o.length)this.selectDefaultTrack&&!o.some(h=>h.default)&&(this.selectDefaultTrack=!1),o.forEach((h,f)=>{h.id=f});else if(!s&&!this.tracksInGroup.length)return;this.tracksInGroup=o;const c=this.hls.config.audioPreference;if(!s&&c){const h=wn(c,o,Xi);if(h>-1)s=o[h];else{const f=wn(c,this.tracks);s=this.tracks[f]}}let l=this.findTrackId(s);l===-1&&s&&(l=this.findTrackId(null));const u={audioTracks:o};this.log(`Updating audio tracks, ${o.length} track(s) found in group(s): ${i?.join(",")}`),this.hls.trigger(R.AUDIO_TRACKS_UPDATED,u);const d=this.trackId;if(l!==-1&&d===-1)this.setAudioTrack(l);else if(o.length&&d===-1){var a;const h=new Error(`No audio track selected for current audio group-ID(s): ${(a=this.groupIds)==null?void 0:a.join(",")} track count: ${o.length}`);this.warn(h.message),this.hls.trigger(R.ERROR,{type:_e.MEDIA_ERROR,details:re.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:h})}}}onError(e,t){t.fatal||!t.context||t.context.type===Be.AUDIO_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const i=this.allAudioTracks;if(this.selectDefaultTrack=!1,i.length){const r=this.currentTrack;if(r&&rr(e,r,Xi))return r;const s=wn(e,this.tracksInGroup,Xi);if(s>-1){const a=this.tracksInGroup[s];return this.setAudioTrack(s),a}else if(r){let a=t.loadLevel;a===-1&&(a=t.firstAutoLevel);const o=eB(e,t.levels,i,a,Xi);if(o===-1)return null;t.nextLoadLevel=o}if(e.channels||e.audioCodec){const a=wn(e,i);if(a>-1)return i[a]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length){this.warn(`Invalid audio track id: ${e}`);return}this.selectDefaultTrack=!1;const i=this.currentTrack,r=t[e],s=r.details&&!r.details.live;if(e===this.trackId&&r===i&&s||(this.log(`Switching to audio-track ${e} "${r.name}" lang:${r.lang} group:${r.groupId} channels:${r.channels}`),this.trackId=e,this.currentTrack=r,this.hls.trigger(R.AUDIO_TRACK_SWITCHING,qe({},r)),s))return;const a=this.switchParams(r.url,i?.details,r.details);this.loadPlaylist(a)}findTrackId(e){const t=this.tracksInGroup;for(let i=0;i<t.length;i++){const r=t[i];if(!(this.selectDefaultTrack&&!r.default)&&(!e||rr(e,r,Xi)))return i}if(e){const{name:i,lang:r,assocLang:s,characteristics:a,audioCodec:o,channels:c}=e;for(let l=0;l<t.length;l++){const u=t[l];if(rr({name:i,lang:r,assocLang:s,characteristics:a,audioCodec:o,channels:c},u,Xi))return l}for(let l=0;l<t.length;l++){const u=t[l];if(sa(e.attrs,u.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return l}for(let l=0;l<t.length;l++){const u=t[l];if(sa(e.attrs,u.attrs,["LANGUAGE"]))return l}}return-1}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;this.shouldLoadPlaylist(t)&&yc(t.url,this.hls)&&this.scheduleLoading(t,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const i=e.id,r=e.groupId,s=this.getUrlWithDirectives(e.url,t),a=e.details,o=a?.age;this.log(`Loading audio-track ${i} "${e.name}" lang:${e.lang} group:${r}${t?.msn!==void 0?" at sn "+t.msn+" part "+t.part:""}${o&&a.live?" age "+o.toFixed(1)+(a.type&&" "+a.type||""):""} ${s}`),this.hls.trigger(R.AUDIO_TRACK_LOADING,{url:s,id:i,groupId:r,deliveryDirectives:t||null,track:e})}}class B5{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,t,i){if(this.queues===null||this.tracks===null)return;const r=this.queues[t];r.push(e),r.length===1&&!i&&this.executeNext(t)}appendBlocker(e){return new Promise(t=>{const i={label:"async-blocker",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(i,e)})}prependBlocker(e){return new Promise(t=>{if(this.queues){const i={label:"async-blocker-prepend",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(i)}})}removeBlockers(){this.queues!==null&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var t;const i=(t=e[0])==null?void 0:t.label;(i==="async-blocker"||i==="async-blocker-prepend")&&(e[0].execute(),e.splice(0,1))})}unblockAudio(e){if(this.queues===null)return;this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(this.queues===null||this.tracks===null)return;const t=this.queues[e];if(t.length){const r=t[0];try{r.execute()}catch(s){var i;if(r.onError(s),this.queues===null||this.tracks===null)return;const a=(i=this.tracks[e])==null?void 0:i.buffer;a!=null&&a.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues!==null&&(this.queues[e].shift(),this.executeNext(e))}current(e){var t;return((t=this.queues)==null?void 0:t[e][0])||null}toString(){const{queues:e,tracks:t}=this;return e===null||t===null?"<destroyed>":`
${this.list("video")}
${this.list("audio")}
${this.list("audiovideo")}}`}list(e){var t,i;return(t=this.queues)!=null&&t[e]||(i=this.tracks)!=null&&i[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var t;const i=(t=this.tracks)==null?void 0:t[e],r=i?.buffer;return r?`SourceBuffer${r.updating?" updating":""}${i.ended?" ended":""}${i.ending?" ending":""}`:"none"}listOps(e){var t;return((t=this.queues)==null?void 0:t[e].map(i=>i.label).join(", "))||""}}const H1=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,xE="HlsJsTrackRemovedError";class N5 extends Error{constructor(e){super(e),this.name=xE}}class TE extends an{constructor(e,t){super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=i=>{var r;this.hls&&((r=this.mediaSource)==null?void 0:r.readyState)==="open"&&this.hls.pauseBuffering()},this._onStartStreaming=i=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=i=>{const{media:r,mediaSource:s}=this;i&&this.log("Media source opened"),!(!r||!s)&&(s.removeEventListener("sourceopen",this._onMediaSourceOpen),r.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(R.MEDIA_ATTACHED,{media:r,mediaSource:s}),this.mediaSource!==null&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:i,_objectUrl:r}=this;i!==r&&this.error(`Media element src was set while attaching MediaSource (${r} > ${i})`)},this.hls=e,this.fragmentTracker=t,this.appendSource=p8(ni(e.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on(R.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(R.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(R.MANIFEST_LOADING,this.onManifestLoading,this),e.on(R.MANIFEST_PARSED,this.onManifestParsed,this),e.on(R.BUFFER_RESET,this.onBufferReset,this),e.on(R.BUFFER_APPENDING,this.onBufferAppending,this),e.on(R.BUFFER_CODECS,this.onBufferCodecs,this),e.on(R.BUFFER_EOS,this.onBufferEos,this),e.on(R.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(R.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(R.FRAG_PARSED,this.onFragParsed,this),e.on(R.FRAG_CHANGED,this.onFragChanged,this),e.on(R.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(R.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(R.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(R.MANIFEST_LOADING,this.onManifestLoading,this),e.off(R.MANIFEST_PARSED,this.onManifestParsed,this),e.off(R.BUFFER_RESET,this.onBufferReset,this),e.off(R.BUFFER_APPENDING,this.onBufferAppending,this),e.off(R.BUFFER_CODECS,this.onBufferCodecs,this),e.off(R.BUFFER_EOS,this.onBufferEos,this),e.off(R.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(R.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(R.FRAG_PARSED,this.onFragParsed,this),e.off(R.FRAG_CHANGED,this.onFragChanged,this),e.off(R.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:t}=this;if(!e)return null;const i={};if(this.operationQueue){const s=this.isUpdating();s||this.operationQueue.removeBlockers();const a=this.isQueued();(s||a)&&this.warn(`Transfering MediaSource with${a?" operations in queue":""}${s?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const r=this.transferData;return!this.sourceBufferCount&&r&&r.mediaSource===t?Ke(i,r.tracks):this.sourceBuffers.forEach(s=>{const[a]=s;a&&(i[a]=Ke({},this.tracks[a]),this.removeBuffer(a)),s[0]=s[1]=null}),{media:e,mediaSource:t,tracks:i}}initTracks(){const e={};this.sourceBuffers=[[null,null],[null,null]],this.tracks=e,this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){var i;let r=2;(t.audio&&!t.video||!t.altAudio)&&(r=1),this.bufferCodecEventsTotal=r,this.log(`${r} bufferCodec event(s) expected.`),(i=this.transferData)!=null&&i.mediaSource&&this.sourceBufferCount&&r&&this.bufferCreated()}onMediaAttaching(e,t){const i=this.media=t.media;this.transferData=this.overrides=void 0;const r=ni(this.appendSource);if(r){const s=!!t.mediaSource;(s||t.overrides)&&(this.transferData=t,this.overrides=t.overrides);const a=this.mediaSource=t.mediaSource||new r;if(this.assignMediaSource(a),s)this._objectUrl=i.src,this.attachTransferred();else{const o=this._objectUrl=self.URL.createObjectURL(a);if(this.appendSource)try{i.removeAttribute("src");const c=self.ManagedMediaSource;i.disableRemotePlayback=i.disableRemotePlayback||c&&a instanceof c,q1(i),$5(i,o),i.load()}catch{i.src=o}else i.src=o}i.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var t,i;this.log(`${((t=this.transferData)==null?void 0:t.mediaSource)===e?"transferred":"created"} media source: ${(i=e.constructor)==null?void 0:i.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,t=this.transferData;if(!t||!e)return;const i=this.tracks,r=t.tracks,s=r?Object.keys(r):null,a=s?s.length:0,o=()=>{Promise.resolve().then(()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()})};if(r&&s&&a){if(!this.tracksReady){this.hls.config.startFragPrefetch=!0,this.log("attachTransferred: waiting for SourceBuffer track info");return}if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})
required tracks: ${Ye(i,(c,l)=>c==="initSegment"?void 0:l)};
transfer tracks: ${Ye(r,(c,l)=>c==="initSegment"?void 0:l)}}`),!fD(r,i)){t.mediaSource=null,t.tracks=void 0;const c=e.currentTime,l=this.details,u=Math.max(c,l?.fragments[0].start||0);if(u-c>1){this.log(`attachTransferred: waiting for playback to reach new tracks start time ${c} -> ${u}`);return}this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(r)}"->"${Object.keys(i)}") start time: ${u} currentTime: ${c}`),this.onMediaDetaching(R.MEDIA_DETACHING,{}),this.onMediaAttaching(R.MEDIA_ATTACHING,t),e.currentTime=u;return}this.transferData=void 0,s.forEach(c=>{const l=c,u=r[l];if(u){const d=u.buffer;if(d){const h=this.fragmentTracker,f=u.id;if(h.hasFragments(f)||h.hasParts(f)){const g=ke.getBuffered(d);h.detectEvictedFragments(l,g,f,null,!0)}const p=dd(l),m=[l,d];this.sourceBuffers[p]=m,d.updating&&this.operationQueue&&this.operationQueue.prependBlocker(l),this.trackSourceBuffer(l,u)}}}),o(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),o()}get mediaSourceOpenOrEnded(){var e;const t=(e=this.mediaSource)==null?void 0:e.readyState;return t==="open"||t==="ended"}onMediaDetaching(e,t){const i=!!t.transferMedia;this.transferData=this.overrides=void 0;const{media:r,mediaSource:s,_objectUrl:a}=this;if(s){if(this.log(`media source ${i?"transferring":"detaching"}`),i)this.sourceBuffers.forEach(([o])=>{o&&this.removeBuffer(o)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const o=s.readyState==="open";try{const c=s.sourceBuffers;for(let l=c.length;l--;)o&&c[l].abort(),s.removeSourceBuffer(c[l]);o&&s.endOfStream()}catch(c){this.warn(`onMediaDetaching: ${c.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}s.removeEventListener("sourceopen",this._onMediaSourceOpen),s.removeEventListener("sourceended",this._onMediaSourceEnded),s.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(s.removeEventListener("startstreaming",this._onStartStreaming),s.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}r&&(r.removeEventListener("emptied",this._onMediaEmptied),i||(a&&self.URL.revokeObjectURL(a),this.mediaSrc===a?(r.removeAttribute("src"),this.appendSource&&q1(r),r.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(R.MEDIA_DETACHED,t)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var t;const i=(t=this.tracks[e])==null?void 0:t.buffer;if(this.removeBuffer(e),i)try{var r;(r=this.mediaSource)!=null&&r.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(i)}catch(s){this.warn(`onBufferReset ${e}`,s)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[dd(e)]=[null,null];const t=this.tracks[e];t&&(t.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new B5(this.tracks)}onBufferCodecs(e,t){var i;const r=this.tracks,s=Object.keys(t);this.log(`BUFFER_CODECS: "${s}" (current SB count ${this.sourceBufferCount})`);const a="audiovideo"in t&&(r.audio||r.video)||r.audiovideo&&("audio"in t||"video"in t),o=!a&&this.sourceBufferCount&&this.media&&s.some(c=>!r[c]);if(a||o){this.warn(`Unsupported transition between "${Object.keys(r)}" and "${s}" SourceBuffers`);return}s.forEach(c=>{var l,u;const d=t[c],{id:h,codec:f,levelCodec:p,container:m,metadata:g,supplemental:y}=d;let v=r[c];const b=(l=this.transferData)==null||(l=l.tracks)==null?void 0:l[c],T=b!=null&&b.buffer?b:v,x=T?.pendingCodec||T?.codec,_=T?.levelCodec;v||(v=r[c]={buffer:void 0,listeners:[],codec:f,supplemental:y,container:m,levelCodec:p,metadata:g,id:h});const D=Wo(x,_),w=D?.replace(H1,"$1");let S=Wo(f,p);const C=(u=S)==null?void 0:u.replace(H1,"$1");S&&D&&w!==C&&(c.slice(0,5)==="audio"&&(S=gc(S,this.appendSource)),this.log(`switching codec ${x} to ${S}`),S!==(v.pendingCodec||v.codec)&&(v.pendingCodec=S),v.container=m,this.appendChangeType(c,m,S))}),(this.tracksReady||this.sourceBufferCount)&&(t.tracks=this.sourceBufferTracks),!this.sourceBufferCount&&(this.bufferCodecEventsTotal>1&&!this.tracks.video&&!t.video&&((i=t.audio)==null?void 0:i.id)==="main"&&(this.log("Main audio-only"),this.bufferCodecEventsTotal=1),this.mediaSourceOpenOrEnded&&this.checkPendingTracks())}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,t)=>{const i=this.tracks[t];return e[t]={id:i.id,container:i.container,codec:i.codec,levelCodec:i.levelCodec},e},{})}appendChangeType(e,t,i){const r=`${t};codecs=${i}`,s={label:`change-type=${r}`,execute:()=>{const a=this.tracks[e];if(a){const o=a.buffer;o!=null&&o.changeType&&(this.log(`changing ${e} sourceBuffer type to ${r}`),o.changeType(r),a.codec=i,a.container=t)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:a=>{this.warn(`Failed to change ${e} SourceBuffer type`,a)}};this.append(s,e,this.isPending(this.tracks[e]))}blockAudio(e){var t;const i=e.start,r=i+e.duration*.05;if(((t=this.fragmentTracker.getAppendedFrag(i,xe.MAIN))==null?void 0:t.gap)===!0)return;const a={label:"block-audio",execute:()=>{var o;const c=this.tracks.video;(this.lastVideoAppendEnd>r||c!=null&&c.buffer&&ke.isBuffered(c.buffer,r)||((o=this.fragmentTracker.getAppendedFrag(r,xe.MAIN))==null?void 0:o.gap)===!0)&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:o=>{this.warn("Error executing block-audio operation",o)}};this.blockedAudioAppend={op:a,frag:e},this.append(a,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:t}=this;e&&t&&(this.blockedAudioAppend=null,t.unblockAudio(e.op))}onBufferAppending(e,t){const{tracks:i}=this,{data:r,type:s,parent:a,frag:o,part:c,chunkMeta:l,offset:u}=t,d=l.buffering[s],{sn:h,cc:f}=o,p=self.performance.now();d.start=p;const m=o.stats.buffering,g=c?c.stats.buffering:null;m.start===0&&(m.start=p),g&&g.start===0&&(g.start=p);const y=i.audio;let v=!1;s==="audio"&&y?.container==="audio/mpeg"&&(v=!this.lastMpegAudioChunk||l.id===1||this.lastMpegAudioChunk.sn!==l.sn,this.lastMpegAudioChunk=l);const b=i.video,T=b?.buffer;if(T&&h!=="initSegment"){const D=c||o,w=this.blockedAudioAppend;if(s==="audio"&&a!=="main"&&!this.blockedAudioAppend&&!(b.ending||b.ended)){const C=D.start+D.duration*.05,O=T.buffered,I=this.currentOp("video");!O.length&&!I?this.blockAudio(D):!I&&!ke.isBuffered(T,C)&&this.lastVideoAppendEnd<C&&this.blockAudio(D)}else if(s==="video"){const S=D.end;if(w){const C=w.frag.start;(S>C||S<this.lastVideoAppendEnd||ke.isBuffered(T,C))&&this.unblockAudio()}this.lastVideoAppendEnd=S}}const x=(c||o).start,_={label:`append-${s}`,execute:()=>{var D;d.executeStart=self.performance.now();const w=(D=this.tracks[s])==null?void 0:D.buffer;w&&(v?this.updateTimestampOffset(w,x,.1,s,h,f):u!==void 0&&ye(u)&&this.updateTimestampOffset(w,u,1e-6,s,h,f)),this.appendExecutor(r,s)},onStart:()=>{},onComplete:()=>{const D=self.performance.now();d.executeEnd=d.end=D,m.first===0&&(m.first=D),g&&g.first===0&&(g.first=D);const w={};this.sourceBuffers.forEach(([S,C])=>{S&&(w[S]=ke.getBuffered(C))}),this.appendErrors[s]=0,s==="audio"||s==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(R.BUFFER_APPENDED,{type:s,frag:o,part:c,chunkMeta:l,parent:o.type,timeRanges:w})},onError:D=>{var w;const S={type:_e.MEDIA_ERROR,parent:o.type,details:re.BUFFER_APPEND_ERROR,sourceBufferName:s,frag:o,part:c,chunkMeta:l,error:D,err:D,fatal:!1},C=(w=this.media)==null?void 0:w.error;if(D.code===DOMException.QUOTA_EXCEEDED_ERR||D.name=="QuotaExceededError"||"quota"in D)S.details=re.BUFFER_FULL_ERROR;else if(D.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!C)S.errorAction=Nr(!0);else if(D.name===xE&&this.sourceBufferCount===0)S.errorAction=Nr(!0);else{const O=++this.appendErrors[s];this.warn(`Failed ${O}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${s}" sourceBuffer (${C||"no media error"})`),(O>=this.hls.config.appendErrorMaxRetry||C)&&(S.fatal=!0)}this.hls.trigger(R.ERROR,S)}};this.log(`queuing "${s}" append sn: ${h}${c?" p: "+c.index:""} of ${o.type===xe.MAIN?"level":"track"} ${o.level} cc: ${f}`),this.append(_,s,this.isPending(this.tracks[s]))}getFlushOp(e,t,i){return this.log(`queuing "${e}" remove ${t}-${i}`),{label:"remove",execute:()=>{this.removeExecutor(e,t,i)},onStart:()=>{},onComplete:()=>{this.hls.trigger(R.BUFFER_FLUSHED,{type:e})},onError:r=>{this.warn(`Failed to remove ${t}-${i} from "${e}" SourceBuffer`,r)}}}onBufferFlushing(e,t){const{type:i,startOffset:r,endOffset:s}=t;i?this.append(this.getFlushOp(i,r,s),i):this.sourceBuffers.forEach(([a])=>{a&&this.append(this.getFlushOp(a,r,s),a)})}onFragParsed(e,t){const{frag:i,part:r}=t,s=[],a=r?r.elementaryStreams:i.elementaryStreams;a[Xe.AUDIOVIDEO]?s.push("audiovideo"):(a[Xe.AUDIO]&&s.push("audio"),a[Xe.VIDEO]&&s.push("video"));const o=()=>{const c=self.performance.now();i.stats.buffering.end=c,r&&(r.stats.buffering.end=c);const l=r?r.stats:i.stats;this.hls.trigger(R.FRAG_BUFFERED,{frag:i,part:r,stats:l,id:i.type})};s.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${i.type} level: ${i.level} sn: ${i.sn}`),this.blockBuffers(o,s).catch(c=>{this.warn(`Fragment buffered callback ${c}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,t){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{if(e){const t=this.tracks[e];if(t)return!t.ended||t.ending}return!1})}onBufferEos(e,t){var i;this.sourceBuffers.forEach(([a])=>{if(a){const o=this.tracks[a];(!t.type||t.type===a)&&(o.ending=!0,o.ended||(o.ended=!0,this.log(`${a} buffer reached EOS`)))}});const r=((i=this.overrides)==null?void 0:i.endOfStream)!==!1;this.sourceBufferCount>0&&!this.sourceBuffers.some(([a])=>{var o;return a&&!((o=this.tracks[a])!=null&&o.ended)})?r?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:a}=this;if(!a||a.readyState!=="open"){a&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${a.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),a.endOfStream(),this.hls.trigger(R.BUFFERED_TO_END,void 0)})):(this.tracksEnded(),this.hls.trigger(R.BUFFERED_TO_END,void 0)):t.type==="video"&&this.unblockAudio()}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(e!==null){const t=this.tracks[e];t&&(t.ending=!1)}})}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.updateDuration())}updateDuration(){this.blockUntilOpen(()=>{const e=this.getDurationAndRange();e&&this.updateMediaSource(e)})}onError(e,t){if(t.details===re.BUFFER_APPEND_ERROR&&t.frag){var i;const r=(i=t.errorAction)==null?void 0:i.nextAutoLevel;ye(r)&&r!==t.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:t,media:i}=this;if(!i||t===null||!this.sourceBufferCount)return;const r=e.config,s=i.currentTime,a=t.levelTargetDuration,o=t.live&&r.liveBackBufferLength!==null?r.liveBackBufferLength:r.backBufferLength;if(ye(o)&&o>=0){const l=Math.max(o,a),u=Math.floor(s/a)*a-l;this.flushBackBuffer(s,a,u)}const c=r.frontBufferFlushThreshold;if(ye(c)&&c>0){const l=Math.max(r.maxBufferLength,c),u=Math.max(l,a),d=Math.floor(s/a)*a+u;this.flushFrontBuffer(s,a,d)}}flushBackBuffer(e,t,i){this.sourceBuffers.forEach(([r,s])=>{if(s){const o=ke.getBuffered(s);if(o.length>0&&i>o.start(0)){var a;this.hls.trigger(R.BACK_BUFFER_REACHED,{bufferEnd:i});const c=this.tracks[r];if((a=this.details)!=null&&a.live)this.hls.trigger(R.LIVE_BACK_BUFFER_REACHED,{bufferEnd:i});else if(c!=null&&c.ended){this.log(`Cannot flush ${r} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(R.BUFFER_FLUSHING,{startOffset:0,endOffset:i,type:r})}}})}flushFrontBuffer(e,t,i){this.sourceBuffers.forEach(([r,s])=>{if(s){const a=ke.getBuffered(s),o=a.length;if(o<2)return;const c=a.start(o-1),l=a.end(o-1);if(i>c||e>=c&&e<=l)return;this.hls.trigger(R.BUFFER_FLUSHING,{startOffset:c,endOffset:1/0,type:r})}})}getDurationAndRange(){var e;const{details:t,mediaSource:i}=this;if(!t||!this.media||i?.readyState!=="open")return null;const r=t.edge;if(t.live&&this.hls.config.liveDurationInfinity){if(t.fragments.length&&i.setLiveSeekableRange){const l=Math.max(0,t.fragmentStart),u=Math.max(l,r);return{duration:1/0,start:l,end:u}}return{duration:1/0}}const s=(e=this.overrides)==null?void 0:e.duration;if(s)return ye(s)?{duration:s}:null;const a=this.media.duration,o=ye(i.duration)?i.duration:0;return r>o&&r>a||!ye(a)?{duration:r}:null}updateMediaSource({duration:e,start:t,end:i}){const r=this.mediaSource;!this.media||!r||r.readyState!=="open"||(r.duration!==e&&(ye(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),r.duration=e),t!==void 0&&i!==void 0&&(this.log(`MediaSource duration is set to ${r.duration}. Setting seekable range to ${t}-${i}.`),r.setLiveSeekableRange(t,i)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:t,tracks:i}=this;if(this.log(`checkPendingTracks (pending: ${t} codec events expected: ${e}) ${Ye(i)}`),this.tracksReady){var r;const s=(r=this.transferData)==null?void 0:r.tracks;s&&Object.keys(s).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(([t,i])=>{if(t){const r=this.tracks[t];e[t]={buffer:i,container:r.container,codec:r.codec,supplemental:r.supplemental,levelCodec:r.levelCodec,id:r.id,metadata:r.metadata}}}),this.hls.trigger(R.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([t])=>{this.executeNext(t)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(R.ERROR,{type:_e.MEDIA_ERROR,details:re.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:t,mediaSource:i}=this;if(!i)throw new Error("createSourceBuffers called when mediaSource was null");for(const s in e){const a=s,o=e[a];if(this.isPending(o)){const c=this.getTrackCodec(o,a),l=`${o.container};codecs=${c}`;o.codec=c,this.log(`creating sourceBuffer(${l})${this.currentOp(a)?" Queued":""} ${Ye(o)}`);try{const u=i.addSourceBuffer(l),d=dd(a),h=[a,u];t[d]=h,o.buffer=u}catch(u){var r;this.error(`error while trying to add sourceBuffer: ${u.message}`),this.shiftAndExecuteNext(a),(r=this.operationQueue)==null||r.removeBlockers(),delete this.tracks[a],this.hls.trigger(R.ERROR,{type:_e.MEDIA_ERROR,details:re.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:u,sourceBufferName:a,mimeType:l,parent:o.id});return}this.trackSourceBuffer(a,o)}}this.bufferCreated()}getTrackCodec(e,t){const i=e.supplemental;let r=e.codec;i&&(t==="video"||t==="audiovideo")&&ea(i,"video")&&(r=P8(r,i));const s=Wo(r,e.levelCodec);return s?t.slice(0,5)==="audio"?gc(s,this.appendSource):s:""}trackSourceBuffer(e,t){const i=t.buffer;if(!i)return;const r=this.getTrackCodec(t,e);this.tracks[e]={buffer:i,codec:r,container:t.container,levelCodec:t.levelCodec,supplemental:t.supplemental,metadata:t.metadata,id:t.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(s,a)=>{const o=a.removedRanges;o!=null&&o.length&&this.hls.trigger(R.BUFFER_FLUSHED,{type:s})})}get mediaSrc(){var e,t;const i=((e=this.media)==null||(t=e.querySelector)==null?void 0:t.call(e,"source"))||this.media;return i?.src}onSBUpdateStart(e){const t=this.currentOp(e);t&&t.onStart()}onSBUpdateEnd(e){var t;if(((t=this.mediaSource)==null?void 0:t.readyState)==="closed"){this.resetBuffer(e);return}const i=this.currentOp(e);i&&(i.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,t){var i;const r=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(i=this.mediaSource)==null?void 0:i.readyState}`);this.error(`${r}`,t),this.hls.trigger(R.ERROR,{type:_e.MEDIA_ERROR,details:re.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:r,fatal:!1});const s=this.currentOp(e);s&&s.onError(r)}updateTimestampOffset(e,t,i,r,s,a){const o=t-e.timestampOffset;Math.abs(o)>=i&&(this.log(`Updating ${r} SourceBuffer timestampOffset to ${t} (sn: ${s} cc: ${a})`),e.timestampOffset=t)}removeExecutor(e,t,i){const{media:r,mediaSource:s}=this,a=this.tracks[e],o=a?.buffer;if(!r||!s||!o){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),this.shiftAndExecuteNext(e);return}const c=ye(r.duration)?r.duration:1/0,l=ye(s.duration)?s.duration:1/0,u=Math.max(0,t),d=Math.min(i,c,l);d>u&&(!a.ending||a.ended)?(a.ended=!1,this.log(`Removing [${u},${d}] from the ${e} SourceBuffer`),o.remove(u,d)):this.shiftAndExecuteNext(e)}appendExecutor(e,t){const i=this.tracks[t],r=i?.buffer;if(!r)throw new N5(`Attempting to append to the ${t} SourceBuffer, but it does not exist`);i.ending=!1,i.ended=!1,r.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(t=>{this.warn(`SourceBuffer blocked callback ${t}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(t){this.warn(`Callback run without blocking ${this.operationQueue} ${t}`)}}isUpdating(){return this.sourceBuffers.some(([e,t])=>e&&t.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,t=this.sourceBufferTypes){if(!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:i}=this,r=t.map(a=>this.appendBlocker(a));return t.length>1&&this.blockedAudioAppend&&this.unblockAudio(),Promise.all(r).then(a=>{i===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(t=>{var i;const r=(i=this.tracks[t])==null?void 0:i.buffer;!r||r.updating||this.shiftAndExecuteNext(t)})}append(e,t,i){this.operationQueue&&this.operationQueue.append(e,t,i)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,t)=>e+(this.isPending(this.tracks[t])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[t])=>e+(t?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,t,i){const r=this.tracks[e];if(!r)return;const s=r.buffer;if(!s)return;const a=i.bind(this,e);r.listeners.push({event:t,listener:a}),s.addEventListener(t,a)}removeBufferListeners(e){const t=this.tracks[e];if(!t)return;const i=t.buffer;i&&(t.listeners.forEach(r=>{i.removeEventListener(r.event,r.listener)}),t.listeners.length=0)}}function q1(n){const e=n.querySelectorAll("source");[].slice.call(e).forEach(t=>{n.removeChild(t)})}function $5(n,e){const t=self.document.createElement("source");t.type="video/mp4",t.src=e,n.appendChild(t)}function dd(n){return n==="audio"?1:0}class gl{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(R.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(R.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(R.MANIFEST_PARSED,this.onManifestParsed,this),e.on(R.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(R.BUFFER_CODECS,this.onBufferCodecs,this),e.on(R.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(R.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(R.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(R.MANIFEST_PARSED,this.onManifestParsed,this),e.off(R.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(R.BUFFER_CODECS,this.onBufferCodecs,this),e.off(R.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const i=this.hls.levels[t.droppedLevel];this.isLevelAllowed(i)&&this.restrictedLevels.push({bitrate:i.bitrate,height:i.height,width:i.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const i=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,i.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&ye(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const t=this.hls,i=this.getMaxLevel(e.length-1);i!==this.autoLevelCapping&&t.logger.log(`Setting autoLevelCapping to ${i}: ${e[i].height}p@${e[i].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=i,t.autoLevelEnabled&&t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const i=t.filter((r,s)=>this.isLevelAllowed(r)&&s<=e);return this.clientRect=null,gl.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const i=e.getBoundingClientRect();t.width=i.width,t.height=i.height,!t.width&&!t.height&&(t.width=i.right-i.left||e.width||0,t.height=i.bottom-i.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(i=>e.bitrate===i.bitrate&&e.width===i.width&&e.height===i.height)}static getMaxLevelByMediaSize(e,t,i){if(!(e!=null&&e.length))return-1;const r=(o,c)=>c?o.width!==c.width||o.height!==c.height:!0;let s=e.length-1;const a=Math.max(t,i);for(let o=0;o<e.length;o+=1){const c=e[o];if((c.width>=a||c.height>=a)&&r(c,e[o+1])){s=o;break}}return s}}const W5={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},Ot=W5,V5={HLS:"h"},G5=V5;class Un{constructor(e,t){Array.isArray(e)&&(e=e.map(i=>i instanceof Un?i:new Un(i))),this.value=e,this.params=t}}const H5="Dict";function q5(n){return Array.isArray(n)?JSON.stringify(n):n instanceof Map?"Map{}":n instanceof Set?"Set{}":typeof n=="object"?JSON.stringify(n):String(n)}function j5(n,e,t,i){return new Error(`failed to ${n} "${q5(e)}" as ${t}`,{cause:i})}function kn(n,e,t){return j5("serialize",n,e,t)}class _E{constructor(e){this.description=e}}const j1="Bare Item",K5="Boolean";function z5(n){if(typeof n!="boolean")throw kn(n,K5);return n?"?1":"?0"}function X5(n){return btoa(String.fromCharCode(...n))}const Y5="Byte Sequence";function Q5(n){if(ArrayBuffer.isView(n)===!1)throw kn(n,Y5);return`:${X5(n)}:`}const Z5="Integer";function J5(n){return n<-999999999999999||999999999999999<n}function DE(n){if(J5(n))throw kn(n,Z5);return n.toString()}function eN(n){return`@${DE(n.getTime()/1e3)}`}function EE(n,e){if(n<0)return-EE(-n,e);const t=Math.pow(10,e);if(Math.abs(n*t%1-.5)<Number.EPSILON){const r=Math.floor(n*t);return(r%2===0?r:r+1)/t}else return Math.round(n*t)/t}const tN="Decimal";function nN(n){const e=EE(n,3);if(Math.floor(Math.abs(e)).toString().length>12)throw kn(n,tN);const t=e.toString();return t.includes(".")?t:`${t}.0`}const iN="String",rN=/[\x00-\x1f\x7f]+/;function sN(n){if(rN.test(n))throw kn(n,iN);return`"${n.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function aN(n){return n.description||n.toString().slice(7,-1)}const oN="Token";function K1(n){const e=aN(n);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw kn(e,oN);return e}function Sh(n){switch(typeof n){case"number":if(!ye(n))throw kn(n,j1);return Number.isInteger(n)?DE(n):nN(n);case"string":return sN(n);case"symbol":return K1(n);case"boolean":return z5(n);case"object":if(n instanceof Date)return eN(n);if(n instanceof Uint8Array)return Q5(n);if(n instanceof _E)return K1(n);default:throw kn(n,j1)}}const cN="Key";function Ah(n){if(/^[a-z*][a-z0-9\-_.*]*$/.test(n)===!1)throw kn(n,cN);return n}function Hp(n){return n==null?"":Object.entries(n).map(([e,t])=>t===!0?`;${Ah(e)}`:`;${Ah(e)}=${Sh(t)}`).join("")}function SE(n){return n instanceof Un?`${Sh(n.value)}${Hp(n.params)}`:Sh(n)}function lN(n){return`(${n.value.map(SE).join(" ")})${Hp(n.params)}`}function uN(n,e={whitespace:!0}){if(typeof n!="object"||n==null)throw kn(n,H5);const t=n instanceof Map?n.entries():Object.entries(n),i=e?.whitespace?" ":"";return Array.from(t).map(([r,s])=>{s instanceof Un||(s=new Un(s));let a=Ah(r);return s.value===!0?a+=Hp(s.params):(a+="=",Array.isArray(s.value)?a+=lN(s):a+=SE(s)),a}).join(`,${i}`)}function AE(n,e){return uN(n,e)}const _n="CMCD-Object",at="CMCD-Request",qi="CMCD-Session",ui="CMCD-Status",dN={br:_n,ab:_n,d:_n,ot:_n,tb:_n,tpb:_n,lb:_n,tab:_n,lab:_n,url:_n,pb:at,bl:at,tbl:at,dl:at,ltc:at,mtp:at,nor:at,nrr:at,rc:at,sn:at,sta:at,su:at,ttfb:at,ttfbb:at,ttlb:at,cmsdd:at,cmsds:at,smrt:at,df:at,cs:at,ts:at,cid:qi,pr:qi,sf:qi,sid:qi,st:qi,v:qi,msd:qi,bs:ui,bsd:ui,cdn:ui,rtp:ui,bg:ui,pt:ui,ec:ui,e:ui},hN={REQUEST:at};function fN(n){return Object.keys(n).reduce((e,t)=>{var i;return(i=n[t])===null||i===void 0||i.forEach(r=>e[r]=t),e},{})}function pN(n,e){const t={};if(!n)return t;const i=Object.keys(n),r=e?fN(e):{};return i.reduce((s,a)=>{var o;const c=dN[a]||r[a]||hN.REQUEST,l=(o=s[c])!==null&&o!==void 0?o:s[c]={};return l[a]=n[a],s},t)}function gN(n){return["ot","sf","st","e","sta"].includes(n)}function mN(n){return typeof n=="number"?ye(n):n!=null&&n!==""&&n!==!1}const wE="event";function yN(n,e){const t=new URL(n),i=new URL(e);if(t.origin!==i.origin)return n;const r=t.pathname.split("/").slice(1),s=i.pathname.split("/").slice(1,-1);for(;r[0]===s[0];)r.shift(),s.shift();for(;s.length;)s.shift(),r.unshift("..");return r.join("/")+t.search+t.hash}const qo=n=>Math.round(n),wh=(n,e)=>Array.isArray(n)?n.map(t=>wh(t,e)):n instanceof Un&&typeof n.value=="string"?new Un(wh(n.value,e),n.params):(e.baseUrl&&(n=yN(n,e.baseUrl)),e.version===1?encodeURIComponent(n):n),Za=n=>qo(n/100)*100,vN=(n,e)=>{let t=n;return e.version>=2&&(n instanceof Un&&typeof n.value=="string"?t=new Un([n]):typeof n=="string"&&(t=[n])),wh(t,e)},bN={br:qo,d:qo,bl:Za,dl:Za,mtp:Za,nor:vN,rtp:Za,tb:qo},IE="request",CE="response",qp=["ab","bg","bl","br","bs","bsd","cdn","cid","cs","df","ec","lab","lb","ltc","msd","mtp","pb","pr","pt","sf","sid","sn","st","sta","tab","tb","tbl","tpb","ts","v"],xN=["e"],TN=/^[a-zA-Z0-9-.]+-[a-zA-Z0-9-.]+$/;function ml(n){return TN.test(n)}function _N(n){return qp.includes(n)||xN.includes(n)||ml(n)}const RE=["d","dl","nor","ot","rtp","su"];function DN(n){return qp.includes(n)||RE.includes(n)||ml(n)}const EN=["cmsdd","cmsds","rc","smrt","ttfb","ttfbb","ttlb","url"];function SN(n){return qp.includes(n)||RE.includes(n)||EN.includes(n)||ml(n)}const AN=["bl","br","bs","cid","d","dl","mtp","nor","nrr","ot","pr","rtp","sf","sid","st","su","tb","v"];function wN(n){return AN.includes(n)||ml(n)}const IN={[CE]:SN,[wE]:_N,[IE]:DN};function LE(n,e={}){const t={};if(n==null||typeof n!="object")return t;const i=e.version||n.v||1,r=e.reportingMode||IE,s=i===1?wN:IN[r];let a=Object.keys(n).filter(s);const o=e.filter;typeof o=="function"&&(a=a.filter(o));const c=r===CE||r===wE;c&&!a.includes("ts")&&a.push("ts"),i>1&&!a.includes("v")&&a.push("v");const l=Ke({},bN,e.formatters),u={version:i,reportingMode:r,baseUrl:e.baseUrl};return a.sort().forEach(d=>{let h=n[d];const f=l[d];if(typeof f=="function"&&(h=f(h,u)),d==="v"){if(i===1)return;h=i}d=="pr"&&h===1||(c&&d==="ts"&&!ye(h)&&(h=Date.now()),mN(h)&&(gN(d)&&typeof h=="string"&&(h=new _E(h)),t[d]=h))}),t}function CN(n,e={}){const t={};if(!n)return t;const i=LE(n,e),r=pN(i,e?.customHeaderMap);return Object.entries(r).reduce((s,[a,o])=>{const c=AE(o,{whitespace:!1});return c&&(s[a]=c),s},t)}function RN(n,e,t){return Ke(n,CN(e,t))}const LN="CMCD";function UN(n,e={}){return n?AE(LE(n,e),{whitespace:!1}):""}function kN(n,e={}){if(!n)return"";const t=UN(n,e);return encodeURIComponent(t)}function FN(n,e={}){if(!n)return"";const t=kN(n,e);return`${LN}=${t}`}const z1=/CMCD=[^&#]+/;function PN(n,e,t){const i=FN(e,t);if(!i)return n;if(z1.test(n))return n.replace(z1,i);const r=n.includes("?")?"&":"?";return`${n}${r}${i}`}class UE{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=r=>{try{this.apply(r,{ot:Ot.MANIFEST,su:!this.initialized})}catch(s){this.hls.logger.warn("Could not generate manifest CMCD data.",s)}},this.applyFragmentData=r=>{try{const{frag:s,part:a}=r,o=this.hls.levels[s.level],c=this.getObjectType(s),l={d:(a||s).duration*1e3,ot:c};(c===Ot.VIDEO||c===Ot.AUDIO||c==Ot.MUXED)&&(l.br=o.bitrate/1e3,l.tb=this.getTopBandwidth(c)/1e3,l.bl=this.getBufferLength(c));const u=a?this.getNextPart(a):this.getNextFrag(s);u!=null&&u.url&&u.url!==s.url&&(l.nor=u.url),this.apply(r,l)}catch(s){this.hls.logger.warn("Could not generate segment CMCD data.",s)}},this.hls=e;const t=this.config=e.config,{cmcd:i}=t;i!=null&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=i.sessionId||e.sessionId,this.cid=i.contentId,this.useHeaders=i.useHeaders===!0,this.includeKeys=i.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(R.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(R.MEDIA_DETACHED,this.onMediaDetached,this),e.on(R.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(R.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(R.MEDIA_DETACHED,this.onMediaDetached,this),e.off(R.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var i,r;this.audioBuffer=(i=t.tracks.audio)==null?void 0:i.buffer,this.videoBuffer=(r=t.tracks.video)==null?void 0:r.buffer}createData(){var e;return{v:1,sf:G5.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){Ke(t,this.createData());const i=t.ot===Ot.INIT||t.ot===Ot.VIDEO||t.ot===Ot.MUXED;this.starved&&i&&(t.bs=!0,t.su=!0,this.starved=!1),t.su==null&&(t.su=this.buffering);const{includeKeys:r}=this;r&&(t=Object.keys(t).reduce((a,o)=>(r.includes(o)&&(a[o]=t[o]),a),{}));const s={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),RN(e.headers,t,s)):e.url=PN(e.url,t,s)}getNextFrag(e){var t;const i=(t=this.hls.levels[e.level])==null?void 0:t.details;if(i){const r=e.sn-i.startSN;return i.fragments[r+1]}}getNextPart(e){var t;const{index:i,fragment:r}=e,s=(t=this.hls.levels[r.level])==null||(t=t.details)==null?void 0:t.partList;if(s){const{sn:a}=r;for(let o=s.length-1;o>=0;o--){const c=s[o];if(c.index===i&&c.fragment.sn===a)return s[o+1]}}}getObjectType(e){const{type:t}=e;if(t==="subtitle")return Ot.TIMED_TEXT;if(e.sn==="initSegment")return Ot.INIT;if(t==="audio")return Ot.AUDIO;if(t==="main")return this.hls.audioTracks.length?Ot.VIDEO:Ot.MUXED}getTopBandwidth(e){let t=0,i;const r=this.hls;if(e===Ot.AUDIO)i=r.audioTracks;else{const s=r.maxAutoLevel,a=s>-1?s+1:r.levels.length;i=r.levels.slice(0,a)}return i.forEach(s=>{s.bitrate>t&&(t=s.bitrate)}),t>0?t:NaN}getBufferLength(e){const t=this.media,i=e===Ot.AUDIO?this.audioBuffer:this.videoBuffer;return!i||!t?NaN:ke.bufferInfo(i,t.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,i=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new i(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,a,o){t(s),this.loader.load(s,a,o)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,i=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new i(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,a,o){t(s),this.loader.load(s,a,o)}}}}const ON=3e5;class kE extends an{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(R.MANIFEST_LOADING,this.onManifestLoading,this),e.on(R.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(R.MANIFEST_PARSED,this.onManifestParsed,this),e.on(R.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(R.MANIFEST_LOADING,this.onManifestLoading,this),e.off(R.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(R.MANIFEST_PARSED,this.onManifestParsed,this),e.off(R.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,t)=>(e.indexOf(t.pathwayId)===-1&&e.push(t.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter(i=>i!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:i}=t;i!==null&&(this.pathwayId=i.pathwayId,this.uri=i.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:i}=t;if(i?.action===bt.SendAlternateToPenaltyBox&&i.flags===Mt.MoveAllAlternatesMatchingHost){const r=this.levels;let s=this._pathwayPriority,a=this.pathwayId;if(t.context){const{groupId:o,pathwayId:c,type:l}=t.context;o&&r?a=this.getPathwayForGroupId(o,l,a):c&&(a=c)}a in this.penalizedPathways||(this.penalizedPathways[a]=performance.now()),!s&&r&&(s=this.pathways()),s&&s.length>1&&(this.updatePathwayPriority(s),i.resolved=this.pathwayId!==a),t.details===re.BUFFER_APPEND_ERROR&&!t.fatal?i.resolved=!0:i.resolved||this.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${a} levels: ${r&&r.length} priorities: ${Ye(s)} penalized: ${Ye(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(t.length===0){const i=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${i}"`),t=this.getLevelsForPathway(i),this.pathwayId=i}return t.length!==e.length&&this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){this._pathwayPriority=e;let t;const i=this.penalizedPathways,r=performance.now();Object.keys(i).forEach(s=>{r-i[s]>ON&&delete i[s]});for(let s=0;s<e.length;s++){const a=e[s];if(a in i)continue;if(a===this.pathwayId)return;const o=this.hls.nextLoadLevel,c=this.hls.levels[o];if(t=this.getLevelsForPathway(a),t.length>0){this.log(`Setting Pathway to "${a}"`),this.pathwayId=a,zD(t),this.hls.trigger(R.LEVELS_UPDATED,{levels:t});const l=this.hls.levels[o];c&&l&&this.levels&&(l.attrs["STABLE-VARIANT-ID"]!==c.attrs["STABLE-VARIANT-ID"]&&l.bitrate!==c.bitrate&&this.log(`Unstable Pathways change from bitrate ${c.bitrate} to ${l.bitrate}`),this.hls.nextLoadLevel=o);break}}}getPathwayForGroupId(e,t,i){const r=this.getLevelsForPathway(i).concat(this.levels||[]);for(let s=0;s<r.length;s++)if(t===Be.AUDIO_TRACK&&r[s].hasAudioGroup(e)||t===Be.SUBTITLE_TRACK&&r[s].hasSubtitleGroup(e))return r[s].pathwayId;return i}clonePathways(e){const t=this.levels;if(!t)return;const i={},r={};e.forEach(s=>{const{ID:a,"BASE-ID":o,"URI-REPLACEMENT":c}=s;if(t.some(u=>u.pathwayId===a))return;const l=this.getLevelsForPathway(o).map(u=>{const d=new tt(u.attrs);d["PATHWAY-ID"]=a;const h=d.AUDIO&&`${d.AUDIO}_clone_${a}`,f=d.SUBTITLES&&`${d.SUBTITLES}_clone_${a}`;h&&(i[d.AUDIO]=h,d.AUDIO=h),f&&(r[d.SUBTITLES]=f,d.SUBTITLES=f);const p=FE(u.uri,d["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",c),m=new Yr({attrs:d,audioCodec:u.audioCodec,bitrate:u.bitrate,height:u.height,name:u.name,url:p,videoCodec:u.videoCodec,width:u.width});if(u.audioGroups)for(let g=1;g<u.audioGroups.length;g++)m.addGroupId("audio",`${u.audioGroups[g]}_clone_${a}`);if(u.subtitleGroups)for(let g=1;g<u.subtitleGroups.length;g++)m.addGroupId("text",`${u.subtitleGroups[g]}_clone_${a}`);return m});t.push(...l),X1(this.audioTracks,i,c,a),X1(this.subtitleTracks,r,c,a)})}loadSteeringManifest(e){const t=this.hls.config,i=t.loader;this.loader&&this.loader.destroy(),this.loader=new i(t);let r;try{r=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(r.protocol!=="data:"){const u=(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate)|0;r.searchParams.set("_HLS_pathway",this.pathwayId),r.searchParams.set("_HLS_throughput",""+u)}const s={responseType:"json",url:r.href},a=t.steeringManifestLoadPolicy.default,o=a.errorRetry||a.timeoutRetry||{},c={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},l={onSuccess:(u,d,h,f)=>{this.log(`Loaded steering manifest: "${r}"`);const p=u.data;if(p?.VERSION!==1){this.log(`Steering VERSION ${p.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=p.TTL;const{"RELOAD-URI":m,"PATHWAY-CLONES":g,"PATHWAY-PRIORITY":y}=p;if(m)try{this.uri=new self.URL(m,r).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${m}`);return}this.scheduleRefresh(this.uri||h.url),g&&this.clonePathways(g);const v={steeringManifest:p,url:r.toString()};this.hls.trigger(R.STEERING_MANIFEST_LOADED,v),y&&this.updatePathwayPriority(y)},onError:(u,d,h,f)=>{if(this.log(`Error loading steering manifest: ${u.code} ${u.text} (${d.url})`),this.stopLoad(),u.code===410){this.enabled=!1,this.log(`Steering manifest ${d.url} no longer available`);return}let p=this.timeToLoad*1e3;if(u.code===429){const m=this.loader;if(typeof m?.getResponseHeader=="function"){const g=m.getResponseHeader("Retry-After");g&&(p=parseFloat(g)*1e3)}this.log(`Steering manifest ${d.url} rate limited`);return}this.scheduleRefresh(this.uri||d.url,p)},onTimeout:(u,d,h)=>{this.log(`Timeout loading steering manifest (${d.url})`),this.scheduleRefresh(this.uri||d.url)}};this.log(`Requesting steering manifest: ${r}`),this.loader.load(s,c,l)}scheduleRefresh(e,t=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var i;const r=(i=this.hls)==null?void 0:i.media;if(r&&!r.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},t)}}function X1(n,e,t,i){n&&Object.keys(e).forEach(r=>{const s=n.filter(a=>a.groupId===r).map(a=>{const o=Ke({},a);return o.details=void 0,o.attrs=new tt(o.attrs),o.url=o.attrs.URI=FE(a.url,a.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",t),o.groupId=o.attrs["GROUP-ID"]=e[r],o.attrs["PATHWAY-ID"]=i,o});n.push(...s)})}function FE(n,e,t,i){const{HOST:r,PARAMS:s,[t]:a}=i;let o;e&&(o=a?.[e],o&&(n=o));const c=new self.URL(n);return r&&!o&&(c.host=r),s&&Object.keys(s).sort().forEach(l=>{l&&c.searchParams.set(l,s[l])}),c.href}class sr extends an{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.mediaResolved=void 0,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=sr.CDMCleanupPromise?[sr.CDMCleanupPromise]:[],this.bannedKeyIds={},this.onMediaEncrypted=t=>{const{initDataType:i,initData:r}=t,s=`"${t.type}" event: init data type: "${i}"`;if(this.debug(s),r!==null){if(!this.keyFormatPromise){let a=Object.keys(this.keySystemAccessPromises);a.length||(a=_s(this.config));const o=a.map(id).filter(c=>!!c);this.keyFormatPromise=this.getKeyFormatPromise(o)}this.keyFormatPromise.then(a=>{const o=Vo(a);if(i!=="sinf"||o!==nt.FAIRPLAY){this.log(`Ignoring "${t.type}" event with init data type: "${i}" for selected key-system ${o}`);return}let c;try{const f=pt(new Uint8Array(r)),p=Pp(JSON.parse(f).sinf),m=_D(p);if(!m)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");c=new Uint8Array(m.subarray(8,24))}catch(f){this.warn(`${s} Failed to parse sinf: ${f}`);return}const l=Dt(c),{keyIdToKeySessionPromise:u,mediaKeySessions:d}=this;let h=u[l];for(let f=0;f<d.length;f++){const p=d[f],m=p.decryptdata;if(!m.keyId)continue;const g=Dt(m.keyId);if(xc(c,m.keyId)||m.uri.replace(/-/g,"").indexOf(l)!==-1){if(h=u[g],!h)continue;if(m.pssh)break;delete u[g],m.pssh=new Uint8Array(r),m.keyId=c,h=u[l]=h.then(()=>this.generateRequestWithPreferredKeySession(p,i,r,"encrypted-event-key-match")),h.catch(y=>this.handleError(y));break}}h||this.handleError(new Error(`Key ID ${l} not encountered in playlist. Key-system sessions ${d.length}.`))}).catch(a=>this.handleError(a))}},this.onWaitingForKey=t=>{this.log(`"${t.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(R.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(R.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(R.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(R.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(R.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(R.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(R.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(R.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(R.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(R.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:i}=this.config,r=t?.[e];if(r)return r.licenseUrl;if(e===nt.WIDEVINE&&i)return i}getLicenseServerUrlOrThrow(e){const t=this.getLicenseServerUrl(e);if(t===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return t}getServerCertificateUrl(e){const{drmSystems:t}=this.config,i=t?.[e];if(i)return i.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,i=(a,o,c)=>!!a&&c.indexOf(a)===o,r=t.map(a=>a.audioCodec).filter(i),s=t.map(a=>a.videoCodec).filter(i);return r.length+s.length===0&&s.push("avc1.42e01e"),new Promise((a,o)=>{const c=l=>{const u=l.shift();this.getMediaKeysPromise(u,r,s).then(d=>a({keySystem:u,mediaKeys:d})).catch(d=>{l.length?c(l):d instanceof Ht?o(d):o(new Ht({type:_e.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_NO_ACCESS,error:d,fatal:!0},d.message))})};c(e)})}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:i}=this.config;if(typeof i!="function"){let r=`Configured requestMediaKeySystemAccess is not a function ${i}`;return Op===null&&self.location.protocol==="http:"&&(r=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(r))}return i(e,t)}getMediaKeysPromise(e,t,i){var r;const s=TB(e,t,i,this.config.drmSystemOptions||{});let a=this.keySystemAccessPromises[e],o=(r=a)==null?void 0:r.keySystemAccess;if(!o){this.log(`Requesting encrypted media "${e}" key-system access with config: ${Ye(s)}`),o=this.requestMediaKeySystemAccess(e,s);const c=a=this.keySystemAccessPromises[e]={keySystemAccess:o};return o.catch(l=>{this.log(`Failed to obtain access to key-system "${e}": ${l}`)}),o.then(l=>{this.log(`Access for key-system "${l.keySystem}" obtained`);const u=this.fetchServerCertificate(e);this.log(`Create media-keys for "${e}"`);const d=c.mediaKeys=l.createMediaKeys().then(h=>(this.log(`Media-keys created for "${e}"`),c.hasMediaKeys=!0,u.then(f=>f?this.setMediaKeysServerCertificate(h,e,f):h)));return d.catch(h=>{this.error(`Failed to create media-keys for "${e}"}: ${h}`)}),d})}return o.then(()=>a.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:i}){this.log(`Creating key-system session "${t}" keyId: ${Dt(e.keyId||[])} keyUri: ${e.uri}`);const r=i.createSession(),s={decryptdata:e,keySystem:t,mediaKeys:i,mediaKeysSession:r,keyStatus:"status-pending"};return this.mediaKeySessions.push(s),s}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const i=this.createMediaKeySessionContext(e),r=Ja(t),s="cenc";this.keyIdToKeySessionPromise[r]=this.generateRequestWithPreferredKeySession(i,s,t.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}updateKeySession(e,t){const i=e.mediaKeysSession;return this.log(`Updating key-session "${i.sessionId}" for keyId ${Dt(e.decryptdata.keyId||[])}
      } (data length: ${t.byteLength})`),i.update(t)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(e=>({keySystem:e,hasMediaKeys:this.keySystemAccessPromises[e].hasMediaKeys})).filter(({hasMediaKeys:e})=>!!e).map(({keySystem:e})=>id(e)).filter(e=>!!e)}getKeySystemAccess(e){return this.getKeySystemSelectionPromise(e).then(({keySystem:t,mediaKeys:i})=>this.attemptSetMediaKeys(t,i))}selectKeySystem(e){return new Promise((t,i)=>{this.getKeySystemSelectionPromise(e).then(({keySystem:r})=>{const s=id(r);s?t(s):i(new Error(`Unable to find format for key-system "${r}"`))}).catch(i)})}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){const t=_s(this.config),i=e.map(Vo).filter(r=>!!r&&t.indexOf(r)!==-1);return this.selectKeySystem(i)}getKeyStatus(e){const{mediaKeySessions:t}=this;for(let i=0;i<t.length;i++){const r=MN(e,t[i]);if(r)return r}}loadKey(e){const t=e.keyInfo.decryptdata,i=Ja(t),r=this.bannedKeyIds[i];if(r||this.getKeyStatus(t)==="internal-error"){const o=Y1(r||"internal-error",t);return this.handleError(o,e.frag),Promise.reject(o)}const s=`(keyId: ${i} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${s}`);const a=this.keyIdToKeySessionPromise[i];if(!a){const o=this.getKeySystemForKeyPromise(t).then(({keySystem:c,mediaKeys:l})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${s}`),this.attemptSetMediaKeys(c,l).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:c,mediaKeys:l,decryptdata:t}))))).then(c=>{const l="cenc",u=t.pssh?t.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(c,l,u,"playlist-key")});return o.catch(c=>this.handleError(c,e.frag)),this.keyIdToKeySessionPromise[i]=o,o}return a.catch(o=>{if(o instanceof Ht){const c=qe({},o.data);this.getKeyStatus(t)==="internal-error"&&(c.decryptdata=t);const l=new Ht(c,o.message);this.handleError(l,e.frag)}}),a}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e,t){if(this.hls)if(e instanceof Ht){t&&(e.data.frag=t);const i=e.data.decryptdata;this.error(`${e.message}${i?` (${Dt(i.keyId||[])})`:""}`),this.hls.trigger(R.ERROR,e.data)}else this.error(e.message),this.hls.trigger(R.ERROR,{type:_e.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0})}getKeySystemForKeyPromise(e){const t=Ja(e),i=this.keyIdToKeySessionPromise[t];if(!i){const r=Vo(e.keyFormat),s=r?[r]:_s(this.config);return this.attemptKeySystemAccess(s)}return i}getKeySystemSelectionPromise(e){if(e.length||(e=_s(this.config)),e.length===0)throw new Ht({type:_e.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${Ye({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,t){if(this.mediaResolved=void 0,this.mediaKeys===t)return Promise.resolve();const i=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const r=Promise.all(i).then(()=>this.media?this.media.setMediaKeys(t):new Promise((s,a)=>{this.mediaResolved=()=>{if(this.mediaResolved=void 0,!this.media)return a(new Error("Attempted to set mediaKeys without media element attached"));this.mediaKeys=t,this.media.setMediaKeys(t).then(s).catch(a)}}));return this.mediaKeys=t,this.setMediaKeysQueue.push(r),r.then(()=>{this.log(`Media-keys set for "${e}"`),i.push(r),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(s=>i.indexOf(s)===-1)})}generateRequestWithPreferredKeySession(e,t,i,r){var s;const a=(s=this.config.drmSystems)==null||(s=s[e.keySystem])==null?void 0:s.generateRequest;if(a)try{const p=a.call(this.hls,t,i,e);if(!p)throw new Error("Invalid response from configured generateRequest filter");t=p.initDataType,i=p.initData?p.initData:null,e.decryptdata.pssh=i?new Uint8Array(i):null}catch(p){if(this.warn(p.message),this.hls&&this.hls.config.debug)throw p}if(i===null)return this.log(`Skipping key-session request for "${r}" (no initData)`),Promise.resolve(e);const o=Ja(e.decryptdata),c=e.decryptdata.uri;this.log(`Generating key-session request for "${r}" keyId: ${o} URI: ${c} (init data type: ${t} length: ${i.byteLength})`);const l=new Mp,u=e._onmessage=p=>{const m=e.mediaKeysSession;if(!m){l.emit("error",new Error("invalid state"));return}const{messageType:g,message:y}=p;this.log(`"${g}" message event for session "${m.sessionId}" message size: ${y.byteLength}`),g==="license-request"||g==="license-renewal"?this.renewLicense(e,y).catch(v=>{l.eventNames().length?l.emit("error",v):this.handleError(v)}):g==="license-release"?e.keySystem===nt.FAIRPLAY&&this.updateKeySession(e,bh("acknowledged")).then(()=>this.removeSession(e)).catch(v=>this.handleError(v)):this.warn(`unhandled media key message type "${g}"`)},d=(p,m)=>{m.keyStatus=p;let g;p.startsWith("usable")?l.emit("resolved"):p==="internal-error"||p==="output-restricted"||p==="output-downscaled"?g=Y1(p,m.decryptdata):p==="expired"?g=new Error(`key expired (keyId: ${o})`):p==="released"?g=new Error("key released"):p==="status-pending"||this.warn(`unhandled key status change "${p}" (keyId: ${o})`),g&&(l.eventNames().length?l.emit("error",g):this.handleError(g))},h=e._onkeystatuseschange=p=>{if(!e.mediaKeysSession){l.emit("error",new Error("invalid state"));return}const g=this.getKeyStatuses(e);if(!Object.keys(g).some(T=>g[T]!=="status-pending"))return;if(g[o]==="expired"){this.log(`Expired key ${Ye(g)} in key-session "${e.mediaKeysSession.sessionId}"`),this.renewKeySession(e);return}let v=g[o];if(v)d(v,e);else{var b;e.keyStatusTimeouts||(e.keyStatusTimeouts={}),(b=e.keyStatusTimeouts)[o]||(b[o]=self.setTimeout(()=>{if(!e.mediaKeysSession||!this.mediaKeys)return;const x=this.getKeyStatus(e.decryptdata);if(x&&x!=="status-pending")return this.log(`No status for keyId ${o} in key-session "${e.mediaKeysSession.sessionId}". Using session key-status ${x} from other session.`),d(x,e);this.log(`key status for ${o} in key-session "${e.mediaKeysSession.sessionId}" timed out after 1000ms`),v="internal-error",d(v,e)},1e3)),this.log(`No status for keyId ${o} (${Ye(g)}).`)}};Ut(e.mediaKeysSession,"message",u),Ut(e.mediaKeysSession,"keystatuseschange",h);const f=new Promise((p,m)=>{l.on("error",m),l.on("resolved",p)});return e.mediaKeysSession.generateRequest(t,i).then(()=>{this.log(`Request generated for key-session "${e.mediaKeysSession.sessionId}" keyId: ${o} URI: ${c}`)}).catch(p=>{throw new Ht({type:_e.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_NO_SESSION,error:p,decryptdata:e.decryptdata,fatal:!1},`Error generating key-session request: ${p}`)}).then(()=>f).catch(p=>(l.removeAllListeners(),this.removeSession(e).then(()=>{throw p}))).then(()=>(l.removeAllListeners(),e))}getKeyStatuses(e){const t={};return e.mediaKeysSession.keyStatuses.forEach((i,r)=>{if(typeof r=="string"&&typeof i=="object"){const o=r;r=i,i=o}const s="buffer"in r?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):new Uint8Array(r);if(e.keySystem===nt.PLAYREADY&&s.length===16){const o=Dt(s);t[o]=i,ND(s)}const a=Dt(s);i==="internal-error"&&(this.bannedKeyIds[a]=i),this.log(`key status change "${i}" for keyStatuses keyId: ${a} key-session "${e.mediaKeysSession.sessionId}"`),t[a]=i}),t}fetchServerCertificate(e){const t=this.config,i=t.loader,r=new i(t),s=this.getServerCertificateUrl(e);return s?(this.log(`Fetching server certificate for "${e}"`),new Promise((a,o)=>{const c={responseType:"arraybuffer",url:s},l=t.certLoadPolicy.default,u={loadPolicy:l,timeout:l.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(h,f,p,m)=>{a(h.data)},onError:(h,f,p,m)=>{o(new Ht({type:_e.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:p,response:qe({url:c.url,data:void 0},h)},`"${e}" certificate request failed (${s}). Status: ${h.code} (${h.text})`))},onTimeout:(h,f,p)=>{o(new Ht({type:_e.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:p,response:{url:c.url,data:void 0}},`"${e}" certificate request timed out (${s})`))},onAbort:(h,f,p)=>{o(new Error("aborted"))}};r.load(c,u,d)})):Promise.resolve()}setMediaKeysServerCertificate(e,t,i){return new Promise((r,s)=>{e.setServerCertificate(i).then(a=>{this.log(`setServerCertificate ${a?"success":"not supported by CDM"} (${i.byteLength}) on "${t}"`),r(e)}).catch(a=>{s(new Ht({type:_e.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:a,fatal:!0},a.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(i=>this.updateKeySession(e,new Uint8Array(i)).catch(r=>{throw new Ht({type:_e.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_SESSION_UPDATE_FAILED,decryptdata:e.decryptdata,error:r,fatal:!1},r.message)}))}unpackPlayReadyKeyMessage(e,t){const i=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!i.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const r=new DOMParser().parseFromString(i,"application/xml"),s=r.querySelectorAll("HttpHeader");if(s.length>0){let u;for(let d=0,h=s.length;d<h;d++){var a,o;u=s[d];const f=(a=u.querySelector("name"))==null?void 0:a.textContent,p=(o=u.querySelector("value"))==null?void 0:o.textContent;f&&p&&e.setRequestHeader(f,p)}}const c=r.querySelector("Challenge"),l=c?.textContent;if(!l)throw new Error("Cannot find <Challenge> in key message");return bh(atob(l))}setupLicenseXHR(e,t,i,r){const s=this.config.licenseXhrSetup;return s?Promise.resolve().then(()=>{if(!i.decryptdata)throw new Error("Key removed");return s.call(this.hls,e,t,i,r)}).catch(a=>{if(!i.decryptdata)throw a;return e.open("POST",t,!0),s.call(this.hls,e,t,i,r)}).then(a=>(e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:a||r})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:r}))}requestLicense(e,t){const i=this.config.keyLoadPolicy.default;return new Promise((r,s)=>{const a=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${a}`);const o=new XMLHttpRequest;o.responseType="arraybuffer",o.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return s(new Error("invalid state"));if(o.readyState===4)if(o.status===200){this._requestLicenseFailureCount=0;let c=o.response;this.log(`License received ${c instanceof ArrayBuffer?c.byteLength:c}`);const l=this.config.licenseResponseCallback;if(l)try{c=l.call(this.hls,o,a,e)}catch(u){this.error(u)}r(c)}else{const c=i.errorRetry,l=c?c.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>l||o.status>=400&&o.status<500)s(new Ht({type:_e.KEY_SYSTEM_ERROR,details:re.KEY_SYSTEM_LICENSE_REQUEST_FAILED,decryptdata:e.decryptdata,fatal:!0,networkDetails:o,response:{url:a,data:void 0,code:o.status,text:o.statusText}},`License Request XHR failed (${a}). Status: ${o.status} (${o.statusText})`));else{const u=l-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${u} attempts left`),this.requestLicense(e,t).then(r,s)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=o,this.setupLicenseXHR(o,a,e,t).then(({xhr:c,licenseChallenge:l})=>{e.keySystem==nt.PLAYREADY&&(l=this.unpackPlayReadyKeyMessage(c,l)),c.send(l)}).catch(s)})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const i=t.media;this.media=i,Ut(i,"encrypted",this.onMediaEncrypted),Ut(i,"waitingforkey",this.onWaitingForKey);const r=this.mediaResolved;r?r():this.mediaKeys=i.mediaKeys}onMediaDetached(){const e=this.media;e&&($t(e,"encrypted",this.onMediaEncrypted),$t(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var e;this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},this.bannedKeyIds={};const t=this.mediaResolved;if(t&&t(),!this.mediaKeys&&!this.mediaKeySessions.length)return;const i=this.media,r=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,jn.clearKeyUriToKeyIdMap();const s=r.length;sr.CDMCleanupPromise=Promise.all(r.map(a=>this.removeSession(a)).concat((i==null||(e=i.setMediaKeys(null))==null?void 0:e.catch(a=>{this.log(`Could not clear media keys: ${a}`),this.hls&&this.hls.trigger(R.ERROR,{type:_e.OTHER_ERROR,details:re.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${a}`)})}))||Promise.resolve())).catch(a=>{this.log(`Could not close sessions and clear media keys: ${a}`),this.hls&&this.hls.trigger(R.ERROR,{type:_e.OTHER_ERROR,details:re.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${a}`)})}).then(()=>{s&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this._clear()}onManifestLoaded(e,{sessionKeys:t}){if(!(!t||!this.config.emeEnabled)&&!this.keyFormatPromise){const i=t.reduce((r,s)=>(r.indexOf(s.keyFormat)===-1&&r.push(s.keyFormat),r),[]);this.log(`Selecting key-system from session-keys ${i.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(i)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:i,decryptdata:r}=e;if(t){this.log(`Remove licenses and keys and close session "${t.sessionId}" keyId: ${Dt(r?.keyId||[])}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),i&&i.readyState!==XMLHttpRequest.DONE&&i.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const s=this.mediaKeySessions.indexOf(e);s>-1&&this.mediaKeySessions.splice(s,1);const{keyStatusTimeouts:a}=e;a&&Object.keys(a).forEach(l=>self.clearTimeout(a[l]));const{drmSystemOptions:o}=this.config;return(DB(o)?new Promise((l,u)=>{self.setTimeout(()=>u(new Error("MediaKeySession.remove() timeout")),8e3),t.remove().then(l).catch(u)}):Promise.resolve()).catch(l=>{this.log(`Could not remove session: ${l}`),this.hls&&this.hls.trigger(R.ERROR,{type:_e.OTHER_ERROR,details:re.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${l}`)})}).then(()=>t.close()).catch(l=>{this.log(`Could not close session: ${l}`),this.hls&&this.hls.trigger(R.ERROR,{type:_e.OTHER_ERROR,details:re.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${l}`)})})}return Promise.resolve()}}sr.CDMCleanupPromise=void 0;function Ja(n){if(!n)throw new Error("Could not read keyId of undefined decryptdata");if(n.keyId===null)throw new Error("keyId is null");return Dt(n.keyId)}function MN(n,e){if(n.keyId&&e.mediaKeysSession.keyStatuses.has(n.keyId))return e.mediaKeysSession.keyStatuses.get(n.keyId);if(n.matches(e.decryptdata))return e.keyStatus}class Ht extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}function Y1(n,e){const t=n==="output-restricted",i=t?re.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:re.KEY_SYSTEM_STATUS_INTERNAL_ERROR;return new Ht({type:_e.KEY_SYSTEM_ERROR,details:i,fatal:!1,decryptdata:e},t?"HDCP level output restricted":`key status changed to "${n}"`)}class PE{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(R.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(R.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(R.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(R.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const i=this.hls.config;if(i.capLevelOnFPSDrop){const r=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=r,r&&typeof r.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),i.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,t,i){const r=performance.now();if(t){if(this.lastTime){const s=r-this.lastTime,a=i-this.lastDroppedFrames,o=t-this.lastDecodedFrames,c=1e3*a/s,l=this.hls;if(l.trigger(R.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:i}),c>0&&a>l.config.fpsDroppedMonitoringThreshold*o){let u=l.currentLevel;l.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+u),u>0&&(l.autoLevelCapping===-1||l.autoLevelCapping>=u)&&(u=u-1,l.trigger(R.FPS_DROP_LEVEL_CAPPING,{level:u,droppedLevel:l.currentLevel}),l.autoLevelCapping=u,this.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=i,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}function OE(n,e){let t;try{t=new Event("addtrack")}catch{t=document.createEvent("Event"),t.initEvent("addtrack",!1,!1)}t.track=n,e.dispatchEvent(t)}function ME(n,e){const t=n.mode;if(t==="disabled"&&(n.mode="hidden"),n.cues&&!n.cues.getCueById(e.id))try{if(n.addCue(e),!n.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(i){je.debug(`[texttrack-utils]: ${i}`);try{const r=new self.TextTrackCue(e.startTime,e.endTime,e.text);r.id=e.id,n.addCue(r)}catch(r){je.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${r}`)}}t==="disabled"&&(n.mode=t)}function Ur(n,e){const t=n.mode;if(t==="disabled"&&(n.mode="hidden"),n.cues)for(let i=n.cues.length;i--;)e&&n.cues[i].removeEventListener("enter",e),n.removeCue(n.cues[i]);t==="disabled"&&(n.mode=t)}function Ih(n,e,t,i){const r=n.mode;if(r==="disabled"&&(n.mode="hidden"),n.cues&&n.cues.length>0){const s=NN(n.cues,e,t);for(let a=0;a<s.length;a++)(!i||i(s[a]))&&n.removeCue(s[a])}r==="disabled"&&(n.mode=r)}function BN(n,e){if(e<=n[0].startTime)return 0;const t=n.length-1;if(e>n[t].endTime)return-1;let i=0,r=t,s;for(;i<=r;)if(s=Math.floor((r+i)/2),e<n[s].startTime)r=s-1;else if(e>n[s].startTime&&i<t)i=s+1;else return s;return n[i].startTime-e<e-n[r].startTime?i:r}function NN(n,e,t){const i=[],r=BN(n,e);if(r>-1)for(let s=r,a=n.length;s<a;s++){const o=n[s];if(o.startTime>=e&&o.endTime<=t)i.push(o);else if(o.startTime>t)return i}return i}function jo(n){const e=[];for(let t=0;t<n.length;t++){const i=n[t];(i.kind==="subtitles"||i.kind==="captions")&&i.label&&e.push(n[t])}return e}class BE extends pl{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let t=null;const i=jo(this.media.textTracks);for(let s=0;s<i.length;s++)if(i[s].mode==="hidden")t=i[s];else if(i[s].mode==="showing"){t=i[s];break}const r=this.findTrackForTextTrack(t);this.subtitleTrack!==r&&this.setSubtitleTrack(r)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(R.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(R.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(R.MANIFEST_LOADING,this.onManifestLoading,this),e.on(R.MANIFEST_PARSED,this.onManifestParsed,this),e.on(R.LEVEL_LOADING,this.onLevelLoading,this),e.on(R.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(R.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(R.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(R.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(R.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(R.MANIFEST_LOADING,this.onManifestLoading,this),e.off(R.MANIFEST_PARSED,this.onManifestParsed,this),e.off(R.LEVEL_LOADING,this.onLevelLoading,this),e.off(R.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(R.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(R.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,t){const i=this.media;if(!i)return;const r=!!t.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||i.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,r)return;jo(i.textTracks).forEach(a=>{Ur(a)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:i,groupId:r,details:s}=t,a=this.tracksInGroup[i];if(!a||a.groupId!==r){this.warn(`Subtitle track with id:${i} and group:${r} not found in active group ${a?.groupId}`);return}const o=a.details;a.details=t.details,this.log(`Subtitle track ${i} "${a.name}" lang:${a.lang} group:${r} loaded [${s.startSN}-${s.endSN}]`),i===this.trackId&&this.playlistLoaded(i,t,o)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const i=t.subtitleGroups||null,r=this.groupIds;let s=this.currentTrack;if(!i||r?.length!==i?.length||i!=null&&i.some(a=>r?.indexOf(a)===-1)){this.groupIds=i,this.trackId=-1,this.currentTrack=null;const a=this.tracks.filter(u=>!i||i.indexOf(u.groupId)!==-1);if(a.length)this.selectDefaultTrack&&!a.some(u=>u.default)&&(this.selectDefaultTrack=!1),a.forEach((u,d)=>{u.id=d});else if(!s&&!this.tracksInGroup.length)return;this.tracksInGroup=a;const o=this.hls.config.subtitlePreference;if(!s&&o){this.selectDefaultTrack=!1;const u=wn(o,a);if(u>-1)s=a[u];else{const d=wn(o,this.tracks);s=this.tracks[d]}}let c=this.findTrackId(s);c===-1&&s&&(c=this.findTrackId(null));const l={subtitleTracks:a};this.log(`Updating subtitle tracks, ${a.length} track(s) found in "${i?.join(",")}" group-id`),this.hls.trigger(R.SUBTITLE_TRACKS_UPDATED,l),c!==-1&&this.trackId===-1&&this.setSubtitleTrack(c)}}findTrackId(e){const t=this.tracksInGroup,i=this.selectDefaultTrack;for(let r=0;r<t.length;r++){const s=t[r];if(!(i&&!s.default||!i&&!e)&&(!e||rr(s,e)))return r}if(e){for(let r=0;r<t.length;r++){const s=t[r];if(sa(e.attrs,s.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return r}for(let r=0;r<t.length;r++){const s=t[r];if(sa(e.attrs,s.attrs,["LANGUAGE"]))return r}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let i=0;i<t.length;i++){const r=t[i];if(Eh(r,e))return i}}return-1}onError(e,t){t.fatal||!t.context||t.context.type===Be.SUBTITLE_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(e.id===-1)return this.setSubtitleTrack(-1),null;const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const i=this.currentTrack;if(i&&rr(e,i))return i;const r=wn(e,this.tracksInGroup);if(r>-1){const s=this.tracksInGroup[r];return this.setSubtitleTrack(r),s}else{if(i)return null;{const s=wn(e,t);if(s>-1)return t[s]}}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const i=e.id,r=e.groupId,s=this.getUrlWithDirectives(e.url,t),a=e.details,o=a?.age;this.log(`Loading subtitle ${i} "${e.name}" lang:${e.lang} group:${r}${t?.msn!==void 0?" at sn "+t.msn+" part "+t.part:""}${o&&a.live?" age "+o.toFixed(1)+(a.type&&" "+a.type||""):""} ${s}`),this.hls.trigger(R.SUBTITLE_TRACK_LOADING,{url:s,id:i,groupId:r,deliveryDirectives:t||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=jo(e.textTracks),i=this.currentTrack;let r;if(i&&(r=t.filter(s=>Eh(i,s))[0],r||this.warn(`Unable to find subtitle TextTrack with name "${i.name}" and language "${i.lang}"`)),[].slice.call(t).forEach(s=>{s.mode!=="disabled"&&s!==r&&(s.mode="disabled")}),r){const s=this.subtitleDisplay?"showing":"hidden";r.mode!==s&&(r.mode=s)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=t.length||!ye(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.selectDefaultTrack=!1;const i=this.currentTrack,r=t[e]||null;if(this.trackId=e,this.currentTrack=r,this.toggleTrackModes(),!r){this.hls.trigger(R.SUBTITLE_TRACK_SWITCH,{id:e});return}const s=!!r.details&&!r.details.live;if(e===this.trackId&&r===i&&s)return;this.log(`Switching to subtitle-track ${e}`+(r?` "${r.name}" lang:${r.lang} group:${r.groupId}`:""));const{id:a,groupId:o="",name:c,type:l,url:u}=r;this.hls.trigger(R.SUBTITLE_TRACK_SWITCH,{id:a,groupId:o,name:c,type:l,url:u});const d=this.switchParams(r.url,i?.details,r.details);this.loadPlaylist(d)}}function $N(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch{let t=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const s=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(r=="x"?s:s&3|8).toString(16)})}}}function Os(n){let e=5381,t=n.length;for(;t;)e=e*33^n.charCodeAt(--t);return(e>>>0).toString()}const Wr=.025;let Ec=(function(n){return n[n.Point=0]="Point",n[n.Range=1]="Range",n})({});function WN(n,e,t){return`${n.identifier}-${t+1}-${Os(e)}`}class VN{constructor(e,t){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=t,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,(e=this.assetListLoader)==null||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){var t;if(e>0&&e>=this.assetList.length)return!0;const i=this.playoutLimit;return e<=0||isNaN(i)?!1:i===0?!0:(((t=this.assetList[e])==null?void 0:t.startOffset)||0)>i}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const t=this.dateRange.tagAnchor;if(t)return hd(e,t)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(this.startTime===0||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const t=this.dateRange.startTime,i=hd(t,e);return t-i<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,t=ye(e)?e:this.duration;return this.cumulativeDuration+t}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const t=this.resumeAnchor;if(t)return hd(e,t)}return e}get appendInPlace(){return this.appendInPlaceStarted?!0:this.appendInPlaceDisabled?!1:!!(!this.cue.once&&!this.cue.pre&&this.startIsAligned&&(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<Wr))}set appendInPlace(e){if(this.appendInPlaceStarted){this.resetOnResume=!e;return}this.appendInPlaceDisabled=!e}get timelineStart(){return this._timelineStart!==null?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let t;return this._duration!==null?t=this._duration:this.dateRange.duration?t=this.dateRange.duration:t=this.dateRange.plannedDuration||0,!isNaN(e)&&e<t&&(t=e),t}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return this.dateRange.attr["X-TIMELINE-OCCUPIES"]==="RANGE"?Ec.Range:Ec.Point}get supplementsPrimary(){return this.dateRange.attr["X-TIMELINE-STYLE"]==="PRIMARY"}get contentMayVary(){return this.dateRange.attr["X-CONTENT-MAY-VARY"]!=="NO"}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||this.assetListResponse!==null}toString(){return GN(this)}}function hd(n,e){return n-e.start<e.duration/2&&!(Math.abs(n-(e.start+e.duration))<Wr)?e.start:e.start+e.duration}function NE(n,e,t){const i=new self.URL(n,t);return i.protocol!=="data:"&&i.searchParams.set("_HLS_primary_id",e),i}function fd(n,e){for(;(t=n.assetList[++e])!=null&&t.error;)var t;return e}function GN(n){return`["${n.identifier}" ${n.cue.pre?"<pre>":n.cue.post?"<post>":""}${n.timelineStart.toFixed(2)}-${n.resumeTime.toFixed(2)}]`}function Ar(n){const e=n.timelineStart,t=n.duration||0;return`["${n.identifier}" ${e.toFixed(2)}-${(e+t).toFixed(2)}]`}class HN{constructor(e,t,i,r){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls&&this.hls.trigger(R.PLAYOUT_LIMIT_REACHED,{})};const s=this.hls=new e(t);this.interstitial=i,this.assetItem=r;const a=()=>{this.hasDetails=!0};s.once(R.LEVEL_LOADED,a),s.once(R.AUDIO_TRACK_LOADED,a),s.once(R.SUBTITLE_TRACK_LOADED,a),s.on(R.MEDIA_ATTACHING,(o,{media:c})=>{this.removeMediaListeners(),this.mediaAttached=c,this.interstitial.playoutLimit&&(c.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&s.on(R.BUFFER_APPENDED,()=>{const u=this.bufferedEnd;this.reachedPlayout(u)&&(this._bufferedEosTime=u,s.trigger(R.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){return this.interstitial.appendInPlace}loadSource(){const e=this.hls;if(e)if(e.url)e.levels.length&&!e.started&&e.startLoad(-1,!0);else{let t=this.assetItem.uri;try{t=NE(t,e.config.primarySessionId||"").href}catch{}e.loadSource(t)}}bufferedInPlaceToEnd(e){var t;if(!this.appendInPlace)return!1;if((t=this.hls)!=null&&t.bufferedToEnd)return!0;if(!e)return!1;const i=Math.min(this._bufferedEosTime||1/0,this.duration),r=this.timelineOffset,s=ke.bufferInfo(e,r,0);return this.getAssetTime(s.end)>=i-.02}reachedPlayout(e){const i=this.interstitial.playoutLimit;return this.startOffset+e>=i}get destroyed(){var e;return!((e=this.hls)!=null&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return((e=this.hls)==null?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const t=ke.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(t.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){const e=this.assetItem.duration;if(!e)return 0;const t=this.interstitial.playoutLimit;if(t){const i=t-this.startOffset;if(i>0&&i<e)return i}return e}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return((e=this.hls)==null?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const t=this.timelineOffset;if(e!==t){const i=e-t;if(Math.abs(i)>1/9e4&&this.hls){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const t=this.timelineOffset,i=this.duration;return Math.min(Math.max(0,e-t),i)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){if(this.mediaAttached){var e;(e=this.hls)!=null&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}}destroy(){this.removeMediaListeners(),this.hls&&this.hls.destroy(),this.hls=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){var t;this.loadSource(),(t=this.hls)==null||t.attachMedia(e)}detachMedia(){var e;this.removeMediaListeners(),this.mediaAttached=null,(e=this.hls)==null||e.detachMedia()}resumeBuffering(){var e;(e=this.hls)==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.hls)==null||e.pauseBuffering()}transferMedia(){var e;return this.bufferSnapShot(),((e=this.hls)==null?void 0:e.transferMedia())||null}resetDetails(){const e=this.hls;if(e&&this.hasDetails){e.stopLoad();const t=i=>delete i.details;e.levels.forEach(t),e.allAudioTracks.forEach(t),e.allSubtitleTracks.forEach(t),this.hasDetails=!1}}on(e,t,i){var r;(r=this.hls)==null||r.on(e,t)}once(e,t,i){var r;(r=this.hls)==null||r.once(e,t)}off(e,t,i){var r;(r=this.hls)==null||r.off(e,t)}toString(){var e;return`HlsAssetPlayer: ${Ar(this.assetItem)} ${(e=this.hls)==null?void 0:e.sessionId} ${this.appendInPlace?"append-in-place":""}`}}const Q1=.033;class qN extends an{constructor(e,t){super("interstitials-sched",t),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,t){return this.events?this.events.reduce((i,r)=>e<=r.startOffset&&t>r.startOffset?(delete r.error,i+1):i,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,t){if(e.event)return this.findEventIndex(e.event.identifier);let i=-1;e.nextEvent?i=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(i=this.findEventIndex(e.previousEvent.identifier)+1);const r=this.items;if(r)for(r[i]||(t===void 0&&(t=e.start),i=this.findItemIndexAtTime(t));i>=0&&(s=r[i])!=null&&s.event;){var s;i--}return i}findItemIndexAtTime(e,t){const i=this.items;if(i)for(let r=0;r<i.length;r++){let s=i[r];if(t&&t!=="primary"&&(s=s[t]),e===s.start||e>s.start&&e<s.end)return r}return-1}findJumpRestrictedIndex(e,t){const i=this.items;if(i)for(let r=e;r<=t&&i[r];r++){const s=i[r].event;if(s!=null&&s.restrictions.jump&&!s.appendInPlace)return r}return-1}findEventIndex(e){const t=this.items;if(t)for(let r=t.length;r--;){var i;if(((i=t[r].event)==null?void 0:i.identifier)===e)return r}return-1}findAssetIndex(e,t){const i=e.assetList,r=i.length;if(r>1)for(let s=0;s<r;s++){const a=i[s];if(!a.error){const o=a.timelineStart;if(t===o||t>o&&(t<o+(a.duration||0)||s===r-1))return s}}return 0}get assetIdAtEnd(){var e;const t=(e=this.items)==null||(e=e[this.length-1])==null?void 0:e.event;if(t){const i=t.assetList,r=i[i.length-1];if(r)return r.identifier}return null}parseInterstitialDateRanges(e,t){const i=e.main.details,{dateRanges:r}=i,s=this.events,a=this.parseDateRanges(r,{url:i.url},t),o=Object.keys(r),c=s?s.filter(l=>!o.includes(l.identifier)):[];a.length&&a.sort((l,u)=>{const d=l.cue.pre,h=l.cue.post,f=u.cue.pre,p=u.cue.post;if(d&&!f)return-1;if(f&&!d||h&&!p)return 1;if(p&&!h)return-1;if(!d&&!f&&!h&&!p){const m=l.startTime,g=u.startTime;if(m!==g)return m-g}return l.dateRange.tagOrder-u.dateRange.tagOrder}),this.events=a,c.forEach(l=>{this.removeEvent(l)}),this.updateSchedule(e,c)}updateSchedule(e,t=[],i=!1){const r=this.events||[];if(r.length||t.length||this.length<2){const s=this.items,a=this.parseSchedule(r,e);(i||t.length||s?.length!==a.length||a.some((c,l)=>Math.abs(c.playout.start-s[l].playout.start)>.005||Math.abs(c.playout.end-s[l].playout.end)>.005))&&(this.items=a,this.onScheduleUpdate(t,s))}}parseDateRanges(e,t,i){const r=[],s=Object.keys(e);for(let a=0;a<s.length;a++){const o=s[a],c=e[o];if(c.isInterstitial){let l=this.eventMap[o];l?l.setDateRange(c):(l=new VN(c,t),this.eventMap[o]=l,i===!1&&(l.appendInPlace=i)),r.push(l)}}return r}parseSchedule(e,t){const i=[],r=t.main.details,s=r.live?1/0:r.edge;let a=0;if(e=e.filter(c=>!c.error&&!(c.cue.once&&c.hasPlayed)),e.length){this.resolveOffsets(e,t);let c=0,l=0;if(e.forEach((u,d)=>{const h=u.cue.pre,f=u.cue.post,p=e[d-1]||null,m=u.appendInPlace,g=f?s:u.startOffset,y=u.duration,v=u.timelineOccupancy===Ec.Range?y:0,b=u.resumptionOffset,T=p?.startTime===g,x=g+u.cumulativeDuration;let _=m?x+y:g+b;if(h||!f&&g<=0){const w=l;l+=v,u.timelineStart=x;const S=a;a+=y,i.push({event:u,start:x,end:_,playout:{start:S,end:a},integrated:{start:w,end:l}})}else if(g<=s){if(!T){const C=g-c;if(C>Q1){const O=c,I=l;l+=C;const L=a;a+=C;const E={previousEvent:e[d-1]||null,nextEvent:u,start:O,end:O+C,playout:{start:L,end:a},integrated:{start:I,end:l}};i.push(E)}else C>0&&p&&(p.cumulativeDuration+=C,i[i.length-1].end=g)}f&&(_=x),u.timelineStart=x;const w=l;l+=v;const S=a;a+=y,i.push({event:u,start:x,end:_,playout:{start:S,end:a},integrated:{start:w,end:l}})}else return;const D=u.resumeTime;f||D>s?c=s:c=D}),c<s){var o;const u=c,d=l,h=s-c;l+=h;const f=a;a+=h,i.push({previousEvent:((o=i[i.length-1])==null?void 0:o.event)||null,nextEvent:null,start:c,end:u+h,playout:{start:f,end:a},integrated:{start:d,end:l}})}this.setDurations(s,a,l)}else i.push({previousEvent:null,nextEvent:null,start:0,end:s,playout:{start:0,end:s},integrated:{start:0,end:s}}),this.setDurations(s,s,s);return i}setDurations(e,t,i){this.durations={primary:e,playout:t,integrated:i}}resolveOffsets(e,t){const i=t.main.details,r=i.live?1/0:i.edge;let s=0,a=-1;e.forEach((o,c)=>{const l=o.cue.pre,u=o.cue.post,d=l?0:u?r:o.startTime;this.updateAssetDurations(o),a===d?o.cumulativeDuration=s:(s=0,a=d),!u&&o.snapOptions.in&&(o.resumeAnchor=lr(null,i.fragments,o.startOffset+o.resumptionOffset,0,0)||void 0),o.appendInPlace&&!o.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(o,t)||(o.appendInPlace=!1)),!o.appendInPlace&&c+1<e.length&&e[c+1].startTime-e[c].resumeTime<Q1&&(e[c+1].appendInPlace=!1,e[c+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${o}`));const f=ye(o.resumeOffset)?o.resumeOffset:o.duration;s+=f})}primaryCanResumeInPlaceAt(e,t){const i=e.resumeTime,r=e.startTime+e.resumptionOffset;return Math.abs(i-r)>Wr?(this.log(`"${e.identifier}" resumption ${i} not aligned with estimated timeline end ${r}`),!1):!Object.keys(t).some(a=>{const o=t[a].details,c=o.edge;if(i>=c)return this.log(`"${e.identifier}" resumption ${i} past ${a} playlist end ${c}`),!1;const l=lr(null,o.fragments,i);if(!l)return this.log(`"${e.identifier}" resumption ${i} does not align with any fragments in ${a} playlist (${o.fragStart}-${o.fragmentEnd})`),!0;const u=a==="audio"?.175:0;return Math.abs(l.start-i)<Wr+u||Math.abs(l.end-i)<Wr+u?!1:(this.log(`"${e.identifier}" resumption ${i} not aligned with ${a} fragment bounds (${l.start}-${l.end} sn: ${l.sn} cc: ${l.cc})`),!0)})}updateAssetDurations(e){if(!e.assetListLoaded)return;const t=e.timelineStart;let i=0,r=!1,s=!1;for(let a=0;a<e.assetList.length;a++){const o=e.assetList[a],c=t+i;o.startOffset=i,o.timelineStart=c,r||(r=o.duration===null),s||(s=!!o.error);const l=o.error?0:o.duration||0;i+=l}r&&!s?e.duration=Math.max(i,e.duration):e.duration=i}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function dn(n){return`[${n.event?'"'+n.event.identifier+'"':"primary"}: ${n.start.toFixed(2)}-${n.end.toFixed(2)}]`}class jN{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,t){const i=e.assetListUrl;let r;try{r=NE(i,this.hls.sessionId,e.baseUrl)}catch(h){const f=this.assignAssetListError(e,re.ASSET_LIST_LOAD_ERROR,h,i);this.hls.trigger(R.ERROR,f);return}t&&r.protocol!=="data:"&&r.searchParams.set("_HLS_start_offset",""+t);const s=this.hls.config,a=s.loader,o=new a(s),c={responseType:"json",url:r.href},l=s.interstitialAssetListLoadPolicy.default,u={loadPolicy:l,timeout:l.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(h,f,p,m)=>{const g=h.data,y=g?.ASSETS;if(!Array.isArray(y)){const v=this.assignAssetListError(e,re.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),p.url,f,m);this.hls.trigger(R.ERROR,v);return}e.assetListResponse=g,this.hls.trigger(R.ASSET_LIST_LOADED,{event:e,assetListResponse:g,networkDetails:m})},onError:(h,f,p,m)=>{const g=this.assignAssetListError(e,re.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${h.code} ${h.text} (${f.url})`),f.url,m,p);this.hls.trigger(R.ERROR,g)},onTimeout:(h,f,p)=>{const m=this.assignAssetListError(e,re.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${f.url})`),f.url,h,p);this.hls.trigger(R.ERROR,m)}};return o.load(c,u,d),this.hls.trigger(R.ASSET_LIST_LOADING,{event:e}),o}assignAssetListError(e,t,i,r,s,a){return e.error=i,{type:_e.NETWORK_ERROR,details:t,fatal:!1,interstitial:e,url:r,error:i,networkDetails:a,stats:s}}}function Z1(n){var e;n==null||(e=n.play())==null||e.catch(()=>{})}function eo(n,e){return`[${n}] Advancing timeline position to ${e}`}class KN extends an{constructor(e,t){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const i=this.currentTime;if(i===void 0||this.playbackDisabled||!this.schedule)return;const r=i-this.timelinePos;if(Math.abs(r)<1/7056e5)return;const a=r<=-.01;this.timelinePos=i,this.bufferedPos=i;const o=this.playingItem;if(!o){this.checkBuffer();return}if(a&&this.schedule.resetErrorsInRange(i,i-r)&&this.updateSchedule(!0),this.checkBuffer(),a&&i<o.start||i>=o.end){var c;const f=this.findItemIndex(o);let p=this.schedule.findItemIndexAtTime(i);if(p===-1&&(p=f+(a?-1:1),this.log(`seeked ${a?"back ":""}to position not covered by schedule ${i} (resolving from ${f} to ${p})`)),!this.isInterstitial(o)&&(c=this.media)!=null&&c.paused&&(this.shouldPlay=!1),!a&&p>f){const m=this.schedule.findJumpRestrictedIndex(f+1,p);if(m>f){this.setSchedulePosition(m);return}}this.setSchedulePosition(p);return}const l=this.playingAsset;if(!l){if(this.playingLastItem&&this.isInterstitial(o)){const f=o.event.assetList[0];f&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(i,f))}return}const u=l.timelineStart,d=l.duration||0;if(a&&i<u||i>=u+d){var h;(h=o.event)!=null&&h.appendInPlace&&(this.clearAssetPlayers(o.event,o),this.flushFrontBuffer(i)),this.setScheduleToAssetAtTime(i,l)}},this.onTimeupdate=()=>{const i=this.currentTime;if(i===void 0||this.playbackDisabled)return;if(i>this.timelinePos)this.timelinePos=i,i>this.bufferedPos&&this.checkBuffer();else return;const r=this.playingItem;if(!r||this.playingLastItem)return;if(i>=r.end){this.timelinePos=r.end;const o=this.findItemIndex(r);this.setSchedulePosition(o+1)}const s=this.playingAsset;if(!s)return;const a=s.timelineStart+(s.duration||0);i>=a&&this.setScheduleToAssetAtTime(i,s)},this.onScheduleUpdate=(i,r)=>{const s=this.schedule;if(!s)return;const a=this.playingItem,o=s.events||[],c=s.items||[],l=s.durations,u=i.map(m=>m.identifier),d=!!(o.length||u.length);(d||r)&&this.log(`INTERSTITIALS_UPDATED (${o.length}): ${o}
Schedule: ${c.map(m=>dn(m))} pos: ${this.timelinePos}`),u.length&&this.log(`Removed events ${u}`);let h=null,f=null;a&&(h=this.updateItem(a,this.timelinePos),this.itemsMatch(a,h)?this.playingItem=h:this.waitingItem=this.endedItem=null),this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const p=this.bufferingItem;if(p&&(f=this.updateItem(p,this.bufferedPos),this.itemsMatch(p,f)?this.bufferingItem=f:p.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(p.event,null))),i.forEach(m=>{m.assetList.forEach(g=>{this.clearAssetPlayer(g.identifier,null)})}),this.playerQueue.forEach(m=>{if(m.interstitial.appendInPlace){const g=m.assetItem.timelineStart,y=m.timelineOffset-g;if(y)try{m.timelineOffset=g}catch(v){Math.abs(y)>Wr&&this.warn(`${v} ("${m.assetId}" ${m.timelineOffset}->${g})`)}}}),d||r){if(this.hls.trigger(R.INTERSTITIALS_UPDATED,{events:o.slice(0),schedule:c.slice(0),durations:l,removedIds:u}),this.isInterstitial(a)&&u.includes(a.event.identifier)){this.warn(`Interstitial "${a.event.identifier}" removed while playing`),this.primaryFallback(a.event);return}a&&this.trimInPlace(h,a),p&&f!==h&&this.trimInPlace(f,p),this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=t,this.assetListLoader=new jN(e),this.schedule=new qN(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e&&(e.on(R.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(R.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(R.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(R.MANIFEST_LOADING,this.onManifestLoading,this),e.on(R.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(R.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(R.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(R.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(R.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(R.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(R.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(R.BUFFER_APPENDED,this.onBufferAppended,this),e.on(R.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(R.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(R.MEDIA_ENDED,this.onMediaEnded,this),e.on(R.ERROR,this.onError,this),e.on(R.DESTROYING,this.onDestroying,this))}unregisterListeners(){const e=this.hls;e&&(e.off(R.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(R.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(R.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(R.MANIFEST_LOADING,this.onManifestLoading,this),e.off(R.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(R.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(R.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(R.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(R.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(R.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(R.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(R.BUFFER_CODECS,this.onBufferCodecs,this),e.off(R.BUFFER_APPENDED,this.onBufferAppended,this),e.off(R.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(R.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(R.MEDIA_ENDED,this.onMediaEnded,this),e.off(R.ERROR,this.onError,this),e.off(R.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;(e=this.getBufferingPlayer())==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.getBufferingPlayer())==null||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.schedule=this.manager=null,this.hls=this.HlsPlayerClass=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){$t(e,"play",this.onPlay),$t(e,"pause",this.onPause),$t(e,"seeking",this.onSeeking),$t(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,t){const i=this.media=t.media;Ut(i,"seeking",this.onSeeking),Ut(i,"timeupdate",this.onTimeupdate),Ut(i,"play",this.onPlay),Ut(i,"pause",this.onPause)}onMediaAttached(e,t){const i=this.effectivePlayingItem,r=this.detachedData;if(this.detachedData=null,i===null)this.checkStart();else if(!r){this.clearScheduleState();const s=this.findItemIndex(i);this.setSchedulePosition(s)}}clearScheduleState(){this.log("clear schedule state"),this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,t){const i=!!t.transferMedia,r=this.media;if(this.media=null,!i&&(r&&this.removeMediaListeners(r),this.detachedData)){const s=this.getBufferingPlayer();s&&(this.log(`Removing schedule state for detachedData and ${s}`),this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,s.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.hls)return null;if(this.manager)return this.manager;const e=this,t=()=>e.bufferingItem||e.waitingItem,i=d=>d&&e.getAssetPlayer(d.identifier),r=(d,h,f,p,m)=>{if(d){let g=d[h].start;const y=d.event;if(y){if(h==="playout"||y.timelineOccupancy!==Ec.Point){const v=i(f);v?.interstitial===y&&(g+=v.assetItem.startOffset+v[m])}}else{const v=p==="bufferedPos"?a():e[p];g+=v-d.start}return g}return 0},s=(d,h)=>{var f;if(d!==0&&h!=="primary"&&(f=e.schedule)!=null&&f.length){var p;const m=e.schedule.findItemIndexAtTime(d),g=(p=e.schedule.items)==null?void 0:p[m];if(g){const y=g[h].start-g.start;return d+y}}return d},a=()=>{const d=e.bufferedPos;return d===Number.MAX_VALUE?o("primary"):Math.max(d,0)},o=d=>{var h,f;return(h=e.primaryDetails)!=null&&h.live?e.primaryDetails.edge:((f=e.schedule)==null?void 0:f.durations[d])||0},c=(d,h)=>{var f,p;const m=e.effectivePlayingItem;if(m!=null&&(f=m.event)!=null&&f.restrictions.skip||!e.schedule)return;e.log(`seek to ${d} "${h}"`);const g=e.effectivePlayingItem,y=e.schedule.findItemIndexAtTime(d,h),v=(p=e.schedule.items)==null?void 0:p[y],b=e.getBufferingPlayer(),T=b?.interstitial,x=T?.appendInPlace,_=g&&e.itemsMatch(g,v);if(g&&(x||_)){const D=i(e.playingAsset),w=D?.media||e.primaryMedia;if(w){const S=h==="primary"?w.currentTime:r(g,h,e.playingAsset,"timelinePos","currentTime"),C=d-S,O=(x?S:w.currentTime)+C;if(O>=0&&(!D||x||O<=D.duration)){w.currentTime=O;return}}}if(v){let D=d;if(h!=="primary"){const S=v[h].start,C=d-S;D=v.start+C}const w=!e.isInterstitial(v);if((!e.isInterstitial(g)||g.event.appendInPlace)&&(w||v.event.appendInPlace)){const S=e.media||(x?b?.media:null);S&&(S.currentTime=D)}else if(g){const S=e.findItemIndex(g);if(y>S){const O=e.schedule.findJumpRestrictedIndex(S+1,y);if(O>S){e.setSchedulePosition(O);return}}let C=0;if(w)e.timelinePos=D,e.checkBuffer();else{const O=v.event.assetList,I=d-(v[h]||v).start;for(let L=O.length;L--;){const E=O[L];if(E.duration&&I>=E.startOffset&&I<E.startOffset+E.duration){C=L;break}}}e.setSchedulePosition(y,C)}}},l=()=>{const d=e.effectivePlayingItem;if(e.isInterstitial(d))return d;const h=t();return e.isInterstitial(h)?h:null},u={get bufferedEnd(){const d=t(),h=e.bufferingItem;if(h&&h===d){var f;return r(h,"playout",e.bufferingAsset,"bufferedPos","bufferedEnd")-h.playout.start||((f=e.bufferingAsset)==null?void 0:f.startOffset)||0}return 0},get currentTime(){const d=l(),h=e.effectivePlayingItem;return h&&h===d?r(h,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-h.playout.start:0},set currentTime(d){const h=l(),f=e.effectivePlayingItem;f&&f===h&&c(d+f.playout.start,"playout")},get duration(){const d=l();return d?d.playout.end-d.playout.start:0},get assetPlayers(){var d;const h=(d=l())==null?void 0:d.event.assetList;return h?h.map(f=>e.getAssetPlayer(f.identifier)):[]},get playingIndex(){var d;const h=(d=l())==null?void 0:d.event;return h&&e.effectivePlayingAsset?h.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return l()}};return this.manager={get events(){var d;return((d=e.schedule)==null||(d=d.events)==null?void 0:d.slice(0))||[]},get schedule(){var d;return((d=e.schedule)==null||(d=d.items)==null?void 0:d.slice(0))||[]},get interstitialPlayer(){return l()?u:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return t()},get bufferingIndex(){const d=t();return e.findItemIndex(d)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const d=e.effectivePlayingItem;return e.findItemIndex(d)},primary:{get bufferedEnd(){return a()},get currentTime(){const d=e.timelinePos;return d>0?d:0},set currentTime(d){c(d,"primary")},get duration(){return o("primary")},get seekableStart(){var d;return((d=e.primaryDetails)==null?void 0:d.fragmentStart)||0}},integrated:{get bufferedEnd(){return r(t(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return r(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(d){c(d,"integrated")},get duration(){return o("integrated")},get seekableStart(){var d;return s(((d=e.primaryDetails)==null?void 0:d.fragmentStart)||0,"integrated")}},skip:()=>{const d=e.effectivePlayingItem,h=d?.event;if(h&&!h.restrictions.skip){const f=e.findItemIndex(d);if(h.appendInPlace){const p=d.playout.start+d.event.duration;c(p+.001,"playout")}else e.advanceAfterAssetEnded(h,f,1/0)}}}}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const t=this.playingItem,i=(e=this.schedule)==null?void 0:e.items;return!this.playbackStarted||!t||!i?!1:this.findItemIndex(t)===i.length-1}get playbackStarted(){return this.effectivePlayingItem!==null}get currentTime(){var e,t;if(this.mediaSelection===null)return;const i=this.waitingItem||this.playingItem;if(this.isInterstitial(i)&&!i.event.appendInPlace)return;let r=this.media;!r&&(e=this.bufferingItem)!=null&&(e=e.event)!=null&&e.appendInPlace&&(r=this.primaryMedia);const s=(t=r)==null?void 0:t.currentTime;if(!(s===void 0||!ye(s)))return s}get primaryMedia(){var e;return this.media||((e=this.detachedData)==null?void 0:e.media)||null}isInterstitial(e){return!!(e!=null&&e.event)}retreiveMediaSource(e,t){const i=this.getAssetPlayer(e);i&&this.transferMediaFromPlayer(i,t)}transferMediaFromPlayer(e,t){const i=e.interstitial.appendInPlace,r=e.media;if(i&&r===this.primaryMedia){if(this.bufferingAsset=null,(!t||this.isInterstitial(t)&&!t.event.appendInPlace)&&t&&r){this.detachedData={media:r};return}const s=e.transferMedia();this.log(`transfer MediaSource from ${e} ${Ye(s)}`),this.detachedData=s}else t&&r&&(this.shouldPlay||(this.shouldPlay=!r.paused))}transferMediaTo(e,t){var i,r;if(e.media===t)return;let s=null;const a=this.hls,o=e!==a,c=o&&e.interstitial.appendInPlace,l=(i=this.detachedData)==null?void 0:i.mediaSource;let u;if(a.media)c&&(s=a.transferMedia(),this.detachedData=s),u="Primary";else if(l){const p=this.getBufferingPlayer();p?(s=p.transferMedia(),u=`${p}`):u="detached MediaSource"}else u="detached media";if(!s){if(l)s=this.detachedData,this.log(`using detachedData: MediaSource ${Ye(s)}`);else if(!this.detachedData||a.media===t){const p=this.playerQueue;p.length>1&&p.forEach(m=>{if(o&&m.interstitial.appendInPlace!==c){const g=m.interstitial;this.clearInterstitial(m.interstitial,null),g.appendInPlace=!1,g.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${g}`)}}),this.hls.detachMedia(),this.detachedData={media:t}}}const d=s&&"mediaSource"in s&&((r=s.mediaSource)==null?void 0:r.readyState)!=="closed",h=d&&s?s:t;this.log(`${d?"transfering MediaSource":"attaching media"} to ${o?e:"Primary"} from ${u} (media.currentTime: ${t.currentTime})`);const f=this.schedule;if(h===s&&f){const p=o&&e.assetId===f.assetIdAtEnd;h.overrides={duration:f.duration,endOfStream:!o||p,cueRemoval:!o}}e.attachMedia(h)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,t=e?.events;if(!t||this.playbackDisabled||!this.media)return;this.bufferedPos===-1&&(this.bufferedPos=0);const i=this.timelinePos,r=this.effectivePlayingItem;if(i===-1){const s=this.hls.startPosition;if(this.log(eo("checkStart",s)),this.timelinePos=s,t.length&&t[0].cue.pre){const a=e.findEventIndex(t[0].identifier);this.setSchedulePosition(a)}else if(s>=0||!this.primaryLive){const a=this.timelinePos=s>0?s:0,o=e.findItemIndexAtTime(a);this.setSchedulePosition(o)}}else if(r&&!this.playingItem){const s=e.findItemIndex(r);this.setSchedulePosition(s)}}advanceAssetBuffering(e,t){const i=e.event,r=i.findAssetIndex(t),s=fd(i,r);if(!i.isAssetPastPlayoutLimit(s))this.bufferedToEvent(e,s);else if(this.schedule){var a;const o=(a=this.schedule.items)==null?void 0:a[this.findItemIndex(e)+1];o&&this.bufferedToItem(o)}}advanceAfterAssetEnded(e,t,i){const r=fd(e,i);if(e.isAssetPastPlayoutLimit(r)){if(this.schedule){const s=this.schedule.items;if(s){const a=t+1,o=s.length;if(a>=o){this.setSchedulePosition(-1);return}const c=e.resumeTime;this.timelinePos<c&&(this.log(eo("advanceAfterAssetEnded",c)),this.timelinePos=c,e.appendInPlace&&this.advanceInPlace(c),this.checkBuffer(this.bufferedPos<c)),this.setSchedulePosition(a)}}}else{if(e.appendInPlace){const s=e.assetList[r];s&&this.advanceInPlace(s.timelineStart)}this.setSchedulePosition(t,r)}}setScheduleToAssetAtTime(e,t){const i=this.schedule;if(!i)return;const r=t.parentIdentifier,s=i.getEvent(r);if(s){const a=i.findEventIndex(r),o=i.findAssetIndex(s,e);this.advanceAfterAssetEnded(s,a,o-1)}}setSchedulePosition(e,t){var i;const r=(i=this.schedule)==null?void 0:i.items;if(!r||this.playbackDisabled)return;const s=e>=0?r[e]:null;this.log(`setSchedulePosition ${e}, ${t} (${s&&dn(s)}) pos: ${this.timelinePos}`);const a=this.waitingItem||this.playingItem,o=this.playingLastItem;if(this.isInterstitial(a)){const u=a.event,d=this.playingAsset,h=d?.identifier,f=h?this.getAssetPlayer(h):null;if(f&&h&&(!this.eventItemsMatch(a,s)||t!==void 0&&h!==u.assetList[t].identifier)){var c;const p=u.findAssetIndex(d);if(this.log(`INTERSTITIAL_ASSET_ENDED ${p+1}/${u.assetList.length} ${Ar(d)}`),this.endedAsset=d,this.playingAsset=null,this.hls.trigger(R.INTERSTITIAL_ASSET_ENDED,{asset:d,assetListIndex:p,event:u,schedule:r.slice(0),scheduleIndex:e,player:f}),a!==this.playingItem){this.itemsMatch(a,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(u,this.findItemIndex(this.playingItem),p);return}this.retreiveMediaSource(h,s),f.media&&!((c=this.detachedData)!=null&&c.mediaSource)&&f.detachMedia()}if(!this.eventItemsMatch(a,s)&&(this.endedItem=a,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${u} ${dn(a)}`),u.hasPlayed=!0,this.hls.trigger(R.INTERSTITIAL_ENDED,{event:u,schedule:r.slice(0),scheduleIndex:e}),u.cue.once)){var l;this.updateSchedule();const p=(l=this.schedule)==null?void 0:l.items;if(s&&p){const m=this.findItemIndex(s);this.advanceSchedule(m,p,t,a,o)}return}}this.advanceSchedule(e,r,t,a,o)}advanceSchedule(e,t,i,r,s){const a=this.schedule;if(!a)return;const o=t[e]||null,c=this.primaryMedia,l=this.playerQueue;if(l.length&&l.forEach(u=>{const d=u.interstitial,h=a.findEventIndex(d.identifier);(h<e||h>e+1)&&this.clearInterstitial(d,o)}),this.isInterstitial(o)){this.timelinePos=Math.min(Math.max(this.timelinePos,o.start),o.end);const u=o.event;if(i===void 0){i=a.findAssetIndex(u,this.timelinePos);const p=fd(u,i-1);if(u.isAssetPastPlayoutLimit(p)||u.appendInPlace&&this.timelinePos===o.end){this.advanceAfterAssetEnded(u,e,i);return}i=p}const d=this.waitingItem;this.assetsBuffered(o,c)||this.setBufferingItem(o);let h=this.preloadAssets(u,i);if(this.eventItemsMatch(o,d||r)||(this.waitingItem=o,this.log(`INTERSTITIAL_STARTED ${dn(o)} ${u.appendInPlace?"append in place":""}`),this.hls.trigger(R.INTERSTITIAL_STARTED,{event:u,schedule:t.slice(0),scheduleIndex:e})),!u.assetListLoaded){this.log(`Waiting for ASSET-LIST to complete loading ${u}`);return}if(u.assetListLoader&&(u.assetListLoader.destroy(),u.assetListLoader=void 0),!c){this.log(`Waiting for attachMedia to start Interstitial ${u}`);return}this.waitingItem=this.endedItem=null,this.playingItem=o;const f=u.assetList[i];if(!f){this.advanceAfterAssetEnded(u,e,i||0);return}if(h||(h=this.getAssetPlayer(f.identifier)),h===null||h.destroyed){const p=u.assetList.length;this.warn(`asset ${i+1}/${p} player destroyed ${u}`),h=this.createAssetPlayer(u,f,i),h.loadSource()}if(!this.eventItemsMatch(o,this.bufferingItem)&&u.appendInPlace&&this.isAssetBuffered(f))return;this.startAssetPlayer(h,i,t,e,c),this.shouldPlay&&Z1(h.media)}else o?(this.resumePrimary(o,e,r),this.shouldPlay&&Z1(this.hls.media)):s&&this.isInterstitial(r)&&(this.endedItem=null,this.playingItem=r,r.event.appendInPlace||this.attachPrimary(a.durations.primary,null))}get playbackDisabled(){return this.hls.config.enableInterstitialPlayback===!1}get primaryDetails(){var e;return(e=this.mediaSelection)==null?void 0:e.main.details}get primaryLive(){var e;return!!((e=this.primaryDetails)!=null&&e.live)}resumePrimary(e,t,i){var r,s;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${dn(e)}`),!((r=this.detachedData)!=null&&r.mediaSource)){let o=this.timelinePos;(o<e.start||o>=e.end)&&(o=this.getPrimaryResumption(e,t),this.log(eo("resumePrimary",o)),this.timelinePos=o),this.attachPrimary(o,e)}if(!i)return;const a=(s=this.schedule)==null?void 0:s.items;a&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${dn(e)}`),this.hls.trigger(R.INTERSTITIALS_PRIMARY_RESUMED,{schedule:a.slice(0),scheduleIndex:t}),this.checkBuffer())}getPrimaryResumption(e,t){const i=e.start;if(this.primaryLive){const r=this.primaryDetails;if(t===0)return this.hls.startPosition;if(r&&(i<r.fragmentStart||i>r.edge))return this.hls.liveSyncPosition||-1}return i}isAssetBuffered(e){const t=this.getAssetPlayer(e.identifier);return t!=null&&t.hls?t.hls.bufferedToEnd:ke.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,t,i){t?this.setBufferingItem(t):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const r=this.primaryMedia;if(!r)return;const s=this.hls;s.media?this.checkBuffer():(this.transferMediaTo(s,r),i&&this.startLoadingPrimaryAt(e,i)),i||(this.log(eo("attachPrimary",e)),this.timelinePos=e,this.startLoadingPrimaryAt(e,i))}startLoadingPrimaryAt(e,t){var i;const r=this.hls;!r.loadingEnabled||!r.media||Math.abs((((i=r.mainForwardBufferInfo)==null?void 0:i.start)||r.media.currentTime)-e)>.5?r.startLoad(e,t):r.bufferingEnabled||r.resumeBuffering()}onManifestLoading(){var e;this.stopLoad(),(e=this.schedule)==null||e.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(R.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(R.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,t){if(t.level===-1||!this.schedule)return;const i=this.hls.levels[t.level];if(!i.details)return;const r=qe(qe({},this.mediaSelection||this.altSelection),{},{main:i});this.mediaSelection=r,this.schedule.parseInterstitialDateRanges(r,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,t){const i=this.hls.audioTracks[t.id],r=this.mediaSelection;if(!r){this.altSelection=qe(qe({},this.altSelection),{},{audio:i});return}const s=qe(qe({},r),{},{audio:i});this.mediaSelection=s}onSubtitleTrackUpdated(e,t){const i=this.hls.subtitleTracks[t.id],r=this.mediaSelection;if(!r){this.altSelection=qe(qe({},this.altSelection),{},{subtitles:i});return}const s=qe(qe({},r),{},{subtitles:i});this.mediaSelection=s}onAudioTrackSwitching(e,t){const i=o1(t);this.playerQueue.forEach(({hls:r})=>r&&(r.setAudioOption(t)||r.setAudioOption(i)))}onSubtitleTrackSwitch(e,t){const i=o1(t);this.playerQueue.forEach(({hls:r})=>r&&(r.setSubtitleOption(t)||t.id!==-1&&r.setSubtitleOption(i)))}onBufferCodecs(e,t){const i=t.tracks;i&&(this.requiredTracks=i)}onBufferAppended(e,t){this.checkBuffer()}onBufferFlushed(e,t){const i=this.playingItem;if(i&&!this.itemsMatch(i,this.bufferingItem)&&!this.isInterstitial(i)){const r=this.timelinePos;this.bufferedPos=r,this.checkBuffer()}}onBufferedToEnd(e){if(!this.schedule)return;const t=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&t){for(let r=0;r<t.length;r++){const s=t[r];if(s.cue.post){var i;const a=this.schedule.findEventIndex(s.identifier),o=(i=this.schedule.items)==null?void 0:i[a];this.isInterstitial(o)&&this.eventItemsMatch(o,this.bufferingItem)&&this.bufferedToItem(o,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const t=this.playingItem;if(!this.playingLastItem&&t){const i=this.findItemIndex(t);this.setSchedulePosition(i+1)}else this.shouldPlay=!1}updateItem(e,t){var i;const r=(i=this.schedule)==null?void 0:i.items;if(e&&r){const s=this.findItemIndex(e,t);return r[s]||null}return null}trimInPlace(e,t){if(this.isInterstitial(e)&&e.event.appendInPlace&&t.end-e.end>.25){e.event.assetList.forEach((s,a)=>{e.event.isAssetPastPlayoutLimit(a)&&this.clearAssetPlayer(s.identifier,null)});const i=e.end+.25,r=ke.bufferInfo(this.primaryMedia,i,0);(r.end>i||(r.nextStart||0)>i)&&(this.log(`trim buffered interstitial ${dn(e)} (was ${dn(t)})`),this.attachPrimary(i,null,!0),this.flushFrontBuffer(i))}}itemsMatch(e,t){return!!t&&(e===t||e.event&&t.event&&this.eventItemsMatch(e,t)||!e.event&&!t.event&&this.findItemIndex(e)===this.findItemIndex(t))}eventItemsMatch(e,t){var i;return!!t&&(e===t||e.event.identifier===((i=t.event)==null?void 0:i.identifier))}findItemIndex(e,t){return e&&this.schedule?this.schedule.findItemIndex(e,t):-1}updateSchedule(e=!1){var t;const i=this.mediaSelection;i&&((t=this.schedule)==null||t.updateSchedule(i,[],e))}checkBuffer(e){var t;const i=(t=this.schedule)==null?void 0:t.items;if(!i)return;const r=ke.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=r.len<1),this.updateBufferedPos(r.end,i,e)}updateBufferedPos(e,t,i){const r=this.schedule,s=this.bufferingItem;if(this.bufferedPos>e||!r)return;if(t.length===1&&this.itemsMatch(t[0],s)){this.bufferedPos=e;return}const a=this.playingItem,o=this.findItemIndex(a);let c=r.findItemIndexAtTime(e);if(this.bufferedPos<e){var l;const u=this.findItemIndex(s),d=Math.min(u+1,t.length-1),h=t[d];if((c===-1&&s&&e>=s.end||(l=h.event)!=null&&l.appendInPlace&&e+.01>=h.start)&&(c=d),this.isInterstitial(s)){const f=s.event;if(d-o>1&&f.appendInPlace===!1||f.assetList.length===0&&f.assetListLoader)return}if(this.bufferedPos=e,c>u&&c>o)this.bufferedToItem(h);else{const f=this.primaryDetails;this.primaryLive&&f&&e>f.edge-f.targetduration&&h.start<f.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(h)&&this.preloadAssets(h.event,0)}}else i&&a&&!this.itemsMatch(a,s)&&(c===o?this.bufferedToItem(a):c===o+1&&this.bufferedToItem(t[c]))}assetsBuffered(e,t){return e.event.assetList.length===0?!1:!e.event.assetList.some(r=>{const s=this.getAssetPlayer(r.identifier);return!(s!=null&&s.bufferedInPlaceToEnd(t))})}setBufferingItem(e){const t=this.bufferingItem,i=this.schedule;if(!this.itemsMatch(e,t)&&i){const{items:r,events:s}=i;if(!r||!s)return t;const a=this.isInterstitial(e),o=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));const c=o?o.remaining:t?t.end-this.timelinePos:0;if(this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${dn(e)}`+(t?` (${c.toFixed(2)} remaining)`:"")),!this.playbackDisabled)if(a){const l=i.findAssetIndex(e.event,this.bufferedPos);e.event.assetList.forEach((u,d)=>{const h=this.getAssetPlayer(u.identifier);h&&(d===l&&h.loadSource(),h.resumeBuffering())})}else this.hls.resumeBuffering(),this.playerQueue.forEach(l=>l.pauseBuffering());this.hls.trigger(R.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:s.slice(0),schedule:r.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}else this.bufferingItem!==e&&(this.bufferingItem=e);return t}bufferedToItem(e,t=0){const i=this.setBufferingItem(e);if(!this.playbackDisabled){if(this.isInterstitial(e))this.bufferedToEvent(e,t);else if(i!==null){this.bufferingAsset=null;const r=this.detachedData;r?r.mediaSource?this.attachPrimary(e.start,e,!0):this.preloadPrimary(e):this.preloadPrimary(e)}}}preloadPrimary(e){const t=this.findItemIndex(e),i=this.getPrimaryResumption(e,t);this.startLoadingPrimaryAt(i)}bufferedToEvent(e,t){const i=e.event,r=i.assetList.length===0&&!i.assetListLoader,s=i.cue.once;if(r||!s){const a=this.preloadAssets(i,t);if(a!=null&&a.interstitial.appendInPlace){const o=this.primaryMedia;o&&this.bufferAssetPlayer(a,o)}}}preloadAssets(e,t){const i=e.assetUrl,r=e.assetList.length,s=r===0&&!e.assetListLoader,a=e.cue.once;if(s){const c=e.timelineStart;if(e.appendInPlace){var o;const h=this.playingItem;!this.isInterstitial(h)&&(h==null||(o=h.nextEvent)==null?void 0:o.identifier)===e.identifier&&this.flushFrontBuffer(c+.25)}let l,u=0;if(!this.playingItem&&this.primaryLive&&(u=this.hls.startPosition,u===-1&&(u=this.hls.liveSyncPosition||0)),u&&!(e.cue.pre||e.cue.post)){const h=u-c;h>0&&(l=Math.round(h*1e3)/1e3)}if(this.log(`Load interstitial asset ${t+1}/${i?1:r} ${e}${l?` live-start: ${u} start-offset: ${l}`:""}`),i)return this.createAsset(e,0,0,c,e.duration,i);const d=this.assetListLoader.loadAssetList(e,l);d&&(e.assetListLoader=d)}else if(!a&&r){for(let l=t;l<r;l++){const u=e.assetList[l],d=this.getAssetPlayerQueueIndex(u.identifier);(d===-1||this.playerQueue[d].destroyed)&&!u.error&&this.createAssetPlayer(e,u,l)}const c=e.assetList[t];if(c){const l=this.getAssetPlayer(c.identifier);return l&&l.loadSource(),l}}return null}flushFrontBuffer(e){const t=this.requiredTracks;if(!t)return;this.log(`Removing front buffer starting at ${e}`),Object.keys(t).forEach(r=>{this.hls.trigger(R.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:r})})}getAssetPlayerQueueIndex(e){const t=this.playerQueue;for(let i=0;i<t.length;i++)if(e===t[i].assetId)return i;return-1}getAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);return this.playerQueue[t]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:t}=this;if(t){for(let i=0;i<e.length;i++)if(e[i].media===t)return e[i]}return null}createAsset(e,t,i,r,s,a){const o={parentIdentifier:e.identifier,identifier:WN(e,a,t),duration:s,startOffset:i,timelineStart:r,uri:a};return this.createAssetPlayer(e,o,t)}createAssetPlayer(e,t,i){const r=this.hls,s=r.userConfig;let a=s.videoPreference;const o=r.loadLevelObj||r.levels[r.currentLevel];(a||o)&&(a=Ke({},a),o.videoCodec&&(a.videoCodec=o.videoCodec),o.videoRange&&(a.allowedVideoRanges=[o.videoRange]));const c=r.audioTracks[r.audioTrack],l=r.subtitleTracks[r.subtitleTrack];let u=0;if(this.primaryLive||e.appendInPlace){const T=this.timelinePos-t.timelineStart;if(T>1){const x=t.duration;x&&T<x&&(u=T)}}const d=t.identifier,h=qe(qe({},s),{},{maxMaxBufferLength:Math.min(180,r.config.maxMaxBufferLength),autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:r.sessionId,assetPlayerId:d,abrEwmaDefaultEstimate:r.bandwidthEstimate,interstitialsController:void 0,startPosition:u,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:a,audioPreference:c||s.audioPreference,subtitlePreference:l||s.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,t.timelineStart&&(h.timelineOffset=t.timelineStart));const f=h.cmcd;f!=null&&f.sessionId&&f.contentId&&(h.cmcd=Ke({},f,{contentId:Os(t.uri)})),this.getAssetPlayer(d)&&this.warn(`Duplicate date range identifier ${e} and asset ${d}`);const p=new HN(this.HlsPlayerClass,h,e,t);this.playerQueue.push(p),e.assetList[i]=t;let m=!0;const g=T=>{if(T.live){var x;const w=new Error(`Interstitials MUST be VOD assets ${e}`),S={fatal:!0,type:_e.OTHER_ERROR,details:re.INTERSTITIAL_ASSET_ITEM_ERROR,error:w},C=((x=this.schedule)==null?void 0:x.findEventIndex(e.identifier))||-1;this.handleAssetItemError(S,e,C,i,w.message);return}const _=T.edge-T.fragmentStart,D=t.duration;(m||D===null||_>D)&&(m=!1,this.log(`Interstitial asset "${d}" duration change ${D} > ${_}`),t.duration=_,this.updateSchedule())};p.on(R.LEVEL_UPDATED,(T,{details:x})=>g(x)),p.on(R.LEVEL_PTS_UPDATED,(T,{details:x})=>g(x)),p.on(R.EVENT_CUE_ENTER,()=>this.onInterstitialCueEnter());const y=(T,x)=>{const _=this.getAssetPlayer(d);if(_&&x.tracks){_.off(R.BUFFER_CODECS,y),_.tracks=x.tracks;const D=this.primaryMedia;this.bufferingAsset===_.assetItem&&D&&!_.media&&this.bufferAssetPlayer(_,D)}};p.on(R.BUFFER_CODECS,y);const v=()=>{var T;const x=this.getAssetPlayer(d);if(this.log(`buffered to end of asset ${x}`),!x||!this.schedule)return;const _=this.schedule.findEventIndex(e.identifier),D=(T=this.schedule.items)==null?void 0:T[_];this.isInterstitial(D)&&this.advanceAssetBuffering(D,t)};p.on(R.BUFFERED_TO_END,v);const b=T=>()=>{if(!this.getAssetPlayer(d)||!this.schedule)return;this.shouldPlay=!0;const _=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,_,T)};return p.once(R.MEDIA_ENDED,b(i)),p.once(R.PLAYOUT_LIMIT_REACHED,b(1/0)),p.on(R.ERROR,(T,x)=>{if(!this.schedule)return;const _=this.getAssetPlayer(d);if(x.details===re.BUFFER_STALLED_ERROR){if(_!=null&&_.appendInPlace){this.handleInPlaceStall(e);return}this.onTimeupdate(),this.checkBuffer(!0);return}this.handleAssetItemError(x,e,this.schedule.findEventIndex(e.identifier),i,`Asset player error ${x.error} ${e}`)}),p.on(R.DESTROYING,()=>{if(!this.getAssetPlayer(d)||!this.schedule)return;const x=new Error(`Asset player destroyed unexpectedly ${d}`),_={fatal:!0,type:_e.OTHER_ERROR,details:re.INTERSTITIAL_ASSET_ITEM_ERROR,error:x};this.handleAssetItemError(_,e,this.schedule.findEventIndex(e.identifier),i,x.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${Ar(t)}`),this.hls.trigger(R.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:t,assetListIndex:i,event:e,player:p}),p}clearInterstitial(e,t){this.clearAssetPlayers(e,t),e.reset()}clearAssetPlayers(e,t){e.assetList.forEach(i=>{this.clearAssetPlayer(i.identifier,t)})}resetAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);if(t!==-1){this.log(`reset asset player "${e}" after error`);const i=this.playerQueue[t];this.transferMediaFromPlayer(i,null),i.resetDetails()}}clearAssetPlayer(e,t){const i=this.getAssetPlayerQueueIndex(e);if(i!==-1){const r=this.playerQueue[i];this.log(`clear ${r} toSegment: ${t&&dn(t)}`),this.transferMediaFromPlayer(r,t),this.playerQueue.splice(i,1),r.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,t,i,r,s){const{interstitial:a,assetItem:o,assetId:c}=e,l=a.assetList.length,u=this.playingAsset;this.endedAsset=null,this.playingAsset=o,(!u||u.identifier!==c)&&(u&&(this.clearAssetPlayer(u.identifier,i[r]),delete u.error),this.log(`INTERSTITIAL_ASSET_STARTED ${t+1}/${l} ${Ar(o)}`),this.hls.trigger(R.INTERSTITIAL_ASSET_STARTED,{asset:o,assetListIndex:t,event:a,schedule:i.slice(0),scheduleIndex:r,player:e})),this.bufferAssetPlayer(e,s)}bufferAssetPlayer(e,t){var i,r;if(!this.schedule)return;const{interstitial:s,assetItem:a}=e,o=this.schedule.findEventIndex(s.identifier),c=(i=this.schedule.items)==null?void 0:i[o];if(!c)return;e.loadSource(),this.setBufferingItem(c),this.bufferingAsset=a;const l=this.getBufferingPlayer();if(l===e)return;const u=s.appendInPlace;if(u&&l?.interstitial.appendInPlace===!1)return;const d=l?.tracks||((r=this.detachedData)==null?void 0:r.tracks)||this.requiredTracks;if(u&&a!==this.playingAsset){if(!e.tracks){this.log(`Waiting for track info before buffering ${e}`);return}if(d&&!fD(d,e.tracks)){const h=new Error(`Asset ${Ar(a)} SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(d)}')`),f={fatal:!0,type:_e.OTHER_ERROR,details:re.INTERSTITIAL_ASSET_ITEM_ERROR,error:h},p=s.findAssetIndex(a);this.handleAssetItemError(f,s,o,p,h.message);return}}this.transferMediaTo(e,t)}handleInPlaceStall(e){const t=this.schedule,i=this.primaryMedia;if(!t||!i)return;const r=i.currentTime,s=t.findAssetIndex(e,r),a=e.assetList[s];if(a){const o=this.getAssetPlayer(a.identifier);if(o){const c=o.currentTime||r-a.timelineStart,l=o.duration-c;if(this.warn(`Stalled at ${c} of ${c+l} in ${o} ${e} (media.currentTime: ${r})`),c&&(l/i.playbackRate<.5||o.bufferedInPlaceToEnd(i))&&o.hls){const u=t.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,u,s)}}}}advanceInPlace(e){const t=this.primaryMedia;t&&t.currentTime<e&&(t.currentTime=e)}handleAssetItemError(e,t,i,r,s){if(e.details===re.BUFFER_STALLED_ERROR)return;const a=t.assetList[r]||null;if(this.warn(`INTERSTITIAL_ASSET_ERROR ${a&&Ar(a)} ${e.error}`),!this.schedule)return;const o=a?.identifier||"",c=this.getAssetPlayerQueueIndex(o),l=this.playerQueue[c]||null,u=this.schedule.items,d=Ke({},e,{fatal:!1,errorAction:Nr(!0),asset:a,assetListIndex:r,event:t,schedule:u,scheduleIndex:i,player:l});if(this.hls.trigger(R.INTERSTITIAL_ASSET_ERROR,d),!e.fatal)return;const h=this.playingAsset,f=this.bufferingAsset,p=new Error(s);if(a&&(this.clearAssetPlayer(o,null),a.error=p),!t.assetList.some(m=>!m.error))t.error=p;else for(let m=r;m<t.assetList.length;m++)this.resetAssetPlayer(t.assetList[m].identifier);this.updateSchedule(!0),t.error?this.primaryFallback(t):h&&h.identifier===o?this.advanceAfterAssetEnded(t,i,r):f&&f.identifier===o&&this.isInterstitial(this.bufferingItem)&&this.advanceAssetBuffering(this.bufferingItem,f)}primaryFallback(e){const t=e.timelineStart,i=this.effectivePlayingItem;let r=this.timelinePos;if(i){this.log(`Fallback to primary from event "${e.identifier}" start: ${t} pos: ${r} playing: ${dn(i)} error: ${e.error}`),r===-1&&(r=this.hls.startPosition);const a=this.updateItem(i,r);this.itemsMatch(i,a)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(t,null),this.flushFrontBuffer(t))}else if(r===-1){this.checkStart();return}if(!this.schedule)return;const s=this.schedule.findItemIndexAtTime(r);this.setSchedulePosition(s)}onAssetListLoaded(e,t){var i,r;const s=t.event,a=s.identifier,o=t.assetListResponse.ASSETS;if(!((i=this.schedule)!=null&&i.hasEvent(a)))return;const c=s.timelineStart,l=s.duration;let u=0;o.forEach((m,g)=>{const y=parseFloat(m.DURATION);this.createAsset(s,g,u,c+u,y,m.URI),u+=y}),s.duration=u,this.log(`Loaded asset-list with duration: ${u} (was: ${l}) ${s}`);const d=this.waitingItem,h=d?.event.identifier===a;this.updateSchedule();const f=(r=this.bufferingItem)==null?void 0:r.event;if(h){var p;const m=this.schedule.findEventIndex(a),g=(p=this.schedule.items)==null?void 0:p[m];if(g){if(!this.playingItem&&this.timelinePos>g.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==m){s.error=new Error(`Interstitial ${o.length?"no longer within playback range":"asset-list is empty"} ${this.timelinePos} ${s}`),this.log(s.error.message),this.updateSchedule(!0),this.primaryFallback(s);return}this.setBufferingItem(g)}this.setSchedulePosition(m)}else if(f?.identifier===a){const m=s.assetList[0];if(m){const g=this.getAssetPlayer(m.identifier);if(f.appendInPlace){const y=this.primaryMedia;g&&y&&this.bufferAssetPlayer(g,y)}else g&&g.loadSource()}}}onError(e,t){if(this.schedule)switch(t.details){case re.ASSET_LIST_PARSING_ERROR:case re.ASSET_LIST_LOAD_ERROR:case re.ASSET_LIST_LOAD_TIMEOUT:{const i=t.interstitial;i&&(this.updateSchedule(!0),this.primaryFallback(i));break}case re.BUFFER_STALLED_ERROR:{const i=this.endedItem||this.waitingItem||this.playingItem;if(this.isInterstitial(i)&&i.event.appendInPlace){this.handleInPlaceStall(i.event);return}this.log(`Primary player stall @${this.timelinePos} bufferedPos: ${this.bufferedPos}`),this.onTimeupdate(),this.checkBuffer(!0);break}}}}const J1=500;class $E extends hl{constructor(e,t,i){super(e,t,i,"subtitle-stream-controller",xe.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(R.LEVEL_LOADED,this.onLevelLoaded,this),e.on(R.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(R.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(R.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(R.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(R.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(R.LEVEL_LOADED,this.onLevelLoaded,this),e.off(R.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(R.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(R.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(R.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(R.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,t){this.stopLoad(),this.state=le.IDLE,this.setInterval(J1),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,t){this.tracksBuffered=[],super.onMediaDetaching(e,t)}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:i,success:r}=t;if(this.fragContextChanged(i)||(lt(i)&&(this.fragPrevious=i),this.state=le.IDLE),!r)return;const s=this.tracksBuffered[this.currentTrackId];if(!s)return;let a;const o=i.start;for(let l=0;l<s.length;l++)if(o>=s[l].start&&o<=s[l].end){a=s[l];break}const c=i.start+i.duration;a?a.end=c:(a={start:o,end:c},s.push(a)),this.fragmentTracker.fragBuffered(i),this.fragBufferedComplete(i,null),this.media&&this.tick()}onBufferFlushing(e,t){const{startOffset:i,endOffset:r}=t;if(i===0&&r!==Number.POSITIVE_INFINITY){const s=r-1;if(s<=0)return;t.endOffsetSubtitles=Math.max(0,s),this.tracksBuffered.forEach(a=>{for(let o=0;o<a.length;){if(a[o].end<=s){a.shift();continue}else if(a[o].start<s)a[o].start=s;else break;o++}}),this.fragmentTracker.removeFragmentsInRange(i,s,xe.SUBTITLE)}}onError(e,t){const i=t.frag;i?.type===xe.SUBTITLE&&(t.details===re.FRAG_GAP&&this.fragmentTracker.fragBuffered(i,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==le.STOPPED&&(this.state=le.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){if(this.levels&&vE(this.levels,t)){this.levels=t.map(i=>new Yr(i));return}this.tracksBuffered=[],this.levels=t.map(i=>{const r=new Yr(i);return this.tracksBuffered[r.id]=[],r}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,xe.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,t){var i;if(this.currentTrackId=t.id,!((i=this.levels)!=null&&i.length)||this.currentTrackId===-1){this.clearInterval();return}const r=this.levels[this.currentTrackId];r!=null&&r.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,r&&this.state!==le.STOPPED&&this.setInterval(J1)}onSubtitleTrackLoaded(e,t){var i;const{currentTrackId:r,levels:s}=this,{details:a,id:o}=t;if(!s){this.warn(`Subtitle tracks were reset while loading level ${o}`);return}const c=s[o];if(o>=s.length||!c)return;this.log(`Subtitle track ${o} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""},duration:${a.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let l=0;if(a.live||(i=c.details)!=null&&i.live){if(a.deltaUpdateFailed)return;const d=this.mainDetails;if(!d){this.startFragRequested=!1;return}const h=d.fragments[0];if(!c.details)a.hasProgramDateTime&&d.hasProgramDateTime?(_c(a,d),l=a.fragmentStart):h&&(l=h.start,Th(a,l));else{var u;l=this.alignPlaylists(a,c.details,(u=this.levelLastLoaded)==null?void 0:u.details),l===0&&h&&(l=h.start,Th(a,l))}d&&!this.startFragRequested&&this.setStartPosition(d,l)}c.details=a,this.levelLastLoaded=c,o===r&&(this.hls.trigger(R.SUBTITLE_TRACK_UPDATED,{details:a,id:o,groupId:t.groupId}),this.tick(),a.live&&!this.fragCurrent&&this.media&&this.state===le.IDLE&&(lr(null,a.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),c.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:t,payload:i}=e,r=t.decryptdata,s=this.hls;if(!this.fragContextChanged(t)&&i&&i.byteLength>0&&r!=null&&r.key&&r.iv&&$r(r.method)){const a=performance.now();this.decrypter.decrypt(new Uint8Array(i),r.key.buffer,r.iv.buffer,Fp(r.method)).catch(o=>{throw s.trigger(R.ERROR,{type:_e.MEDIA_ERROR,details:re.FRAG_DECRYPT_ERROR,fatal:!1,error:o,reason:o.message,frag:t}),o}).then(o=>{const c=performance.now();s.trigger(R.FRAG_DECRYPTED,{frag:t,payload:o,stats:{tstart:a,tdecrypt:c}})}).catch(o=>{this.warn(`${o.name}: ${o.message}`),this.state=le.IDLE})}}doTick(){if(!this.media){this.state=le.IDLE;return}if(this.state===le.IDLE){const{currentTrackId:e,levels:t}=this,i=t?.[e];if(!i||!t.length||!i.details||this.waitForLive(i))return;const{config:r}=this,s=this.getLoadPosition(),a=ke.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],s,r.maxBufferHole),{end:o,len:c}=a,l=i.details,u=this.hls.maxBufferLength+l.levelTargetDuration;if(c>u)return;const d=l.fragments,h=d.length,f=l.edge;let p=null;const m=this.fragPrevious;if(o<f){const v=r.maxFragLookUpTolerance,b=o>f-v?0:v;p=lr(m,d,Math.max(d[0].start,o),b),!p&&m&&m.start<d[0].start&&(p=d[0])}else p=d[h-1];if(p=this.filterReplacedPrimary(p,i.details),!p)return;const g=p.sn-l.startSN,y=d[g-1];if(y&&y.cc===p.cc&&this.fragmentTracker.getState(y)===gt.NOT_LOADED&&(p=y),this.fragmentTracker.getState(p)===gt.NOT_LOADED){const v=this.mapToInitFragWhenRequired(p);v&&this.loadFragment(v,i,o)}}}loadFragment(e,t,i){lt(e)?super.loadFragment(e,t,i):this._loadInitSegment(e,t)}get mediaBufferTimeRanges(){return new zN(this.tracksBuffered[this.currentTrackId]||[])}}class zN{constructor(e){this.buffered=void 0;const t=(i,r,s)=>{if(r=r>>>0,r>s-1)throw new DOMException(`Failed to execute '${i}' on 'TimeRanges': The index provided (${r}) is greater than the maximum bound (${s})`);return e[r][i]};this.buffered={get length(){return e.length},end(i){return t("end",i,e.length)},start(i){return t("start",i,e.length)}}}}const XN={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},WE=n=>String.fromCharCode(XN[n]||n),fn=15,Bn=100,YN={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},QN={17:2,18:4,21:6,22:8,23:10,19:13,20:15},ZN={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},JN={25:2,26:4,29:6,30:8,31:10,27:13,28:15},e6=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class t6{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const i=typeof t=="function"?t():t;je.log(`${this.time} [${e}] ${i}`)}}}const ji=function(e){const t=[];for(let i=0;i<e.length;i++)t.push(e[i].toString(16));return t};class VE{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let i=0;i<t.length;i++){const r=t[i];e.hasOwnProperty(r)&&(this[r]=e[r])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class n6{constructor(){this.uchar=" ",this.penState=new VE}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class i6{constructor(e){this.chars=[],this.pos=0,this.currPenState=new VE,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<Bn;t++)this.chars.push(new n6);this.logger=e}equals(e){for(let t=0;t<Bn;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<Bn;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<Bn;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Bn&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Bn)}moveCursor(e){const t=this.pos+e;if(e>1)for(let i=this.pos+1;i<t+1;i++)this.chars[i].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=WE(e);if(this.pos>=Bn){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)}clearFromPos(e){let t;for(t=e;t<Bn;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let i=0;i<Bn;i++){const r=this.chars[i].uchar;r!==" "&&(t=!1),e.push(r)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class pd{constructor(e){this.rows=[],this.currRow=fn-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<fn;t++)this.rows.push(new i6(e));this.logger=e}reset(){for(let e=0;e<fn;e++)this.rows[e].clear();this.currRow=fn-1}equals(e){let t=!0;for(let i=0;i<fn;i++)if(!this.rows[i].equals(e.rows[i])){t=!1;break}return t}copy(e){for(let t=0;t<fn;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<fn;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+Ye(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let o=0;o<fn;o++)this.rows[o].clear();const s=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){const o=a.rows[s].cueStartTime,c=this.logger.time;if(o!==null&&c!==null&&o<c)for(let l=0;l<this.nrRollUpRows;l++)this.rows[t-this.nrRollUpRows+l+1].copy(a.rows[s+l])}}this.currRow=t;const i=this.rows[this.currRow];if(e.indent!==null){const s=e.indent,a=Math.max(s-1,0);i.setCursor(e.indent),e.color=i.chars[a].penState.foreground}const r={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(r)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+Ye(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let i="",r=-1;for(let s=0;s<fn;s++){const a=this.rows[s].getTextString();a&&(r=s+1,e?t.push("Row "+r+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(e?i="["+t.join(" | ")+"]":i=t.join(`
`)),i}getTextAndFormat(){return this.rows}}class eb{constructor(e,t,i){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new pd(i),this.nonDisplayedMemory=new pd(i),this.lastOutputScreen=new pd(i),this.currRollUpRow=this.displayedMemory.rows[fn-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=i}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[fn-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let i=0;i<e.length;i++)this.writeScreen.insertChar(e[i]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{const i=Math.floor(e/2)-16,r=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=r[i]}this.logger.log(2,"MIDROW: "+Ye(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;t!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=t:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class tb{constructor(e,t,i){this.channels=void 0,this.currentChannel=0,this.cmdHistory=s6(),this.logger=void 0;const r=this.logger=new t6;this.channels=[null,new eb(e,t,r),new eb(e+1,i,r)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let i=0;i<t.length;i+=2){const r=t[i]&127,s=t[i+1]&127;let a=!1,o=null;if(r===0&&s===0)continue;this.logger.log(3,()=>"["+ji([t[i],t[i+1]])+"] -> ("+ji([r,s])+")");const c=this.cmdHistory;if(r>=16&&r<=31){if(r6(r,s,c)){to(null,null,c),this.logger.log(3,()=>"Repeated command ("+ji([r,s])+") is dropped");continue}to(r,s,this.cmdHistory),a=this.parseCmd(r,s),a||(a=this.parseMidrow(r,s)),a||(a=this.parsePAC(r,s)),a||(a=this.parseBackgroundAttributes(r,s))}else to(null,null,c);if(!a&&(o=this.parseChars(r,s),o)){const u=this.currentChannel;u&&u>0?this.channels[u].insertChars(o):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!a&&!o&&this.logger.log(2,()=>"Couldn't parse cleaned data "+ji([r,s])+" orig: "+ji([t[i],t[i+1]]))}}parseCmd(e,t){const i=(e===20||e===28||e===21||e===29)&&t>=32&&t<=47,r=(e===23||e===31)&&t>=33&&t<=35;if(!(i||r))return!1;const s=e===20||e===21||e===23?1:2,a=this.channels[s];return e===20||e===21||e===28||e===29?t===32?a.ccRCL():t===33?a.ccBS():t===34?a.ccAOF():t===35?a.ccAON():t===36?a.ccDER():t===37?a.ccRU(2):t===38?a.ccRU(3):t===39?a.ccRU(4):t===40?a.ccFON():t===41?a.ccRDC():t===42?a.ccTR():t===43?a.ccRTD():t===44?a.ccEDM():t===45?a.ccCR():t===46?a.ccENM():t===47&&a.ccEOC():a.ccTO(t-32),this.currentChannel=s,!0}parseMidrow(e,t){let i=0;if((e===17||e===25)&&t>=32&&t<=47){if(e===17?i=1:i=2,i!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const r=this.channels[i];return r?(r.ccMIDROW(t),this.logger.log(3,()=>"MIDROW ("+ji([e,t])+")"),!0):!1}return!1}parsePAC(e,t){let i;const r=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,s=(e===16||e===24)&&t>=64&&t<=95;if(!(r||s))return!1;const a=e<=23?1:2;t>=64&&t<=95?i=a===1?YN[e]:ZN[e]:i=a===1?QN[e]:JN[e];const o=this.channels[a];return o?(o.setPAC(this.interpretPAC(i,t)),this.currentChannel=a,!0):!1}interpretPAC(e,t){let i;const r={color:null,italics:!1,indent:null,underline:!1,row:e};return t>95?i=t-96:i=t-64,r.underline=(i&1)===1,i<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(i/2)]:i<=15?(r.italics=!0,r.color="white"):r.indent=Math.floor((i-16)/2)*4,r}parseChars(e,t){let i,r=null,s=null;if(e>=25?(i=2,s=e-8):(i=1,s=e),s>=17&&s<=19){let a;s===17?a=t+80:s===18?a=t+112:a=t+144,this.logger.log(2,()=>"Special char '"+WE(a)+"' in channel "+i),r=[a]}else e>=32&&e<=127&&(r=t===0?[e]:[e,t]);return r&&this.logger.log(3,()=>"Char codes =  "+ji(r).join(",")),r}parseBackgroundAttributes(e,t){const i=(e===16||e===24)&&t>=32&&t<=47,r=(e===23||e===31)&&t>=45&&t<=47;if(!(i||r))return!1;let s;const a={};e===16||e===24?(s=Math.floor((t-32)/2),a.background=e6[s],t%2===1&&(a.background=a.background+"_semi")):t===45?a.background="transparent":(a.foreground="black",t===47&&(a.underline=!0));const o=e<=23?1:2;return this.channels[o].setBkgData(a),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}to(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const i=this.channels[t];i&&i.cueSplitAtTime(e)}}}function to(n,e,t){t.a=n,t.b=e}function r6(n,e,t){return t.a===n&&t.b===e}function s6(){return{a:null,b:null}}var jp=(function(){if(Tc!=null&&Tc.VTTCue)return self.VTTCue;const n=["","lr","rl"],e=["start","middle","end","left","right"];function t(o,c){if(typeof c!="string"||!Array.isArray(o))return!1;const l=c.toLowerCase();return~o.indexOf(l)?l:!1}function i(o){return t(n,o)}function r(o){return t(e,o)}function s(o,...c){let l=1;for(;l<arguments.length;l++){const u=arguments[l];for(const d in u)o[d]=u[d]}return o}function a(o,c,l){const u=this,d={enumerable:!0};u.hasBeenReset=!1;let h="",f=!1,p=o,m=c,g=l,y=null,v="",b=!0,T="auto",x="start",_=50,D="middle",w=50,S="middle";Object.defineProperty(u,"id",s({},d,{get:function(){return h},set:function(C){h=""+C}})),Object.defineProperty(u,"pauseOnExit",s({},d,{get:function(){return f},set:function(C){f=!!C}})),Object.defineProperty(u,"startTime",s({},d,{get:function(){return p},set:function(C){if(typeof C!="number")throw new TypeError("Start time must be set to a number.");p=C,this.hasBeenReset=!0}})),Object.defineProperty(u,"endTime",s({},d,{get:function(){return m},set:function(C){if(typeof C!="number")throw new TypeError("End time must be set to a number.");m=C,this.hasBeenReset=!0}})),Object.defineProperty(u,"text",s({},d,{get:function(){return g},set:function(C){g=""+C,this.hasBeenReset=!0}})),Object.defineProperty(u,"region",s({},d,{get:function(){return y},set:function(C){y=C,this.hasBeenReset=!0}})),Object.defineProperty(u,"vertical",s({},d,{get:function(){return v},set:function(C){const O=i(C);if(O===!1)throw new SyntaxError("An invalid or illegal string was specified.");v=O,this.hasBeenReset=!0}})),Object.defineProperty(u,"snapToLines",s({},d,{get:function(){return b},set:function(C){b=!!C,this.hasBeenReset=!0}})),Object.defineProperty(u,"line",s({},d,{get:function(){return T},set:function(C){if(typeof C!="number"&&C!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");T=C,this.hasBeenReset=!0}})),Object.defineProperty(u,"lineAlign",s({},d,{get:function(){return x},set:function(C){const O=r(C);if(!O)throw new SyntaxError("An invalid or illegal string was specified.");x=O,this.hasBeenReset=!0}})),Object.defineProperty(u,"position",s({},d,{get:function(){return _},set:function(C){if(C<0||C>100)throw new Error("Position must be between 0 and 100.");_=C,this.hasBeenReset=!0}})),Object.defineProperty(u,"positionAlign",s({},d,{get:function(){return D},set:function(C){const O=r(C);if(!O)throw new SyntaxError("An invalid or illegal string was specified.");D=O,this.hasBeenReset=!0}})),Object.defineProperty(u,"size",s({},d,{get:function(){return w},set:function(C){if(C<0||C>100)throw new Error("Size must be between 0 and 100.");w=C,this.hasBeenReset=!0}})),Object.defineProperty(u,"align",s({},d,{get:function(){return S},set:function(C){const O=r(C);if(!O)throw new SyntaxError("An invalid or illegal string was specified.");S=O,this.hasBeenReset=!0}})),u.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a})();class a6{decode(e,t){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function GE(n){function e(i,r,s,a){return(i|0)*3600+(r|0)*60+(s|0)+parseFloat(a||0)}const t=n.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return t?parseFloat(t[2])>59?e(t[2],t[3],0,t[4]):e(t[1],t[2],t[3],t[4]):null}class o6{constructor(){this.values=Object.create(null)}set(e,t){!this.get(e)&&t!==""&&(this.values[e]=t)}get(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,i){for(let r=0;r<i.length;++r)if(t===i[r]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const i=parseFloat(t);if(i>=0&&i<=100)return this.set(e,i),!0}return!1}}function HE(n,e,t,i){const r=i?n.split(i):[n];for(const s in r){if(typeof r[s]!="string")continue;const a=r[s].split(t);if(a.length!==2)continue;const o=a[0],c=a[1];e(o,c)}}const Ch=new jp(0,0,""),no=Ch.align==="middle"?"middle":"center";function c6(n,e,t){const i=n;function r(){const o=GE(n);if(o===null)throw new Error("Malformed timestamp: "+i);return n=n.replace(/^[^\sa-zA-Z-]+/,""),o}function s(o,c){const l=new o6;HE(o,function(h,f){let p;switch(h){case"region":for(let m=t.length-1;m>=0;m--)if(t[m].id===f){l.set(h,t[m].region);break}break;case"vertical":l.alt(h,f,["rl","lr"]);break;case"line":p=f.split(","),l.integer(h,p[0]),l.percent(h,p[0])&&l.set("snapToLines",!1),l.alt(h,p[0],["auto"]),p.length===2&&l.alt("lineAlign",p[1],["start",no,"end"]);break;case"position":p=f.split(","),l.percent(h,p[0]),p.length===2&&l.alt("positionAlign",p[1],["start",no,"end","line-left","line-right","auto"]);break;case"size":l.percent(h,f);break;case"align":l.alt(h,f,["start",no,"end","left","right"]);break}},/:/,/\s/),c.region=l.get("region",null),c.vertical=l.get("vertical","");let u=l.get("line","auto");u==="auto"&&Ch.line===-1&&(u=-1),c.line=u,c.lineAlign=l.get("lineAlign","start"),c.snapToLines=l.get("snapToLines",!0),c.size=l.get("size",100),c.align=l.get("align",no);let d=l.get("position","auto");d==="auto"&&Ch.position===50&&(d=c.align==="start"||c.align==="left"?0:c.align==="end"||c.align==="right"?100:50),c.position=d}function a(){n=n.replace(/^\s+/,"")}if(a(),e.startTime=r(),a(),n.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+i);n=n.slice(3),a(),e.endTime=r(),a(),s(n,e)}function qE(n){return n.replace(/<br(?: \/)?>/gi,`
`)}class l6{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new a6,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));function i(){let s=t.buffer,a=0;for(s=qE(s);a<s.length&&s[a]!=="\r"&&s[a]!==`
`;)++a;const o=s.slice(0,a);return s[a]==="\r"&&++a,s[a]===`
`&&++a,t.buffer=s.slice(a),o}function r(s){HE(s,function(a,o){},/:/)}try{let s="";if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;s=i();const o=s.match(/^(Ã¯Â»Â¿)?WEBVTT([ \t].*)?$/);if(!(o!=null&&o[0]))throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let a=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(a?a=!1:s=i(),t.state){case"HEADER":/:/.test(s)?r(s):s||(t.state="ID");continue;case"NOTE":s||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){t.state="NOTE";break}if(!s)continue;if(t.cue=new jp(0,0,""),t.state="CUE",s.indexOf("-->")===-1){t.cue.id=s;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{c6(s,t.cue,t.regionList)}catch{t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const o=s.indexOf("-->")!==-1;if(!s||o&&(a=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(t.cue===null)continue;t.cue.text&&(t.cue.text+=`
`),t.cue.text+=s}continue;case"BADCUE":s||(t.state="ID")}}}catch{t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const u6=/\r\n|\n\r|\n|\r/g,gd=function(e,t,i=0){return e.slice(i,i+t.length)===t},d6=function(e){let t=parseInt(e.slice(-3));const i=parseInt(e.slice(-6,-4)),r=parseInt(e.slice(-9,-7)),s=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!ye(t)||!ye(i)||!ye(r)||!ye(s))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*i,t+=60*1e3*r,t+=3600*1e3*s,t};function Kp(n,e,t){return Os(n.toString())+Os(e.toString())+Os(t)}const h6=function(e,t,i){let r=e[t],s=e[r.prevCC];if(!s||!s.new&&r.new){e.ccOffset=e.presentationOffset=r.start,r.new=!1;return}for(;(a=s)!=null&&a.new;){var a;e.ccOffset+=r.start-s.start,r.new=!1,r=s,s=e[r.prevCC]}e.presentationOffset=i};function f6(n,e,t,i,r,s,a){const o=new l6,c=jt(new Uint8Array(n)).trim().replace(u6,`
`).split(`
`),l=[],u=e?w5(e.baseTime,e.timescale):0;let d="00:00.000",h=0,f=0,p,m=!0;o.oncue=function(g){const y=t[i];let v=t.ccOffset;const b=(h-u)/9e4;if(y!=null&&y.new&&(f!==void 0?v=t.ccOffset=y.start:h6(t,i,b)),b){if(!e){p=new Error("Missing initPTS for VTT MPEGTS");return}v=b-t.presentationOffset}const T=g.endTime-g.startTime,x=qt((g.startTime+v-f)*9e4,r*9e4)/9e4;g.startTime=Math.max(x,0),g.endTime=Math.max(x+T,0);const _=g.text.trim();g.text=decodeURIComponent(encodeURIComponent(_)),g.id||(g.id=Kp(g.startTime,g.endTime,_)),g.endTime>0&&l.push(g)},o.onparsingerror=function(g){p=g},o.onflush=function(){if(p){a(p);return}s(l)},c.forEach(g=>{if(m)if(gd(g,"X-TIMESTAMP-MAP=")){m=!1,g.slice(16).split(",").forEach(y=>{gd(y,"LOCAL:")?d=y.slice(6):gd(y,"MPEGTS:")&&(h=parseInt(y.slice(7)))});try{f=d6(d)/1e3}catch(y){p=y}return}else g===""&&(m=!1);o.parse(g+`
`)}),o.flush()}const md="stpp.ttml.im1t",jE=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,KE=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,p6={left:"start",center:"center",right:"end",start:"start",end:"end"};function nb(n,e,t,i){const r=Me(new Uint8Array(n),["mdat"]);if(r.length===0){i(new Error("Could not parse IMSC1 mdat"));return}const s=r.map(o=>jt(o)),a=A5(e.baseTime,1,e.timescale);try{s.forEach(o=>t(g6(o,a)))}catch(o){i(o)}}function g6(n,e){const r=new DOMParser().parseFromString(n,"text/xml").getElementsByTagName("tt")[0];if(!r)throw new Error("Invalid ttml");const s={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},a=Object.keys(s).reduce((d,h)=>(d[h]=r.getAttribute(`ttp:${h}`)||s[h],d),{}),o=r.getAttribute("xml:space")!=="preserve",c=ib(yd(r,"styling","style")),l=ib(yd(r,"layout","region")),u=yd(r,"body","[begin]");return[].map.call(u,d=>{const h=zE(d,o);if(!h||!d.hasAttribute("begin"))return null;const f=bd(d.getAttribute("begin"),a),p=bd(d.getAttribute("dur"),a);let m=bd(d.getAttribute("end"),a);if(f===null)throw rb(d);if(m===null){if(p===null)throw rb(d);m=f+p}const g=new jp(f-e,m-e,h);g.id=Kp(g.startTime,g.endTime,g.text);const y=l[d.getAttribute("region")],v=c[d.getAttribute("style")],b=m6(y,v,c),{textAlign:T}=b;if(T){const x=p6[T];x&&(g.lineAlign=x),g.align=T}return Ke(g,b),g}).filter(d=>d!==null)}function yd(n,e,t){const i=n.getElementsByTagName(e)[0];return i?[].slice.call(i.querySelectorAll(t)):[]}function ib(n){return n.reduce((e,t)=>{const i=t.getAttribute("xml:id");return i&&(e[i]=t),e},{})}function zE(n,e){return[].slice.call(n.childNodes).reduce((t,i,r)=>{var s;return i.nodeName==="br"&&r?t+`
`:(s=i.childNodes)!=null&&s.length?zE(i,e):e?t+i.textContent.trim().replace(/\s+/g," "):t+i.textContent},"")}function m6(n,e,t){const i="http://www.w3.org/ns/ttml#styling";let r=null;const s=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],a=n!=null&&n.hasAttribute("style")?n.getAttribute("style"):null;return a&&t.hasOwnProperty(a)&&(r=t[a]),s.reduce((o,c)=>{const l=vd(e,i,c)||vd(n,i,c)||vd(r,i,c);return l&&(o[c]=l),o},{})}function vd(n,e,t){return n&&n.hasAttributeNS(e,t)?n.getAttributeNS(e,t):null}function rb(n){return new Error(`Could not parse ttml timestamp ${n}`)}function bd(n,e){if(!n)return null;let t=GE(n);return t===null&&(jE.test(n)?t=y6(n,e):KE.test(n)&&(t=v6(n,e))),t}function y6(n,e){const t=jE.exec(n),i=(t[4]|0)+(t[5]|0)/e.subFrameRate;return(t[1]|0)*3600+(t[2]|0)*60+(t[3]|0)+i/e.frameRate}function v6(n,e){const t=KE.exec(n),i=Number(t[1]);switch(t[2]){case"h":return i*3600;case"m":return i*60;case"ms":return i*1e3;case"f":return i/e.frameRate;case"t":return i/e.tickRate}return i}class io{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,i){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=i,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}class XE{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=ab(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(R.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(R.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(R.MANIFEST_LOADING,this.onManifestLoading,this),e.on(R.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(R.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(R.FRAG_LOADING,this.onFragLoading,this),e.on(R.FRAG_LOADED,this.onFragLoaded,this),e.on(R.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(R.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(R.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(R.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(R.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(R.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(R.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(R.MANIFEST_LOADING,this.onManifestLoading,this),e.off(R.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(R.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(R.FRAG_LOADING,this.onFragLoading,this),e.off(R.FRAG_LOADED,this.onFragLoaded,this),e.off(R.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(R.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(R.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(R.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(R.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new io(this,"textTrack1"),t=new io(this,"textTrack2"),i=new io(this,"textTrack3"),r=new io(this,"textTrack4");this.cea608Parser1=new tb(1,e,t),this.cea608Parser2=new tb(3,i,r)}addCues(e,t,i,r,s){let a=!1;for(let o=s.length;o--;){const c=s[o],l=b6(c[0],c[1],t,i);if(l>=0&&(c[0]=Math.min(c[0],t),c[1]=Math.max(c[1],i),a=!0,l/(i-t)>.5))return}if(a||s.push([t,i]),this.config.renderTextTracksNatively){const o=this.captionsTracks[e];this.Cues.newCue(o,t,i,r)}else{const o=this.Cues.newCue(null,t,i,r);this.hls.trigger(R.CUES_PARSED,{type:"captions",cues:o,track:e})}}onInitPtsFound(e,{frag:t,id:i,initPTS:r,timescale:s,trackId:a}){const{unparsedVttFrags:o}=this;i===xe.MAIN&&(this.initPTS[t.cc]={baseTime:r,timescale:s,trackId:a}),o.length&&(this.unparsedVttFrags=[],o.forEach(c=>{this.initPTS[c.frag.cc]?this.onFragLoaded(R.FRAG_LOADED,c):this.hls.trigger(R.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:c.frag,error:new Error("Subtitle discontinuity domain does not match main")})}))}getExistingTrack(e,t){const{media:i}=this;if(i)for(let r=0;r<i.textTracks.length;r++){const s=i.textTracks[r];if(sb(s,{name:e,lang:t,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return s}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:i,media:r}=this,{label:s,languageCode:a}=t[e],o=this.getExistingTrack(s,a);if(o)i[e]=o,Ur(i[e]),OE(i[e],r);else{const c=this.createTextTrack("captions",s,a);c&&(c[e]=!0,i[e]=c)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const i=t.label,r={_id:e,label:i,kind:"captions",default:t.media?!!t.media.default:!1,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=r,this.hls.trigger(R.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[r]})}createTextTrack(e,t,i){const r=this.media;if(r)return r.addTextTrack(e,t,i)}onMediaAttaching(e,t){this.media=t.media,t.mediaSource||this._cleanTracks()}onMediaDetaching(e,t){const i=!!t.transferMedia;if(this.media=null,i)return;const{captionsTracks:r}=this;Object.keys(r).forEach(s=>{Ur(r[s]),delete r[s]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=ab(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let i=0;i<t.length;i++)Ur(t[i])}onSubtitleTracksUpdated(e,t){const i=t.subtitleTracks||[],r=i.some(s=>s.textCodec===md);if(this.config.enableWebVTT||r&&this.config.enableIMSC1){if(vE(this.tracks,i)){this.tracks=i;return}if(this.textTracks=[],this.tracks=i,this.config.renderTextTracksNatively){const a=this.media,o=a?jo(a.textTracks):null;if(this.tracks.forEach((c,l)=>{let u;if(o){let d=null;for(let h=0;h<o.length;h++)if(o[h]&&sb(o[h],c)){d=o[h],o[h]=null;break}d&&(u=d)}if(u)Ur(u);else{const d=YE(c);u=this.createTextTrack(d,c.name,c.lang),u&&(u.mode="disabled")}u&&this.textTracks.push(u)}),o!=null&&o.length){const c=o.filter(l=>l!==null).map(l=>l.label);c.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${c.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const a=this.tracks.map(o=>({label:o.name,kind:o.type.toLowerCase(),default:o.default,subtitleTrack:o}));this.hls.trigger(R.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:a})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(i=>{const r=/(?:CC|SERVICE)([1-4])/.exec(i.instreamId);if(!r)return;const s=`textTrack${r[1]}`,a=this.captionsProperties[s];a&&(a.label=i.name,i.lang&&(a.languageCode=i.lang),a.media=i)})}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return t?.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===xe.MAIN){var i,r;const{cea608Parser1:s,cea608Parser2:a,lastSn:o}=this,{cc:c,sn:l}=t.frag,u=(i=(r=t.part)==null?void 0:r.index)!=null?i:-1;s&&a&&(l!==o+1||l===o&&u!==this.lastPartIndex+1||c!==this.lastCc)&&(s.reset(),a.reset()),this.lastCc=c,this.lastSn=l,this.lastPartIndex=u}}onFragLoaded(e,t){const{frag:i,payload:r}=t;if(i.type===xe.SUBTITLE)if(r.byteLength){const s=i.decryptdata,a="stats"in t;if(s==null||!s.encrypted||a){const o=this.tracks[i.level],c=this.vttCCs;c[i.cc]||(c[i.cc]={start:i.start,prevCC:this.prevCC,new:!0},this.prevCC=i.cc),o&&o.textCodec===md?this._parseIMSC1(i,r):this._parseVTTs(t)}}else this.hls.trigger(R.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const i=this.hls;nb(t,this.initPTS[e.cc],r=>{this._appendCues(r,e.level),i.trigger(R.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},r=>{i.logger.log(`Failed to parse IMSC1: ${r}`),i.trigger(R.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:r})})}_parseVTTs(e){var t;const{frag:i,payload:r}=e,{initPTS:s,unparsedVttFrags:a}=this,o=s.length-1;if(!s[i.cc]&&o===-1){a.push(e);return}const c=this.hls,l=(t=i.initSegment)!=null&&t.data?rn(i.initSegment.data,new Uint8Array(r)).buffer:r;f6(l,this.initPTS[i.cc],this.vttCCs,i.cc,i.start,u=>{this._appendCues(u,i.level),c.trigger(R.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:i})},u=>{const d=u.message==="Missing initPTS for VTT MPEGTS";d?a.push(e):this._fallbackToIMSC1(i,r),c.logger.log(`Failed to parse VTT cue: ${u}`),!(d&&o>i.cc)&&c.trigger(R.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:u})})}_fallbackToIMSC1(e,t){const i=this.tracks[e.level];i.textCodec||nb(t,this.initPTS[e.cc],()=>{i.textCodec=md,this._parseIMSC1(e,t)},()=>{i.textCodec="wvtt"})}_appendCues(e,t){const i=this.hls;if(this.config.renderTextTracksNatively){const r=this.textTracks[t];if(!r||r.mode==="disabled")return;e.forEach(s=>ME(r,s))}else{const r=this.tracks[t];if(!r)return;const s=r.default?"default":"subtitles"+t;i.trigger(R.CUES_PARSED,{type:"subtitles",cues:e,track:s})}}onFragDecrypted(e,t){const{frag:i}=t;i.type===xe.SUBTITLE&&this.onFragLoaded(R.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:i,samples:r}=t;if(!(i.type===xe.MAIN&&this.closedCaptionsForLevel(i)==="NONE"))for(let s=0;s<r.length;s++){const a=r[s].bytes;if(a){this.cea608Parser1||this.initCea608Parsers();const o=this.extractCea608Data(a);this.cea608Parser1.addData(r[s].pts,o[0]),this.cea608Parser2.addData(r[s].pts,o[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:i,endOffsetSubtitles:r,type:s}){const{media:a}=this;if(!(!a||a.currentTime<i)){if(!s||s==="video"){const{captionsTracks:o}=this;Object.keys(o).forEach(c=>Ih(o[c],t,i))}if(this.config.renderTextTracksNatively&&t===0&&r!==void 0){const{textTracks:o}=this;Object.keys(o).forEach(c=>Ih(o[c],t,r))}}}extractCea608Data(e){const t=[[],[]],i=e[0]&31;let r=2;for(let s=0;s<i;s++){const a=e[r++],o=127&e[r++],c=127&e[r++];if(o===0&&c===0)continue;if((4&a)!==0){const u=3&a;(u===0||u===1)&&(t[u].push(o),t[u].push(c))}}return t}}function YE(n){return n.characteristics&&/transcribes-spoken-dialog/gi.test(n.characteristics)&&/describes-music-and-sound/gi.test(n.characteristics)?"captions":"subtitles"}function sb(n,e){return!!n&&n.kind===YE(e)&&Eh(e,n)}function b6(n,e,t,i){return Math.min(e,i)-Math.max(n,t)}function ab(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}const x6=/\s/,QE={newCue(n,e,t,i){const r=[];let s,a,o,c,l;const u=self.VTTCue||self.TextTrackCue;for(let h=0;h<i.rows.length;h++)if(s=i.rows[h],o=!0,c=0,l="",!s.isEmpty()){var d;for(let m=0;m<s.chars.length;m++)x6.test(s.chars[m].uchar)&&o?c++:(l+=s.chars[m].uchar,o=!1);s.cueStartTime=e,e===t&&(t+=1e-4),c>=16?c--:c++;const f=qE(l.trim()),p=Kp(e,t,f);n!=null&&(d=n.cues)!=null&&d.getCueById(p)||(a=new u(e,t,f),a.id=p,a.line=h+1,a.align="left",a.position=10+Math.min(80,Math.floor(c*8/32)*10),r.push(a))}return n&&r.length&&(r.sort((h,f)=>h.line==="auto"||f.line==="auto"?0:h.line>8&&f.line>8?f.line-h.line:h.line-f.line),r.forEach(h=>ME(n,h))),r}};function ZE(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const T6=/(\d+)-(\d+)\/(\d+)/;class Rh{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||S6,this.controller=new self.AbortController,this.stats=new ll}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,i){const r=this.stats;if(r.loading.start)throw new Error("Loader can only be used once.");r.loading.start=self.performance.now();const s=_6(e,this.controller.signal),a=e.responseType==="arraybuffer",o=a?"byteLength":"length",{maxTimeToFirstByteMs:c,maxLoadTimeMs:l}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=i,this.request=this.fetchSetup(e,s),self.clearTimeout(this.requestTimeout),t.timeout=c&&ye(c)?c:l,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(r,e,this.response))},t.timeout),(ra(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(d=>{var h;this.response=this.loader=d;const f=Math.max(self.performance.now(),r.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=l,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(r,e,this.response))},l-(f-r.loading.start)),!d.ok){const{status:m,statusText:g}=d;throw new A6(g||"fetch, bad network response",m,d)}r.loading.first=f,r.total=E6(d.headers)||r.total;const p=(h=this.callbacks)==null?void 0:h.onProgress;return p&&ye(t.highWaterMark)?this.loadProgressively(d,r,e,t.highWaterMark,p):a?d.arrayBuffer():e.responseType==="json"?d.json():d.text()}).then(d=>{var h,f;const p=this.response;if(!p)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),r.loading.end=Math.max(self.performance.now(),r.loading.first);const m=d[o];m&&(r.loaded=r.total=m);const g={url:p.url,data:d,code:p.status},y=(h=this.callbacks)==null?void 0:h.onProgress;y&&!ye(t.highWaterMark)&&y(r,e,d,p),(f=this.callbacks)==null||f.onSuccess(g,r,e,p)}).catch(d=>{var h;if(self.clearTimeout(this.requestTimeout),r.aborted)return;const f=d&&d.code||0,p=d?d.message:null;(h=this.callbacks)==null||h.onError({code:f,text:p},e,d?d.details:null,r)})}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,i,r=0,s){const a=new QD,o=e.body.getReader(),c=()=>o.read().then(l=>{if(l.done)return a.dataLength&&s(t,i,a.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const u=l.value,d=u.length;return t.loaded+=d,d<r||a.dataLength?(a.push(u),a.dataLength>=r&&s(t,i,a.flush().buffer,e)):s(t,i,u.buffer,e),c()}).catch(()=>Promise.reject());return c()}}function _6(n,e){const t={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(Ke({},n.headers))};return n.rangeEnd&&t.headers.set("Range","bytes="+n.rangeStart+"-"+String(n.rangeEnd-1)),t}function D6(n){const e=T6.exec(n);if(e)return parseInt(e[2])-parseInt(e[1])+1}function E6(n){const e=n.get("Content-Range");if(e){const i=D6(e);if(ye(i))return i}const t=n.get("Content-Length");if(t)return parseInt(t)}function S6(n,e){return new self.Request(n.url,e)}class A6 extends Error{constructor(e,t,i){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=i}}const w6=/^age:\s*[\d.]+\s*$/im;class zp{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new ll,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,i){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=i,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const i=this.loader=new self.XMLHttpRequest,r=this.stats;r.loading.first=0,r.loaded=0,r.aborted=!1;const s=this.xhrSetup;s?Promise.resolve().then(()=>{if(!(this.loader!==i||this.stats.aborted))return s(i,t.url)}).catch(a=>{if(!(this.loader!==i||this.stats.aborted))return i.open("GET",t.url,!0),s(i,t.url)}).then(()=>{this.loader!==i||this.stats.aborted||this.openAndSendXhr(i,t,e)}).catch(a=>{var o;(o=this.callbacks)==null||o.onError({code:i.status,text:a.message},t,i,r)}):this.openAndSendXhr(i,t,e)}openAndSendXhr(e,t,i){e.readyState||e.open("GET",t.url,!0);const r=t.headers,{maxTimeToFirstByteMs:s,maxLoadTimeMs:a}=i.loadPolicy;if(r)for(const o in r)e.setRequestHeader(o,r[o]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),i.timeout=s&&ye(s)?s:a,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:i}=this;if(!e||!t)return;const r=t.readyState,s=this.config;if(!i.aborted&&r>=2&&(i.loading.first===0&&(i.loading.first=Math.max(self.performance.now(),i.loading.start),s.timeout!==s.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),s.timeout=s.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),s.loadPolicy.maxLoadTimeMs-(i.loading.first-i.loading.start)))),r===4)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const l=t.status,u=t.responseType==="text"?t.responseText:null;if(l>=200&&l<300){const p=u??t.response;if(p!=null){var a,o;i.loading.end=Math.max(self.performance.now(),i.loading.first);const m=t.responseType==="arraybuffer"?p.byteLength:p.length;i.loaded=i.total=m,i.bwEstimate=i.total*8e3/(i.loading.end-i.loading.first);const g=(a=this.callbacks)==null?void 0:a.onProgress;g&&g(i,e,p,t);const y={url:t.responseURL,data:p,code:l};(o=this.callbacks)==null||o.onSuccess(y,i,e,t);return}}const d=s.loadPolicy.errorRetry,h=i.retry,f={url:e.url,data:void 0,code:l};if(bc(d,h,!1,f))this.retry(d);else{var c;je.error(`${l} while loading ${e.url}`),(c=this.callbacks)==null||c.onError({code:l,text:t.statusText},e,t,i)}}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,t=this.stats.retry;if(bc(e,t,!0))this.retry(e);else{var i;je.warn(`timeout while loading ${(i=this.context)==null?void 0:i.url}`);const r=this.callbacks;r&&(this.abortInternal(),r.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:i}=this;this.retryDelay=Lp(e,i.retry),i.retry++,je.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${t?.url}, retrying ${i.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&w6.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const I6={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},C6=qe(qe({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:60*1e3*1e3,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:zp,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:RD,bufferController:TE,capLevelController:gl,errorController:PD,fpsController:PE,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:Op,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:I6},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},R6()),{},{subtitleStreamController:$E,subtitleTrackController:BE,timelineController:XE,audioStreamController:yE,audioTrackController:bE,emeController:sr,cmcdController:UE,contentSteeringController:kE,interstitialsController:KN});function R6(){return{cueHandler:QE,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function L6(n,e,t){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const i=Lh(n),r=["manifest","level","frag"],s=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return r.forEach(a=>{const o=`${a==="level"?"playlist":a}LoadPolicy`,c=e[o]===void 0,l=[];s.forEach(u=>{const d=`${a}Loading${u}`,h=e[d];if(h!==void 0&&c){l.push(d);const f=i[o].default;switch(e[o]={default:f},u){case"TimeOut":f.maxLoadTimeMs=h,f.maxTimeToFirstByteMs=h;break;case"MaxRetry":f.errorRetry.maxNumRetry=h,f.timeoutRetry.maxNumRetry=h;break;case"RetryDelay":f.errorRetry.retryDelayMs=h,f.timeoutRetry.retryDelayMs=h;break;case"MaxRetryTimeout":f.errorRetry.maxRetryDelayMs=h,f.timeoutRetry.maxRetryDelayMs=h;break}}}),l.length&&t.warn(`hls.js config: "${l.join('", "')}" setting(s) are deprecated, use "${o}": ${Ye(e[o])}`)}),qe(qe({},i),e)}function Lh(n){return n&&typeof n=="object"?Array.isArray(n)?n.map(Lh):Object.keys(n).reduce((e,t)=>(e[t]=Lh(n[t]),e),{}):n}function U6(n,e){const t=n.loader;t!==Rh&&t!==zp?(e.log("[config]: Custom loader detected, cannot enable progressive streaming"),n.progressive=!1):ZE()&&(n.loader=Rh,n.progressive=!0,n.enableSoftwareAES=!0,e.log("[config]: Progressive streaming enabled, using FetchLoader"))}const Ko=2,k6=.1,F6=.05,P6=100;class O6 extends OD{constructor(e,t){super("gap-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var i;(i=this.media)!=null&&i.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{if(this.hls){var i;this.ended=((i=this.media)==null?void 0:i.currentTime)||1,this.hls.trigger(R.MEDIA_ENDED,{stalled:!1})}},this.hls=e,this.fragmentTracker=t,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on(R.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(R.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(R.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(R.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(R.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(R.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,t){this.setInterval(P6),this.mediaSource=t.mediaSource;const i=this.media=t.media;Ut(i,"playing",this.onMediaPlaying),Ut(i,"waiting",this.onMediaWaiting),Ut(i,"ended",this.onMediaEnded)}onMediaDetaching(e,t){this.clearInterval();const{media:i}=this;i&&($t(i,"playing",this.onMediaPlaying),$t(i,"waiting",this.onMediaWaiting),$t(i,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,t){this.buffered=t.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(!((e=this.media)!=null&&e.readyState)||!this.hasBuffered)return;const t=this.media.currentTime;this.poll(t,this.lastCurrentTime),this.lastCurrentTime=t}poll(e,t){var i,r;const s=(i=this.hls)==null?void 0:i.config;if(!s)return;const a=this.media;if(!a)return;const{seeking:o}=a,c=this.seeking&&!o,l=!this.seeking&&o,u=a.paused&&!o||a.ended||a.playbackRate===0;if(this.seeking=o,e!==t){t&&(this.ended=0),this.moved=!0,o||(this.nudgeRetry=0,s.nudgeOnVideoHole&&!u&&e>t&&this.nudgeOnVideoHole(e,t)),this.waiting===0&&this.stallResolved(e);return}if(l||c){c&&this.stallResolved(e);return}if(u){this.nudgeRetry=0,this.stallResolved(e),!this.ended&&a.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(R.MEDIA_ENDED,{stalled:!1}));return}if(!ke.getBuffered(a).length){this.nudgeRetry=0;return}const d=ke.bufferInfo(a,e,0),h=d.nextStart||0,f=this.fragmentTracker;if(o&&f&&this.hls){const _=ob(this.hls.inFlightFragments,e),D=d.len>Ko,w=!h||_||h-e>Ko&&!f.getPartialFragment(e);if(D||w)return;this.moved=!1}const p=(r=this.hls)==null?void 0:r.latestLevelDetails;if(!this.moved&&this.stalled!==null&&f){if(!(d.len>0)&&!h)return;const D=Math.max(h,d.start||0)-e,S=!!(p!=null&&p.live)?p.targetduration*2:Ko,C=ro(e,f);if(D>0&&(D<=S||C)){a.paused||this._trySkipBufferHole(C);return}}const m=s.detectStallWithCurrentTimeMs,g=self.performance.now(),y=this.waiting;let v=this.stalled;if(v===null)if(y>0&&g-y<m)v=this.stalled=y;else{this.stalled=g;return}const b=g-v;if(!o&&(b>=m||y)&&this.hls){var T;if(((T=this.mediaSource)==null?void 0:T.readyState)==="ended"&&!(p!=null&&p.live)&&Math.abs(e-(p?.edge||0))<1){if(this.ended)return;this.ended=e||1,this.hls.trigger(R.MEDIA_ENDED,{stalled:!0});return}if(this._reportStall(d),!this.media||!this.hls)return}const x=ke.bufferInfo(a,e,s.maxBufferHole);this._tryFixBufferStall(x,b,e)}stallResolved(e){const t=this.stalled;if(t&&this.hls&&(this.stalled=null,this.stallReported)){const i=self.performance.now()-t;this.log(`playback not stuck anymore @${e}, after ${Math.round(i)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(R.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,t){var i;const r=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&(i=this.buffered.audio)!=null&&i.length&&r&&r.length>1&&e>r.end(0)){const s=ke.bufferedInfo(ke.timeRangesToArray(this.buffered.audio),e,0);if(s.len>1&&t>=s.start){const a=ke.timeRangesToArray(r),o=ke.bufferedInfo(a,t,0).bufferedIndex;if(o>-1&&o<a.length-1){const c=ke.bufferedInfo(a,e,0).bufferedIndex,l=a[o].end,u=a[o+1].start;if((c===-1||c>o)&&u-l<1&&e-l<2){const d=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${l} -> ${u} buffered index: ${c}`);this.warn(d.message),this.media.currentTime+=1e-6;let h=ro(e,this.fragmentTracker);h&&"fragment"in h?h=h.fragment:h||(h=void 0);const f=ke.bufferInfo(this.media,e,0);this.hls.trigger(R.ERROR,{type:_e.MEDIA_ERROR,details:re.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:d,reason:d.message,frag:h,buffer:f.len,bufferInfo:f})}}}}}_tryFixBufferStall(e,t,i){var r,s;const{fragmentTracker:a,media:o}=this,c=(r=this.hls)==null?void 0:r.config;if(!o||!a||!c)return;const l=(s=this.hls)==null?void 0:s.latestLevelDetails,u=ro(i,a);if((u||l!=null&&l.live&&i<l.fragmentStart)&&(this._trySkipBufferHole(u)||!this.media))return;const d=e.buffered,h=this.adjacentTraversal(e,i);(d&&d.length>1&&e.len>c.maxBufferHole||e.nextStart&&(e.nextStart-i<c.maxBufferHole||h))&&(t>c.highBufferWatchdogPeriod*1e3||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}adjacentTraversal(e,t){const i=this.fragmentTracker,r=e.nextStart;if(i&&r){const s=i.getFragAtPos(t,xe.MAIN),a=i.getFragAtPos(r,xe.MAIN);if(s&&a)return a.sn-s.sn<2}return!1}_reportStall(e){const{hls:t,media:i,stallReported:r,stalled:s}=this;if(!r&&s!==null&&i&&t){this.stallReported=!0;const a=new Error(`Playback stalling at @${i.currentTime} due to low buffer (${Ye(e)})`);this.warn(a.message),t.trigger(R.ERROR,{type:_e.MEDIA_ERROR,details:re.BUFFER_STALLED_ERROR,fatal:!1,error:a,buffer:e.len,bufferInfo:e,stalled:{start:s}})}}_trySkipBufferHole(e){var t;const{fragmentTracker:i,media:r}=this,s=(t=this.hls)==null?void 0:t.config;if(!r||!i||!s)return 0;const a=r.currentTime,o=ke.bufferInfo(r,a,0),c=a<o.start?o.start:o.nextStart;if(c&&this.hls){const u=o.len<=s.maxBufferHole,d=o.len>0&&o.len<1&&r.readyState<3,h=c-a;if(h>0&&(u||d)){if(h>s.maxBufferHole){let p=!1;if(a===0){const m=i.getAppendedFrag(0,xe.MAIN);m&&c<m.end&&(p=!0)}if(!p&&e){var l;if(!((l=this.hls.loadLevelObj)!=null&&l.details)||ob(this.hls.inFlightFragments,c))return 0;let g=!1,y=e.end;for(;y<c;){const v=ro(y,i);if(v)y+=v.duration;else{g=!0;break}}if(g)return 0}}const f=Math.max(c+F6,a+k6);if(this.warn(`skipping hole, adjusting currentTime from ${a} to ${f}`),this.moved=!0,r.currentTime=f,!(e!=null&&e.gap)){const p=new Error(`fragment loaded with buffer holes, seeking from ${a} to ${f}`),m={type:_e.MEDIA_ERROR,details:re.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:p,reason:p.message,buffer:o.len,bufferInfo:o};e&&("fragment"in e?m.part=e:m.frag=e),this.hls.trigger(R.ERROR,m)}return f}}return 0}_tryNudgeBuffer(e){const{hls:t,media:i,nudgeRetry:r}=this,s=t?.config;if(!i||!s)return 0;const a=i.currentTime;if(this.nudgeRetry++,r<s.nudgeMaxRetry){const o=a+(r+1)*s.nudgeOffset,c=new Error(`Nudging 'currentTime' from ${a} to ${o}`);this.warn(c.message),i.currentTime=o,t.trigger(R.ERROR,{type:_e.MEDIA_ERROR,details:re.BUFFER_NUDGE_ON_STALL,error:c,fatal:!1,buffer:e.len,bufferInfo:e})}else{const o=new Error(`Playhead still not moving while enough data buffered @${a} after ${s.nudgeMaxRetry} nudges`);this.error(o.message),t.trigger(R.ERROR,{type:_e.MEDIA_ERROR,details:re.BUFFER_STALLED_ERROR,error:o,fatal:!0,buffer:e.len,bufferInfo:e})}}}function ob(n,e){const t=cb(n.main);if(t&&t.start<=e)return t;const i=cb(n.audio);return i&&i.start<=e?i:null}function cb(n){if(!n)return null;switch(n.state){case le.IDLE:case le.STOPPED:case le.ENDED:case le.ERROR:return null}return n.frag}function ro(n,e){return e.getAppendedFrag(n,xe.MAIN)||e.getPartialFragment(n)}const M6=.25;function Uh(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function xd(n,e,t,i,r){let s=new n(e,t,"");try{s.value=i,r&&(s.type=r)}catch{s=new n(e,t,Ye(r?qe({type:r},i):i))}return s}const so=(()=>{const n=Uh();try{n&&new n(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();class B6{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.assetCue=void 0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(R.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e&&(e.on(R.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(R.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(R.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(R.MANIFEST_LOADING,this.onManifestLoading,this),e.on(R.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(R.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(R.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(R.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(R.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(R.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(R.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(R.MANIFEST_LOADING,this.onManifestLoading,this),e.off(R.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(R.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(R.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(R.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}onMediaAttaching(e,t){var i;this.media=t.media,((i=t.overrides)==null?void 0:i.cueRemoval)===!1&&(this.removeCues=!1)}onMediaAttached(){var e;const t=(e=this.hls)==null?void 0:e.latestLevelDetails;t&&this.updateDateRangeCues(t)}onMediaDetaching(e,t){this.media=null,!t.transferMedia&&(this.id3Track&&(this.removeCues&&Ur(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const i=e[t];if(i.kind==="metadata"&&i.label==="id3")return OE(i,this.media),i}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media||!this.hls)return;const{enableEmsgMetadataCues:i,enableID3MetadataCues:r}=this.hls.config;if(!i&&!r)return;const{samples:s}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const a=Uh();if(a)for(let o=0;o<s.length;o++){const c=s[o].type;if(c===Bt.emsg&&!i||!r)continue;const l=rE(s[o].data),u=s[o].pts;let d=u+s[o].duration;d>so&&(d=so),d-u<=0&&(d=u+M6);for(let f=0;f<l.length;f++){const p=l[f];if(!sE(p)){this.updateId3CueEnds(u,c);const m=xd(a,u,d,p,c);m&&this.id3Track.addCue(m)}}}}updateId3CueEnds(e,t){var i;const r=(i=this.id3Track)==null?void 0:i.cues;if(r)for(let s=r.length;s--;){const a=r[s];a.type===t&&a.startTime<e&&a.endTime===so&&(a.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:i,type:r}){const{id3Track:s,hls:a}=this;if(!a)return;const{config:{enableEmsgMetadataCues:o,enableID3MetadataCues:c}}=a;if(s&&(o||c)){let l;r==="audio"?l=u=>u.type===Bt.audioId3&&c:r==="video"?l=u=>u.type===Bt.emsg&&o:l=u=>u.type===Bt.audioId3&&c||u.type===Bt.emsg&&o,Ih(s,t,i,l)}}onLevelUpdated(e,{details:t}){this.updateDateRangeCues(t,!0)}onLevelPtsUpdated(e,t){Math.abs(t.drift)>.01&&this.updateDateRangeCues(t.details)}updateDateRangeCues(e,t){if(!this.hls||!this.media)return;const{assetPlayerId:i,timelineOffset:r,enableDateRangeMetadataCues:s,interstitialsController:a}=this.hls.config;if(!s)return;const o=Uh();if(i&&r&&!a){const{fragmentStart:m,fragmentEnd:g}=e;let y=this.assetCue;y?(y.startTime=m,y.endTime=g):o&&(y=this.assetCue=xd(o,m,g,{assetPlayerId:this.hls.config.assetPlayerId},"hlsjs.interstitial.asset"),y&&(y.id=i,this.id3Track||(this.id3Track=this.createTrack(this.media)),this.id3Track.addCue(y),y.addEventListener("enter",this.onEventCueEnter)))}if(!e.hasProgramDateTime)return;const{id3Track:c}=this,{dateRanges:l}=e,u=Object.keys(l);let d=this.dateRangeCuesAppended;if(c&&t){var h;if((h=c.cues)!=null&&h.length){const m=Object.keys(d).filter(g=>!u.includes(g));for(let g=m.length;g--;){var f;const y=m[g],v=(f=d[y])==null?void 0:f.cues;delete d[y],v&&Object.keys(v).forEach(b=>{const T=v[b];if(T){T.removeEventListener("enter",this.onEventCueEnter);try{c.removeCue(T)}catch{}}})}}else d=this.dateRangeCuesAppended={}}const p=e.fragments[e.fragments.length-1];if(!(u.length===0||!ye(p?.programDateTime))){this.id3Track||(this.id3Track=this.createTrack(this.media));for(let m=0;m<u.length;m++){const g=u[m],y=l[g],v=y.startTime,b=d[g],T=b?.cues||{};let x=b?.durationKnown||!1,_=so;const{duration:D,endDate:w}=y;if(w&&D!==null)_=v+D,x=!0;else if(y.endOnNext&&!x){const C=u.reduce((O,I)=>{if(I!==y.id){const L=l[I];if(L.class===y.class&&L.startDate>y.startDate&&(!O||y.startDate<O.startDate))return L}return O},null);C&&(_=C.startTime,x=!0)}const S=Object.keys(y.attr);for(let C=0;C<S.length;C++){const O=S[C];if(!yB(O))continue;const I=T[O];if(I)x&&!(b!=null&&b.durationKnown)?I.endTime=_:Math.abs(I.startTime-v)>.01&&(I.startTime=v,I.endTime=_);else if(o){let L=y.attr[O];vB(O)&&(L=pD(L));const $=xd(o,v,_,{key:O,data:L},Bt.dateRange);$&&($.id=g,this.id3Track.addCue($),T[O]=$,a&&(O==="X-ASSET-LIST"||O==="X-ASSET-URL")&&$.addEventListener("enter",this.onEventCueEnter))}}d[g]={cues:T,dateRange:y,durationKnown:x}}}}}class N6{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:t}=this,i=this.levelDetails;if(!t||!i)return;this.currentTime=t.currentTime;const r=this.computeLatency();if(r===null)return;this._latency=r;const{lowLatencyMode:s,maxLiveSyncPlaybackRate:a}=this.config;if(!s||a===1||!i.live)return;const o=this.targetLatency;if(o===null)return;const c=r-o,l=Math.min(this.maxLatency,o+i.targetduration);if(c<l&&c>.05&&this.forwardBufferLength>1){const d=Math.min(2,Math.max(1,a)),h=Math.round(2/(1+Math.exp(-.75*c-this.edgeStalled))*20)/20,f=Math.min(d,Math.max(1,h));this.changeMediaPlaybackRate(t,f)}else t.playbackRate!==1&&t.playbackRate!==0&&this.changeMediaPlaybackRate(t,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return((e=this.hls)==null?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(e.liveMaxLatencyDuration!==void 0)return e.liveMaxLatencyDuration;const t=this.levelDetails;return t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const e=this.levelDetails;if(e===null||this.hls===null)return null;const{holdBack:t,partHoldBack:i,targetduration:r}=e,{liveSyncDuration:s,liveSyncDurationCount:a,lowLatencyMode:o}=this.config,c=this.hls.userConfig;let l=o&&i||t;(this._targetLatencyUpdated||c.liveSyncDuration||c.liveSyncDurationCount||l===0)&&(l=s!==void 0?s:a*r);const u=r;return l+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,u)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency;if(e===null||t===null)return null;const i=this.levelDetails;if(i===null)return null;const r=i.edge,s=e-t-this.edgeStalled,a=r-i.totalduration,o=r-(this.config.lowLatencyMode&&i.partTarget||i.targetduration);return Math.min(Math.max(a,s),o)}get drift(){const e=this.levelDetails;return e===null?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(e===null)return 0;const t=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e}=this,t=this.levelDetails;if(!e||!t)return 0;const i=e.buffered.length;return(i?e.buffered.end(i-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on(R.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(R.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(R.MANIFEST_LOADING,this.onManifestLoading,this),e.on(R.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(R.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(R.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(R.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(R.MANIFEST_LOADING,this.onManifestLoading,this),e.off(R.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(R.ERROR,this.onError,this))}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){t.advanced&&this.onTimeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,t){var i;t.details===re.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&(i=this.levelDetails)!=null&&i.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,t){var i,r;e.playbackRate!==t&&((i=this.hls)==null||i.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${(r=this.targetLatency)==null?void 0:r.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${t}`),e.playbackRate=t)}estimateLiveEdge(){const e=this.levelDetails;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}class $6 extends pl{constructor(e,t){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(R.MANIFEST_LOADING,this.onManifestLoading,this),e.on(R.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(R.LEVEL_LOADED,this.onLevelLoaded,this),e.on(R.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(R.FRAG_BUFFERED,this.onFragBuffered,this),e.on(R.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(R.MANIFEST_LOADING,this.onManifestLoading,this),e.off(R.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(R.LEVEL_LOADED,this.onLevelLoaded,this),e.off(R.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(R.FRAG_BUFFERED,this.onFragBuffered,this),e.off(R.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(t=>{t.loadError=0,t.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const i=this.hls.config.preferManagedMediaSource,r=[],s={},a={};let o=!1,c=!1,l=!1;t.levels.forEach(u=>{const d=u.attrs;let{audioCodec:h,videoCodec:f}=u;h&&(u.audioCodec=h=gc(h,i)||void 0),f&&(f=u.videoCodec=O8(f));const{width:p,height:m,unknownCodecs:g}=u,y=g?.length||0;if(o||(o=!!(p&&m)),c||(c=!!f),l||(l=!!h),y||h&&!this.isAudioSupported(h)||f&&!this.isVideoSupported(f)){this.log(`Some or all CODECS not supported "${d.CODECS}"`);return}const{CODECS:v,"FRAME-RATE":b,"HDCP-LEVEL":T,"PATHWAY-ID":x,RESOLUTION:_,"VIDEO-RANGE":D}=d,S=`${`${x||"."}-`}${u.bitrate}-${_}-${b}-${v}-${D}-${T}`;if(s[S])if(s[S].uri!==u.url&&!u.attrs["PATHWAY-ID"]){const C=a[S]+=1;u.attrs["PATHWAY-ID"]=new Array(C+1).join(".");const O=this.createLevel(u);s[S]=O,r.push(O)}else s[S].addGroupId("audio",d.AUDIO),s[S].addGroupId("text",d.SUBTITLES);else{const C=this.createLevel(u);s[S]=C,a[S]=1,r.push(C)}}),this.filterAndSortMediaOptions(r,t,o,c,l)}createLevel(e){const t=new Yr(e),i=e.supplemental;if(i!=null&&i.videoCodec&&!this.isVideoSupported(i.videoCodec)){const r=new Error(`SUPPLEMENTAL-CODECS not supported "${i.videoCodec}"`);this.log(r.message),t.supportedResult=AD(r,[])}return t}isAudioSupported(e){return ea(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return ea(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,t,i,r,s){var a;let o=[],c=[],l=e;const u=((a=t.stats)==null?void 0:a.parsing)||{};if((i||r)&&s&&(l=l.filter(({videoCodec:v,videoRange:b,width:T,height:x})=>(!!v||!!(T&&x))&&j8(b))),l.length===0){Promise.resolve().then(()=>{if(this.hls){let v="no level with compatible codecs found in manifest",b=v;t.levels.length&&(b=`one or more CODECS in variant not supported: ${Ye(t.levels.map(x=>x.attrs.CODECS).filter((x,_,D)=>D.indexOf(x)===_))}`,this.warn(b),v+=` (${b})`);const T=new Error(v);this.hls.trigger(R.ERROR,{type:_e.MEDIA_ERROR,details:re.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:T,reason:b})}}),u.end=performance.now();return}t.audioTracks&&(o=t.audioTracks.filter(v=>!v.audioCodec||this.isAudioSupported(v.audioCodec)),lb(o)),t.subtitles&&(c=t.subtitles,lb(c));const d=l.slice(0);l.sort((v,b)=>{if(v.attrs["HDCP-LEVEL"]!==b.attrs["HDCP-LEVEL"])return(v.attrs["HDCP-LEVEL"]||"")>(b.attrs["HDCP-LEVEL"]||"")?1:-1;if(i&&v.height!==b.height)return v.height-b.height;if(v.frameRate!==b.frameRate)return v.frameRate-b.frameRate;if(v.videoRange!==b.videoRange)return mc.indexOf(v.videoRange)-mc.indexOf(b.videoRange);if(v.videoCodec!==b.videoCodec){const T=n1(v.videoCodec),x=n1(b.videoCodec);if(T!==x)return x-T}if(v.uri===b.uri&&v.codecSet!==b.codecSet){const T=pc(v.codecSet),x=pc(b.codecSet);if(T!==x)return x-T}return v.averageBitrate!==b.averageBitrate?v.averageBitrate-b.averageBitrate:0});let h=d[0];if(this.steering&&(l=this.steering.filterParsedLevels(l),l.length!==d.length)){for(let v=0;v<d.length;v++)if(d[v].pathwayId===l[0].pathwayId){h=d[v];break}}this._levels=l;for(let v=0;v<l.length;v++)if(l[v]===h){var f;this._firstLevel=v;const b=h.bitrate,T=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${l.length} level(s) found, first bitrate: ${b}`),((f=this.hls.userConfig)==null?void 0:f.abrEwmaDefaultEstimate)===void 0){const x=Math.min(b,this.hls.config.abrEwmaDefaultEstimateMax);x>T&&T===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=x)}break}const p=s&&!r,m=this.hls.config,g=!!(m.audioStreamController&&m.audioTrackController),y={levels:l,audioTracks:o,subtitleTracks:c,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:s,video:r,altAudio:g&&!p&&o.some(v=>!!v.url)};u.end=performance.now(),this.hls.trigger(R.MANIFEST_PARSED,y)}get levels(){return this._levels.length===0?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(t.length===0)return;if(e<0||e>=t.length){const u=new Error("invalid level idx"),d=e<0;if(this.hls.trigger(R.ERROR,{type:_e.OTHER_ERROR,details:re.LEVEL_SWITCH_ERROR,level:e,fatal:d,error:u,reason:u.message}),d)return;e=Math.min(e,t.length-1)}const i=this.currentLevelIndex,r=this.currentLevel,s=r?r.attrs["PATHWAY-ID"]:void 0,a=t[e],o=a.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=a,i===e&&r&&s===o)return;this.log(`Switching to level ${e} (${a.height?a.height+"p ":""}${a.videoRange?a.videoRange+" ":""}${a.codecSet?a.codecSet+" ":""}@${a.bitrate})${o?" with Pathway "+o:""} from level ${i}${s?" with Pathway "+s:""}`);const c={level:e,attrs:a.attrs,details:a.details,bitrate:a.bitrate,averageBitrate:a.averageBitrate,maxBitrate:a.maxBitrate,realBitrate:a.realBitrate,width:a.width,height:a.height,codecSet:a.codecSet,audioCodec:a.audioCodec,videoCodec:a.videoCodec,audioGroups:a.audioGroups,subtitleGroups:a.subtitleGroups,loaded:a.loaded,loadError:a.loadError,fragmentError:a.fragmentError,name:a.name,id:a.id,uri:a.uri,url:a.url,urlId:0,audioGroupIds:a.audioGroupIds,textGroupIds:a.textGroupIds};this.hls.trigger(R.LEVEL_SWITCHING,c);const l=a.details;if(!l||l.live){const u=this.switchParams(a.uri,r?.details,l);this.loadPlaylist(u)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const t=this.steering.pathways(),i=e.filter(r=>t.indexOf(r)!==-1);if(e.length<1){this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${t}`);return}this.steering.pathwayPriority=i}}onError(e,t){t.fatal||!t.context||t.context.type===Be.LEVEL&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(t!==void 0&&t.type===xe.MAIN){const i=t.elementaryStreams;if(!Object.keys(i).some(s=>!!i[s]))return;const r=this._levels[t.level];r!=null&&r.loadError&&(this.log(`Resetting level error count of ${r.loadError} on frag buffered`),r.loadError=0)}}onLevelLoaded(e,t){var i;const{level:r,details:s}=t,a=t.levelInfo;if(!a){var o;this.warn(`Invalid level index ${r}`),(o=t.deliveryDirectives)!=null&&o.skip&&(s.deltaUpdateFailed=!0);return}if(a===this.currentLevel||t.withoutMultiVariant){a.fragmentError===0&&(a.loadError=0);let c=a.details;c===t.details&&c.advanced&&(c=void 0),this.playlistLoaded(r,t,c)}else(i=t.deliveryDirectives)!=null&&i.skip&&(s.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const i=this.getUrlWithDirectives(e.uri,t),r=this.currentLevelIndex,s=e.attrs["PATHWAY-ID"],a=e.details,o=a?.age;this.log(`Loading level index ${r}${t?.msn!==void 0?" at sn "+t.msn+" part "+t.part:""}${s?" Pathway "+s:""}${o&&a.live?" age "+o.toFixed(1)+(a.type&&" "+a.type||""):""} ${i}`),this.hls.trigger(R.LEVEL_LOADING,{url:i,level:r,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:t||null})}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;if(this._levels.length===1)return;const i=this._levels.filter((s,a)=>a!==e?!0:(this.steering&&this.steering.removeLevel(s),s===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,s.details&&s.details.fragments.forEach(o=>o.level=-1)),!1));zD(i),this._levels=i,this.currentLevelIndex>-1&&(t=this.currentLevel)!=null&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const r=i.length-1;this._firstLevel=Math.min(this._firstLevel,r),this._startLevel&&(this._startLevel=Math.min(this._startLevel,r)),this.hls.trigger(R.LEVELS_UPDATED,{levels:i})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:i}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(R.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:i}))}}function lb(n){const e={};n.forEach(t=>{const i=t.groupId||"";t.id=e[i]=e[i]||0,e[i]++})}function JE(){return self.SourceBuffer||self.WebKitSourceBuffer}function Xp(){if(!ni())return!1;const e=JE();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function eS(){if(!Xp())return!1;const n=ni();return typeof n?.isTypeSupported=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>n.isTypeSupported(ta(e,"video")))||["mp4a.40.2","fLaC"].some(e=>n.isTypeSupported(ta(e,"audio"))))}function W6(){var n;const e=JE();return typeof(e==null||(n=e.prototype)==null?void 0:n.changeType)=="function"}const V6=100;class G6 extends hl{constructor(e,t,i){super(e,t,i,"stream-controller",xe.MAIN),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const r=this.media,s=r?r.currentTime:null;if(s===null||!ye(s)||(this.log(`Media seeked to ${s.toFixed(3)}`),!this.getBufferedFrag(s)))return;const a=this.getFwdBufferInfoAtPos(r,s,xe.MAIN,0);if(a===null||a.len===0){this.warn(`Main forward buffer length at ${s} on "seeked" event ${a?a.len:"empty"})`);return}this.tick()},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(R.MANIFEST_PARSED,this.onManifestParsed,this),e.on(R.LEVEL_LOADING,this.onLevelLoading,this),e.on(R.LEVEL_LOADED,this.onLevelLoaded,this),e.on(R.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(R.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(R.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(R.BUFFER_CREATED,this.onBufferCreated,this),e.on(R.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(R.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(R.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(R.MANIFEST_PARSED,this.onManifestParsed,this),e.off(R.LEVEL_LOADED,this.onLevelLoaded,this),e.off(R.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(R.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(R.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(R.BUFFER_CREATED,this.onBufferCreated,this),e.off(R.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(R.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(R.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,t){if(this.levels){const{lastCurrentTime:i,hls:r}=this;if(this.stopLoad(),this.setInterval(V6),this.level=-1,!this.startFragRequested){let s=r.startLevel;s===-1&&(r.config.testBandwidth&&this.levels.length>1?(s=0,this.bitrateTest=!0):s=r.firstAutoLevel),r.nextLoadLevel=s,this.level=r.loadLevel,this._hasEnoughToStart=!!t}i>0&&e===-1&&!t&&(this.log(`Override startPosition with lastCurrentTime @${i.toFixed(3)}`),e=i),this.state=le.IDLE,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=le.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case le.WAITING_LEVEL:{const{levels:e,level:t}=this,i=e?.[t],r=i?.details;if(r&&(!r.live||this.levelLastLoaded===i&&!this.waitForLive(i))){if(this.waitForCdnTuneIn(r))break;this.state=le.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=le.IDLE;break}break}case le.FRAG_LOADING_WAITING_RETRY:this.checkRetryDate();break}this.state===le.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),(e=this.media)!=null&&e.readyState&&this.media.seeking===!1&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:i,media:r}=this;if(t===null||!r&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const s=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(i!=null&&i[s]))return;const a=i[s],o=this.getMainFwdBufferInfo();if(o===null)return;const c=this.getLevelDetails();if(c&&this._streamEnded(o,c)){const m={};this.altAudio===2&&(m.type="video"),this.hls.trigger(R.BUFFER_EOS,m),this.state=le.ENDED;return}if(!this.buffering)return;e.loadLevel!==s&&e.manualLevel===-1&&this.log(`Adapting to level ${s} from level ${this.level}`),this.level=e.nextLoadLevel=s;const l=a.details;if(!l||this.state===le.WAITING_LEVEL||this.waitForLive(a)){this.level=s,this.state=le.WAITING_LEVEL,this.startFragRequested=!1;return}const u=o.len,d=this.getMaxBufferLength(a.maxBitrate);if(u>=d)return;this.backtrackFragment&&this.backtrackFragment.start>o.end&&(this.backtrackFragment=null);const h=this.backtrackFragment?this.backtrackFragment.start:o.end;let f=this.getNextFragment(h,l);if(this.couldBacktrack&&!this.fragPrevious&&f&&lt(f)&&this.fragmentTracker.getState(f)!==gt.OK){var p;const g=((p=this.backtrackFragment)!=null?p:f).sn-l.startSN,y=l.fragments[g-1];y&&f.cc===y.cc&&(f=y,this.fragmentTracker.removeFragment(y))}else this.backtrackFragment&&o.len&&(this.backtrackFragment=null);if(f&&this.isLoopLoading(f,h)){if(!f.gap){const g=this.audioOnly&&!this.altAudio?Xe.AUDIO:Xe.VIDEO,y=(g===Xe.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;y&&this.afterBufferFlushed(y,g,xe.MAIN)}f=this.getNextFragmentLoopLoading(f,l,o,xe.MAIN,d)}f&&(f.initSegment&&!f.initSegment.data&&!this.bitrateTest&&(f=f.initSegment),this.loadFragment(f,a,h))}loadFragment(e,t,i){const r=this.fragmentTracker.getState(e);r===gt.NOT_LOADED||r===gt.PARTIAL?lt(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):super.loadFragment(e,t,i):this._loadInitSegment(e,t):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,xe.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(t!=null&&t.readyState){let i;const r=this.getAppendedFrag(t.currentTime);r&&r.start>1&&this.flushMainBuffer(0,r.start-1);const s=this.getLevelDetails();if(s!=null&&s.live){const o=this.getMainFwdBufferInfo();if(!o||o.len<s.targetduration*2)return}if(!t.paused&&e){const o=this.hls.nextLoadLevel,c=e[o],l=this.fragLastKbps;l&&this.fragCurrent?i=this.fragCurrent.duration*c.maxBitrate/(1e3*l)+1:i=0}else i=0;const a=this.getBufferedFrag(t.currentTime+i);if(a){const o=this.followingBufferedFrag(a);if(o){this.abortCurrentFrag();const c=o.maxStartPTS?o.maxStartPTS:o.start,l=o.duration,u=Math.max(a.end,c+Math.min(Math.max(l-this.config.maxFragLookUpTolerance,l*(this.couldBacktrack?.5:.125)),l*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(u,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case le.KEY_LOADING:case le.FRAG_LOADING:case le.FRAG_LOADING_WAITING_RETRY:case le.PARSING:case le.PARSED:this.state=le.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio===2?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const i=t.media;Ut(i,"playing",this.onMediaPlaying),Ut(i,"seeked",this.onMediaSeeked)}onMediaDetaching(e,t){const{media:i}=this;i&&($t(i,"playing",this.onMediaPlaying),$t(i,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,t),!t.transferMedia&&(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(R.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,t){let i=!1,r=!1;for(let s=0;s<t.levels.length;s++){const a=t.levels[s].audioCodec;a&&(i=i||a.indexOf("mp4a.40.2")!==-1,r=r||a.indexOf("mp4a.40.5")!==-1)}this.audioCodecSwitch=i&&r&&!W6(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:i}=this;if(!i||this.state!==le.IDLE)return;const r=t.levelInfo;(!r.details||r.details.live&&(this.levelLastLoaded!==r||r.details.expired)||this.waitForCdnTuneIn(r.details))&&(this.state=le.WAITING_LEVEL)}onLevelLoaded(e,t){var i;const{levels:r,startFragRequested:s}=this,a=t.level,o=t.details,c=o.totalduration;if(!r){this.warn(`Levels were reset while loading level ${a}`);return}this.log(`Level ${a} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""}, cc [${o.startCC}, ${o.endCC}] duration:${c}`);const l=t.levelInfo,u=this.fragCurrent;u&&(this.state===le.FRAG_LOADING||this.state===le.FRAG_LOADING_WAITING_RETRY)&&u.level!==t.level&&u.loader&&this.abortCurrentFrag();let d=0;if(o.live||(i=l.details)!=null&&i.live){var h;if(this.checkLiveUpdate(o),o.deltaUpdateFailed)return;d=this.alignPlaylists(o,l.details,(h=this.levelLastLoaded)==null?void 0:h.details)}if(l.details=o,this.levelLastLoaded=l,s||this.setStartPosition(o,d),this.hls.trigger(R.LEVEL_UPDATED,{details:o,level:a}),this.state===le.WAITING_LEVEL){if(this.waitForCdnTuneIn(o))return;this.state=le.IDLE}s&&o.live&&this.synchronizeToLiveEdge(o),this.tick()}synchronizeToLiveEdge(e){const{config:t,media:i}=this;if(!i)return;const r=this.hls.liveSyncPosition,s=this.getLoadPosition(),a=e.fragmentStart,o=e.edge,c=s>=a-t.maxFragLookUpTolerance&&s<=o;if(r!==null&&i.duration>r&&(s<r||!c)){const u=t.liveMaxLatencyDuration!==void 0?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;if((!c&&i.readyState<4||s<o-u)&&(this._hasEnoughToStart||(this.nextLoadPosition=r),i.readyState))if(this.warn(`Playback: ${s.toFixed(3)} is located too far from the end of live sliding playlist: ${o}, reset currentTime to : ${r.toFixed(3)}`),this.config.liveSyncMode==="buffered"){var l;const d=ke.bufferInfo(i,r,0);if(!((l=d.buffered)!=null&&l.length)){i.currentTime=r;return}if(d.start<=s){i.currentTime=r;return}const{nextStart:f}=ke.bufferedInfo(d.buffered,s,0);f&&(i.currentTime=f)}else i.currentTime=r}}_handleFragmentLoadProgress(e){var t;const i=e.frag,{part:r,payload:s}=e,{levels:a}=this;if(!a){this.warn(`Levels were reset while fragment load was in progress. Fragment ${i.sn} of level ${i.level} will not be buffered`);return}const o=a[i.level];if(!o){this.warn(`Level ${i.level} not found on progress`);return}const c=o.details;if(!c){this.warn(`Dropping fragment ${i.sn} of level ${i.level} after level details were reset`),this.fragmentTracker.removeFragment(i);return}const l=o.videoCodec,u=c.PTSKnown||!c.live,d=(t=i.initSegment)==null?void 0:t.data,h=this._getAudioCodec(o),f=this.transmuxer=this.transmuxer||new mE(this.hls,xe.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),p=r?r.index:-1,m=p!==-1,g=new dl(i.level,i.sn,i.stats.chunkCount,s.byteLength,p,m),y=this.initPTS[i.cc];f.push(s,d,h,l,i,r,c.totalduration,u,g,y)}onAudioTrackSwitching(e,t){const i=this.hls,r=this.altAudio!==0;if(yc(t.url,i))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const a=this.fragCurrent;a&&(this.log("Switching to main audio track, cancel main fragment load"),a.abortRequests(),this.fragmentTracker.removeFragment(a)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(r){this.altAudio=0,this.fragmentTracker.removeAllFragments(),i.once(R.BUFFER_FLUSHED,()=>{this.hls&&this.hls.trigger(R.AUDIO_TRACK_SWITCHED,t)}),i.trigger(R.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});return}i.trigger(R.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const i=yc(t.url,this.hls);if(i){const r=this.videoBuffer;r&&this.mediaBuffer!==r&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=i?2:0,this.tick()}onBufferCreated(e,t){const i=t.tracks;let r,s,a=!1;for(const o in i){const c=i[o];if(c.id==="main"){if(s=o,r=c,o==="video"){const l=i[o];l&&(this.videoBuffer=l.buffer)}}else a=!0}a&&r?(this.log(`Alternate track found, use ${s}.buffered to schedule main fragment loading`),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:i,part:r}=t,s=i.type===xe.MAIN;if(s){if(this.fragContextChanged(i)){this.warn(`Fragment ${i.sn}${r?" p: "+r.index:""} of level ${i.level} finished buffering, but was aborted. state: ${this.state}`),this.state===le.PARSED&&(this.state=le.IDLE);return}const o=r?r.stats:i.stats;this.fragLastKbps=Math.round(8*o.total/(o.buffering.end-o.loading.first)),lt(i)&&(this.fragPrevious=i),this.fragBufferedComplete(i,r)}const a=this.media;a&&(!this._hasEnoughToStart&&ke.getBuffered(a).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),s&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,t){var i;if(t.fatal){this.state=le.ERROR;return}switch(t.details){case re.FRAG_GAP:case re.FRAG_PARSING_ERROR:case re.FRAG_DECRYPT_ERROR:case re.FRAG_LOAD_ERROR:case re.FRAG_LOAD_TIMEOUT:case re.KEY_LOAD_ERROR:case re.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(xe.MAIN,t);break;case re.LEVEL_LOAD_ERROR:case re.LEVEL_LOAD_TIMEOUT:case re.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===le.WAITING_LEVEL&&((i=t.context)==null?void 0:i.type)===Be.LEVEL&&(this.state=le.IDLE);break;case re.BUFFER_ADD_CODEC_ERROR:case re.BUFFER_APPEND_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&this.resetLoadingState();break;case re.BUFFER_FULL_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&(!this.config.interstitialsController&&this.config.assetPlayerId?this._hasEnoughToStart=!0:this.flushMainBuffer(0,Number.POSITIVE_INFINITY));break;case re.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onFragLoadEmergencyAborted(){this.state=le.IDLE,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==Xe.AUDIO||!this.altAudio){const i=(t===Xe.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;i&&(this.afterBufferFlushed(i,t,xe.MAIN),this.tick())}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,this.level===-1&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let i=this.startPosition;if(i>=0&&t<i){if(e.seeking){this.log(`could not seek to ${i}, already seeking at ${t}`);return}const r=this.timelineOffset;r&&i&&(i+=r);const s=this.getLevelDetails(),a=ke.getBuffered(e),o=a.length?a.start(0):0,c=o-i,l=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||c>0&&(c<l||this.loadingParts&&c<2*(s?.partTarget||0)))&&(this.log(`adjusting start position by ${c} to match buffer start`),i+=c,this.startPosition=i),t<i&&(this.log(`seek to target start position ${i} from current time ${t} buffer start ${o}`),e.currentTime=i)}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t.indexOf("mp4a.40.5")!==-1?t="mp4a.40.2":t="mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(i=>{const{hls:r}=this,s=i?.frag;if(!s||this.fragContextChanged(s))return;t.fragmentError=0,this.state=le.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const a=s.stats;a.parsing.start=a.parsing.end=a.buffering.start=a.buffering.end=self.performance.now(),r.trigger(R.FRAG_LOADED,i),s.bitrateTest=!1}).catch(i=>{this.state===le.STOPPED||this.state===le.ERROR||(this.warn(i),this.resetFragmentLoading(e))})}_handleTransmuxComplete(e){const t=this.playlistType,{hls:i}=this,{remuxResult:r,chunkMeta:s}=e,a=this.getCurrentContext(s);if(!a){this.resetWhenMissingContext(s);return}const{frag:o,part:c,level:l}=a,{video:u,text:d,id3:h,initSegment:f}=r,{details:p}=l,m=this.altAudio?void 0:r.audio;if(this.fragContextChanged(o)){this.fragmentTracker.removeFragment(o);return}if(this.state=le.PARSING,f){const g=f.tracks;if(g){const T=o.initSegment||o;if(this.unhandledEncryptionError(f,o))return;this._bufferInitSegment(l,g,T,s),i.trigger(R.FRAG_PARSING_INIT_SEGMENT,{frag:T,id:t,tracks:g})}const y=f.initPTS,v=f.timescale,b=this.initPTS[o.cc];if(ye(y)&&(!b||b.baseTime!==y||b.timescale!==v)){const T=f.trackId;this.initPTS[o.cc]={baseTime:y,timescale:v,trackId:T},i.trigger(R.INIT_PTS_FOUND,{frag:o,id:t,initPTS:y,timescale:v,trackId:T})}}if(u&&p){m&&u.type==="audiovideo"&&this.logMuxedErr(o);const g=p.fragments[o.sn-1-p.startSN],y=o.sn===p.startSN,v=!g||o.cc>g.cc;if(r.independent!==!1){const{startPTS:b,endPTS:T,startDTS:x,endDTS:_}=u;if(c)c.elementaryStreams[u.type]={startPTS:b,endPTS:T,startDTS:x,endDTS:_};else if(u.firstKeyFrame&&u.independent&&s.id===1&&!v&&(this.couldBacktrack=!0),u.dropped&&u.independent){const D=this.getMainFwdBufferInfo(),w=(D?D.end:this.getLoadPosition())+this.config.maxBufferHole,S=u.firstKeyFramePTS?u.firstKeyFramePTS:b;if(!y&&w<S-this.config.maxBufferHole&&!v){this.backtrack(o);return}else v&&(o.gap=!0);o.setElementaryStreamInfo(u.type,o.start,T,o.start,_,!0)}else y&&b-(p.appliedTimelineOffset||0)>Ko&&(o.gap=!0);o.setElementaryStreamInfo(u.type,b,T,x,_),this.backtrackFragment&&(this.backtrackFragment=o),this.bufferFragmentData(u,o,c,s,y||v)}else if(y||v)o.gap=!0;else{this.backtrack(o);return}}if(m){const{startPTS:g,endPTS:y,startDTS:v,endDTS:b}=m;c&&(c.elementaryStreams[Xe.AUDIO]={startPTS:g,endPTS:y,startDTS:v,endDTS:b}),o.setElementaryStreamInfo(Xe.AUDIO,g,y,v,b),this.bufferFragmentData(m,o,c,s)}if(p&&h!=null&&h.samples.length){const g={id:t,frag:o,details:p,samples:h.samples};i.trigger(R.FRAG_PARSING_METADATA,g)}if(p&&d){const g={id:t,frag:o,details:p,samples:d.samples};i.trigger(R.FRAG_PARSING_USERDATA,g)}}logMuxedErr(e){this.warn(`${lt(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,t,i,r){if(this.state!==le.PARSING)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&(delete t.audio,t.audiovideo&&this.logMuxedErr(i));const{audio:s,video:a,audiovideo:o}=t;if(s){const l=e.audioCodec;let u=Wo(s.codec,l);u==="mp4a"&&(u="mp4a.40.5");const d=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){u&&(u.indexOf("mp4a.40.5")!==-1?u="mp4a.40.2":u="mp4a.40.5");const h=s.metadata;h&&"channelCount"in h&&(h.channelCount||1)!==1&&d.indexOf("firefox")===-1&&(u="mp4a.40.5")}u&&u.indexOf("mp4a.40.5")!==-1&&d.indexOf("android")!==-1&&s.container!=="audio/mpeg"&&(u="mp4a.40.2",this.log(`Android: force audio codec to ${u}`)),l&&l!==u&&this.log(`Swapping manifest audio codec "${l}" for "${u}"`),s.levelCodec=u,s.id=xe.MAIN,this.log(`Init audio buffer, container:${s.container}, codecs[selected/level/parsed]=[${u||""}/${l||""}/${s.codec}]`),delete t.audiovideo}if(a){a.levelCodec=e.videoCodec,a.id=xe.MAIN;const l=a.codec;if(l?.length===4)switch(l){case"hvc1":case"hev1":a.codec="hvc1.1.6.L120.90";break;case"av01":a.codec="av01.0.04M.08";break;case"avc1":a.codec="avc1.42e01e";break}this.log(`Init video buffer, container:${a.container}, codecs[level/parsed]=[${e.videoCodec||""}/${l}]${a.codec!==l?" parsed-corrected="+a.codec:""}${a.supplemental?" supplemental="+a.supplemental:""}`),delete t.audiovideo}o&&(this.log(`Init audiovideo buffer, container:${o.container}, codecs[level/parsed]=[${e.codecs}/${o.codec}]`),delete t.video,delete t.audio);const c=Object.keys(t);if(c.length){if(this.hls.trigger(R.BUFFER_CODECS,t),!this.hls)return;c.forEach(l=>{const d=t[l].initSegment;d!=null&&d.byteLength&&this.hls.trigger(R.BUFFER_APPENDING,{type:l,data:d,frag:i,part:null,chunkMeta:r,parent:i.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&this.altAudio===2?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,xe.MAIN)}get maxBufferLength(){const{levels:e,level:t}=this,i=e?.[t];return i?this.getMaxBufferLength(i.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=le.IDLE}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&e.seeking===!1){const i=e.currentTime;if(ke.isBuffered(e,i)?t=this.getAppendedFrag(i):ke.isBuffered(e,i+.1)&&(t=this.getAppendedFrag(i+.1)),t){this.backtrackFragment=null;const r=this.fragPlaying,s=t.level;(!r||t.sn!==r.sn||r.level!==s)&&(this.fragPlaying=t,this.hls.trigger(R.FRAG_CHANGED,{frag:t}),(!r||r.level!==s)&&this.hls.trigger(R.LEVEL_SWITCHED,{level:s}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;return ye(t)?this.getAppendedFrag(t):null}get currentProgramDateTime(){var e;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;if(ye(t)){const i=this.getLevelDetails(),r=this.currentFrag||(i?lr(null,i.fragments,t):null);if(r){const s=r.programDateTime;if(s!==null){const a=s+(t-r.start)*1e3;return new Date(a)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class H6 extends an{constructor(e,t){super("key-loader",t),this.config=void 0,this.keyIdToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const i in this.keyIdToKeyInfo){const r=this.keyIdToKeyInfo[i].loader;if(r){var t;if(e&&e!==((t=r.context)==null?void 0:t.frag.type))return;r.abort()}}}detach(){for(const e in this.keyIdToKeyInfo){const t=this.keyIdToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyIdToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyIdToKeyInfo){const t=this.keyIdToKeyInfo[e].loader;t&&t.destroy()}this.keyIdToKeyInfo={}}createKeyLoadError(e,t=re.KEY_LOAD_ERROR,i,r,s){return new Nn({type:_e.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:s,error:i,networkDetails:r})}loadClear(e,t,i){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(t.length)for(let r=0,s=t.length;r<s;r++){const a=t[r];if(e.cc<=a.cc&&(!lt(e)||!lt(a)||e.sn<a.sn)||!i&&r==s-1)return this.emeController.selectKeySystemFormat(a).then(o=>{if(!this.emeController)return;a.setKeyFormat(o);const c=Vo(o);if(c)return this.emeController.getKeySystemAccess([c])})}if(this.config.requireKeySystemAccessOnStart){const r=_s(this.config);if(r.length)return this.emeController.getKeySystemAccess(r)}}return null}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var i,r;t&&e.setKeyFormat(t);const s=e.decryptdata;if(!s){const l=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:`Missing decryption data on fragment in onKeyLoading (emeEnabled with controller: ${this.emeController&&this.config.emeEnabled})`);return Promise.reject(this.createKeyLoadError(e,re.KEY_LOAD_ERROR,l))}const a=s.uri;if(!a)return Promise.reject(this.createKeyLoadError(e,re.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${a}"`)));const o=Td(s);let c=this.keyIdToKeyInfo[o];if((i=c)!=null&&i.decryptdata.key)return s.key=c.decryptdata.key,Promise.resolve({frag:e,keyInfo:c});if(this.emeController&&(r=c)!=null&&r.keyLoadPromise)switch(this.emeController.getKeyStatus(c.decryptdata)){case"usable":case"usable-in-future":return c.keyLoadPromise.then(u=>{const{keyInfo:d}=u;return s.key=d.decryptdata.key,{frag:e,keyInfo:d}})}switch(this.log(`${this.keyIdToKeyInfo[o]?"Rel":"L"}oading${s.keyId?" keyId: "+Dt(s.keyId):""} URI: ${s.uri} from ${e.type} ${e.level}`),c=this.keyIdToKeyInfo[o]={decryptdata:s,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},s.method){case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return s.keyFormat==="identity"?this.loadKeyHTTP(c,e):this.loadKeyEME(c,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(c,e);default:return Promise.reject(this.createKeyLoadError(e,re.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${s.method}"`)))}}loadKeyEME(e,t){const i={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){var r;if(!e.decryptdata.keyId&&(r=t.initSegment)!=null&&r.data){const a=E8(t.initSegment.data);if(a.length){let o=a[0];o.some(c=>c!==0)?(this.log(`Using keyId found in init segment ${Dt(o)}`),jn.setKeyIdForUri(e.decryptdata.uri,o)):(o=jn.addKeyIdForUri(e.decryptdata.uri),this.log(`Generating keyId to patch media ${Dt(o)}`)),e.decryptdata.keyId=o}}if(!e.decryptdata.keyId&&!lt(t))return Promise.resolve(i);const s=this.emeController.loadKey(i);return(e.keyLoadPromise=s.then(a=>(e.mediaKeySessionContext=a,i))).catch(a=>{throw e.keyLoadPromise=null,"data"in a&&(a.data.frag=t),a})}return Promise.resolve(i)}loadKeyHTTP(e,t){const i=this.config,r=i.loader,s=new r(i);return t.keyLoader=e.loader=s,e.keyLoadPromise=new Promise((a,o)=>{const c={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},l=i.keyLoadPolicy.default,u={loadPolicy:l,timeout:l.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(h,f,p,m)=>{const{frag:g,keyInfo:y}=p,v=Td(y.decryptdata);if(!g.decryptdata||y!==this.keyIdToKeyInfo[v])return o(this.createKeyLoadError(g,re.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),m));y.decryptdata.key=g.decryptdata.key=new Uint8Array(h.data),g.keyLoader=null,y.loader=null,a({frag:g,keyInfo:y})},onError:(h,f,p,m)=>{this.resetLoader(f),o(this.createKeyLoadError(t,re.KEY_LOAD_ERROR,new Error(`HTTP Error ${h.code} loading key ${h.text}`),p,qe({url:c.url,data:void 0},h)))},onTimeout:(h,f,p)=>{this.resetLoader(f),o(this.createKeyLoadError(t,re.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),p))},onAbort:(h,f,p)=>{this.resetLoader(f),o(this.createKeyLoadError(t,re.INTERNAL_ABORTED,new Error("key loading aborted"),p))}};s.load(c,u,d)})}resetLoader(e){const{frag:t,keyInfo:i,url:r}=e,s=i.loader;t.keyLoader===s&&(t.keyLoader=null,i.loader=null);const a=Td(i.decryptdata)||r;delete this.keyIdToKeyInfo[a],s&&s.destroy()}}function Td(n){if(n.keyFormat!==xt.FAIRPLAY){const e=n.keyId;if(e)return Dt(e)}return n.uri}function ub(n){const{type:e}=n;switch(e){case Be.AUDIO_TRACK:return xe.AUDIO;case Be.SUBTITLE_TRACK:return xe.SUBTITLE;default:return xe.MAIN}}function _d(n,e){let t=n.url;return(t===void 0||t.indexOf("data:")===0)&&(t=e.url),t}class q6{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(R.MANIFEST_LOADING,this.onManifestLoading,this),e.on(R.LEVEL_LOADING,this.onLevelLoading,this),e.on(R.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(R.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(R.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off(R.MANIFEST_LOADING,this.onManifestLoading,this),e.off(R.LEVEL_LOADING,this.onLevelLoading,this),e.off(R.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(R.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(R.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const t=this.hls.config,i=t.pLoader,r=t.loader,s=i||r,a=new s(t);return this.loaders[e.type]=a,a}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:i}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:Be.MANIFEST,url:i,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,t){const{id:i,level:r,pathwayId:s,url:a,deliveryDirectives:o,levelInfo:c}=t;this.load({id:i,level:r,pathwayId:s,responseType:"text",type:Be.LEVEL,url:a,deliveryDirectives:o,levelOrTrack:c})}onAudioTrackLoading(e,t){const{id:i,groupId:r,url:s,deliveryDirectives:a,track:o}=t;this.load({id:i,groupId:r,level:null,responseType:"text",type:Be.AUDIO_TRACK,url:s,deliveryDirectives:a,levelOrTrack:o})}onSubtitleTrackLoading(e,t){const{id:i,groupId:r,url:s,deliveryDirectives:a,track:o}=t;this.load({id:i,groupId:r,level:null,responseType:"text",type:Be.SUBTITLE_TRACK,url:s,deliveryDirectives:a,levelOrTrack:o})}onLevelsUpdated(e,t){const i=this.loaders[Be.LEVEL];if(i){const r=i.context;r&&!t.levels.some(s=>s===r.levelOrTrack)&&(i.abort(),delete this.loaders[Be.LEVEL])}}load(e){var t;const i=this.hls.config;let r=this.getInternalLoader(e);if(r){const l=this.hls.logger,u=r.context;if(u&&u.levelOrTrack===e.levelOrTrack&&(u.url===e.url||u.deliveryDirectives&&!e.deliveryDirectives)){u.url===e.url?l.log(`[playlist-loader]: ignore ${e.url} ongoing request`):l.log(`[playlist-loader]: ignore ${e.url} in favor of ${u.url}`);return}l.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),r.abort()}let s;if(e.type===Be.MANIFEST?s=i.manifestLoadPolicy.default:s=Ke({},i.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),r=this.createInternalLoader(e),ye((t=e.deliveryDirectives)==null?void 0:t.part)){let l;if(e.type===Be.LEVEL&&e.level!==null?l=this.hls.levels[e.level].details:e.type===Be.AUDIO_TRACK&&e.id!==null?l=this.hls.audioTracks[e.id].details:e.type===Be.SUBTITLE_TRACK&&e.id!==null&&(l=this.hls.subtitleTracks[e.id].details),l){const u=l.partTarget,d=l.targetduration;if(u&&d){const h=Math.max(u*3,d*.8)*1e3;s=Ke({},s,{maxTimeToFirstByteMs:Math.min(h,s.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(h,s.maxTimeToFirstByteMs)})}}}const a=s.errorRetry||s.timeoutRetry||{},o={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},c={onSuccess:(l,u,d,h)=>{const f=this.getInternalLoader(d);this.resetInternalLoader(d.type);const p=l.data;u.parsing.start=performance.now(),gn.isMediaPlaylist(p)||d.type!==Be.MANIFEST?this.handleTrackOrLevelPlaylist(l,u,d,h||null,f):this.handleMasterPlaylist(l,u,d,h)},onError:(l,u,d,h)=>{this.handleNetworkError(u,d,!1,l,h)},onTimeout:(l,u,d)=>{this.handleNetworkError(u,d,!0,void 0,l)}};r.load(e,o,c)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:t},forceStartLoad:i}=this.hls;(e||i)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${t}`),this.hls.startLoad(t))}handleMasterPlaylist(e,t,i,r){const s=this.hls,a=e.data,o=_d(e,i),c=gn.parseMasterPlaylist(a,o);if(c.playlistParsingError){t.parsing.end=performance.now(),this.handleManifestParsingError(e,i,c.playlistParsingError,r,t);return}const{contentSteering:l,levels:u,sessionData:d,sessionKeys:h,startTimeOffset:f,variableList:p}=c;this.variableList=p,u.forEach(v=>{const{unknownCodecs:b}=v;if(b){const{preferManagedMediaSource:T}=this.hls.config;let{audioCodec:x,videoCodec:_}=v;for(let D=b.length;D--;){const w=b[D];ea(w,"audio",T)?(v.audioCodec=x=x?`${x},${w}`:w,Xr.audio[x.substring(0,4)]=2,b.splice(D,1)):ea(w,"video",T)&&(v.videoCodec=_=_?`${_},${w}`:w,Xr.video[_.substring(0,4)]=2,b.splice(D,1))}}});const{AUDIO:m=[],SUBTITLES:g,"CLOSED-CAPTIONS":y}=gn.parseMasterPlaylistMedia(a,o,c);m.length&&!m.some(b=>!b.url)&&u[0].audioCodec&&!u[0].attrs.AUDIO&&(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),m.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new tt({}),bitrate:0,url:""})),s.trigger(R.MANIFEST_LOADED,{levels:u,audioTracks:m,subtitles:g,captions:y,contentSteering:l,url:o,stats:t,networkDetails:r,sessionData:d,sessionKeys:h,startTimeOffset:f,variableList:p})}handleTrackOrLevelPlaylist(e,t,i,r,s){const a=this.hls,{id:o,level:c,type:l}=i,u=_d(e,i),d=ye(c)?c:ye(o)?o:0,h=ub(i),f=gn.parseLevelPlaylist(e.data,u,d,h,0,this.variableList);if(l===Be.MANIFEST){const p={attrs:new tt({}),bitrate:0,details:f,name:"",url:u};f.requestScheduled=t.loading.start+qD(f,0),a.trigger(R.MANIFEST_LOADED,{levels:[p],audioTracks:[],url:u,stats:t,networkDetails:r,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),i.levelDetails=f,this.handlePlaylistLoaded(f,e,t,i,r,s)}handleManifestParsingError(e,t,i,r,s){this.hls.trigger(R.ERROR,{type:_e.NETWORK_ERROR,details:re.MANIFEST_PARSING_ERROR,fatal:t.type===Be.MANIFEST,url:e.url,err:i,error:i,reason:i.message,response:e,context:t,networkDetails:r,stats:s})}handleNetworkError(e,t,i=!1,r,s){let a=`A network ${i?"timeout":"error"+(r?" (status "+r.code+")":"")} occurred while loading ${e.type}`;e.type===Be.LEVEL?a+=`: ${e.level} id: ${e.id}`:(e.type===Be.AUDIO_TRACK||e.type===Be.SUBTITLE_TRACK)&&(a+=` id: ${e.id} group-id: "${e.groupId}"`);const o=new Error(a);this.hls.logger.warn(`[playlist-loader]: ${a}`);let c=re.UNKNOWN,l=!1;const u=this.getInternalLoader(e);switch(e.type){case Be.MANIFEST:c=i?re.MANIFEST_LOAD_TIMEOUT:re.MANIFEST_LOAD_ERROR,l=!0;break;case Be.LEVEL:c=i?re.LEVEL_LOAD_TIMEOUT:re.LEVEL_LOAD_ERROR,l=!1;break;case Be.AUDIO_TRACK:c=i?re.AUDIO_TRACK_LOAD_TIMEOUT:re.AUDIO_TRACK_LOAD_ERROR,l=!1;break;case Be.SUBTITLE_TRACK:c=i?re.SUBTITLE_TRACK_LOAD_TIMEOUT:re.SUBTITLE_LOAD_ERROR,l=!1;break}u&&this.resetInternalLoader(e.type);const d={type:_e.NETWORK_ERROR,details:c,fatal:l,url:e.url,loader:u,context:e,error:o,networkDetails:t,stats:s};if(r){const h=t?.url||e.url;d.response=qe({url:h,data:void 0},r)}this.hls.trigger(R.ERROR,d)}handlePlaylistLoaded(e,t,i,r,s,a){const o=this.hls,{type:c,level:l,levelOrTrack:u,id:d,groupId:h,deliveryDirectives:f}=r,p=_d(t,r),m=ub(r);let g=typeof r.level=="number"&&m===xe.MAIN?l:void 0;const y=e.playlistParsingError;if(y){if(this.hls.logger.warn(`${y} ${e.url}`),!o.config.ignorePlaylistParsingErrors){o.trigger(R.ERROR,{type:_e.NETWORK_ERROR,details:re.LEVEL_PARSING_ERROR,fatal:!1,url:p,error:y,reason:y.message,response:t,context:r,level:g,parent:m,networkDetails:s,stats:i});return}e.playlistParsingError=null}if(!e.fragments.length){const v=e.playlistParsingError=new Error("No Segments found in Playlist");o.trigger(R.ERROR,{type:_e.NETWORK_ERROR,details:re.LEVEL_EMPTY_ERROR,fatal:!1,url:p,error:v,reason:v.message,response:t,context:r,level:g,parent:m,networkDetails:s,stats:i});return}switch(e.live&&a&&(a.getCacheAge&&(e.ageHeader=a.getCacheAge()||0),(!a.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),c){case Be.MANIFEST:case Be.LEVEL:if(g){if(!u)g=0;else if(u!==o.levels[g]){const v=o.levels.indexOf(u);v>-1&&(g=v)}}o.trigger(R.LEVEL_LOADED,{details:e,levelInfo:u||o.levels[0],level:g||0,id:d||0,stats:i,networkDetails:s,deliveryDirectives:f,withoutMultiVariant:c===Be.MANIFEST});break;case Be.AUDIO_TRACK:o.trigger(R.AUDIO_TRACK_LOADED,{details:e,track:u,id:d||0,groupId:h||"",stats:i,networkDetails:s,deliveryDirectives:f});break;case Be.SUBTITLE_TRACK:o.trigger(R.SUBTITLE_TRACK_LOADED,{details:e,track:u,id:d||0,groupId:h||"",stats:i,networkDetails:s,deliveryDirectives:f});break}}}class Wn{static get version(){return na}static isMSESupported(){return Xp()}static isSupported(){return eS()}static getMediaSource(){return ni()}static get Events(){return R}static get MetadataSchema(){return Bt}static get ErrorTypes(){return _e}static get ErrorDetails(){return re}static get DefaultConfig(){return Wn.defaultConfig?Wn.defaultConfig:C6}static set DefaultConfig(e){Wn.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new Mp,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const t=this.logger=f8(e.debug||!1,"Hls instance",e.assetPlayerId),i=this.config=L6(Wn.DefaultConfig,e,t);this.userConfig=e,i.progressive&&U6(i,t);const{abrController:r,bufferController:s,capLevelController:a,errorController:o,fpsController:c}=i,l=new o(this),u=this.abrController=new r(this),d=new sB(this),h=i.interstitialsController,f=h?this.interstitialsController=new h(this,Wn):null,p=this.bufferController=new s(this,d),m=this.capLevelController=new a(this),g=new c(this),y=new q6(this),v=i.contentSteeringController,b=v?new v(this):null,T=this.levelController=new $6(this,b),x=new B6(this),_=new H6(this.config,this.logger),D=this.streamController=new G6(this,d,_),w=this.gapController=new O6(this,d);m.setStreamController(D),g.setStreamController(D);const S=[y,T,D];f&&S.splice(1,0,f),b&&S.splice(1,0,b),this.networkControllers=S;const C=[u,p,w,m,g,x,d];this.audioTrackController=this.createController(i.audioTrackController,S);const O=i.audioStreamController;O&&S.push(this.audioStreamController=new O(this,d,_)),this.subtitleTrackController=this.createController(i.subtitleTrackController,S);const I=i.subtitleStreamController;I&&S.push(this.subtititleStreamController=new I(this,d,_)),this.createController(i.timelineController,C),_.emeController=this.emeController=this.createController(i.emeController,C),this.cmcdController=this.createController(i.cmcdController,C),this.latencyController=this.createController(N6,C),this.coreComponents=C,S.push(l);const L=l.onErrorOut;typeof L=="function"&&this.on(R.ERROR,L,l),this.on(R.MANIFEST_LOADED,y.onManifestLoaded,y)}createController(e,t){if(e){const i=new e(this);return t&&t.push(i),i}return null}on(e,t,i=this){this._emitter.on(e,t,i)}once(e,t,i=this){this._emitter.once(e,t,i)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,i=this,r){this._emitter.off(e,t,i,r)}listeners(e){return this._emitter.listeners(e)}emit(e,t,i){return this._emitter.emit(e,t,i)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(i){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+i.message+'". Here is a stacktrace:',i),!this.triggeringException){this.triggeringException=!0;const r=e===R.ERROR;this.trigger(R.ERROR,{type:_e.OTHER_ERROR,details:re.INTERNAL_EXCEPTION,fatal:r,event:e,error:i}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger(R.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(t=>t.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(t=>t.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const s=new Error(`attachMedia failed: invalid argument (${e})`);this.trigger(R.ERROR,{type:_e.OTHER_ERROR,details:re.ATTACH_MEDIA_ERROR,fatal:!0,error:s});return}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const t="media"in e,i=t?e.media:e,r=t?e:{media:i};this._media=i,this.trigger(R.MEDIA_ATTACHING,r)}detachMedia(){this.logger.log("detachMedia"),this.trigger(R.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger(R.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const t=this.media,i=this._url,r=this._url=Ap.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${r}`),t&&i&&(i!==r||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(R.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,t){this.logger.log(`startLoad(${e+(t?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let i=0;i<this.networkControllers.length&&(this.networkControllers[i].startLoad(e,t),!(!this.started||!this.networkControllers));i++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){const e={[xe.MAIN]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[xe.AUDIO]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[xe.SUBTITLE]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,t=e?.currentTime;this.detachMedia(),e&&(this.attachMedia(e),t&&this.startLoad(t))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=$N()),e}get levels(){const e=this.levelController.levels;return e||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){q8(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const i=e.length;for(let r=0;r<i;r++)if(e[r].maxBitrate>=t)return r;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:i}=this;let r;if(t===-1&&e!=null&&e.length?r=e.length-1:r=t,i)for(let s=r;s--;){const a=e[s].attrs["HDCP-LEVEL"];if(a&&a<=i)return s}return r}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var t;return((t=this.audioTrackController)==null?void 0:t.setAudioOption(e))||null}setSubtitleOption(e){var t;return((t=this.subtitleTrackController)==null?void 0:t.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!!((e=this.bufferController)!=null&&e.bufferedToEnd)}get interstitialsManager(){var e;return((e=this.interstitialsController)==null?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,t=this.allAudioTracks){const i=CD(t);return wD(e,i,navigator.mediaCapabilities)}}Wn.defaultConfig=void 0;const m4=Object.freeze(Object.defineProperty({__proto__:null,AbrController:RD,AttrList:tt,AudioStreamController:yE,AudioTrackController:bE,BasePlaylistController:pl,BaseSegment:wp,BaseStreamController:hl,BufferController:TE,CMCDController:UE,CapLevelController:gl,ChunkMetadata:dl,ContentSteeringController:kE,Cues:QE,DateRange:kp,EMEController:sr,ErrorActionFlags:Mt,ErrorController:PD,ErrorDetails:re,ErrorTypes:_e,Events:R,FPSController:PE,FetchLoader:Rh,Fragment:$o,Hls:Wn,HlsSkip:ks,HlsUrlParameters:mh,KeySystemFormats:xt,KeySystems:nt,Level:Yr,LevelDetails:BD,LevelKey:jn,LoadStats:ll,M3U8Parser:gn,MetadataSchema:Bt,NetworkErrorAction:bt,Part:gD,PlaylistLevelType:xe,SubtitleStreamController:$E,SubtitleTrackController:BE,TimelineController:XE,XhrLoader:zp,default:Wn,fetchSupported:ZE,getMediaSource:ni,isMSESupported:Xp,isSupported:eS,requestMediaKeySystemAccess:Op},Symbol.toStringTag,{value:"Module"}));export{Jt as A,xw as B,K6 as C,m4 as D,gi as G,Q6 as H,t4 as M,Ib as O,vl as P,Y6 as R,i4 as T,Sc as _,Ei as a,_A as b,X6 as c,J6 as d,Z6 as e,n4 as f,ar as g,rk as h,o4 as i,oA as j,Et as k,z6 as l,a4 as m,It as n,r4 as o,d4 as p,UF as q,l4 as r,h4 as s,u4 as t,dr as u,mo as v,f4 as w,e4 as x,Di as y,j6 as z};
