var sn,M,cl,Ze,Ms,ul,hl,dl,Cr,Hi,Wi,fl,Gt={},pl=[],bh=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,on=Array.isArray;function fe(t,e){for(var n in e)t[n]=e[n];return t}function Ir(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function D(t,e,n){var i,r,s,o={};for(s in e)s=="key"?i=e[s]:s=="ref"?r=e[s]:o[s]=e[s];if(arguments.length>2&&(o.children=arguments.length>3?sn.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(s in t.defaultProps)o[s]===void 0&&(o[s]=t.defaultProps[s]);return Ot(t,o,i,r,null)}function Ot(t,e,n,i,r){var s={type:t,props:e,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++cl,__i:-1,__u:0};return r==null&&M.vnode!=null&&M.vnode(s),s}function J(t){return t.children}function se(t,e){this.props=t,this.context=e}function wt(t,e){if(e==null)return t.__?wt(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?wt(t):null}function ml(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return ml(t)}}function zi(t){(!t.__d&&(t.__d=!0)&&Ze.push(t)&&!Bn.__r++||Ms!=M.debounceRendering)&&((Ms=M.debounceRendering)||ul)(Bn)}function Bn(){for(var t,e,n,i,r,s,o,a=1;Ze.length;)Ze.length>a&&Ze.sort(hl),t=Ze.shift(),a=Ze.length,t.__d&&(n=void 0,i=void 0,r=(i=(e=t).__v).__e,s=[],o=[],e.__P&&((n=fe({},i)).__v=i.__v+1,M.vnode&&M.vnode(n),Rr(e.__P,n,i,e.__n,e.__P.namespaceURI,32&i.__u?[r]:null,s,r??wt(i),!!(32&i.__u),o),n.__v=i.__v,n.__.__k[n.__i]=n,_l(s,n,o),i.__e=i.__=null,n.__e!=r&&ml(n)));Bn.__r=0}function gl(t,e,n,i,r,s,o,a,l,c,u){var h,d,f,p,y,g,m,_=i&&i.__k||pl,v=e.length;for(l=Th(n,e,_,l,v),h=0;h<v;h++)(f=n.__k[h])!=null&&(d=f.__i==-1?Gt:_[f.__i]||Gt,f.__i=h,g=Rr(t,f,d,r,s,o,a,l,c,u),p=f.__e,f.ref&&d.ref!=f.ref&&(d.ref&&Mr(d.ref,null,f),u.push(f.ref,f.__c||p,f)),y==null&&p!=null&&(y=p),(m=!!(4&f.__u))||d.__k===f.__k?l=yl(f,l,t,m):typeof f.type=="function"&&g!==void 0?l=g:p&&(l=p.nextSibling),f.__u&=-7);return n.__e=y,l}function Th(t,e,n,i,r){var s,o,a,l,c,u=n.length,h=u,d=0;for(t.__k=new Array(r),s=0;s<r;s++)(o=e[s])!=null&&typeof o!="boolean"&&typeof o!="function"?(l=s+d,(o=t.__k[s]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?Ot(null,o,null,null,null):on(o)?Ot(J,{children:o},null,null,null):o.constructor==null&&o.__b>0?Ot(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=t,o.__b=t.__b+1,a=null,(c=o.__i=Sh(o,n,l,h))!=-1&&(h--,(a=n[c])&&(a.__u|=2)),a==null||a.__v==null?(c==-1&&(r>u?d--:r<u&&d++),typeof o.type!="function"&&(o.__u|=4)):c!=l&&(c==l-1?d--:c==l+1?d++:(c>l?d--:d++,o.__u|=4))):t.__k[s]=null;if(h)for(s=0;s<u;s++)(a=n[s])!=null&&(2&a.__u)==0&&(a.__e==i&&(i=wt(a)),wl(a,a));return i}function yl(t,e,n,i){var r,s;if(typeof t.type=="function"){for(r=t.__k,s=0;r&&s<r.length;s++)r[s]&&(r[s].__=t,e=yl(r[s],e,n,i));return e}t.__e!=e&&(i&&(e&&t.type&&!e.parentNode&&(e=wt(t)),n.insertBefore(t.__e,e||null)),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function be(t,e){return e=e||[],t==null||typeof t=="boolean"||(on(t)?t.some(function(n){be(n,e)}):e.push(t)),e}function Sh(t,e,n,i){var r,s,o,a=t.key,l=t.type,c=e[n],u=c!=null&&(2&c.__u)==0;if(c===null&&t.key==null||u&&a==c.key&&l==c.type)return n;if(i>(u?1:0)){for(r=n-1,s=n+1;r>=0||s<e.length;)if((c=e[o=r>=0?r--:s++])!=null&&(2&c.__u)==0&&a==c.key&&l==c.type)return o}return-1}function ks(t,e,n){e[0]=="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||bh.test(e)?n:n+"px"}function wn(t,e,n,i,r){var s,o;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof i=="string"&&(t.style.cssText=i=""),i)for(e in i)n&&e in n||ks(t.style,e,"");if(n)for(e in n)i&&n[e]==i[e]||ks(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")s=e!=(e=e.replace(dl,"$1")),o=e.toLowerCase(),e=o in t||e=="onFocusOut"||e=="onFocusIn"?o.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=n,n?i?n.u=i.u:(n.u=Cr,t.addEventListener(e,s?Wi:Hi,s)):t.removeEventListener(e,s?Wi:Hi,s);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function Ds(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=Cr++;else if(e.t<n.u)return;return n(M.event?M.event(e):e)}}}function Rr(t,e,n,i,r,s,o,a,l,c){var u,h,d,f,p,y,g,m,_,v,b,w,T,E,S,x,C,k=e.type;if(e.constructor!=null)return null;128&n.__u&&(l=!!(32&n.__u),s=[a=e.__e=n.__e]),(u=M.__b)&&u(e);e:if(typeof k=="function")try{if(m=e.props,_="prototype"in k&&k.prototype.render,v=(u=k.contextType)&&i[u.__c],b=u?v?v.props.value:u.__:i,n.__c?g=(h=e.__c=n.__c).__=h.__E:(_?e.__c=h=new k(m,b):(e.__c=h=new se(m,b),h.constructor=k,h.render=xh),v&&v.sub(h),h.props=m,h.state||(h.state={}),h.context=b,h.__n=i,d=h.__d=!0,h.__h=[],h._sb=[]),_&&h.__s==null&&(h.__s=h.state),_&&k.getDerivedStateFromProps!=null&&(h.__s==h.state&&(h.__s=fe({},h.__s)),fe(h.__s,k.getDerivedStateFromProps(m,h.__s))),f=h.props,p=h.state,h.__v=e,d)_&&k.getDerivedStateFromProps==null&&h.componentWillMount!=null&&h.componentWillMount(),_&&h.componentDidMount!=null&&h.__h.push(h.componentDidMount);else{if(_&&k.getDerivedStateFromProps==null&&m!==f&&h.componentWillReceiveProps!=null&&h.componentWillReceiveProps(m,b),!h.__e&&h.shouldComponentUpdate!=null&&h.shouldComponentUpdate(m,h.__s,b)===!1||e.__v==n.__v){for(e.__v!=n.__v&&(h.props=m,h.state=h.__s,h.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(L){L&&(L.__=e)}),w=0;w<h._sb.length;w++)h.__h.push(h._sb[w]);h._sb=[],h.__h.length&&o.push(h);break e}h.componentWillUpdate!=null&&h.componentWillUpdate(m,h.__s,b),_&&h.componentDidUpdate!=null&&h.__h.push(function(){h.componentDidUpdate(f,p,y)})}if(h.context=b,h.props=m,h.__P=t,h.__e=!1,T=M.__r,E=0,_){for(h.state=h.__s,h.__d=!1,T&&T(e),u=h.render(h.props,h.state,h.context),S=0;S<h._sb.length;S++)h.__h.push(h._sb[S]);h._sb=[]}else do h.__d=!1,T&&T(e),u=h.render(h.props,h.state,h.context),h.state=h.__s;while(h.__d&&++E<25);h.state=h.__s,h.getChildContext!=null&&(i=fe(fe({},i),h.getChildContext())),_&&!d&&h.getSnapshotBeforeUpdate!=null&&(y=h.getSnapshotBeforeUpdate(f,p)),x=u,u!=null&&u.type===J&&u.key==null&&(x=vl(u.props.children)),a=gl(t,on(x)?x:[x],e,n,i,r,s,o,a,l,c),h.base=e.__e,e.__u&=-161,h.__h.length&&o.push(h),g&&(h.__E=h.__=null)}catch(L){if(e.__v=null,l||s!=null)if(L.then){for(e.__u|=l?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;s[s.indexOf(a)]=null,e.__e=a}else{for(C=s.length;C--;)Ir(s[C]);Gi(e)}else e.__e=n.__e,e.__k=n.__k,L.then||Gi(e);M.__e(L,e,n)}else s==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):a=e.__e=Eh(n.__e,e,n,i,r,s,o,l,c);return(u=M.diffed)&&u(e),128&e.__u?void 0:a}function Gi(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(Gi)}function _l(t,e,n){for(var i=0;i<n.length;i++)Mr(n[i],n[++i],n[++i]);M.__c&&M.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(s){s.call(r)})}catch(s){M.__e(s,r.__v)}})}function vl(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:on(t)?t.map(vl):fe({},t)}function Eh(t,e,n,i,r,s,o,a,l){var c,u,h,d,f,p,y,g=n.props,m=e.props,_=e.type;if(_=="svg"?r="http://www.w3.org/2000/svg":_=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),s!=null){for(c=0;c<s.length;c++)if((f=s[c])&&"setAttribute"in f==!!_&&(_?f.localName==_:f.nodeType==3)){t=f,s[c]=null;break}}if(t==null){if(_==null)return document.createTextNode(m);t=document.createElementNS(r,_,m.is&&m),a&&(M.__m&&M.__m(e,s),a=!1),s=null}if(_==null)g===m||a&&t.data==m||(t.data=m);else{if(s=s&&sn.call(t.childNodes),g=n.props||Gt,!a&&s!=null)for(g={},c=0;c<t.attributes.length;c++)g[(f=t.attributes[c]).name]=f.value;for(c in g)if(f=g[c],c!="children"){if(c=="dangerouslySetInnerHTML")h=f;else if(!(c in m)){if(c=="value"&&"defaultValue"in m||c=="checked"&&"defaultChecked"in m)continue;wn(t,c,null,f,r)}}for(c in m)f=m[c],c=="children"?d=f:c=="dangerouslySetInnerHTML"?u=f:c=="value"?p=f:c=="checked"?y=f:a&&typeof f!="function"||g[c]===f||wn(t,c,f,g[c],r);if(u)a||h&&(u.__html==h.__html||u.__html==t.innerHTML)||(t.innerHTML=u.__html),e.__k=[];else if(h&&(t.innerHTML=""),gl(e.type=="template"?t.content:t,on(d)?d:[d],e,n,i,_=="foreignObject"?"http://www.w3.org/1999/xhtml":r,s,o,s?s[0]:n.__k&&wt(n,0),a,l),s!=null)for(c=s.length;c--;)Ir(s[c]);a||(c="value",_=="progress"&&p==null?t.removeAttribute("value"):p!=null&&(p!==t[c]||_=="progress"&&!p||_=="option"&&p!=g[c])&&wn(t,c,p,g[c],r),c="checked",y!=null&&y!=t[c]&&wn(t,c,y,g[c],r))}return t}function Mr(t,e,n){try{if(typeof t=="function"){var i=typeof t.__u=="function";i&&t.__u(),i&&e==null||(t.__u=t(e))}else t.current=e}catch(r){M.__e(r,n)}}function wl(t,e,n){var i,r;if(M.unmount&&M.unmount(t),(i=t.ref)&&(i.current&&i.current!=t.__e||Mr(i,null,e)),(i=t.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(s){M.__e(s,e)}i.base=i.__P=null}if(i=t.__k)for(r=0;r<i.length;r++)i[r]&&wl(i[r],e,n||typeof t.type!="function");n||Ir(t.__e),t.__c=t.__=t.__e=void 0}function xh(t,e,n){return this.constructor(t,n)}function bl(t,e,n){var i,r,s,o;e==document&&(e=document.documentElement),M.__&&M.__(t,e),r=(i=!1)?null:e.__k,s=[],o=[],Rr(e,t=e.__k=D(J,null,[t]),r||Gt,Gt,e.namespaceURI,r?null:e.firstChild?sn.call(e.childNodes):null,s,r?r.__e:e.firstChild,i,o),_l(s,t,o)}function Ah(t,e,n){var i,r,s,o,a=fe({},t.props);for(s in t.type&&t.type.defaultProps&&(o=t.type.defaultProps),e)s=="key"?i=e[s]:s=="ref"?r=e[s]:a[s]=e[s]===void 0&&o!=null?o[s]:e[s];return arguments.length>2&&(a.children=arguments.length>3?sn.call(arguments,2):n),Ot(t.type,a,i||t.key,r||t.ref,null)}function G(t){function e(n){var i,r;return this.getChildContext||(i=new Set,(r={})[e.__c]=this,this.getChildContext=function(){return r},this.componentWillUnmount=function(){i=null},this.shouldComponentUpdate=function(s){this.props.value!=s.value&&i.forEach(function(o){o.__e=!0,zi(o)})},this.sub=function(s){i.add(s);var o=s.componentWillUnmount;s.componentWillUnmount=function(){i&&i.delete(s),o&&o.call(s)}}),n.children}return e.__c="__cC"+fl++,e.__=t,e.Provider=e.__l=(e.Consumer=function(n,i){return n.children(i)}).contextType=e,e}sn=pl.slice,M={__e:function(t,e,n,i){for(var r,s,o;e=e.__;)if((r=e.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(t)),o=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,i||{}),o=r.__d),o)return r.__E=r}catch(a){t=a}throw t}},cl=0,se.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=fe({},this.state),typeof t=="function"&&(t=t(fe({},n),this.props)),t&&fe(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),zi(this))},se.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),zi(this))},se.prototype.render=J,Ze=[],ul=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,hl=function(t,e){return t.__v.__b-e.__v.__b},Bn.__r=0,dl=/(PointerCapture)$|Capture$/i,Cr=0,Hi=Ds(!1),Wi=Ds(!0),fl=0;var $e,N,fi,Ls,Kt=0,Tl=[],j=M,Os=j.__b,Ns=j.__r,Vs=j.diffed,Fs=j.__c,Us=j.unmount,Bs=j.__;function xt(t,e){j.__h&&j.__h(N,t,Kt||e),Kt=0;var n=N.__H||(N.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function st(t){return Kt=1,Ph(Sl,t)}function Ph(t,e,n){var i=xt($e++,2);if(i.t=t,!i.__c&&(i.__=[n?n(e):Sl(void 0,e),function(a){var l=i.__N?i.__N[0]:i.__[0],c=i.t(l,a);l!==c&&(i.__N=[c,i.__[1]],i.__c.setState({}))}],i.__c=N,!N.__f)){var r=function(a,l,c){if(!i.__c.__H)return!0;var u=i.__c.__H.__.filter(function(d){return!!d.__c});if(u.every(function(d){return!d.__N}))return!s||s.call(this,a,l,c);var h=i.__c.props!==a;return u.forEach(function(d){if(d.__N){var f=d.__[0];d.__=d.__N,d.__N=void 0,f!==d.__[0]&&(h=!0)}}),s&&s.call(this,a,l,c)||h};N.__f=!0;var s=N.shouldComponentUpdate,o=N.componentWillUpdate;N.componentWillUpdate=function(a,l,c){if(this.__e){var u=s;s=void 0,r(a,l,c),s=u}o&&o.call(this,a,l,c)},N.shouldComponentUpdate=r}return i.__N||i.__}function je(t,e){var n=xt($e++,3);!j.__s&&Dr(n.__H,e)&&(n.__=t,n.u=e,N.__H.__h.push(n))}function ei(t,e){var n=xt($e++,4);!j.__s&&Dr(n.__H,e)&&(n.__=t,n.u=e,N.__h.push(n))}function oe(t){return Kt=5,X(function(){return{current:t}},[])}function X(t,e){var n=xt($e++,7);return Dr(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function ze(t,e){return Kt=8,X(function(){return t},e)}function I(t){var e=N.context[t.__c],n=xt($e++,9);return n.c=t,e?(n.__==null&&(n.__=!0,e.sub(N)),e.props.value):t.__}function kr(){var t=xt($e++,11);if(!t.__){for(var e=N.__v;e!==null&&!e.__m&&e.__!==null;)e=e.__;var n=e.__m||(e.__m=[0,0]);t.__="P"+n[0]+"-"+n[1]++}return t.__}function Ch(){for(var t;t=Tl.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Cn),t.__H.__h.forEach(Ki),t.__H.__h=[]}catch(e){t.__H.__h=[],j.__e(e,t.__v)}}j.__b=function(t){N=null,Os&&Os(t)},j.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Bs&&Bs(t,e)},j.__r=function(t){Ns&&Ns(t),$e=0;var e=(N=t.__c).__H;e&&(fi===N?(e.__h=[],N.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.forEach(Cn),e.__h.forEach(Ki),e.__h=[],$e=0)),fi=N},j.diffed=function(t){Vs&&Vs(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Tl.push(e)!==1&&Ls===j.requestAnimationFrame||((Ls=j.requestAnimationFrame)||Ih)(Ch)),e.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),fi=N=null},j.__c=function(t,e){e.some(function(n){try{n.__h.forEach(Cn),n.__h=n.__h.filter(function(i){return!i.__||Ki(i)})}catch(i){e.some(function(r){r.__h&&(r.__h=[])}),e=[],j.__e(i,n.__v)}}),Fs&&Fs(t,e)},j.unmount=function(t){Us&&Us(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{Cn(i)}catch(r){e=r}}),n.__H=void 0,e&&j.__e(e,n.__v))};var $s=typeof requestAnimationFrame=="function";function Ih(t){var e,n=function(){clearTimeout(i),$s&&cancelAnimationFrame(e),setTimeout(t)},i=setTimeout(n,35);$s&&(e=requestAnimationFrame(n))}function Cn(t){var e=N,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),N=e}function Ki(t){var e=N;t.__c=t.__(),N=e}function Dr(t,e){return!t||t.length!==e.length||e.some(function(n,i){return n!==t[i]})}function Sl(t,e){return typeof e=="function"?e(t):e}function El(t,e){for(var n in e)t[n]=e[n];return t}function qi(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var i in e)if(i!=="__source"&&t[i]!==e[i])return!0;return!1}function Rh(t){t()}var xl=ei;function js(t,e){this.props=t,this.context=e}function Mh(t,e){function n(r){var s=this.props.ref,o=s==r.ref;return!o&&s&&(s.call?s(null):s.current=null),e?!e(this.props,r)||!o:qi(this.props,r)}function i(r){return this.shouldComponentUpdate=n,D(t,r)}return i.displayName="Memo("+(t.displayName||t.name)+")",i.prototype.isReactComponent=!0,i.__f=!0,i.type=t,i}(js.prototype=new se).isPureReactComponent=!0,js.prototype.shouldComponentUpdate=function(t,e){return qi(this.props,t)||qi(this.state,e)};var Hs=M.__b;M.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),Hs&&Hs(t)};var kh=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function ti(t){function e(n){var i=El({},n);return delete i.ref,t(i,n.ref||null)}return e.$$typeof=kh,e.render=t,e.prototype.isReactComponent=e.__f=!0,e.displayName="ForwardRef("+(t.displayName||t.name)+")",e}var Ws=function(t,e){return t==null?null:be(be(t).map(e))},Al={map:Ws,forEach:Ws,count:function(t){return t?be(t).length:0},only:function(t){var e=be(t);if(e.length!==1)throw"Children.only";return e[0]},toArray:be},Dh=M.__e;M.__e=function(t,e,n,i){if(t.then){for(var r,s=e;s=s.__;)if((r=s.__c)&&r.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),r.__c(t,e)}Dh(t,e,n,i)};var zs=M.unmount;function Pl(t,e,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(i){typeof i.__c=="function"&&i.__c()}),t.__c.__H=null),(t=El({},t)).__c!=null&&(t.__c.__P===n&&(t.__c.__P=e),t.__c.__e=!0,t.__c=null),t.__k=t.__k&&t.__k.map(function(i){return Pl(i,e,n)})),t}function Cl(t,e,n){return t&&n&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(i){return Cl(i,e,n)}),t.__c&&t.__c.__P===e&&(t.__e&&n.appendChild(t.__e),t.__c.__e=!0,t.__c.__P=n)),t}function pi(){this.__u=0,this.o=null,this.__b=null}function Il(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function ib(t){var e,n,i;function r(s){if(e||(e=t()).then(function(o){n=o.default||o},function(o){i=o}),i)throw i;if(!n)throw e;return D(n,s)}return r.displayName="Lazy",r.__f=!0,r}function bn(){this.i=null,this.l=null}M.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&32&t.__u&&(t.type=null),zs&&zs(t)},(pi.prototype=new se).__c=function(t,e){var n=e.__c,i=this;i.o==null&&(i.o=[]),i.o.push(n);var r=Il(i.__v),s=!1,o=function(){s||(s=!0,n.__R=null,r?r(a):a())};n.__R=o;var a=function(){if(!--i.__u){if(i.state.__a){var l=i.state.__a;i.__v.__k[0]=Cl(l,l.__c.__P,l.__c.__O)}var c;for(i.setState({__a:i.__b=null});c=i.o.pop();)c.forceUpdate()}};i.__u++||32&e.__u||i.setState({__a:i.__b=i.__v.__k[0]}),t.then(o,o)},pi.prototype.componentWillUnmount=function(){this.o=[]},pi.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=Pl(this.__b,n,i.__O=i.__P)}this.__b=null}var r=e.__a&&D(J,null,t.fallback);return r&&(r.__u&=-33),[D(J,null,e.__a?null:t.children),r]};var Gs=function(t,e,n){if(++n[1]===n[0]&&t.l.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.l.size))for(n=t.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.i=n=n[2]}};(bn.prototype=new se).__a=function(t){var e=this,n=Il(e.__v),i=e.l.get(t);return i[0]++,function(r){var s=function(){e.props.revealOrder?(i.push(r),Gs(e,t,i)):r()};n?n(s):s()}},bn.prototype.render=function(t){this.i=null,this.l=new Map;var e=be(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.l.set(e[n],this.i=[1,0,this.i]);return t.children},bn.prototype.componentDidUpdate=bn.prototype.componentDidMount=function(){var t=this;this.l.forEach(function(e,n){Gs(t,n,e)})};var Rl=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Lh=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Oh=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Nh=/[A-Z0-9]/g,Vh=typeof document<"u",Fh=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(t)};function Uh(t,e,n){return e.__k==null&&(e.textContent=""),bl(t,e),typeof n=="function"&&n(),t?t.__c:null}se.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(se.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var Ks=M.event;function Bh(){}function $h(){return this.cancelBubble}function jh(){return this.defaultPrevented}M.event=function(t){return Ks&&(t=Ks(t)),t.persist=Bh,t.isPropagationStopped=$h,t.isDefaultPrevented=jh,t.nativeEvent=t};var Hh={enumerable:!1,configurable:!0,get:function(){return this.class}},qs=M.vnode;M.vnode=function(t){typeof t.type=="string"&&(function(e){var n=e.props,i=e.type,r={},s=i.indexOf("-")===-1;for(var o in n){var a=n[o];if(!(o==="value"&&"defaultValue"in n&&a==null||Vh&&o==="children"&&i==="noscript"||o==="class"||o==="className")){var l=o.toLowerCase();o==="defaultValue"&&"value"in n&&n.value==null?o="value":o==="download"&&a===!0?a="":l==="translate"&&a==="no"?a=!1:l[0]==="o"&&l[1]==="n"?l==="ondoubleclick"?o="ondblclick":l!=="onchange"||i!=="input"&&i!=="textarea"||Fh(n.type)?l==="onfocus"?o="onfocusin":l==="onblur"?o="onfocusout":Oh.test(o)&&(o=l):l=o="oninput":s&&Lh.test(o)?o=o.replace(Nh,"-$&").toLowerCase():a===null&&(a=void 0),l==="oninput"&&r[o=l]&&(o="oninputCapture"),r[o]=a}}i=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=be(n.children).forEach(function(c){c.props.selected=r.value.indexOf(c.props.value)!=-1})),i=="select"&&r.defaultValue!=null&&(r.value=be(n.children).forEach(function(c){c.props.selected=r.multiple?r.defaultValue.indexOf(c.props.value)!=-1:r.defaultValue==c.props.value})),n.class&&!n.className?(r.class=n.class,Object.defineProperty(r,"className",Hh)):(n.className&&!n.class||n.class&&n.className)&&(r.class=r.className=n.className),e.props=r})(t),t.$$typeof=Rl,qs&&qs(t)};var Xs=M.__r;M.__r=function(t){Xs&&Xs(t),t.__c};var Ys=M.diffed;M.diffed=function(t){Ys&&Ys(t);var e=t.props,n=t.__e;n!=null&&t.type==="textarea"&&"value"in e&&e.value!==n.value&&(n.value=e.value==null?"":e.value)};function Lr(t){return!!t&&t.$$typeof===Rl}function Wh(t){return Lr(t)?Ah.apply(null,arguments):t}function zh(t){return!!t.__k&&(bl(null,t),!0)}var rb=J,sb={Fragment:J},Gh=0;function He(t,e,n,i,r,s){e||(e={});var o,a,l=e;if("ref"in l)for(a in l={},e)a=="ref"?o=e[a]:l[a]=e[a];var c={type:t,props:l,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Gh,__i:-1,__u:0,__source:r,__self:s};if(typeof t=="function"&&(o=t.defaultProps))for(a in o)l[a]===void 0&&(l[a]=o[a]);return M.vnode&&M.vnode(c),c}function ob(t){return{render:function(e){Uh(e,t)},unmount:function(){zh(t)}}}var Js="popstate";function Kh(t={}){function e(r,s){let{pathname:o="/",search:a="",hash:l=""}=at(r.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Xi("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){let o=r.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=r.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof s=="string"?s:qt(s))}function i(r,s){he(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return Xh(e,n,i,t)}function U(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function he(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function qh(){return Math.random().toString(36).substring(2,10)}function Zs(t,e){return{usr:t.state,key:t.key,idx:e}}function Xi(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?at(e):e,state:n,key:e&&e.key||i||qh()}}function qt({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function at(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function Xh(t,e,n,i={}){let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a="POP",l=null,c=u();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function u(){return(o.state||{idx:null}).idx}function h(){a="POP";let g=u(),m=g==null?null:g-c;c=g,l&&l({action:a,location:y.location,delta:m})}function d(g,m){a="PUSH";let _=Xi(y.location,g,m);n&&n(_,g),c=u()+1;let v=Zs(_,c),b=y.createHref(_);try{o.pushState(v,"",b)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;r.location.assign(b)}s&&l&&l({action:a,location:y.location,delta:1})}function f(g,m){a="REPLACE";let _=Xi(y.location,g,m);n&&n(_,g),c=u();let v=Zs(_,c),b=y.createHref(_);o.replaceState(v,"",b),s&&l&&l({action:a,location:y.location,delta:0})}function p(g){return Yh(g)}let y={get action(){return a},get location(){return t(r,o)},listen(g){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(Js,h),l=g,()=>{r.removeEventListener(Js,h),l=null}},createHref(g){return e(r,g)},createURL:p,encodeLocation(g){let m=p(g);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:d,replace:f,go(g){return o.go(g)}};return y}function Yh(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),U(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:qt(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function Ml(t,e,n="/"){return Jh(t,e,n,!1)}function Jh(t,e,n,i){let r=typeof e=="string"?at(e):e,s=Se(r.pathname||"/",n);if(s==null)return null;let o=kl(t);Zh(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=cd(s);a=ad(o[l],c,i)}return a}function kl(t,e=[],n=[],i="",r=!1){let s=(o,a,l=r,c)=>{let u={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(i)&&l)return;U(u.relativePath.startsWith(i),`Absolute route path "${u.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(i.length)}let h=Te([i,u.relativePath]),d=n.concat(u);o.children&&o.children.length>0&&(U(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),kl(o.children,e,d,h,l)),!(o.path==null&&!o.index)&&e.push({path:h,score:sd(h,o.index),routesMeta:d})};return t.forEach((o,a)=>{if(o.path===""||!o.path?.includes("?"))s(o,a);else for(let l of Dl(o.path))s(o,a,!0,l)}),e}function Dl(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=Dl(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Zh(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:od(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var Qh=/^:[\w-]+$/,ed=3,td=2,nd=1,id=10,rd=-2,Qs=t=>t==="*";function sd(t,e){let n=t.split("/"),i=n.length;return n.some(Qs)&&(i+=rd),e&&(i+=td),n.filter(r=>!Qs(r)).reduce((r,s)=>r+(Qh.test(s)?ed:s===""?nd:id),i)}function od(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function ad(t,e,n=!1){let{routesMeta:i}=t,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],c=a===i.length-1,u=s==="/"?e:e.slice(s.length)||"/",h=$n({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),d=l.route;if(!h&&c&&n&&!i[i.length-1].route.index&&(h=$n({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!h)return null;Object.assign(r,h.params),o.push({params:r,pathname:Te([s,h.pathname]),pathnameBase:fd(Te([s,h.pathnameBase])),route:d}),h.pathnameBase!=="/"&&(s=Te([s,h.pathnameBase]))}return o}function $n(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=ld(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((c,{paramName:u,isOptional:h},d)=>{if(u==="*"){let p=a[d]||"";o=s.slice(0,s.length-p.length).replace(/(.)\/+$/,"$1")}const f=a[d];return h&&!f?c[u]=void 0:c[u]=(f||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function ld(t,e=!1,n=!0){he(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function cd(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return he(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Se(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function ud(t,e="/"){let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?at(t):t;return{pathname:n?n.startsWith("/")?n:hd(n,e):e,search:pd(i),hash:md(r)}}function hd(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function mi(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function dd(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Ll(t){let e=dd(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function Ol(t,e,n,i=!1){let r;typeof t=="string"?r=at(t):(r={...t},U(!r.pathname||!r.pathname.includes("?"),mi("?","pathname","search",r)),U(!r.pathname||!r.pathname.includes("#"),mi("#","pathname","hash",r)),U(!r.search||!r.search.includes("#"),mi("#","search","hash",r)));let s=t===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!i&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h-=1;r.pathname=d.join("/")}a=h>=0?e[h]:"/"}let l=ud(r,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var Te=t=>t.join("/").replace(/\/\/+/g,"/"),fd=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),pd=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,md=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function gd(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Nl=["POST","PUT","PATCH","DELETE"];new Set(Nl);var yd=["GET",...Nl];new Set(yd);var At=G(null);At.displayName="DataRouter";var ni=G(null);ni.displayName="DataRouterState";G(!1);var Vl=G({isTransitioning:!1});Vl.displayName="ViewTransition";var _d=G(new Map);_d.displayName="Fetchers";var vd=G(null);vd.displayName="Await";var _e=G(null);_e.displayName="Navigation";var an=G(null);an.displayName="Location";var Re=G({outlet:null,matches:[],isDataRoute:!1});Re.displayName="Route";var Or=G(null);Or.displayName="RouteError";function wd(t,{relative:e}={}){U(ln(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=I(_e),{hash:r,pathname:s,search:o}=cn(t,{relative:e}),a=s;return n!=="/"&&(a=s==="/"?n:Te([n,s])),i.createHref({pathname:a,search:o,hash:r})}function ln(){return I(an)!=null}function lt(){return U(ln(),"useLocation() may be used only in the context of a <Router> component."),I(an).location}var Fl="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ul(t){I(_e).static||ei(t)}function bd(){let{isDataRoute:t}=I(Re);return t?Ld():Td()}function Td(){U(ln(),"useNavigate() may be used only in the context of a <Router> component.");let t=I(At),{basename:e,navigator:n}=I(_e),{matches:i}=I(Re),{pathname:r}=lt(),s=JSON.stringify(Ll(i)),o=oe(!1);return Ul(()=>{o.current=!0}),ze((l,c={})=>{if(he(o.current,Fl),!o.current)return;if(typeof l=="number"){n.go(l);return}let u=Ol(l,JSON.parse(s),r,c.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:Te([e,u.pathname])),(c.replace?n.replace:n.push)(u,c.state,c)},[e,n,s,r,t])}G(null);function cn(t,{relative:e}={}){let{matches:n}=I(Re),{pathname:i}=lt(),r=JSON.stringify(Ll(n));return X(()=>Ol(t,JSON.parse(r),i,e==="path"),[t,r,i,e])}function Sd(t,e){return Bl(t,e)}function Bl(t,e,n,i,r){U(ln(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=I(_e),{matches:o}=I(Re),a=o[o.length-1],l=a?a.params:{},c=a?a.pathname:"/",u=a?a.pathnameBase:"/",h=a&&a.route;{let _=h&&h.path||"";$l(c,!h||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let d=lt(),f;if(e){let _=typeof e=="string"?at(e):e;U(u==="/"||_.pathname?.startsWith(u),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${_.pathname}" was given in the \`location\` prop.`),f=_}else f=d;let p=f.pathname||"/",y=p;if(u!=="/"){let _=u.replace(/^\//,"").split("/");y="/"+p.replace(/^\//,"").split("/").slice(_.length).join("/")}let g=Ml(t,{pathname:y});he(h||g!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),he(g==null||g[g.length-1].route.element!==void 0||g[g.length-1].route.Component!==void 0||g[g.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let m=Cd(g&&g.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:Te([u,s.encodeLocation?s.encodeLocation(_.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?u:Te([u,s.encodeLocation?s.encodeLocation(_.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathnameBase])})),o,n,i,r);return e&&m?D(an.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},m):m}function Ed(){let t=Dd(),e=gd(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=D(J,null,D("p",null,"ðŸ’¿ Hey developer ðŸ‘‹"),D("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",D("code",{style:s},"ErrorBoundary")," or"," ",D("code",{style:s},"errorElement")," prop on your route.")),D(J,null,D("h2",null,"Unexpected Application Error!"),D("h3",{style:{fontStyle:"italic"}},e),n?D("pre",{style:r},n):null,o)}var xd=D(Ed,null),Ad=class extends se{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?D(Re.Provider,{value:this.props.routeContext},D(Or.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Pd({routeContext:t,match:e,children:n}){let i=I(At);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),D(Re.Provider,{value:t},n)}function Cd(t,e=[],n=null,i=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,o=n?.errors;if(o!=null){let c=s.findIndex(u=>u.route.id&&o?.[u.route.id]!==void 0);U(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,c+1))}let a=!1,l=-1;if(n)for(let c=0;c<s.length;c++){let u=s[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:h,errors:d}=n,f=u.route.loader&&!h.hasOwnProperty(u.route.id)&&(!d||d[u.route.id]===void 0);if(u.route.lazy||f){a=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((c,u,h)=>{let d,f=!1,p=null,y=null;n&&(d=o&&u.route.id?o[u.route.id]:void 0,p=u.route.errorElement||xd,a&&(l<0&&h===0?($l("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,y=null):l===h&&(f=!0,y=u.route.hydrateFallbackElement||null)));let g=e.concat(s.slice(0,h+1)),m=()=>{let _;return d?_=p:f?_=y:u.route.Component?_=D(u.route.Component,null):u.route.element?_=u.route.element:_=c,D(Pd,{match:u,routeContext:{outlet:c,matches:g,isDataRoute:n!=null},children:_})};return n&&(u.route.ErrorBoundary||u.route.errorElement||h===0)?D(Ad,{location:n.location,revalidation:n.revalidation,component:p,error:d,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0},unstable_onError:i}):m()},null)}function Nr(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Id(t){let e=I(At);return U(e,Nr(t)),e}function Rd(t){let e=I(ni);return U(e,Nr(t)),e}function Md(t){let e=I(Re);return U(e,Nr(t)),e}function Vr(t){let e=Md(t),n=e.matches[e.matches.length-1];return U(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function kd(){return Vr("useRouteId")}function Dd(){let t=I(Or),e=Rd("useRouteError"),n=Vr("useRouteError");return t!==void 0?t:e.errors?.[n]}function Ld(){let{router:t}=Id("useNavigate"),e=Vr("useNavigate"),n=oe(!1);return Ul(()=>{n.current=!0}),ze(async(r,s={})=>{he(n.current,Fl),n.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...s}))},[t,e])}var eo={};function $l(t,e,n){!e&&!eo[t]&&(eo[t]=!0,he(!1,n))}Mh(Od);function Od({routes:t,future:e,state:n,unstable_onError:i}){return Bl(t,void 0,n,i,e)}function Nd(t){U(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Vd({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:r,static:s=!1}){U(!ln(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),a=X(()=>({basename:o,navigator:r,static:s,future:{}}),[o,r,s]);typeof n=="string"&&(n=at(n));let{pathname:l="/",search:c="",hash:u="",state:h=null,key:d="default"}=n,f=X(()=>{let p=Se(l,o);return p==null?null:{location:{pathname:p,search:c,hash:u,state:h,key:d},navigationType:i}},[o,l,c,u,h,d,i]);return he(f!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),f==null?null:D(_e.Provider,{value:a},D(an.Provider,{children:e,value:f}))}function ab({children:t,location:e}){return Sd(Yi(t),e)}function Yi(t,e=[]){let n=[];return Al.forEach(t,(i,r)=>{if(!Lr(i))return;let s=[...e,r];if(i.type===J){n.push.apply(n,Yi(i.props.children,s));return}U(i.type===Nd,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),U(!i.props.index||!i.props.children,"An index route cannot have child routes.");let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=Yi(i.props.children,s)),n.push(o)}),n}var In="get",Rn="application/x-www-form-urlencoded";function ii(t){return t!=null&&typeof t.tagName=="string"}function Fd(t){return ii(t)&&t.tagName.toLowerCase()==="button"}function Ud(t){return ii(t)&&t.tagName.toLowerCase()==="form"}function Bd(t){return ii(t)&&t.tagName.toLowerCase()==="input"}function $d(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function jd(t,e){return t.button===0&&(!e||e==="_self")&&!$d(t)}var Tn=null;function Hd(){if(Tn===null)try{new FormData(document.createElement("form"),0),Tn=!1}catch{Tn=!0}return Tn}var Wd=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function gi(t){return t!=null&&!Wd.has(t)?(he(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Rn}"`),null):t}function zd(t,e){let n,i,r,s,o;if(Ud(t)){let a=t.getAttribute("action");i=a?Se(a,e):null,n=t.getAttribute("method")||In,r=gi(t.getAttribute("enctype"))||Rn,s=new FormData(t)}else if(Fd(t)||Bd(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(i=l?Se(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||In,r=gi(t.getAttribute("formenctype"))||gi(a.getAttribute("enctype"))||Rn,s=new FormData(a,t),!Hd()){let{name:c,type:u,value:h}=t;if(u==="image"){let d=c?`${c}.`:"";s.append(`${d}x`,"0"),s.append(`${d}y`,"0")}else c&&s.append(c,h)}}else{if(ii(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=In,i=null,r=Rn,o=t}return s&&r==="text/plain"&&(o=s,s=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Fr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Gd(t,e,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&Se(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function Kd(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function qd(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Xd(t,e,n){let i=await Promise.all(t.map(async r=>{let s=e.routes[r.route.id];if(s){let o=await Kd(s,n);return o.links?o.links():[]}return[]}));return Qd(i.flat(1).filter(qd).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function to(t,e,n,i,r,s){let o=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,a=(l,c)=>n[c].pathname!==l.pathname||n[c].route.path?.endsWith("*")&&n[c].params["*"]!==l.params["*"];return s==="assets"?e.filter((l,c)=>o(l,c)||a(l,c)):s==="data"?e.filter((l,c)=>{let u=i.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function Yd(t,e,{includeHydrateFallback:n}={}){return Jd(t.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function Jd(t){return[...new Set(t)]}function Zd(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function Qd(t,e){let n=new Set;return new Set(e),t.reduce((i,r)=>{let s=JSON.stringify(Zd(r));return n.has(s)||(n.add(s),i.push({key:s,link:r})),i},[])}function jl(){let t=I(At);return Fr(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function ef(){let t=I(ni);return Fr(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Ur=G(void 0);Ur.displayName="FrameworkContext";function Hl(){let t=I(Ur);return Fr(t,"You must render this element inside a <HydratedRouter> element"),t}function tf(t,e){let n=I(Ur),[i,r]=st(!1),[s,o]=st(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:h}=e,d=oe(null);je(()=>{if(t==="render"&&o(!0),t==="viewport"){let y=m=>{m.forEach(_=>{o(_.isIntersecting)})},g=new IntersectionObserver(y,{threshold:.5});return d.current&&g.observe(d.current),()=>{g.disconnect()}}},[t]),je(()=>{if(i){let y=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(y)}}},[i]);let f=()=>{r(!0)},p=()=>{r(!1),o(!1)};return n?t!=="intent"?[s,d,{}]:[s,d,{onFocus:kt(a,f),onBlur:kt(l,p),onMouseEnter:kt(c,f),onMouseLeave:kt(u,p),onTouchStart:kt(h,f)}]:[!1,d,{}]}function kt(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function nf({page:t,...e}){let{router:n}=jl(),i=X(()=>Ml(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?D(sf,{page:t,matches:i,...e}):null}function rf(t){let{manifest:e,routeModules:n}=Hl(),[i,r]=st([]);return je(()=>{let s=!1;return Xd(t,e,n).then(o=>{s||r(o)}),()=>{s=!0}},[t,e,n]),i}function sf({page:t,matches:e,...n}){let i=lt(),{manifest:r,routeModules:s}=Hl(),{basename:o}=jl(),{loaderData:a,matches:l}=ef(),c=X(()=>to(t,e,l,r,i,"data"),[t,e,l,r,i]),u=X(()=>to(t,e,l,r,i,"assets"),[t,e,l,r,i]),h=X(()=>{if(t===i.pathname+i.search+i.hash)return[];let p=new Set,y=!1;if(e.forEach(m=>{let _=r.routes[m.route.id];!_||!_.hasLoader||(!c.some(v=>v.route.id===m.route.id)&&m.route.id in a&&s[m.route.id]?.shouldRevalidate||_.hasClientLoader?y=!0:p.add(m.route.id))}),p.size===0)return[];let g=Gd(t,o,"data");return y&&p.size>0&&g.searchParams.set("_routes",e.filter(m=>p.has(m.route.id)).map(m=>m.route.id).join(",")),[g.pathname+g.search]},[o,a,i,r,c,e,t,s]),d=X(()=>Yd(u,r),[u,r]),f=rf(u);return D(J,null,h.map(p=>D("link",{key:p,rel:"prefetch",as:"fetch",href:p,...n})),d.map(p=>D("link",{key:p,rel:"modulepreload",href:p,...n})),f.map(({key:p,link:y})=>D("link",{key:p,nonce:n.nonce,...y})))}function of(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Wl=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Wl&&(window.__reactRouterVersion="7.9.4")}catch{}function lb({basename:t,children:e,window:n}){let i=oe();i.current==null&&(i.current=Kh({window:n,v5Compat:!0}));let r=i.current,[s,o]=st({action:r.action,location:r.location}),a=ze(l=>{Rh(()=>o(l))},[o]);return ei(()=>r.listen(a),[r,a]),D(Vd,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:r})}var zl=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Gl=ti(function({onClick:e,discover:n="render",prefetch:i="none",relative:r,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:h,...d},f){let{basename:p}=I(_e),y=typeof c=="string"&&zl.test(c),g,m=!1;if(typeof c=="string"&&y&&(g=c,Wl))try{let x=new URL(window.location.href),C=c.startsWith("//")?new URL(x.protocol+c):new URL(c),k=Se(C.pathname,p);C.origin===x.origin&&k!=null?c=k+C.search+C.hash:m=!0}catch{he(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let _=wd(c,{relative:r}),[v,b,w]=tf(i,d),T=uf(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:r,viewTransition:h});function E(x){e&&e(x),x.defaultPrevented||T(x)}let S=D("a",{...d,...w,href:g||_,onClick:m||s?e:E,ref:of(f,b),target:l,"data-discover":!y&&n==="render"?"true":void 0});return v&&!y?D(J,null,S,D(nf,{page:_})):S});Gl.displayName="Link";var af=ti(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:r=!1,style:s,to:o,viewTransition:a,children:l,...c},u){let h=cn(o,{relative:c.relative}),d=lt(),f=I(ni),{navigator:p,basename:y}=I(_e),g=f!=null&&mf(h)&&a===!0,m=p.encodeLocation?p.encodeLocation(h).pathname:h.pathname,_=d.pathname,v=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;n||(_=_.toLowerCase(),v=v?v.toLowerCase():null,m=m.toLowerCase()),v&&y&&(v=Se(v,y)||v);const b=m!=="/"&&m.endsWith("/")?m.length-1:m.length;let w=_===m||!r&&_.startsWith(m)&&_.charAt(b)==="/",T=v!=null&&(v===m||!r&&v.startsWith(m)&&v.charAt(m.length)==="/"),E={isActive:w,isPending:T,isTransitioning:g},S=w?e:void 0,x;typeof i=="function"?x=i(E):x=[i,w?"active":null,T?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let C=typeof s=="function"?s(E):s;return D(Gl,{...c,"aria-current":S,className:x,ref:u,style:C,to:o,viewTransition:a},typeof l=="function"?l(E):l)});af.displayName="NavLink";var lf=ti(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:r,state:s,method:o=In,action:a,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:h,...d},f)=>{let p=ff(),y=pf(a,{relative:c}),g=o.toLowerCase()==="get"?"get":"post",m=typeof a=="string"&&zl.test(a);return D("form",{ref:f,method:g,action:y,onSubmit:i?l:v=>{if(l&&l(v),v.defaultPrevented)return;v.preventDefault();let b=v.nativeEvent.submitter,w=b?.getAttribute("formmethod")||o;p(b||v.currentTarget,{fetcherKey:e,method:w,navigate:n,replace:r,state:s,relative:c,preventScrollReset:u,viewTransition:h})},...d,"data-discover":!m&&t==="render"?"true":void 0})});lf.displayName="Form";function cf(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Kl(t){let e=I(At);return U(e,cf(t)),e}function uf(t,{target:e,replace:n,state:i,preventScrollReset:r,relative:s,viewTransition:o}={}){let a=bd(),l=lt(),c=cn(t,{relative:s});return ze(u=>{if(jd(u,e)){u.preventDefault();let h=n!==void 0?n:qt(l)===qt(c);a(t,{replace:h,state:i,preventScrollReset:r,relative:s,viewTransition:o})}},[l,a,c,n,i,e,t,r,s,o])}var hf=0,df=()=>`__${String(++hf)}__`;function ff(){let{router:t}=Kl("useSubmit"),{basename:e}=I(_e),n=kd();return ze(async(i,r={})=>{let{action:s,method:o,encType:a,formData:l,body:c}=zd(i,e);if(r.navigate===!1){let u=r.fetcherKey||df();await t.fetch(u,n,r.action||s,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||o,formEncType:r.encType||a,flushSync:r.flushSync})}else await t.navigate(r.action||s,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||o,formEncType:r.encType||a,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,n])}function pf(t,{relative:e}={}){let{basename:n}=I(_e),i=I(Re);U(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),s={...cn(t||".",{relative:e})},o=lt();if(t==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(u=>u==="")){a.delete("index"),l.filter(h=>h).forEach(h=>a.append("index",h));let u=a.toString();s.search=u?`?${u}`:""}}return(!t||t===".")&&r.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Te([n,s.pathname])),qt(s)}function mf(t,{relative:e}={}){let n=I(Vl);U(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Kl("useViewTransitionState"),r=cn(t,{relative:e});if(!n.isTransitioning)return!1;let s=Se(n.currentLocation.pathname,i)||n.currentLocation.pathname,o=Se(n.nextLocation.pathname,i)||n.nextLocation.pathname;return $n(r.pathname,o)!=null||$n(r.pathname,s)!=null}function Nt(t){let e=t[0],n=t[1],i=t[2];return Math.sqrt(e*e+n*n+i*i)}function Ji(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function gf(t,e,n,i){return t[0]=e,t[1]=n,t[2]=i,t}function no(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function io(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function yf(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function _f(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function yi(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function vf(t,e){let n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return Math.sqrt(n*n+i*i+r*r)}function wf(t,e){let n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return n*n+i*i+r*r}function ro(t){let e=t[0],n=t[1],i=t[2];return e*e+n*n+i*i}function bf(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function Tf(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function Zi(t,e){let n=e[0],i=e[1],r=e[2],s=n*n+i*i+r*r;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function ql(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function so(t,e,n){let i=e[0],r=e[1],s=e[2],o=n[0],a=n[1],l=n[2];return t[0]=r*l-s*a,t[1]=s*o-i*l,t[2]=i*a-r*o,t}function Sf(t,e,n,i){let r=e[0],s=e[1],o=e[2];return t[0]=r+i*(n[0]-r),t[1]=s+i*(n[1]-s),t[2]=o+i*(n[2]-o),t}function Ef(t,e,n,i,r){const s=Math.exp(-i*r);let o=e[0],a=e[1],l=e[2];return t[0]=n[0]+(o-n[0])*s,t[1]=n[1]+(a-n[1])*s,t[2]=n[2]+(l-n[2])*s,t}function xf(t,e,n){let i=e[0],r=e[1],s=e[2],o=n[3]*i+n[7]*r+n[11]*s+n[15];return o=o||1,t[0]=(n[0]*i+n[4]*r+n[8]*s+n[12])/o,t[1]=(n[1]*i+n[5]*r+n[9]*s+n[13])/o,t[2]=(n[2]*i+n[6]*r+n[10]*s+n[14])/o,t}function Af(t,e,n){let i=e[0],r=e[1],s=e[2],o=n[3]*i+n[7]*r+n[11]*s+n[15];return o=o||1,t[0]=(n[0]*i+n[4]*r+n[8]*s)/o,t[1]=(n[1]*i+n[5]*r+n[9]*s)/o,t[2]=(n[2]*i+n[6]*r+n[10]*s)/o,t}function Pf(t,e,n){let i=e[0],r=e[1],s=e[2];return t[0]=i*n[0]+r*n[3]+s*n[6],t[1]=i*n[1]+r*n[4]+s*n[7],t[2]=i*n[2]+r*n[5]+s*n[8],t}function Cf(t,e,n){let i=e[0],r=e[1],s=e[2],o=n[0],a=n[1],l=n[2],c=n[3],u=a*s-l*r,h=l*i-o*s,d=o*r-a*i,f=a*d-l*h,p=l*u-o*d,y=o*h-a*u,g=c*2;return u*=g,h*=g,d*=g,f*=2,p*=2,y*=2,t[0]=i+u+f,t[1]=r+h+p,t[2]=s+d+y,t}const If=(function(){const t=[0,0,0],e=[0,0,0];return function(n,i){Ji(t,n),Ji(e,i),Zi(t,t),Zi(e,e);let r=ql(t,e);return r>1?0:r<-1?Math.PI:Math.acos(r)}})();function Rf(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}class W extends Array{constructor(e=0,n=e,i=e){return super(e,n,i),this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this[0]=e}set y(e){this[1]=e}set z(e){this[2]=e}set(e,n=e,i=e){return e.length?this.copy(e):(gf(this,e,n,i),this)}copy(e){return Ji(this,e),this}add(e,n){return n?no(this,e,n):no(this,this,e),this}sub(e,n){return n?io(this,e,n):io(this,this,e),this}multiply(e){return e.length?yf(this,this,e):yi(this,this,e),this}divide(e){return e.length?_f(this,this,e):yi(this,this,1/e),this}inverse(e=this){return Tf(this,e),this}len(){return Nt(this)}distance(e){return e?vf(this,e):Nt(this)}squaredLen(){return ro(this)}squaredDistance(e){return e?wf(this,e):ro(this)}negate(e=this){return bf(this,e),this}cross(e,n){return n?so(this,e,n):so(this,this,e),this}scale(e){return yi(this,this,e),this}normalize(){return Zi(this,this),this}dot(e){return ql(this,e)}equals(e){return Rf(this,e)}applyMatrix3(e){return Pf(this,this,e),this}applyMatrix4(e){return xf(this,this,e),this}scaleRotateMatrix4(e){return Af(this,this,e),this}applyQuaternion(e){return Cf(this,this,e),this}angle(e){return If(this,e)}lerp(e,n){return Sf(this,this,e,n),this}smoothLerp(e,n,i){return Ef(this,this,e,n,i),this}clone(){return new W(this[0],this[1],this[2])}fromArray(e,n=0){return this[0]=e[n],this[1]=e[n+1],this[2]=e[n+2],this}toArray(e=[],n=0){return e[n]=this[0],e[n+1]=this[1],e[n+2]=this[2],e}transformDirection(e){const n=this[0],i=this[1],r=this[2];return this[0]=e[0]*n+e[4]*i+e[8]*r,this[1]=e[1]*n+e[5]*i+e[9]*r,this[2]=e[2]*n+e[6]*i+e[10]*r,this.normalize()}}const oo=new W;let Mf=1,kf=1,ao=!1;class Df{constructor(e,n={}){e.canvas||console.error("gl not passed as first argument to Geometry"),this.gl=e,this.attributes=n,this.id=Mf++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state;for(let i in n)this.addAttribute(i,n[i])}addAttribute(e,n){if(this.attributes[e]=n,n.id=kf++,n.size=n.size||1,n.type=n.type||(n.data.constructor===Float32Array?this.gl.FLOAT:n.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),n.target=e==="index"?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,n.normalized=n.normalized||!1,n.stride=n.stride||0,n.offset=n.offset||0,n.count=n.count||(n.stride?n.data.byteLength/n.stride:n.data.length/n.size),n.divisor=n.instanced||0,n.needsUpdate=!1,n.usage=n.usage||this.gl.STATIC_DRAW,n.buffer||this.updateAttribute(n),n.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==n.count*n.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,n.count*n.divisor);this.instancedCount=n.count*n.divisor}else e==="index"?this.drawRange.count=n.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,n.count))}updateAttribute(e){const n=!e.buffer;n&&(e.buffer=this.gl.createBuffer()),this.glState.boundBuffer!==e.buffer&&(this.gl.bindBuffer(e.target,e.buffer),this.glState.boundBuffer=e.buffer),n?this.gl.bufferData(e.target,e.data,e.usage):this.gl.bufferSubData(e.target,0,e.data),e.needsUpdate=!1}setIndex(e){this.addAttribute("index",e)}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}setInstancedCount(e){this.instancedCount=e}createVAO(e){this.VAOs[e.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.bindAttributes(e)}bindAttributes(e){e.attributeLocations.forEach((n,{name:i,type:r})=>{if(!this.attributes[i]){console.warn(`active attribute ${i} not being supplied`);return}const s=this.attributes[i];this.gl.bindBuffer(s.target,s.buffer),this.glState.boundBuffer=s.buffer;let o=1;r===35674&&(o=2),r===35675&&(o=3),r===35676&&(o=4);const a=s.size/o,l=o===1?0:o*o*4,c=o===1?0:o*4;for(let u=0;u<o;u++)this.gl.vertexAttribPointer(n+u,a,s.type,s.normalized,s.stride+l,s.offset+u*c),this.gl.enableVertexAttribArray(n+u),this.gl.renderer.vertexAttribDivisor(n+u,s.divisor)}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw({program:e,mode:n=this.gl.TRIANGLES}){this.gl.renderer.currentGeometry!==`${this.id}_${e.attributeOrder}`&&(this.VAOs[e.attributeOrder]||this.createVAO(e),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.gl.renderer.currentGeometry=`${this.id}_${e.attributeOrder}`),e.attributeLocations.forEach((r,{name:s})=>{const o=this.attributes[s];o.needsUpdate&&this.updateAttribute(o)});let i=2;this.attributes.index?.type===this.gl.UNSIGNED_INT&&(i=4),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(n,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*i,this.instancedCount):this.gl.renderer.drawArraysInstanced(n,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(n,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*i):this.gl.drawArrays(n,this.drawRange.start,this.drawRange.count)}getPosition(){const e=this.attributes.position;if(e.data)return e;if(!ao)return console.warn("No position buffer data found to compute bounds"),ao=!0}computeBoundingBox(e){e||(e=this.getPosition());const n=e.data,i=e.size;this.bounds||(this.bounds={min:new W,max:new W,center:new W,scale:new W,radius:1/0});const r=this.bounds.min,s=this.bounds.max,o=this.bounds.center,a=this.bounds.scale;r.set(1/0),s.set(-1/0);for(let l=0,c=n.length;l<c;l+=i){const u=n[l],h=n[l+1],d=n[l+2];r.x=Math.min(u,r.x),r.y=Math.min(h,r.y),r.z=Math.min(d,r.z),s.x=Math.max(u,s.x),s.y=Math.max(h,s.y),s.z=Math.max(d,s.z)}a.sub(s,r),o.add(r,s).divide(2)}computeBoundingSphere(e){e||(e=this.getPosition());const n=e.data,i=e.size;this.bounds||this.computeBoundingBox(e);let r=0;for(let s=0,o=n.length;s<o;s+=i)oo.fromArray(n,s),r=Math.max(r,this.bounds.center.squaredDistance(oo));this.bounds.radius=Math.sqrt(r)}remove(){for(let e in this.VAOs)this.gl.renderer.deleteVertexArray(this.VAOs[e]),delete this.VAOs[e];for(let e in this.attributes)this.gl.deleteBuffer(this.attributes[e].buffer),delete this.attributes[e]}}let Lf=1;const lo={};class cb{constructor(e,{vertex:n,fragment:i,uniforms:r={},transparent:s=!1,cullFace:o=e.BACK,frontFace:a=e.CCW,depthTest:l=!0,depthWrite:c=!0,depthFunc:u=e.LEQUAL}={}){e.canvas||console.error("gl not passed as first argument to Program"),this.gl=e,this.uniforms=r,this.id=Lf++,n||console.warn("vertex shader not supplied"),i||console.warn("fragment shader not supplied"),this.transparent=s,this.cullFace=o,this.frontFace=a,this.depthTest=l,this.depthWrite=c,this.depthFunc=u,this.blendFunc={},this.blendEquation={},this.stencilFunc={},this.stencilOp={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)),this.vertexShader=e.createShader(e.VERTEX_SHADER),this.fragmentShader=e.createShader(e.FRAGMENT_SHADER),this.program=e.createProgram(),e.attachShader(this.program,this.vertexShader),e.attachShader(this.program,this.fragmentShader),this.setShaders({vertex:n,fragment:i})}setShaders({vertex:e,fragment:n}){if(e&&(this.gl.shaderSource(this.vertexShader,e),this.gl.compileShader(this.vertexShader),this.gl.getShaderInfoLog(this.vertexShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.vertexShader)}
Vertex Shader
${co(e)}`)),n&&(this.gl.shaderSource(this.fragmentShader,n),this.gl.compileShader(this.fragmentShader),this.gl.getShaderInfoLog(this.fragmentShader)!==""&&console.warn(`${this.gl.getShaderInfoLog(this.fragmentShader)}
Fragment Shader
${co(n)}`)),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))return console.warn(this.gl.getProgramInfoLog(this.program));this.uniformLocations=new Map;let i=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS);for(let o=0;o<i;o++){let a=this.gl.getActiveUniform(this.program,o);this.uniformLocations.set(a,this.gl.getUniformLocation(this.program,a.name));const l=a.name.match(/(\w+)/g);a.uniformName=l[0],a.nameComponents=l.slice(1)}this.attributeLocations=new Map;const r=[],s=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES);for(let o=0;o<s;o++){const a=this.gl.getActiveAttrib(this.program,o),l=this.gl.getAttribLocation(this.program,a.name);l!==-1&&(r[l]=a.name,this.attributeLocations.set(a,l))}this.attributeOrder=r.join("")}setBlendFunc(e,n,i,r){this.blendFunc.src=e,this.blendFunc.dst=n,this.blendFunc.srcAlpha=i,this.blendFunc.dstAlpha=r,e&&(this.transparent=!0)}setBlendEquation(e,n){this.blendEquation.modeRGB=e,this.blendEquation.modeAlpha=n}setStencilFunc(e,n,i){this.stencilRef=n,this.stencilFunc.func=e,this.stencilFunc.ref=n,this.stencilFunc.mask=i}setStencilOp(e,n,i){this.stencilOp.stencilFail=e,this.stencilOp.depthFail=n,this.stencilOp.depthPass=i}applyState(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha),this.stencilFunc.func||this.stencilOp.stencilFail?this.gl.renderer.enable(this.gl.STENCIL_TEST):this.gl.renderer.disable(this.gl.STENCIL_TEST),this.gl.renderer.setStencilFunc(this.stencilFunc.func,this.stencilFunc.ref,this.stencilFunc.mask),this.gl.renderer.setStencilOp(this.stencilOp.stencilFail,this.stencilOp.depthFail,this.stencilOp.depthPass)}use({flipFaces:e=!1}={}){let n=-1;this.gl.renderer.state.currentProgram===this.id||(this.gl.useProgram(this.program),this.gl.renderer.state.currentProgram=this.id),this.uniformLocations.forEach((r,s)=>{let o=this.uniforms[s.uniformName];for(const a of s.nameComponents){if(!o)break;if(a in o)o=o[a];else{if(Array.isArray(o.value))break;o=void 0;break}}if(!o)return uo(`Active uniform ${s.name} has not been supplied`);if(o&&o.value===void 0)return uo(`${s.name} uniform is missing a value parameter`);if(o.value.texture)return n=n+1,o.value.update(n),_i(this.gl,s.type,r,n);if(o.value.length&&o.value[0].texture){const a=[];return o.value.forEach(l=>{n=n+1,l.update(n),a.push(n)}),_i(this.gl,s.type,r,a)}_i(this.gl,s.type,r,o.value)}),this.applyState(),e&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}remove(){this.gl.deleteProgram(this.program)}}function _i(t,e,n,i){i=i.length?Of(i):i;const r=t.renderer.state.uniformLocations.get(n);if(i.length)if(r===void 0||r.length!==i.length)t.renderer.state.uniformLocations.set(n,i.slice(0));else{if(Nf(r,i))return;r.set?r.set(i):Vf(r,i),t.renderer.state.uniformLocations.set(n,r)}else{if(r===i)return;t.renderer.state.uniformLocations.set(n,i)}switch(e){case 5126:return i.length?t.uniform1fv(n,i):t.uniform1f(n,i);case 35664:return t.uniform2fv(n,i);case 35665:return t.uniform3fv(n,i);case 35666:return t.uniform4fv(n,i);case 35670:case 5124:case 35678:case 36306:case 35680:case 36289:return i.length?t.uniform1iv(n,i):t.uniform1i(n,i);case 35671:case 35667:return t.uniform2iv(n,i);case 35672:case 35668:return t.uniform3iv(n,i);case 35673:case 35669:return t.uniform4iv(n,i);case 35674:return t.uniformMatrix2fv(n,!1,i);case 35675:return t.uniformMatrix3fv(n,!1,i);case 35676:return t.uniformMatrix4fv(n,!1,i)}}function co(t){let e=t.split(`
`);for(let n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join(`
`)}function Of(t){const e=t.length,n=t[0].length;if(n===void 0)return t;const i=e*n;let r=lo[i];r||(lo[i]=r=new Float32Array(i));for(let s=0;s<e;s++)r.set(t[s],s*n);return r}function Nf(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Vf(t,e){for(let n=0,i=t.length;n<i;n++)t[n]=e[n]}let vi=0;function uo(t){vi>100||(console.warn(t),vi++,vi>100&&console.warn("More than 100 program warnings - stopping logs."))}const wi=new W;let Ff=1;class ub{constructor({canvas:e=document.createElement("canvas"),width:n=300,height:i=150,dpr:r=1,alpha:s=!1,depth:o=!0,stencil:a=!1,antialias:l=!1,premultipliedAlpha:c=!1,preserveDrawingBuffer:u=!1,powerPreference:h="default",autoClear:d=!0,webgl:f=2}={}){const p={alpha:s,depth:o,stencil:a,antialias:l,premultipliedAlpha:c,preserveDrawingBuffer:u,powerPreference:h};this.dpr=r,this.alpha=s,this.color=!0,this.depth=o,this.stencil=a,this.premultipliedAlpha=c,this.autoClear=d,this.id=Ff++,f===2&&(this.gl=e.getContext("webgl2",p)),this.isWebgl2=!!this.gl,this.gl||(this.gl=e.getContext("webgl",p)),this.gl||console.error("unable to create webgl context"),this.gl.renderer=this,this.setSize(n,i),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=!1,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LEQUAL,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={x:0,y:0,width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.state.currentProgram=null,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.getExtension("WEBGL_compressed_texture_astc"),this.getExtension("EXT_texture_compression_bptc"),this.getExtension("WEBGL_compressed_texture_s3tc"),this.getExtension("WEBGL_compressed_texture_etc1"),this.getExtension("WEBGL_compressed_texture_pvrtc"),this.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}setSize(e,n){this.width=e,this.height=n,this.gl.canvas.width=e*this.dpr,this.gl.canvas.height=n*this.dpr,this.gl.canvas.style&&Object.assign(this.gl.canvas.style,{width:e+"px",height:n+"px"})}setViewport(e,n,i=0,r=0){this.state.viewport.width===e&&this.state.viewport.height===n||(this.state.viewport.width=e,this.state.viewport.height=n,this.state.viewport.x=i,this.state.viewport.y=r,this.gl.viewport(i,r,e,n))}setScissor(e,n,i=0,r=0){this.gl.scissor(i,r,e,n)}enable(e){this.state[e]!==!0&&(this.gl.enable(e),this.state[e]=!0)}disable(e){this.state[e]!==!1&&(this.gl.disable(e),this.state[e]=!1)}setBlendFunc(e,n,i,r){this.state.blendFunc.src===e&&this.state.blendFunc.dst===n&&this.state.blendFunc.srcAlpha===i&&this.state.blendFunc.dstAlpha===r||(this.state.blendFunc.src=e,this.state.blendFunc.dst=n,this.state.blendFunc.srcAlpha=i,this.state.blendFunc.dstAlpha=r,i!==void 0?this.gl.blendFuncSeparate(e,n,i,r):this.gl.blendFunc(e,n))}setBlendEquation(e,n){e=e||this.gl.FUNC_ADD,!(this.state.blendEquation.modeRGB===e&&this.state.blendEquation.modeAlpha===n)&&(this.state.blendEquation.modeRGB=e,this.state.blendEquation.modeAlpha=n,n!==void 0?this.gl.blendEquationSeparate(e,n):this.gl.blendEquation(e))}setCullFace(e){this.state.cullFace!==e&&(this.state.cullFace=e,this.gl.cullFace(e))}setFrontFace(e){this.state.frontFace!==e&&(this.state.frontFace=e,this.gl.frontFace(e))}setDepthMask(e){this.state.depthMask!==e&&(this.state.depthMask=e,this.gl.depthMask(e))}setDepthFunc(e){this.state.depthFunc!==e&&(this.state.depthFunc=e,this.gl.depthFunc(e))}setStencilMask(e){this.state.stencilMask!==e&&(this.state.stencilMask=e,this.gl.stencilMask(e))}setStencilFunc(e,n,i){this.state.stencilFunc===e&&this.state.stencilRef===n&&this.state.stencilFuncMask===i||(this.state.stencilFunc=e||this.gl.ALWAYS,this.state.stencilRef=n||0,this.state.stencilFuncMask=i||0,this.gl.stencilFunc(e||this.gl.ALWAYS,n||0,i||0))}setStencilOp(e,n,i){this.state.stencilFail===e&&this.state.stencilDepthFail===n&&this.state.stencilDepthPass===i||(this.state.stencilFail=e,this.state.stencilDepthFail=n,this.state.stencilDepthPass=i,this.gl.stencilOp(e,n,i))}activeTexture(e){this.state.activeTextureUnit!==e&&(this.state.activeTextureUnit=e,this.gl.activeTexture(this.gl.TEXTURE0+e))}bindFramebuffer({target:e=this.gl.FRAMEBUFFER,buffer:n=null}={}){this.state.framebuffer!==n&&(this.state.framebuffer=n,this.gl.bindFramebuffer(e,n))}getExtension(e,n,i){return n&&this.gl[n]?this.gl[n].bind(this.gl):(this.extensions[e]||(this.extensions[e]=this.gl.getExtension(e)),n?this.extensions[e]?this.extensions[e][i].bind(this.extensions[e]):null:this.extensions[e])}sortOpaque(e,n){return e.renderOrder!==n.renderOrder?e.renderOrder-n.renderOrder:e.program.id!==n.program.id?e.program.id-n.program.id:e.zDepth!==n.zDepth?e.zDepth-n.zDepth:n.id-e.id}sortTransparent(e,n){return e.renderOrder!==n.renderOrder?e.renderOrder-n.renderOrder:e.zDepth!==n.zDepth?n.zDepth-e.zDepth:n.id-e.id}sortUI(e,n){return e.renderOrder!==n.renderOrder?e.renderOrder-n.renderOrder:e.program.id!==n.program.id?e.program.id-n.program.id:n.id-e.id}getRenderList({scene:e,camera:n,frustumCull:i,sort:r}){let s=[];if(n&&i&&n.updateFrustum(),e.traverse(o=>{if(!o.visible)return!0;o.draw&&(i&&o.frustumCulled&&n&&!n.frustumIntersectsMesh(o)||s.push(o))}),r){const o=[],a=[],l=[];s.forEach(c=>{c.program.transparent?c.program.depthTest?a.push(c):l.push(c):o.push(c),c.zDepth=0,!(c.renderOrder!==0||!c.program.depthTest||!n)&&(c.worldMatrix.getTranslation(wi),wi.applyMatrix4(n.projectionViewMatrix),c.zDepth=wi.z)}),o.sort(this.sortOpaque),a.sort(this.sortTransparent),l.sort(this.sortUI),s=o.concat(a,l)}return s}render({scene:e,camera:n,target:i=null,update:r=!0,sort:s=!0,frustumCull:o=!0,clear:a}){i===null?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(i),this.setViewport(i.width,i.height)),(a||this.autoClear&&a!==!1)&&(this.depth&&(!i||i.depth)&&(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),(this.stencil||!i||i.stencil)&&(this.enable(this.gl.STENCIL_TEST),this.setStencilMask(255)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),r&&e.updateMatrixWorld(),n&&n.updateMatrixWorld(),this.getRenderList({scene:e,camera:n,frustumCull:o,sort:s}).forEach(c=>{c.draw({camera:n})})}}function Uf(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Bf(t,e,n,i,r){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t}function $f(t,e){let n=e[0],i=e[1],r=e[2],s=e[3],o=n*n+i*i+r*r+s*s;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=i*o,t[2]=r*o,t[3]=s*o,t}function jf(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Hf(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Wf(t,e,n){n=n*.5;let i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t}function ho(t,e,n){let i=e[0],r=e[1],s=e[2],o=e[3],a=n[0],l=n[1],c=n[2],u=n[3];return t[0]=i*u+o*a+r*c-s*l,t[1]=r*u+o*l+s*a-i*c,t[2]=s*u+o*c+i*l-r*a,t[3]=o*u-i*a-r*l-s*c,t}function zf(t,e,n){n*=.5;let i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),l=Math.cos(n);return t[0]=i*l+o*a,t[1]=r*l+s*a,t[2]=s*l-r*a,t[3]=o*l-i*a,t}function Gf(t,e,n){n*=.5;let i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),l=Math.cos(n);return t[0]=i*l-s*a,t[1]=r*l+o*a,t[2]=s*l+i*a,t[3]=o*l-r*a,t}function Kf(t,e,n){n*=.5;let i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),l=Math.cos(n);return t[0]=i*l+r*a,t[1]=r*l-i*a,t[2]=s*l+o*a,t[3]=o*l-s*a,t}function qf(t,e,n,i){let r=e[0],s=e[1],o=e[2],a=e[3],l=n[0],c=n[1],u=n[2],h=n[3],d,f,p,y,g;return f=r*l+s*c+o*u+a*h,f<0&&(f=-f,l=-l,c=-c,u=-u,h=-h),1-f>1e-6?(d=Math.acos(f),p=Math.sin(d),y=Math.sin((1-i)*d)/p,g=Math.sin(i*d)/p):(y=1-i,g=i),t[0]=y*r+g*l,t[1]=y*s+g*c,t[2]=y*o+g*u,t[3]=y*a+g*h,t}function Xf(t,e){let n=e[0],i=e[1],r=e[2],s=e[3],o=n*n+i*i+r*r+s*s,a=o?1/o:0;return t[0]=-n*a,t[1]=-i*a,t[2]=-r*a,t[3]=s*a,t}function Yf(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Jf(t,e){let n=e[0]+e[4]+e[8],i;if(n>0)i=Math.sqrt(n+1),t[3]=.5*i,i=.5/i,t[0]=(e[5]-e[7])*i,t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{let r=0;e[4]>e[0]&&(r=1),e[8]>e[r*3+r]&&(r=2);let s=(r+1)%3,o=(r+2)%3;i=Math.sqrt(e[r*3+r]-e[s*3+s]-e[o*3+o]+1),t[r]=.5*i,i=.5/i,t[3]=(e[s*3+o]-e[o*3+s])*i,t[s]=(e[s*3+r]+e[r*3+s])*i,t[o]=(e[o*3+r]+e[r*3+o])*i}return t}function Zf(t,e,n="YXZ"){let i=Math.sin(e[0]*.5),r=Math.cos(e[0]*.5),s=Math.sin(e[1]*.5),o=Math.cos(e[1]*.5),a=Math.sin(e[2]*.5),l=Math.cos(e[2]*.5);return n==="XYZ"?(t[0]=i*o*l+r*s*a,t[1]=r*s*l-i*o*a,t[2]=r*o*a+i*s*l,t[3]=r*o*l-i*s*a):n==="YXZ"?(t[0]=i*o*l+r*s*a,t[1]=r*s*l-i*o*a,t[2]=r*o*a-i*s*l,t[3]=r*o*l+i*s*a):n==="ZXY"?(t[0]=i*o*l-r*s*a,t[1]=r*s*l+i*o*a,t[2]=r*o*a+i*s*l,t[3]=r*o*l-i*s*a):n==="ZYX"?(t[0]=i*o*l-r*s*a,t[1]=r*s*l+i*o*a,t[2]=r*o*a-i*s*l,t[3]=r*o*l+i*s*a):n==="YZX"?(t[0]=i*o*l+r*s*a,t[1]=r*s*l+i*o*a,t[2]=r*o*a-i*s*l,t[3]=r*o*l-i*s*a):n==="XZY"&&(t[0]=i*o*l-r*s*a,t[1]=r*s*l-i*o*a,t[2]=r*o*a+i*s*l,t[3]=r*o*l+i*s*a),t}const Qf=Uf,ep=Bf,tp=jf,np=$f;class ip extends Array{constructor(e=0,n=0,i=0,r=1){super(e,n,i,r),this.onChange=()=>{},this._target=this;const s=["0","1","2","3"];return new Proxy(this,{set(o,a){const l=Reflect.set(...arguments);return l&&s.includes(a)&&o.onChange(),l}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}get w(){return this[3]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set w(e){this._target[3]=e,this.onChange()}identity(){return Hf(this._target),this.onChange(),this}set(e,n,i,r){return e.length?this.copy(e):(ep(this._target,e,n,i,r),this.onChange(),this)}rotateX(e){return zf(this._target,this._target,e),this.onChange(),this}rotateY(e){return Gf(this._target,this._target,e),this.onChange(),this}rotateZ(e){return Kf(this._target,this._target,e),this.onChange(),this}inverse(e=this._target){return Xf(this._target,e),this.onChange(),this}conjugate(e=this._target){return Yf(this._target,e),this.onChange(),this}copy(e){return Qf(this._target,e),this.onChange(),this}normalize(e=this._target){return np(this._target,e),this.onChange(),this}multiply(e,n){return n?ho(this._target,e,n):ho(this._target,this._target,e),this.onChange(),this}dot(e){return tp(this._target,e)}fromMatrix3(e){return Jf(this._target,e),this.onChange(),this}fromEuler(e,n){return Zf(this._target,e,e.order),n||this.onChange(),this}fromAxisAngle(e,n){return Wf(this._target,e,n),this.onChange(),this}slerp(e,n){return qf(this._target,this._target,e,n),this.onChange(),this}fromArray(e,n=0){return this._target[0]=e[n],this._target[1]=e[n+1],this._target[2]=e[n+2],this._target[3]=e[n+3],this.onChange(),this}toArray(e=[],n=0){return e[n]=this[0],e[n+1]=this[1],e[n+2]=this[2],e[n+3]=this[3],e}}const rp=1e-6;function sp(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function op(t,e,n,i,r,s,o,a,l,c,u,h,d,f,p,y,g){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=s,t[5]=o,t[6]=a,t[7]=l,t[8]=c,t[9]=u,t[10]=h,t[11]=d,t[12]=f,t[13]=p,t[14]=y,t[15]=g,t}function ap(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function lp(t,e){let n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],f=e[11],p=e[12],y=e[13],g=e[14],m=e[15],_=n*a-i*o,v=n*l-r*o,b=n*c-s*o,w=i*l-r*a,T=i*c-s*a,E=r*c-s*l,S=u*y-h*p,x=u*g-d*p,C=u*m-f*p,k=h*g-d*y,L=h*m-f*y,z=d*m-f*g,R=_*z-v*L+b*k+w*C-T*x+E*S;return R?(R=1/R,t[0]=(a*z-l*L+c*k)*R,t[1]=(r*L-i*z-s*k)*R,t[2]=(y*E-g*T+m*w)*R,t[3]=(d*T-h*E-f*w)*R,t[4]=(l*C-o*z-c*x)*R,t[5]=(n*z-r*C+s*x)*R,t[6]=(g*b-p*E-m*v)*R,t[7]=(u*E-d*b+f*v)*R,t[8]=(o*L-a*C+c*S)*R,t[9]=(i*C-n*L-s*S)*R,t[10]=(p*T-y*b+m*_)*R,t[11]=(h*b-u*T-f*_)*R,t[12]=(a*x-o*k-l*S)*R,t[13]=(n*k-i*x+r*S)*R,t[14]=(y*v-p*w-g*_)*R,t[15]=(u*w-h*v+d*_)*R,t):null}function Xl(t){let e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],u=t[9],h=t[10],d=t[11],f=t[12],p=t[13],y=t[14],g=t[15],m=e*o-n*s,_=e*a-i*s,v=e*l-r*s,b=n*a-i*o,w=n*l-r*o,T=i*l-r*a,E=c*p-u*f,S=c*y-h*f,x=c*g-d*f,C=u*y-h*p,k=u*g-d*p,L=h*g-d*y;return m*L-_*k+v*C+b*x-w*S+T*E}function fo(t,e,n){let i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],f=e[10],p=e[11],y=e[12],g=e[13],m=e[14],_=e[15],v=n[0],b=n[1],w=n[2],T=n[3];return t[0]=v*i+b*a+w*h+T*y,t[1]=v*r+b*l+w*d+T*g,t[2]=v*s+b*c+w*f+T*m,t[3]=v*o+b*u+w*p+T*_,v=n[4],b=n[5],w=n[6],T=n[7],t[4]=v*i+b*a+w*h+T*y,t[5]=v*r+b*l+w*d+T*g,t[6]=v*s+b*c+w*f+T*m,t[7]=v*o+b*u+w*p+T*_,v=n[8],b=n[9],w=n[10],T=n[11],t[8]=v*i+b*a+w*h+T*y,t[9]=v*r+b*l+w*d+T*g,t[10]=v*s+b*c+w*f+T*m,t[11]=v*o+b*u+w*p+T*_,v=n[12],b=n[13],w=n[14],T=n[15],t[12]=v*i+b*a+w*h+T*y,t[13]=v*r+b*l+w*d+T*g,t[14]=v*s+b*c+w*f+T*m,t[15]=v*o+b*u+w*p+T*_,t}function cp(t,e,n){let i=n[0],r=n[1],s=n[2],o,a,l,c,u,h,d,f,p,y,g,m;return e===t?(t[12]=e[0]*i+e[4]*r+e[8]*s+e[12],t[13]=e[1]*i+e[5]*r+e[9]*s+e[13],t[14]=e[2]*i+e[6]*r+e[10]*s+e[14],t[15]=e[3]*i+e[7]*r+e[11]*s+e[15]):(o=e[0],a=e[1],l=e[2],c=e[3],u=e[4],h=e[5],d=e[6],f=e[7],p=e[8],y=e[9],g=e[10],m=e[11],t[0]=o,t[1]=a,t[2]=l,t[3]=c,t[4]=u,t[5]=h,t[6]=d,t[7]=f,t[8]=p,t[9]=y,t[10]=g,t[11]=m,t[12]=o*i+u*r+p*s+e[12],t[13]=a*i+h*r+y*s+e[13],t[14]=l*i+d*r+g*s+e[14],t[15]=c*i+f*r+m*s+e[15]),t}function up(t,e,n){let i=n[0],r=n[1],s=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function hp(t,e,n,i){let r=i[0],s=i[1],o=i[2],a=Math.hypot(r,s,o),l,c,u,h,d,f,p,y,g,m,_,v,b,w,T,E,S,x,C,k,L,z,R,Me;return Math.abs(a)<rp?null:(a=1/a,r*=a,s*=a,o*=a,l=Math.sin(n),c=Math.cos(n),u=1-c,h=e[0],d=e[1],f=e[2],p=e[3],y=e[4],g=e[5],m=e[6],_=e[7],v=e[8],b=e[9],w=e[10],T=e[11],E=r*r*u+c,S=s*r*u+o*l,x=o*r*u-s*l,C=r*s*u-o*l,k=s*s*u+c,L=o*s*u+r*l,z=r*o*u+s*l,R=s*o*u-r*l,Me=o*o*u+c,t[0]=h*E+y*S+v*x,t[1]=d*E+g*S+b*x,t[2]=f*E+m*S+w*x,t[3]=p*E+_*S+T*x,t[4]=h*C+y*k+v*L,t[5]=d*C+g*k+b*L,t[6]=f*C+m*k+w*L,t[7]=p*C+_*k+T*L,t[8]=h*z+y*R+v*Me,t[9]=d*z+g*R+b*Me,t[10]=f*z+m*R+w*Me,t[11]=p*z+_*R+T*Me,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function dp(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Yl(t,e){let n=e[0],i=e[1],r=e[2],s=e[4],o=e[5],a=e[6],l=e[8],c=e[9],u=e[10];return t[0]=Math.hypot(n,i,r),t[1]=Math.hypot(s,o,a),t[2]=Math.hypot(l,c,u),t}function fp(t){let e=t[0],n=t[1],i=t[2],r=t[4],s=t[5],o=t[6],a=t[8],l=t[9],c=t[10];const u=e*e+n*n+i*i,h=r*r+s*s+o*o,d=a*a+l*l+c*c;return Math.sqrt(Math.max(u,h,d))}const Jl=(function(){const t=[1,1,1];return function(e,n){let i=t;Yl(i,n);let r=1/i[0],s=1/i[1],o=1/i[2],a=n[0]*r,l=n[1]*s,c=n[2]*o,u=n[4]*r,h=n[5]*s,d=n[6]*o,f=n[8]*r,p=n[9]*s,y=n[10]*o,g=a+h+y,m=0;return g>0?(m=Math.sqrt(g+1)*2,e[3]=.25*m,e[0]=(d-p)/m,e[1]=(f-c)/m,e[2]=(l-u)/m):a>h&&a>y?(m=Math.sqrt(1+a-h-y)*2,e[3]=(d-p)/m,e[0]=.25*m,e[1]=(l+u)/m,e[2]=(f+c)/m):h>y?(m=Math.sqrt(1+h-a-y)*2,e[3]=(f-c)/m,e[0]=(l+u)/m,e[1]=.25*m,e[2]=(d+p)/m):(m=Math.sqrt(1+y-a-h)*2,e[3]=(l-u)/m,e[0]=(f+c)/m,e[1]=(d+p)/m,e[2]=.25*m),e}})();function pp(t,e,n,i){let r=Nt([t[0],t[1],t[2]]);const s=Nt([t[4],t[5],t[6]]),o=Nt([t[8],t[9],t[10]]);Xl(t)<0&&(r=-r),n[0]=t[12],n[1]=t[13],n[2]=t[14];const l=t.slice(),c=1/r,u=1/s,h=1/o;l[0]*=c,l[1]*=c,l[2]*=c,l[4]*=u,l[5]*=u,l[6]*=u,l[8]*=h,l[9]*=h,l[10]*=h,Jl(e,l),i[0]=r,i[1]=s,i[2]=o}function mp(t,e,n,i){const r=t,s=e[0],o=e[1],a=e[2],l=e[3],c=s+s,u=o+o,h=a+a,d=s*c,f=s*u,p=s*h,y=o*u,g=o*h,m=a*h,_=l*c,v=l*u,b=l*h,w=i[0],T=i[1],E=i[2];return r[0]=(1-(y+m))*w,r[1]=(f+b)*w,r[2]=(p-v)*w,r[3]=0,r[4]=(f-b)*T,r[5]=(1-(d+m))*T,r[6]=(g+_)*T,r[7]=0,r[8]=(p+v)*E,r[9]=(g-_)*E,r[10]=(1-(d+y))*E,r[11]=0,r[12]=n[0],r[13]=n[1],r[14]=n[2],r[15]=1,r}function gp(t,e){let n=e[0],i=e[1],r=e[2],s=e[3],o=n+n,a=i+i,l=r+r,c=n*o,u=i*o,h=i*a,d=r*o,f=r*a,p=r*l,y=s*o,g=s*a,m=s*l;return t[0]=1-h-p,t[1]=u+m,t[2]=d-g,t[3]=0,t[4]=u-m,t[5]=1-c-p,t[6]=f+y,t[7]=0,t[8]=d+g,t[9]=f-y,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function yp(t,e,n,i,r){let s=1/Math.tan(e/2),o=1/(i-r);return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(r+i)*o,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*r*i*o,t[15]=0,t}function _p(t,e,n,i,r,s,o){let a=1/(e-n),l=1/(i-r),c=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*a,t[13]=(r+i)*l,t[14]=(o+s)*c,t[15]=1,t}function vp(t,e,n,i){let r=e[0],s=e[1],o=e[2],a=i[0],l=i[1],c=i[2],u=r-n[0],h=s-n[1],d=o-n[2],f=u*u+h*h+d*d;f===0?d=1:(f=1/Math.sqrt(f),u*=f,h*=f,d*=f);let p=l*d-c*h,y=c*u-a*d,g=a*h-l*u;return f=p*p+y*y+g*g,f===0&&(c?a+=1e-6:l?c+=1e-6:l+=1e-6,p=l*d-c*h,y=c*u-a*d,g=a*h-l*u,f=p*p+y*y+g*g),f=1/Math.sqrt(f),p*=f,y*=f,g*=f,t[0]=p,t[1]=y,t[2]=g,t[3]=0,t[4]=h*g-d*y,t[5]=d*p-u*g,t[6]=u*y-h*p,t[7]=0,t[8]=u,t[9]=h,t[10]=d,t[11]=0,t[12]=r,t[13]=s,t[14]=o,t[15]=1,t}function po(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function mo(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function wp(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}class Fe extends Array{constructor(e=1,n=0,i=0,r=0,s=0,o=1,a=0,l=0,c=0,u=0,h=1,d=0,f=0,p=0,y=0,g=1){return super(e,n,i,r,s,o,a,l,c,u,h,d,f,p,y,g),this}get x(){return this[12]}get y(){return this[13]}get z(){return this[14]}get w(){return this[15]}set x(e){this[12]=e}set y(e){this[13]=e}set z(e){this[14]=e}set w(e){this[15]=e}set(e,n,i,r,s,o,a,l,c,u,h,d,f,p,y,g){return e.length?this.copy(e):(op(this,e,n,i,r,s,o,a,l,c,u,h,d,f,p,y,g),this)}translate(e,n=this){return cp(this,n,e),this}rotate(e,n,i=this){return hp(this,i,e,n),this}scale(e,n=this){return up(this,n,typeof e=="number"?[e,e,e]:e),this}add(e,n){return n?po(this,e,n):po(this,this,e),this}sub(e,n){return n?mo(this,e,n):mo(this,this,e),this}multiply(e,n){return e.length?n?fo(this,e,n):fo(this,this,e):wp(this,this,e),this}identity(){return ap(this),this}copy(e){return sp(this,e),this}fromPerspective({fov:e,aspect:n,near:i,far:r}={}){return yp(this,e,n,i,r),this}fromOrthogonal({left:e,right:n,bottom:i,top:r,near:s,far:o}){return _p(this,e,n,i,r,s,o),this}fromQuaternion(e){return gp(this,e),this}setPosition(e){return this.x=e[0],this.y=e[1],this.z=e[2],this}inverse(e=this){return lp(this,e),this}compose(e,n,i){return mp(this,e,n,i),this}decompose(e,n,i){return pp(this,e,n,i),this}getRotation(e){return Jl(e,this),this}getTranslation(e){return dp(e,this),this}getScaling(e){return Yl(e,this),this}getMaxScaleOnAxis(){return fp(this)}lookAt(e,n,i){return vp(this,e,n,i),this}determinant(){return Xl(this)}fromArray(e,n=0){return this[0]=e[n],this[1]=e[n+1],this[2]=e[n+2],this[3]=e[n+3],this[4]=e[n+4],this[5]=e[n+5],this[6]=e[n+6],this[7]=e[n+7],this[8]=e[n+8],this[9]=e[n+9],this[10]=e[n+10],this[11]=e[n+11],this[12]=e[n+12],this[13]=e[n+13],this[14]=e[n+14],this[15]=e[n+15],this}toArray(e=[],n=0){return e[n]=this[0],e[n+1]=this[1],e[n+2]=this[2],e[n+3]=this[3],e[n+4]=this[4],e[n+5]=this[5],e[n+6]=this[6],e[n+7]=this[7],e[n+8]=this[8],e[n+9]=this[9],e[n+10]=this[10],e[n+11]=this[11],e[n+12]=this[12],e[n+13]=this[13],e[n+14]=this[14],e[n+15]=this[15],e}}function bp(t,e,n="YXZ"){return n==="XYZ"?(t[1]=Math.asin(Math.min(Math.max(e[8],-1),1)),Math.abs(e[8])<.99999?(t[0]=Math.atan2(-e[9],e[10]),t[2]=Math.atan2(-e[4],e[0])):(t[0]=Math.atan2(e[6],e[5]),t[2]=0)):n==="YXZ"?(t[0]=Math.asin(-Math.min(Math.max(e[9],-1),1)),Math.abs(e[9])<.99999?(t[1]=Math.atan2(e[8],e[10]),t[2]=Math.atan2(e[1],e[5])):(t[1]=Math.atan2(-e[2],e[0]),t[2]=0)):n==="ZXY"?(t[0]=Math.asin(Math.min(Math.max(e[6],-1),1)),Math.abs(e[6])<.99999?(t[1]=Math.atan2(-e[2],e[10]),t[2]=Math.atan2(-e[4],e[5])):(t[1]=0,t[2]=Math.atan2(e[1],e[0]))):n==="ZYX"?(t[1]=Math.asin(-Math.min(Math.max(e[2],-1),1)),Math.abs(e[2])<.99999?(t[0]=Math.atan2(e[6],e[10]),t[2]=Math.atan2(e[1],e[0])):(t[0]=0,t[2]=Math.atan2(-e[4],e[5]))):n==="YZX"?(t[2]=Math.asin(Math.min(Math.max(e[1],-1),1)),Math.abs(e[1])<.99999?(t[0]=Math.atan2(-e[9],e[5]),t[1]=Math.atan2(-e[2],e[0])):(t[0]=0,t[1]=Math.atan2(e[8],e[10]))):n==="XZY"&&(t[2]=Math.asin(-Math.min(Math.max(e[4],-1),1)),Math.abs(e[4])<.99999?(t[0]=Math.atan2(e[6],e[5]),t[1]=Math.atan2(e[8],e[0])):(t[0]=Math.atan2(-e[9],e[10]),t[1]=0)),t}const go=new Fe;class Tp extends Array{constructor(e=0,n=e,i=e,r="YXZ"){super(e,n,i),this.order=r,this.onChange=()=>{},this._target=this;const s=["0","1","2"];return new Proxy(this,{set(o,a){const l=Reflect.set(...arguments);return l&&s.includes(a)&&o.onChange(),l}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set(e,n=e,i=e){return e.length?this.copy(e):(this._target[0]=e,this._target[1]=n,this._target[2]=i,this.onChange(),this)}copy(e){return this._target[0]=e[0],this._target[1]=e[1],this._target[2]=e[2],this.onChange(),this}reorder(e){return this._target.order=e,this.onChange(),this}fromRotationMatrix(e,n=this.order){return bp(this._target,e,n),this.onChange(),this}fromQuaternion(e,n=this.order,i){return go.fromQuaternion(e),this._target.fromRotationMatrix(go,n),i||this.onChange(),this}fromArray(e,n=0){return this._target[0]=e[n],this._target[1]=e[n+1],this._target[2]=e[n+2],this}toArray(e=[],n=0){return e[n]=this[0],e[n+1]=this[1],e[n+2]=this[2],e}}class Zl{constructor(){this.parent=null,this.children=[],this.visible=!0,this.matrix=new Fe,this.worldMatrix=new Fe,this.matrixAutoUpdate=!0,this.worldMatrixNeedsUpdate=!1,this.position=new W,this.quaternion=new ip,this.scale=new W(1),this.rotation=new Tp,this.up=new W(0,1,0),this.rotation._target.onChange=()=>this.quaternion.fromEuler(this.rotation,!0),this.quaternion._target.onChange=()=>this.rotation.fromQuaternion(this.quaternion,void 0,!0)}setParent(e,n=!0){this.parent&&e!==this.parent&&this.parent.removeChild(this,!1),this.parent=e,n&&e&&e.addChild(this,!1)}addChild(e,n=!0){~this.children.indexOf(e)||this.children.push(e),n&&e.setParent(this,!1)}removeChild(e,n=!0){~this.children.indexOf(e)&&this.children.splice(this.children.indexOf(e),1),n&&e.setParent(null,!1)}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||e)&&(this.parent===null?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,e=!0);for(let n=0,i=this.children.length;n<i;n++)this.children[n].updateMatrixWorld(e)}updateMatrix(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}traverse(e){if(!e(this))for(let n=0,i=this.children.length;n<i;n++)this.children[n].traverse(e)}decompose(){this.matrix.decompose(this.quaternion._target,this.position,this.scale),this.rotation.fromQuaternion(this.quaternion)}lookAt(e,n=!1){n?this.matrix.lookAt(this.position,e,this.up):this.matrix.lookAt(e,this.position,this.up),this.matrix.getRotation(this.quaternion._target),this.rotation.fromQuaternion(this.quaternion)}}const Sp=new Fe,Ep=new W,xp=new W;class hb extends Zl{constructor(e,{near:n=.1,far:i=100,fov:r=45,aspect:s=1,left:o,right:a,bottom:l,top:c,zoom:u=1}={}){super(),Object.assign(this,{near:n,far:i,fov:r,aspect:s,left:o,right:a,bottom:l,top:c,zoom:u}),this.projectionMatrix=new Fe,this.viewMatrix=new Fe,this.projectionViewMatrix=new Fe,this.worldPosition=new W,this.type=o||a?"orthographic":"perspective",this.type==="orthographic"?this.orthographic():this.perspective()}perspective({near:e=this.near,far:n=this.far,fov:i=this.fov,aspect:r=this.aspect}={}){return Object.assign(this,{near:e,far:n,fov:i,aspect:r}),this.projectionMatrix.fromPerspective({fov:i*(Math.PI/180),aspect:r,near:e,far:n}),this.type="perspective",this}orthographic({near:e=this.near,far:n=this.far,left:i=this.left||-1,right:r=this.right||1,bottom:s=this.bottom||-1,top:o=this.top||1,zoom:a=this.zoom}={}){return Object.assign(this,{near:e,far:n,left:i,right:r,bottom:s,top:o,zoom:a}),i/=a,r/=a,s/=a,o/=a,this.projectionMatrix.fromOrthogonal({left:i,right:r,bottom:s,top:o,near:e,far:n}),this.type="orthographic",this}updateMatrixWorld(){return super.updateMatrixWorld(),this.viewMatrix.inverse(this.worldMatrix),this.worldMatrix.getTranslation(this.worldPosition),this.projectionViewMatrix.multiply(this.projectionMatrix,this.viewMatrix),this}updateProjectionMatrix(){return this.type==="perspective"?this.perspective():this.orthographic()}lookAt(e){return super.lookAt(e,!0),this}project(e){return e.applyMatrix4(this.viewMatrix),e.applyMatrix4(this.projectionMatrix),this}unproject(e){return e.applyMatrix4(Sp.inverse(this.projectionMatrix)),e.applyMatrix4(this.worldMatrix),this}updateFrustum(){this.frustum||(this.frustum=[new W,new W,new W,new W,new W,new W]);const e=this.projectionViewMatrix;this.frustum[0].set(e[3]-e[0],e[7]-e[4],e[11]-e[8]).constant=e[15]-e[12],this.frustum[1].set(e[3]+e[0],e[7]+e[4],e[11]+e[8]).constant=e[15]+e[12],this.frustum[2].set(e[3]+e[1],e[7]+e[5],e[11]+e[9]).constant=e[15]+e[13],this.frustum[3].set(e[3]-e[1],e[7]-e[5],e[11]-e[9]).constant=e[15]-e[13],this.frustum[4].set(e[3]-e[2],e[7]-e[6],e[11]-e[10]).constant=e[15]-e[14],this.frustum[5].set(e[3]+e[2],e[7]+e[6],e[11]+e[10]).constant=e[15]+e[14];for(let n=0;n<6;n++){const i=1/this.frustum[n].distance();this.frustum[n].multiply(i),this.frustum[n].constant*=i}}frustumIntersectsMesh(e,n=e.worldMatrix){if(!e.geometry.attributes.position||((!e.geometry.bounds||e.geometry.bounds.radius===1/0)&&e.geometry.computeBoundingSphere(),!e.geometry.bounds))return!0;const i=Ep;i.copy(e.geometry.bounds.center),i.applyMatrix4(n);const r=e.geometry.bounds.radius*n.getMaxScaleOnAxis();return this.frustumIntersectsSphere(i,r)}frustumIntersectsSphere(e,n){const i=xp;for(let r=0;r<6;r++){const s=this.frustum[r];if(i.copy(s).dot(e)+s.constant<-n)return!1}return!0}}function Ap(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function Pp(t,e){let n=e[0],i=e[1],r=e[2],s=e[3],o=n+n,a=i+i,l=r+r,c=n*o,u=i*o,h=i*a,d=r*o,f=r*a,p=r*l,y=s*o,g=s*a,m=s*l;return t[0]=1-h-p,t[3]=u-m,t[6]=d+g,t[1]=u+m,t[4]=1-c-p,t[7]=f-y,t[2]=d-g,t[5]=f+y,t[8]=1-c-h,t}function Cp(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Ip(t,e,n,i,r,s,o,a,l,c){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=s,t[5]=o,t[6]=a,t[7]=l,t[8]=c,t}function Rp(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Mp(t,e){let n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=u*o-a*c,d=-u*s+a*l,f=c*s-o*l,p=n*h+i*d+r*f;return p?(p=1/p,t[0]=h*p,t[1]=(-u*i+r*c)*p,t[2]=(a*i-r*o)*p,t[3]=d*p,t[4]=(u*n-r*l)*p,t[5]=(-a*n+r*s)*p,t[6]=f*p,t[7]=(-c*n+i*l)*p,t[8]=(o*n-i*s)*p,t):null}function yo(t,e,n){let i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=n[0],f=n[1],p=n[2],y=n[3],g=n[4],m=n[5],_=n[6],v=n[7],b=n[8];return t[0]=d*i+f*o+p*c,t[1]=d*r+f*a+p*u,t[2]=d*s+f*l+p*h,t[3]=y*i+g*o+m*c,t[4]=y*r+g*a+m*u,t[5]=y*s+g*l+m*h,t[6]=_*i+v*o+b*c,t[7]=_*r+v*a+b*u,t[8]=_*s+v*l+b*h,t}function kp(t,e,n){let i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=n[0],f=n[1];return t[0]=i,t[1]=r,t[2]=s,t[3]=o,t[4]=a,t[5]=l,t[6]=d*i+f*o+c,t[7]=d*r+f*a+u,t[8]=d*s+f*l+h,t}function Dp(t,e,n){let i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=Math.sin(n),f=Math.cos(n);return t[0]=f*i+d*o,t[1]=f*r+d*a,t[2]=f*s+d*l,t[3]=f*o-d*i,t[4]=f*a-d*r,t[5]=f*l-d*s,t[6]=c,t[7]=u,t[8]=h,t}function Lp(t,e,n){let i=n[0],r=n[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Op(t,e){let n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],f=e[11],p=e[12],y=e[13],g=e[14],m=e[15],_=n*a-i*o,v=n*l-r*o,b=n*c-s*o,w=i*l-r*a,T=i*c-s*a,E=r*c-s*l,S=u*y-h*p,x=u*g-d*p,C=u*m-f*p,k=h*g-d*y,L=h*m-f*y,z=d*m-f*g,R=_*z-v*L+b*k+w*C-T*x+E*S;return R?(R=1/R,t[0]=(a*z-l*L+c*k)*R,t[1]=(l*C-o*z-c*x)*R,t[2]=(o*L-a*C+c*S)*R,t[3]=(r*L-i*z-s*k)*R,t[4]=(n*z-r*C+s*x)*R,t[5]=(i*C-n*L-s*S)*R,t[6]=(y*E-g*T+m*w)*R,t[7]=(g*b-p*E-m*v)*R,t[8]=(p*T-y*b+m*_)*R,t):null}class Np extends Array{constructor(e=1,n=0,i=0,r=0,s=1,o=0,a=0,l=0,c=1){return super(e,n,i,r,s,o,a,l,c),this}set(e,n,i,r,s,o,a,l,c){return e.length?this.copy(e):(Ip(this,e,n,i,r,s,o,a,l,c),this)}translate(e,n=this){return kp(this,n,e),this}rotate(e,n=this){return Dp(this,n,e),this}scale(e,n=this){return Lp(this,n,e),this}multiply(e,n){return n?yo(this,e,n):yo(this,this,e),this}identity(){return Rp(this),this}copy(e){return Cp(this,e),this}fromMatrix4(e){return Ap(this,e),this}fromQuaternion(e){return Pp(this,e),this}fromBasis(e,n,i){return this.set(e[0],e[1],e[2],n[0],n[1],n[2],i[0],i[1],i[2]),this}inverse(e=this){return Mp(this,e),this}getNormalMatrix(e){return Op(this,e),this}}let Vp=0;class db extends Zl{constructor(e,{geometry:n,program:i,mode:r=e.TRIANGLES,frustumCulled:s=!0,renderOrder:o=0}={}){super(),e.canvas||console.error("gl not passed as first argument to Mesh"),this.gl=e,this.id=Vp++,this.geometry=n,this.program=i,this.mode=r,this.frustumCulled=s,this.renderOrder=o,this.modelViewMatrix=new Fe,this.normalMatrix=new Np,this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[]}onBeforeRender(e){return this.beforeRenderCallbacks.push(e),this}onAfterRender(e){return this.afterRenderCallbacks.push(e),this}draw({camera:e}={}){e&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=e.projectionMatrix,this.program.uniforms.cameraPosition.value=e.worldPosition,this.program.uniforms.viewMatrix.value=e.viewMatrix,this.modelViewMatrix.multiply(e.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix),this.beforeRenderCallbacks.forEach(i=>i&&i({mesh:this,camera:e}));let n=this.program.cullFace&&this.worldMatrix.determinant()<0;this.program.use({flipFaces:n}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach(i=>i&&i({mesh:this,camera:e}))}}const _o={black:"#000000",white:"#ffffff",red:"#ff0000",green:"#00ff00",blue:"#0000ff",fuchsia:"#ff00ff",cyan:"#00ffff",yellow:"#ffff00",orange:"#ff8000"};function vo(t){t.length===4&&(t=t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e||console.warn(`Unable to convert hex string ${t} to rgb values`),[parseInt(e[1],16)/255,parseInt(e[2],16)/255,parseInt(e[3],16)/255]}function Fp(t){return t=parseInt(t),[(t>>16&255)/255,(t>>8&255)/255,(t&255)/255]}function wo(t){return t===void 0?[0,0,0]:arguments.length===3?arguments:isNaN(t)?t[0]==="#"?vo(t):_o[t.toLowerCase()]?vo(_o[t.toLowerCase()]):(console.warn("Color format not recognised"),[0,0,0]):Fp(t)}class fb extends Array{constructor(e){return Array.isArray(e)?super(...e):super(...wo(...arguments))}get r(){return this[0]}get g(){return this[1]}get b(){return this[2]}set r(e){this[0]=e}set g(e){this[1]=e}set b(e){this[2]=e}set(e){return Array.isArray(e)?this.copy(e):this.copy(wo(...arguments))}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this}}class pb extends Df{constructor(e,{attributes:n={}}={}){Object.assign(n,{position:{size:2,data:new Float32Array([-1,-1,3,-1,-1,3])},uv:{size:2,data:new Float32Array([0,0,2,0,0,2])}}),super(e,n)}}const Br=G({});function un(t){const e=oe(null);return e.current===null&&(e.current=t()),e.current}const $r=typeof window<"u",jr=$r?ei:je,ri=G(null);function Hr(t,e){t.indexOf(e)===-1&&t.push(e)}function Wr(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Ee=(t,e,n)=>n>e?e:n<t?t:n;let zr=()=>{};const xe={},Ql=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function ec(t){return typeof t=="object"&&t!==null}const tc=t=>/^0[^.\s]+$/u.test(t);function Gr(t){let e;return()=>(e===void 0&&(e=t()),e)}const ae=t=>t,Up=(t,e)=>n=>e(t(n)),hn=(...t)=>t.reduce(Up),Xt=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i};class Kr{constructor(){this.subscriptions=[]}add(e){return Hr(this.subscriptions,e),()=>Wr(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const pe=t=>t*1e3,re=t=>t/1e3;function nc(t,e){return e?t*(1e3/e):0}const ic=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Bp=1e-7,$p=12;function jp(t,e,n,i,r){let s,o,a=0;do o=e+(n-e)/2,s=ic(o,i,r)-t,s>0?n=o:e=o;while(Math.abs(s)>Bp&&++a<$p);return o}function dn(t,e,n,i){if(t===e&&n===i)return ae;const r=s=>jp(s,0,1,t,n);return s=>s===0||s===1?s:ic(r(s),e,i)}const rc=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,sc=t=>e=>1-t(1-e),oc=dn(.33,1.53,.69,.99),qr=sc(oc),ac=rc(qr),lc=t=>(t*=2)<1?.5*qr(t):.5*(2-Math.pow(2,-10*(t-1))),Xr=t=>1-Math.sin(Math.acos(t)),cc=sc(Xr),uc=rc(Xr),Hp=dn(.42,0,1,1),Wp=dn(0,0,.58,1),hc=dn(.42,0,.58,1),zp=t=>Array.isArray(t)&&typeof t[0]!="number",dc=t=>Array.isArray(t)&&typeof t[0]=="number",Gp={linear:ae,easeIn:Hp,easeInOut:hc,easeOut:Wp,circIn:Xr,circInOut:uc,circOut:cc,backIn:qr,backInOut:ac,backOut:oc,anticipate:lc},Kp=t=>typeof t=="string",bo=t=>{if(dc(t)){zr(t.length===4);const[e,n,i,r]=t;return dn(e,n,i,r)}else if(Kp(t))return Gp[t];return t},Sn=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function qp(t,e){let n=new Set,i=new Set,r=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(u){o.has(u)&&(c.schedule(u),t()),u(a)}const c={schedule:(u,h=!1,d=!1)=>{const p=d&&r?n:i;return h&&o.add(u),p.has(u)||p.add(u),u},cancel:u=>{i.delete(u),o.delete(u)},process:u=>{if(a=u,r){s=!0;return}r=!0,[n,i]=[i,n],n.forEach(l),n.clear(),r=!1,s&&(s=!1,c.process(u))}};return c}const Xp=40;function fc(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Sn.reduce((v,b)=>(v[b]=qp(s),v),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:u,update:h,preRender:d,render:f,postRender:p}=o,y=()=>{const v=xe.useManualTiming?r.timestamp:performance.now();n=!1,xe.useManualTiming||(r.delta=i?1e3/60:Math.max(Math.min(v-r.timestamp,Xp),1)),r.timestamp=v,r.isProcessing=!0,a.process(r),l.process(r),c.process(r),u.process(r),h.process(r),d.process(r),f.process(r),p.process(r),r.isProcessing=!1,n&&e&&(i=!1,t(y))},g=()=>{n=!0,i=!0,r.isProcessing||t(y)};return{schedule:Sn.reduce((v,b)=>{const w=o[b];return v[b]=(T,E=!1,S=!1)=>(n||g(),w.schedule(T,E,S)),v},{}),cancel:v=>{for(let b=0;b<Sn.length;b++)o[Sn[b]].cancel(v)},state:r,steps:o}}const{schedule:V,cancel:Ae,state:q,steps:bi}=fc(typeof requestAnimationFrame<"u"?requestAnimationFrame:ae,!0);let Mn;function Yp(){Mn=void 0}const ee={now:()=>(Mn===void 0&&ee.set(q.isProcessing||xe.useManualTiming?q.timestamp:performance.now()),Mn),set:t=>{Mn=t,queueMicrotask(Yp)}},pc=t=>e=>typeof e=="string"&&e.startsWith(t),Yr=pc("--"),Jp=pc("var(--"),Jr=t=>Jp(t)?Zp.test(t.split("/*")[0].trim()):!1,Zp=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Pt={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Yt={...Pt,transform:t=>Ee(0,1,t)},En={...Pt,default:1},Vt=t=>Math.round(t*1e5)/1e5,Zr=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Qp(t){return t==null}const em=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Qr=(t,e)=>n=>!!(typeof n=="string"&&em.test(n)&&n.startsWith(t)||e&&!Qp(n)&&Object.prototype.hasOwnProperty.call(n,e)),mc=(t,e,n)=>i=>{if(typeof i!="string")return i;const[r,s,o,a]=i.match(Zr);return{[t]:parseFloat(r),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},tm=t=>Ee(0,255,t),Ti={...Pt,transform:t=>Math.round(tm(t))},Qe={test:Qr("rgb","red"),parse:mc("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+Ti.transform(t)+", "+Ti.transform(e)+", "+Ti.transform(n)+", "+Vt(Yt.transform(i))+")"};function nm(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const Qi={test:Qr("#"),parse:nm,transform:Qe.transform},fn=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),De=fn("deg"),me=fn("%"),P=fn("px"),im=fn("vh"),rm=fn("vw"),To={...me,parse:t=>me.parse(t)/100,transform:t=>me.transform(t*100)},ht={test:Qr("hsl","hue"),parse:mc("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+me.transform(Vt(e))+", "+me.transform(Vt(n))+", "+Vt(Yt.transform(i))+")"},H={test:t=>Qe.test(t)||Qi.test(t)||ht.test(t),parse:t=>Qe.test(t)?Qe.parse(t):ht.test(t)?ht.parse(t):Qi.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Qe.transform(t):ht.transform(t),getAnimatableNone:t=>{const e=H.parse(t);return e.alpha=0,H.transform(e)}},sm=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function om(t){return isNaN(t)&&typeof t=="string"&&(t.match(Zr)?.length||0)+(t.match(sm)?.length||0)>0}const gc="number",yc="color",am="var",lm="var(",So="${}",cm=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Jt(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},r=[];let s=0;const a=e.replace(cm,l=>(H.test(l)?(i.color.push(s),r.push(yc),n.push(H.parse(l))):l.startsWith(lm)?(i.var.push(s),r.push(am),n.push(l)):(i.number.push(s),r.push(gc),n.push(parseFloat(l))),++s,So)).split(So);return{values:n,split:a,indexes:i,types:r}}function _c(t){return Jt(t).values}function vc(t){const{split:e,types:n}=Jt(t),i=e.length;return r=>{let s="";for(let o=0;o<i;o++)if(s+=e[o],r[o]!==void 0){const a=n[o];a===gc?s+=Vt(r[o]):a===yc?s+=H.transform(r[o]):s+=r[o]}return s}}const um=t=>typeof t=="number"?0:H.test(t)?H.getAnimatableNone(t):t;function hm(t){const e=_c(t);return vc(t)(e.map(um))}const We={test:om,parse:_c,createTransformer:vc,getAnimatableNone:hm};function Si(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function dm({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,s=0,o=0;if(!e)r=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;r=Si(l,a,t+1/3),s=Si(l,a,t),o=Si(l,a,t-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}function jn(t,e){return n=>n>0?e:t}const F=(t,e,n)=>t+(e-t)*n,Ei=(t,e,n)=>{const i=t*t,r=n*(e*e-i)+i;return r<0?0:Math.sqrt(r)},fm=[Qi,Qe,ht],pm=t=>fm.find(e=>e.test(t));function Eo(t){const e=pm(t);if(!e)return!1;let n=e.parse(t);return e===ht&&(n=dm(n)),n}const xo=(t,e)=>{const n=Eo(t),i=Eo(e);if(!n||!i)return jn(t,e);const r={...n};return s=>(r.red=Ei(n.red,i.red,s),r.green=Ei(n.green,i.green,s),r.blue=Ei(n.blue,i.blue,s),r.alpha=F(n.alpha,i.alpha,s),Qe.transform(r))},er=new Set(["none","hidden"]);function mm(t,e){return er.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function gm(t,e){return n=>F(t,e,n)}function es(t){return typeof t=="number"?gm:typeof t=="string"?Jr(t)?jn:H.test(t)?xo:vm:Array.isArray(t)?wc:typeof t=="object"?H.test(t)?xo:ym:jn}function wc(t,e){const n=[...t],i=n.length,r=t.map((s,o)=>es(s)(s,e[o]));return s=>{for(let o=0;o<i;o++)n[o]=r[o](s);return n}}function ym(t,e){const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=es(t[r])(t[r],e[r]));return r=>{for(const s in i)n[s]=i[s](r);return n}}function _m(t,e){const n=[],i={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const s=e.types[r],o=t.indexes[s][i[s]],a=t.values[o]??0;n[r]=a,i[s]++}return n}const vm=(t,e)=>{const n=We.createTransformer(e),i=Jt(t),r=Jt(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?er.has(t)&&!r.values.length||er.has(e)&&!i.values.length?mm(t,e):hn(wc(_m(i,r),r.values),n):jn(t,e)};function bc(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?F(t,e,n):es(t)(t,e)}const wm=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>V.update(e,n),stop:()=>Ae(e),now:()=>q.isProcessing?q.timestamp:ee.now()}},Tc=(t,e,n=10)=>{let i="";const r=Math.max(Math.round(e/n),2);for(let s=0;s<r;s++)i+=Math.round(t(s/(r-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Hn=2e4;function ts(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<Hn;)e+=n,i=t.next(e);return e>=Hn?1/0:e}function bm(t,e=100,n){const i=n({...t,keyframes:[0,e]}),r=Math.min(ts(i),Hn);return{type:"keyframes",ease:s=>i.next(r*s).value/e,duration:re(r)}}const Tm=5;function Sc(t,e,n){const i=Math.max(e-Tm,0);return nc(n-t(i),e-i)}const B={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},xi=.001;function Sm({duration:t=B.duration,bounce:e=B.bounce,velocity:n=B.velocity,mass:i=B.mass}){let r,s,o=1-e;o=Ee(B.minDamping,B.maxDamping,o),t=Ee(B.minDuration,B.maxDuration,re(t)),o<1?(r=c=>{const u=c*o,h=u*t,d=u-n,f=tr(c,o),p=Math.exp(-h);return xi-d/f*p},s=c=>{const h=c*o*t,d=h*n+n,f=Math.pow(o,2)*Math.pow(c,2)*t,p=Math.exp(-h),y=tr(Math.pow(c,2),o);return(-r(c)+xi>0?-1:1)*((d-f)*p)/y}):(r=c=>{const u=Math.exp(-c*t),h=(c-n)*t+1;return-xi+u*h},s=c=>{const u=Math.exp(-c*t),h=(n-c)*(t*t);return u*h});const a=5/t,l=xm(r,s,a);if(t=pe(t),isNaN(l))return{stiffness:B.stiffness,damping:B.damping,duration:t};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:o*2*Math.sqrt(i*c),duration:t}}}const Em=12;function xm(t,e,n){let i=n;for(let r=1;r<Em;r++)i=i-t(i)/e(i);return i}function tr(t,e){return t*Math.sqrt(1-e*e)}const Am=["duration","bounce"],Pm=["stiffness","damping","mass"];function Ao(t,e){return e.some(n=>t[n]!==void 0)}function Cm(t){let e={velocity:B.velocity,stiffness:B.stiffness,damping:B.damping,mass:B.mass,isResolvedFromDuration:!1,...t};if(!Ao(t,Pm)&&Ao(t,Am))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),r=i*i,s=2*Ee(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:B.mass,stiffness:r,damping:s}}else{const n=Sm(t);e={...e,...n,mass:B.mass},e.isResolvedFromDuration=!0}return e}function Wn(t=B.visualDuration,e=B.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:r}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:h,velocity:d,isResolvedFromDuration:f}=Cm({...n,velocity:-re(n.velocity||0)}),p=d||0,y=c/(2*Math.sqrt(l*u)),g=o-s,m=re(Math.sqrt(l/u)),_=Math.abs(g)<5;i||(i=_?B.restSpeed.granular:B.restSpeed.default),r||(r=_?B.restDelta.granular:B.restDelta.default);let v;if(y<1){const w=tr(m,y);v=T=>{const E=Math.exp(-y*m*T);return o-E*((p+y*m*g)/w*Math.sin(w*T)+g*Math.cos(w*T))}}else if(y===1)v=w=>o-Math.exp(-m*w)*(g+(p+m*g)*w);else{const w=m*Math.sqrt(y*y-1);v=T=>{const E=Math.exp(-y*m*T),S=Math.min(w*T,300);return o-E*((p+y*m*g)*Math.sinh(S)+w*g*Math.cosh(S))/w}}const b={calculatedDuration:f&&h||null,next:w=>{const T=v(w);if(f)a.done=w>=h;else{let E=w===0?p:0;y<1&&(E=w===0?pe(p):Sc(v,w,T));const S=Math.abs(E)<=i,x=Math.abs(o-T)<=r;a.done=S&&x}return a.value=a.done?o:T,a},toString:()=>{const w=Math.min(ts(b),Hn),T=Tc(E=>b.next(w*E).value,w,30);return w+"ms "+T},toTransition:()=>{}};return b}Wn.applyToOptions=t=>{const e=bm(t,100,Wn);return t.ease=e.ease,t.duration=pe(e.duration),t.type="keyframes",t};function nr({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const h=t[0],d={done:!1,value:h},f=S=>a!==void 0&&S<a||l!==void 0&&S>l,p=S=>a===void 0?l:l===void 0||Math.abs(a-S)<Math.abs(l-S)?a:l;let y=n*e;const g=h+y,m=o===void 0?g:o(g);m!==g&&(y=m-h);const _=S=>-y*Math.exp(-S/i),v=S=>m+_(S),b=S=>{const x=_(S),C=v(S);d.done=Math.abs(x)<=c,d.value=d.done?m:C};let w,T;const E=S=>{f(d.value)&&(w=S,T=Wn({keyframes:[d.value,p(d.value)],velocity:Sc(v,S,d.value),damping:r,stiffness:s,restDelta:c,restSpeed:u}))};return E(0),{calculatedDuration:null,next:S=>{let x=!1;return!T&&w===void 0&&(x=!0,b(S),E(S)),w!==void 0&&S>=w?T.next(S-w):(!x&&b(S),d)}}}function Im(t,e,n){const i=[],r=n||xe.mix||bc,s=t.length-1;for(let o=0;o<s;o++){let a=r(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||ae:e;a=hn(l,a)}i.push(a)}return i}function Ec(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const s=t.length;if(zr(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=Im(e,i,r),l=a.length,c=u=>{if(o&&u<t[0])return e[0];let h=0;if(l>1)for(;h<t.length-2&&!(u<t[h+1]);h++);const d=Xt(t[h],t[h+1],u);return a[h](d)};return n?u=>c(Ee(t[0],t[s-1],u)):c}function Rm(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=Xt(0,e,i);t.push(F(n,1,r))}}function Mm(t){const e=[0];return Rm(e,t.length-1),e}function km(t,e){return t.map(n=>n*e)}function Dm(t,e){return t.map(()=>e||hc).splice(0,t.length-1)}function Ft({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=zp(i)?i.map(bo):bo(i),s={done:!1,value:e[0]},o=km(n&&n.length===e.length?n:Mm(e),t),a=Ec(o,e,{ease:Array.isArray(r)?r:Dm(e,r)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const Lm=t=>t!==null;function ns(t,{repeat:e,repeatType:n="loop"},i,r=1){const s=t.filter(Lm),a=r<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||i===void 0?s[a]:i}const Om={decay:nr,inertia:nr,tween:Ft,keyframes:Ft,spring:Wn};function xc(t){typeof t.type=="string"&&(t.type=Om[t.type])}class is{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const Nm=t=>t/100;class rs extends is{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==ee.now()&&this.tick(ee.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;xc(e);const{type:n=Ft,repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const l=n||Ft;l!==Ft&&typeof a[0]!="number"&&(this.mixKeyframes=hn(Nm,bc(a[0],a[1])),a=[0,100]);const c=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=ts(c));const{calculatedDuration:u}=c;this.calculatedDuration=u,this.resolvedDuration=u+r,this.totalDuration=this.resolvedDuration*(i+1)-r,this.generator=c}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:i,totalDuration:r,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return i.next(0);const{delay:c=0,keyframes:u,repeat:h,repeatType:d,repeatDelay:f,type:p,onUpdate:y,finalKeyframe:g}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const m=this.currentTime-c*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?m<0:m>r;this.currentTime=Math.max(m,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let v=this.currentTime,b=i;if(h){const S=Math.min(this.currentTime,r)/a;let x=Math.floor(S),C=S%1;!C&&S>=1&&(C=1),C===1&&x--,x=Math.min(x,h+1),!!(x%2)&&(d==="reverse"?(C=1-C,f&&(C-=f/a)):d==="mirror"&&(b=o)),v=Ee(0,1,C)*a}const w=_?{done:!1,value:u[0]}:b.next(v);s&&(w.value=s(w.value));let{done:T}=w;!_&&l!==null&&(T=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const E=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&T);return E&&p!==nr&&(w.value=ns(u,this.options,g,this.speed)),y&&y(w.value),E&&this.finish(),w}then(e,n){return this.finished.then(e,n)}get duration(){return re(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+re(e)}get time(){return re(this.currentTime)}set time(e){e=pe(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(ee.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=re(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=wm,startTime:n}=this.options;this.driver||(this.driver=e(r=>this.tick(r))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ee.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function Vm(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const et=t=>t*180/Math.PI,ir=t=>{const e=et(Math.atan2(t[1],t[0]));return rr(e)},Fm={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:ir,rotateZ:ir,skewX:t=>et(Math.atan(t[1])),skewY:t=>et(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},rr=t=>(t=t%360,t<0&&(t+=360),t),Po=ir,Co=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Io=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Um={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Co,scaleY:Io,scale:t=>(Co(t)+Io(t))/2,rotateX:t=>rr(et(Math.atan2(t[6],t[5]))),rotateY:t=>rr(et(Math.atan2(-t[2],t[0]))),rotateZ:Po,rotate:Po,skewX:t=>et(Math.atan(t[4])),skewY:t=>et(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function sr(t){return t.includes("scale")?1:0}function or(t,e){if(!t||t==="none")return sr(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,r;if(n)i=Um,r=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=Fm,r=a}if(!r)return sr(e);const s=i[e],o=r[1].split(",").map($m);return typeof s=="function"?s(o):o[s]}const Bm=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return or(n,e)};function $m(t){return parseFloat(t.trim())}const Ct=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],It=new Set(Ct),Ro=t=>t===Pt||t===P,jm=new Set(["x","y","z"]),Hm=Ct.filter(t=>!jm.has(t));function Wm(t){const e=[];return Hm.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const nt={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>or(e,"x"),y:(t,{transform:e})=>or(e,"y")};nt.translateX=nt.x;nt.translateY=nt.y;const it=new Set;let ar=!1,lr=!1,cr=!1;function Ac(){if(lr){const t=Array.from(it).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const r=Wm(i);r.length&&(n.set(i,r),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=n.get(i);r&&r.forEach(([s,o])=>{i.getValue(s)?.set(o)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}lr=!1,ar=!1,it.forEach(t=>t.complete(cr)),it.clear()}function Pc(){it.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(lr=!0)})}function zm(){cr=!0,Pc(),Ac(),cr=!1}class ss{constructor(e,n,i,r,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=r,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(it.add(this),ar||(ar=!0,V.read(Pc),V.resolveKeyframes(Ac))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:r}=this;if(e[0]===null){const s=r?.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(i&&n){const a=i.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),r&&s===void 0&&r.set(e[0])}Vm(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),it.delete(this)}cancel(){this.state==="scheduled"&&(it.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Gm=t=>t.startsWith("--");function Km(t,e,n){Gm(e)?t.style.setProperty(e,n):t.style[e]=n}const qm=Gr(()=>window.ScrollTimeline!==void 0),Xm={};function Ym(t,e){const n=Gr(t);return()=>Xm[e]??n()}const Cc=Ym(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Lt=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,Mo={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Lt([0,.65,.55,1]),circOut:Lt([.55,0,1,.45]),backIn:Lt([.31,.01,.66,-.59]),backOut:Lt([.33,1.53,.69,.99])};function Ic(t,e){if(t)return typeof t=="function"?Cc()?Tc(t,e):"ease-out":dc(t)?Lt(t):Array.isArray(t)?t.map(n=>Ic(n,e)||Mo.easeOut):Mo[t]}function Jm(t,e,n,{delay:i=0,duration:r=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},c=void 0){const u={[e]:n};l&&(u.offset=l);const h=Ic(a,r);Array.isArray(h)&&(u.easing=h);const d={delay:i,duration:r,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return c&&(d.pseudoElement=c),t.animate(u,d)}function Rc(t){return typeof t=="function"&&"applyToOptions"in t}function Zm({type:t,...e}){return Rc(t)&&Cc()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class Qm extends is{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:i,keyframes:r,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,zr(typeof e.type!="string");const c=Zm(e);this.animation=Jm(n,i,r,c,s),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const u=ns(r,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(u):Km(n,i,u),this.animation.cancel()}l?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return re(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+re(e)}get time(){return re(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=pe(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&qm()?(this.animation.timeline=e,ae):n(this)}}const Mc={anticipate:lc,backInOut:ac,circInOut:uc};function eg(t){return t in Mc}function tg(t){typeof t.ease=="string"&&eg(t.ease)&&(t.ease=Mc[t.ease])}const ko=10;class ng extends Qm{constructor(e){tg(e),xc(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:i,onComplete:r,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new rs({...o,autoplay:!1}),l=pe(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-ko).value,a.sample(l).value,ko),a.stop()}}const Do=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(We.test(t)||t==="0")&&!t.startsWith("url("));function ig(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function rg(t,e,n,i){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=Do(r,e),a=Do(s,e);return!o||!a?!1:ig(t)||(n==="spring"||Rc(n))&&i}function ur(t){t.duration=0,t.type="keyframes"}const sg=new Set(["opacity","clipPath","filter","transform"]),og=Gr(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function ag(t){const{motionValue:e,name:n,repeatDelay:i,repeatType:r,damping:s,type:o}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=e.owner.getProps();return og()&&n&&sg.has(n)&&(n!=="transform"||!c)&&!l&&!i&&r!=="mirror"&&s!==0&&o!=="inertia"}const lg=40;class cg extends is{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:c,element:u,...h}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=ee.now();const d={autoplay:e,delay:n,type:i,repeat:r,repeatDelay:s,repeatType:o,name:l,motionValue:c,element:u,...h},f=u?.KeyframeResolver||ss;this.keyframeResolver=new f(a,(p,y,g)=>this.onKeyframesResolved(p,y,d,!g),l,c,u),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,i,r){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:c,onUpdate:u}=i;this.resolvedAt=ee.now(),rg(e,s,o,a)||((xe.instantAnimations||!l)&&u?.(ns(e,i,n)),e[0]=e[e.length-1],ur(i),i.repeat=0);const d={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>lg?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...i,keyframes:e},f=!c&&ag(d)?new ng({...d,element:d.motionValue.owner.current}):new rs(d);f.finished.then(()=>this.notifyFinished()).catch(ae),this.pendingTimeline&&(this.stopTimeline=f.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=f}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),zm()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const ug=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function hg(t){const e=ug.exec(t);if(!e)return[,];const[,n,i,r]=e;return[`--${n??i}`,r]}function kc(t,e,n=1){const[i,r]=hg(t);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const o=s.trim();return Ql(o)?parseFloat(o):o}return Jr(r)?kc(r,e,n+1):r}function os(t,e){return t?.[e]??t?.default??t}const Dc=new Set(["width","height","top","left","right","bottom",...Ct]),dg={test:t=>t==="auto",parse:t=>t},Lc=t=>e=>e.test(t),Oc=[Pt,P,me,De,rm,im,dg],Lo=t=>Oc.find(Lc(t));function fg(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||tc(t):!0}const pg=new Set(["brightness","contrast","saturate","opacity"]);function mg(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(Zr)||[];if(!i)return t;const r=n.replace(i,"");let s=pg.has(e)?1:0;return i!==n&&(s*=100),e+"("+s+r+")"}const gg=/\b([a-z-]*)\(.*?\)/gu,hr={...We,getAnimatableNone:t=>{const e=t.match(gg);return e?e.map(mg).join(" "):t}},Oo={...Pt,transform:Math.round},yg={rotate:De,rotateX:De,rotateY:De,rotateZ:De,scale:En,scaleX:En,scaleY:En,scaleZ:En,skew:De,skewX:De,skewY:De,distance:P,translateX:P,translateY:P,translateZ:P,x:P,y:P,z:P,perspective:P,transformPerspective:P,opacity:Yt,originX:To,originY:To,originZ:P},as={borderWidth:P,borderTopWidth:P,borderRightWidth:P,borderBottomWidth:P,borderLeftWidth:P,borderRadius:P,radius:P,borderTopLeftRadius:P,borderTopRightRadius:P,borderBottomRightRadius:P,borderBottomLeftRadius:P,width:P,maxWidth:P,height:P,maxHeight:P,top:P,right:P,bottom:P,left:P,padding:P,paddingTop:P,paddingRight:P,paddingBottom:P,paddingLeft:P,margin:P,marginTop:P,marginRight:P,marginBottom:P,marginLeft:P,backgroundPositionX:P,backgroundPositionY:P,...yg,zIndex:Oo,fillOpacity:Yt,strokeOpacity:Yt,numOctaves:Oo},_g={...as,color:H,backgroundColor:H,outlineColor:H,fill:H,stroke:H,borderColor:H,borderTopColor:H,borderRightColor:H,borderBottomColor:H,borderLeftColor:H,filter:hr,WebkitFilter:hr},Nc=t=>_g[t];function Vc(t,e){let n=Nc(t);return n!==hr&&(n=We),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const vg=new Set(["auto","none","0"]);function wg(t,e,n){let i=0,r;for(;i<t.length&&!r;){const s=t[i];typeof s=="string"&&!vg.has(s)&&Jt(s).values.length&&(r=t[i]),i++}if(r&&n)for(const s of e)t[s]=Vc(n,r)}class bg extends ss{constructor(e,n,i,r,s){super(e,n,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),Jr(c))){const u=kc(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!Dc.has(i)||e.length!==2)return;const[r,s]=e,o=Lo(r),a=Lo(s);if(o!==a)if(Ro(o)&&Ro(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else nt[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let r=0;r<e.length;r++)(e[r]===null||fg(e[r]))&&i.push(r);i.length&&wg(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=nt[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const r=e.getValue(n);r&&r.jump(this.measuredOrigin,!1);const s=i.length-1,o=i[s];i[s]=nt[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([a,l])=>{e.getValue(a).set(l)}),this.resolveNoneKeyframes()}}function Tg(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let i=document;const r=n?.[t]??i.querySelectorAll(t);return r?Array.from(r):[]}return Array.from(t)}const Fc=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function Uc(t){return ec(t)&&"offsetHeight"in t}const No=30,Sg=t=>!isNaN(parseFloat(t)),Ut={current:void 0};class Eg{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const r=ee.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=ee.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Sg(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Kr);const i=this.events[e].add(n);return e==="change"?()=>{i(),V.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return Ut.current&&Ut.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=ee.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>No)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,No);return nc(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ot(t,e){return new Eg(t,e)}const{schedule:ls}=fc(queueMicrotask,!1),le={x:!1,y:!1};function Bc(){return le.x||le.y}function xg(t){return t==="x"||t==="y"?le[t]?null:(le[t]=!0,()=>{le[t]=!1}):le.x||le.y?null:(le.x=le.y=!0,()=>{le.x=le.y=!1})}function $c(t,e){const n=Tg(t),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[n,r,()=>i.abort()]}function Vo(t){return!(t.pointerType==="touch"||Bc())}function Ag(t,e,n={}){const[i,r,s]=$c(t,n),o=a=>{if(!Vo(a))return;const{target:l}=a,c=e(l,a);if(typeof c!="function"||!l)return;const u=h=>{Vo(h)&&(c(h),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,r)};return i.forEach(a=>{a.addEventListener("pointerenter",o,r)}),s}const jc=(t,e)=>e?t===e?!0:jc(t,e.parentElement):!1,cs=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Pg=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Cg(t){return Pg.has(t.tagName)||t.tabIndex!==-1}const kn=new WeakSet;function Fo(t){return e=>{e.key==="Enter"&&t(e)}}function Ai(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Ig=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=Fo(()=>{if(kn.has(n))return;Ai(n,"down");const r=Fo(()=>{Ai(n,"up")}),s=()=>Ai(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function Uo(t){return cs(t)&&!Bc()}function Rg(t,e,n={}){const[i,r,s]=$c(t,n),o=a=>{const l=a.currentTarget;if(!Uo(a))return;kn.add(l);const c=e(l,a),u=(f,p)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",d),kn.has(l)&&kn.delete(l),Uo(f)&&typeof c=="function"&&c(f,{success:p})},h=f=>{u(f,l===window||l===document||n.useGlobalTarget||jc(l,f.target))},d=f=>{u(f,!1)};window.addEventListener("pointerup",h,r),window.addEventListener("pointercancel",d,r)};return i.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,r),Uc(a)&&(a.addEventListener("focus",c=>Ig(c,r)),!Cg(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function Hc(t){return ec(t)&&"ownerSVGElement"in t}function Mg(t){return Hc(t)&&t.tagName==="svg"}function kg(...t){const e=!Array.isArray(t[0]),n=e?0:-1,i=t[0+n],r=t[1+n],s=t[2+n],o=t[3+n],a=Ec(r,s,o);return e?a(i):a}const Y=t=>!!(t&&t.getVelocity),Dg=[...Oc,H,We],Lg=t=>Dg.find(Lc(t)),si=G({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Bo(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Og(...t){return e=>{let n=!1;const i=t.map(r=>{const s=Bo(r,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let r=0;r<i.length;r++){const s=i[r];typeof s=="function"?s():Bo(t[r],null)}}}}function Ng(...t){return ze(Og(...t),t)}class Vg extends se{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=n.offsetParent,r=Uc(i)&&i.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=r-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Fg({children:t,isPresent:e,anchorX:n,root:i}){const r=kr(),s=oe(null),o=oe({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=I(si),l=Ng(s,t?.ref);return xl(()=>{const{width:c,height:u,top:h,left:d,right:f}=o.current;if(e||!s.current||!c||!u)return;const p=n==="left"?`left: ${d}`:`right: ${f}`;s.current.dataset.motionPopId=r;const y=document.createElement("style");a&&(y.nonce=a);const g=i??document.head;return g.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            ${p}px !important;
            top: ${h}px !important;
          }
        `),()=>{g.contains(y)&&g.removeChild(y)}},[e]),He(Vg,{isPresent:e,childRef:s,sizeRef:o,children:Wh(t,{ref:l})})}const Ug=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:s,mode:o,anchorX:a,root:l})=>{const c=un(Bg),u=kr();let h=!0,d=X(()=>(h=!1,{id:u,initial:e,isPresent:n,custom:r,onExitComplete:f=>{c.set(f,!0);for(const p of c.values())if(!p)return;i&&i()},register:f=>(c.set(f,!1),()=>c.delete(f))}),[n,c,i]);return s&&h&&(d={...d}),X(()=>{c.forEach((f,p)=>c.set(p,!1))},[n]),je(()=>{!n&&!c.size&&i&&i()},[n]),o==="popLayout"&&(t=He(Fg,{isPresent:n,anchorX:a,root:l,children:t})),He(ri.Provider,{value:d,children:t})};function Bg(){return new Map}function Wc(t=!0){const e=I(ri);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:r}=e,s=kr();je(()=>{if(t)return r(s)},[t]);const o=ze(()=>t&&i&&i(s),[s,i,t]);return!n&&i?[!1,o]:[!0]}const xn=t=>t.key||"";function $o(t){const e=[];return Al.forEach(t,n=>{Lr(n)&&e.push(n)}),e}const mb=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:s="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[c,u]=Wc(o),h=X(()=>$o(t),[t]),d=o&&!c?[]:h.map(xn),f=oe(!0),p=oe(h),y=un(()=>new Map),[g,m]=st(h),[_,v]=st(h);jr(()=>{f.current=!1,p.current=h;for(let T=0;T<_.length;T++){const E=xn(_[T]);d.includes(E)?y.delete(E):y.get(E)!==!0&&y.set(E,!1)}},[_,d.length,d.join("-")]);const b=[];if(h!==g){let T=[...h];for(let E=0;E<_.length;E++){const S=_[E],x=xn(S);d.includes(x)||(T.splice(E,0,S),b.push(S))}return s==="wait"&&b.length&&(T=b),v($o(T)),m(h),null}const{forceRender:w}=I(Br);return He(J,{children:_.map(T=>{const E=xn(T),S=o&&!c?!1:h===_||d.includes(E),x=()=>{if(y.has(E))y.set(E,!0);else return;let C=!0;y.forEach(k=>{k||(C=!1)}),C&&(w?.(),v(p.current),o&&u?.(),i&&i())};return He(Ug,{isPresent:S,initial:!f.current||n?void 0:!1,custom:e,presenceAffectsLayout:r,mode:s,root:l,onExitComplete:S?void 0:x,anchorX:a,children:T},E)})})},zc=G({strict:!1}),jo={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},bt={};for(const t in jo)bt[t]={isEnabled:e=>jo[t].some(n=>!!e[n])};function $g(t){for(const e in t)bt[e]={...bt[e],...t[e]}}const jg=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function zn(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||jg.has(t)}let Gc=t=>!zn(t);function Hg(t){typeof t=="function"&&(Gc=e=>e.startsWith("on")?!zn(e):t(e))}try{Hg(require("@emotion/is-prop-valid").default)}catch{}function Wg(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(Gc(r)||n===!0&&zn(r)||!e&&!zn(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}const oi=G({});function ai(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Zt(t){return typeof t=="string"||Array.isArray(t)}const us=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],hs=["initial",...us];function li(t){return ai(t.animate)||hs.some(e=>Zt(t[e]))}function Kc(t){return!!(li(t)||t.variants)}function zg(t,e){if(li(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Zt(n)?n:void 0,animate:Zt(i)?i:void 0}}return t.inherit!==!1?e:{}}function Gg(t){const{initial:e,animate:n}=zg(t,I(oi));return X(()=>({initial:e,animate:n}),[Ho(e),Ho(n)])}function Ho(t){return Array.isArray(t)?t.join(" "):t}const Qt={};function Kg(t){for(const e in t)Qt[e]=t[e],Yr(e)&&(Qt[e].isCSSVariable=!0)}function qc(t,{layout:e,layoutId:n}){return It.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Qt[t]||t==="opacity")}const qg={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Xg=Ct.length;function Yg(t,e,n){let i="",r=!0;for(let s=0;s<Xg;s++){const o=Ct[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=Fc(a,as[o]);if(!l){r=!1;const u=qg[o]||o;i+=`${u}(${c}) `}n&&(e[o]=c)}}return i=i.trim(),n?i=n(e,r?"":i):r&&(i="none"),i}function ds(t,e,n){const{style:i,vars:r,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(It.has(l)){o=!0;continue}else if(Yr(l)){r[l]=c;continue}else{const u=Fc(c,as[l]);l.startsWith("origin")?(a=!0,s[l]=u):i[l]=u}}if(e.transform||(o||n?i.transform=Yg(e,t.transform,n):i.transform&&(i.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;i.transformOrigin=`${l} ${c} ${u}`}}const fs=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Xc(t,e,n){for(const i in e)!Y(e[i])&&!qc(i,n)&&(t[i]=e[i])}function Jg({transformTemplate:t},e){return X(()=>{const n=fs();return ds(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Zg(t,e){const n=t.style||{},i={};return Xc(i,n,t),Object.assign(i,Jg(t,e)),i}function Qg(t,e){const n={},i=Zg(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}const ey={offset:"stroke-dashoffset",array:"stroke-dasharray"},ty={offset:"strokeDashoffset",array:"strokeDasharray"};function ny(t,e,n=1,i=0,r=!0){t.pathLength=1;const s=r?ey:ty;t[s.offset]=P.transform(-i);const o=P.transform(e),a=P.transform(n);t[s.array]=`${o} ${a}`}function Yc(t,{attrX:e,attrY:n,attrScale:i,pathLength:r,pathSpacing:s=1,pathOffset:o=0,...a},l,c,u){if(ds(t,a,c),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:d}=t;h.transform&&(d.transform=h.transform,delete h.transform),(d.transform||h.transformOrigin)&&(d.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),d.transform&&(d.transformBox=u?.transformBox??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),i!==void 0&&(h.scale=i),r!==void 0&&ny(h,r,s,o,!1)}const Jc=()=>({...fs(),attrs:{}}),Zc=t=>typeof t=="string"&&t.toLowerCase()==="svg";function iy(t,e,n,i){const r=X(()=>{const s=Jc();return Yc(s,e,Zc(i),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};Xc(s,t.style,t),r.style={...s,...r.style}}return r}const ry=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ps(t){return typeof t!="string"||t.includes("-")?!1:!!(ry.indexOf(t)>-1||/[A-Z]/u.test(t))}function sy(t,e,n,{latestValues:i},r,s=!1){const a=(ps(t)?iy:Qg)(e,i,r,t),l=Wg(e,typeof t=="string",s),c=t!==J?{...l,...a,ref:n}:{},{children:u}=e,h=X(()=>Y(u)?u.get():u,[u]);return D(t,{...c,children:h})}function Wo(t){const e=[{},{}];return t?.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function ms(t,e,n,i){if(typeof e=="function"){const[r,s]=Wo(i);e=e(n!==void 0?n:t.custom,r,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,s]=Wo(i);e=e(n!==void 0?n:t.custom,r,s)}return e}function Dn(t){return Y(t)?t.get():t}function oy({scrapeMotionValuesFromProps:t,createRenderState:e},n,i,r){return{latestValues:ay(n,i,r,t),renderState:e()}}function ay(t,e,n,i){const r={},s=i(t,{});for(const d in s)r[d]=Dn(s[d]);let{initial:o,animate:a}=t;const l=li(t),c=Kc(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const h=u?a:o;if(h&&typeof h!="boolean"&&!ai(h)){const d=Array.isArray(h)?h:[h];for(let f=0;f<d.length;f++){const p=ms(t,d[f]);if(p){const{transitionEnd:y,transition:g,...m}=p;for(const _ in m){let v=m[_];if(Array.isArray(v)){const b=u?v.length-1:0;v=v[b]}v!==null&&(r[_]=v)}for(const _ in y)r[_]=y[_]}}}return r}const Qc=t=>(e,n)=>{const i=I(oi),r=I(ri),s=()=>oy(t,e,i,r);return n?s():un(s)};function gs(t,e,n){const{style:i}=t,r={};for(const s in i)(Y(i[s])||e.style&&Y(e.style[s])||qc(s,t)||n?.getValue(s)?.liveStyle!==void 0)&&(r[s]=i[s]);return r}const ly=Qc({scrapeMotionValuesFromProps:gs,createRenderState:fs});function eu(t,e,n){const i=gs(t,e,n);for(const r in t)if(Y(t[r])||Y(e[r])){const s=Ct.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=t[r]}return i}const cy=Qc({scrapeMotionValuesFromProps:eu,createRenderState:Jc}),uy=Symbol.for("motionComponentSymbol");function dt(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function hy(t,e,n){return ze(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):dt(n)&&(n.current=i))},[e])}const ys=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),dy="framerAppearId",tu="data-"+ys(dy),nu=G({});function fy(t,e,n,i,r){const{visualElement:s}=I(oi),o=I(zc),a=I(ri),l=I(si).reducedMotion,c=oe(null);i=i||o.renderer,!c.current&&i&&(c.current=i(t,{visualState:e,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const u=c.current,h=I(nu);u&&!u.projection&&r&&(u.type==="html"||u.type==="svg")&&py(c.current,n,r,h);const d=oe(!1);xl(()=>{u&&d.current&&u.update(n,a)});const f=n[tu],p=oe(!!f&&!window.MotionHandoffIsComplete?.(f)&&window.MotionHasOptimisedAnimation?.(f));return jr(()=>{u&&(d.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),p.current&&u.animationState&&u.animationState.animateChanges())}),je(()=>{u&&(!p.current&&u.animationState&&u.animationState.animateChanges(),p.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(f)}),p.current=!1),u.enteringChildren=void 0)}),u}function py(t,e,n,i){const{layoutId:r,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:iu(t.parent)),t.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!o||a&&dt(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,crossfade:u,layoutScroll:l,layoutRoot:c})}function iu(t){if(t)return t.options.allowProjection!==!1?t.projection:iu(t.parent)}function Pi(t,{forwardMotionProps:e=!1}={},n,i){n&&$g(n);const r=ps(t)?cy:ly;function s(a,l){let c;const u={...I(si),...a,layoutId:my(a)},{isStatic:h}=u,d=Gg(a),f=r(a,h);if(!h&&$r){gy();const p=yy(u);c=p.MeasureLayout,d.visualElement=fy(t,f,u,i,p.ProjectionNode)}return He(oi.Provider,{value:d,children:[c&&d.visualElement?He(c,{visualElement:d.visualElement,...u}):null,sy(t,a,hy(f,d.visualElement,l),f,h,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=ti(s);return o[uy]=t,o}function my({layoutId:t}){const e=I(Br).id;return e&&t!==void 0?e+"-"+t:t}function gy(t,e){I(zc).strict}function yy(t){const{drag:e,layout:n}=bt;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function _y(t,e){if(typeof Proxy>"u")return Pi;const n=new Map,i=(s,o)=>Pi(s,o,t,e),r=(s,o)=>i(s,o);return new Proxy(r,{get:(s,o)=>o==="create"?i:(n.has(o)||n.set(o,Pi(o,void 0,t,e)),n.get(o))})}function ru({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function vy({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function wy(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function Ci(t){return t===void 0||t===1}function dr({scale:t,scaleX:e,scaleY:n}){return!Ci(t)||!Ci(e)||!Ci(n)}function Ye(t){return dr(t)||su(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function su(t){return zo(t.x)||zo(t.y)}function zo(t){return t&&t!=="0%"}function Gn(t,e,n){const i=t-n,r=e*i;return n+r}function Go(t,e,n,i,r){return r!==void 0&&(t=Gn(t,r,i)),Gn(t,n,i)+e}function fr(t,e=0,n=1,i,r){t.min=Go(t.min,e,n,i,r),t.max=Go(t.max,e,n,i,r)}function ou(t,{x:e,y:n}){fr(t.x,e.translate,e.scale,e.originPoint),fr(t.y,n.translate,n.scale,n.originPoint)}const Ko=.999999999999,qo=1.0000000000001;function by(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let s,o;for(let a=0;a<r;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&pt(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,ou(t,o)),i&&Ye(s.latestValues)&&pt(t,s.latestValues))}e.x<qo&&e.x>Ko&&(e.x=1),e.y<qo&&e.y>Ko&&(e.y=1)}function ft(t,e){t.min=t.min+e,t.max=t.max+e}function Xo(t,e,n,i,r=.5){const s=F(t.min,t.max,r);fr(t,e,n,s,i)}function pt(t,e){Xo(t.x,e.x,e.scaleX,e.scale,e.originX),Xo(t.y,e.y,e.scaleY,e.scale,e.originY)}function au(t,e){return ru(wy(t.getBoundingClientRect(),e))}function Ty(t,e,n){const i=au(t,n),{scroll:r}=e;return r&&(ft(i.x,r.offset.x),ft(i.y,r.offset.y)),i}const Yo=()=>({translate:0,scale:1,origin:0,originPoint:0}),mt=()=>({x:Yo(),y:Yo()}),Jo=()=>({min:0,max:0}),$=()=>({x:Jo(),y:Jo()}),pr={current:null},lu={current:!1};function Sy(){if(lu.current=!0,!!$r)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>pr.current=t.matches;t.addEventListener("change",e),e()}else pr.current=!1}const Ey=new WeakMap;function xy(t,e,n){for(const i in e){const r=e[i],s=n[i];if(Y(r))t.addValue(i,r);else if(Y(s))t.addValue(i,ot(r,{owner:t}));else if(s!==r)if(t.hasValue(i)){const o=t.getValue(i);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=t.getStaticValue(i);t.addValue(i,ot(o!==void 0?o:r,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const Zo=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Ay{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ss,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const d=ee.now();this.renderScheduledAt<d&&(this.renderScheduledAt=d,V.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=li(n),this.isVariantNode=Kc(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const d in h){const f=h[d];l[d]!==void 0&&Y(f)&&f.set(l[d])}}mount(e){this.current=e,Ey.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),lu.current||Sy(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:pr.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ae(this.notifyUpdate),Ae(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=It.has(e);i&&this.onBindTransform&&this.onBindTransform();const r=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&V.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in bt){const n=bt[e];if(!n)continue;const{isEnabled:i,Feature:r}=n;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):$()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<Zo.length;i++){const r=Zo[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,o=e[s];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=xy(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=ot(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(Ql(i)||tc(i))?i=parseFloat(i):!Lg(i)&&We.test(n)&&(i=Vc(e,n)),this.setBaseTarget(e,Y(i)?i.get():i)),Y(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const s=ms(this.props,n,this.presenceContext?.custom);s&&(i=s[e])}if(n&&i!==void 0)return i;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!Y(r)?r:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Kr),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){ls.render(this.render)}}class cu extends Ay{constructor(){super(...arguments),this.KeyframeResolver=bg}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Y(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function uu(t,{style:e,vars:n},i,r){const s=t.style;let o;for(o in e)s[o]=e[o];r?.applyProjectionStyles(s,i);for(o in n)s.setProperty(o,n[o])}function Py(t){return window.getComputedStyle(t)}class Cy extends cu{constructor(){super(...arguments),this.type="html",this.renderInstance=uu}readValueFromInstance(e,n){if(It.has(n))return this.projection?.isProjecting?sr(n):Bm(e,n);{const i=Py(e),r=(Yr(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return au(e,n)}build(e,n,i){ds(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return gs(e,n,i)}}const hu=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Iy(t,e,n,i){uu(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(hu.has(r)?r:ys(r),e.attrs[r])}class Ry extends cu{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=$}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(It.has(n)){const i=Nc(n);return i&&i.default||0}return n=hu.has(n)?n:ys(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return eu(e,n,i)}build(e,n,i){Yc(e,n,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,n,i,r){Iy(e,n,i,r)}mount(e){this.isSVGTag=Zc(e.tagName),super.mount(e)}}const My=(t,e)=>ps(t)?new Ry(e):new Cy(e,{allowProjection:t!==J});function gt(t,e,n){const i=t.getProps();return ms(i,e,n!==void 0?n:i.custom,t)}const mr=t=>Array.isArray(t);function ky(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ot(n))}function Dy(t){return mr(t)?t[t.length-1]||0:t}function Ly(t,e){const n=gt(t,e);let{transitionEnd:i={},transition:r={},...s}=n||{};s={...s,...i};for(const o in s){const a=Dy(s[o]);ky(t,o,a)}}function Oy(t){return!!(Y(t)&&t.add)}function gr(t,e){const n=t.getValue("willChange");if(Oy(n))return n.add(e);if(!n&&xe.WillChange){const i=new xe.WillChange("auto");t.addValue("willChange",i),i.add(e)}}function du(t){return t.props[tu]}const Ny=t=>t!==null;function Vy(t,{repeat:e,repeatType:n="loop"},i){const r=t.filter(Ny),s=e&&n!=="loop"&&e%2===1?0:r.length-1;return r[s]}const Fy={type:"spring",stiffness:500,damping:25,restSpeed:10},Uy=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),By={type:"keyframes",duration:.8},$y={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},jy=(t,{keyframes:e})=>e.length>2?By:It.has(t)?t.startsWith("scale")?Uy(e[1]):Fy:$y;function Hy({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const _s=(t,e,n,i={},r,s)=>o=>{const a=os(i,t)||{},l=a.delay||i.delay||0;let{elapsed:c=0}=i;c=c-pe(l);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:d=>{e.set(d),a.onUpdate&&a.onUpdate(d)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:r};Hy(a)||Object.assign(u,jy(t,u)),u.duration&&(u.duration=pe(u.duration)),u.repeatDelay&&(u.repeatDelay=pe(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(ur(u),u.delay===0&&(h=!0)),(xe.instantAnimations||xe.skipAnimations)&&(h=!0,ur(u),u.delay=0),u.allowFlatten=!a.type&&!a.ease,h&&!s&&e.get()!==void 0){const d=Vy(u.keyframes,a);if(d!==void 0){V.update(()=>{u.onUpdate(d),u.onComplete()});return}}return a.isSync?new rs(u):new cg(u)};function Wy({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function fu(t,e,{delay:n=0,transitionOverride:i,type:r}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=e;i&&(s=i);const l=[],c=r&&t.animationState&&t.animationState.getState()[r];for(const u in a){const h=t.getValue(u,t.latestValues[u]??null),d=a[u];if(d===void 0||c&&Wy(c,u))continue;const f={delay:n,...os(s||{},u)},p=h.get();if(p!==void 0&&!h.isAnimating&&!Array.isArray(d)&&d===p&&!f.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const m=du(t);if(m){const _=window.MotionHandoffAnimation(m,u,V);_!==null&&(f.startTime=_,y=!0)}}gr(t,u),h.start(_s(u,h,d,t.shouldReduceMotion&&Dc.has(u)?{type:!1}:f,t,y));const g=h.animation;g&&l.push(g)}return o&&Promise.all(l).then(()=>{V.update(()=>{o&&Ly(t,o)})}),l}function pu(t,e,n,i=0,r=1){const s=Array.from(t).sort((c,u)=>c.sortNodePosition(u)).indexOf(e),o=t.size,a=(o-1)*i;return typeof n=="function"?n(s,o):r===1?s*i:a-s*i}function yr(t,e,n={}){const i=gt(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:r=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const s=i?()=>Promise.all(fu(t,i,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:u,staggerDirection:h}=r;return zy(t,e,l,c,u,h,n)}:()=>Promise.resolve(),{when:a}=r;if(a){const[l,c]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>c())}else return Promise.all([s(),o(n.delay)])}function zy(t,e,n=0,i=0,r=0,s=1,o){const a=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),a.push(yr(l,e,{...o,delay:n+(typeof i=="function"?0:i)+pu(t.variantChildren,l,i,r,s)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(a)}function Gy(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>yr(t,s,n));i=Promise.all(r)}else if(typeof e=="string")i=yr(t,e,n);else{const r=typeof e=="function"?gt(t,e,n.custom):e;i=Promise.all(fu(t,r,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}function mu(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}const Ky=hs.length;function gu(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?gu(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Ky;n++){const i=hs[n],r=t.props[i];(Zt(r)||r===!1)&&(e[i]=r)}return e}const qy=[...us].reverse(),Xy=us.length;function Yy(t){return e=>Promise.all(e.map(({animation:n,options:i})=>Gy(t,n,i)))}function Jy(t){let e=Yy(t),n=Qo(),i=!0;const r=l=>(c,u)=>{const h=gt(t,u,l==="exit"?t.presenceContext?.custom:void 0);if(h){const{transition:d,transitionEnd:f,...p}=h;c={...c,...p,...f}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,u=gu(t.parent)||{},h=[],d=new Set;let f={},p=1/0;for(let g=0;g<Xy;g++){const m=qy[g],_=n[m],v=c[m]!==void 0?c[m]:u[m],b=Zt(v),w=m===l?_.isActive:null;w===!1&&(p=g);let T=v===u[m]&&v!==c[m]&&b;if(T&&i&&t.manuallyAnimateOnMount&&(T=!1),_.protectedKeys={...f},!_.isActive&&w===null||!v&&!_.prevProp||ai(v)||typeof v=="boolean")continue;const E=Zy(_.prevProp,v);let S=E||m===l&&_.isActive&&!T&&b||g>p&&b,x=!1;const C=Array.isArray(v)?v:[v];let k=C.reduce(r(m),{});w===!1&&(k={});const{prevResolvedValues:L={}}=_,z={...L,...k},R=K=>{S=!0,d.has(K)&&(x=!0,d.delete(K)),_.needsAnimating[K]=!0;const te=t.getValue(K);te&&(te.liveStyle=!1)};for(const K in z){const te=k[K],qe=L[K];if(f.hasOwnProperty(K))continue;let ut=!1;mr(te)&&mr(qe)?ut=!mu(te,qe):ut=te!==qe,ut?te!=null?R(K):d.add(K):te!==void 0&&d.has(K)?R(K):_.protectedKeys[K]=!0}_.prevProp=v,_.prevResolvedValues=k,_.isActive&&(f={...f,...k}),i&&t.blockInitialAnimation&&(S=!1);const Me=T&&E;S&&(!Me||x)&&h.push(...C.map(K=>{const te={type:m};if(typeof K=="string"&&i&&!Me&&t.manuallyAnimateOnMount&&t.parent){const{parent:qe}=t,ut=gt(qe,K);if(qe.enteringChildren&&ut){const{delayChildren:wh}=ut.transition||{};te.delay=pu(qe.enteringChildren,t,wh)}}return{animation:K,options:te}}))}if(d.size){const g={};if(typeof c.initial!="boolean"){const m=gt(t,Array.isArray(c.initial)?c.initial[0]:c.initial);m&&m.transition&&(g.transition=m.transition)}d.forEach(m=>{const _=t.getBaseTarget(m),v=t.getValue(m);v&&(v.liveStyle=!0),g[m]=_??null}),h.push({animation:g})}let y=!!h.length;return i&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(y=!1),i=!1,y?e(h):Promise.resolve()}function a(l,c){if(n[l].isActive===c)return Promise.resolve();t.variantChildren?.forEach(h=>h.animationState?.setActive(l,c)),n[l].isActive=c;const u=o(l);for(const h in n)n[h].protectedKeys={};return u}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=Qo()}}}function Zy(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!mu(e,t):!1}function Xe(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Qo(){return{animate:Xe(!0),whileInView:Xe(),whileHover:Xe(),whileTap:Xe(),whileDrag:Xe(),whileFocus:Xe(),exit:Xe()}}class Ge{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Qy extends Ge{constructor(e){super(e),e.animationState||(e.animationState=Jy(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();ai(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let e_=0;class t_ extends Ge{constructor(){super(...arguments),this.id=e_++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const n_={animation:{Feature:Qy},exit:{Feature:t_}};function en(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function pn(t){return{point:{x:t.pageX,y:t.pageY}}}const i_=t=>e=>cs(e)&&t(e,pn(e));function Bt(t,e,n,i){return en(t,e,i_(n),i)}const yu=1e-4,r_=1-yu,s_=1+yu,_u=.01,o_=0-_u,a_=0+_u;function Z(t){return t.max-t.min}function l_(t,e,n){return Math.abs(t-e)<=n}function ea(t,e,n,i=.5){t.origin=i,t.originPoint=F(e.min,e.max,t.origin),t.scale=Z(n)/Z(e),t.translate=F(n.min,n.max,t.origin)-t.originPoint,(t.scale>=r_&&t.scale<=s_||isNaN(t.scale))&&(t.scale=1),(t.translate>=o_&&t.translate<=a_||isNaN(t.translate))&&(t.translate=0)}function $t(t,e,n,i){ea(t.x,e.x,n.x,i?i.originX:void 0),ea(t.y,e.y,n.y,i?i.originY:void 0)}function ta(t,e,n){t.min=n.min+e.min,t.max=t.min+Z(e)}function c_(t,e,n){ta(t.x,e.x,n.x),ta(t.y,e.y,n.y)}function na(t,e,n){t.min=e.min-n.min,t.max=t.min+Z(e)}function jt(t,e,n){na(t.x,e.x,n.x),na(t.y,e.y,n.y)}function ie(t){return[t("x"),t("y")]}const vu=({current:t})=>t?t.ownerDocument.defaultView:null,ia=(t,e)=>Math.abs(t-e);function u_(t,e){const n=ia(t.x,e.x),i=ia(t.y,e.y);return Math.sqrt(n**2+i**2)}class wu{constructor(e,n,{transformPagePoint:i,contextWindow:r=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=Ri(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=u_(d.offset,{x:0,y:0})>=this.distanceThreshold;if(!f&&!p)return;const{point:y}=d,{timestamp:g}=q;this.history.push({...y,timestamp:g});const{onStart:m,onMove:_}=this.handlers;f||(m&&m(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=Ii(f,this.transformPagePoint),V.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:p,onSessionEnd:y,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Ri(d.type==="pointercancel"?this.lastMoveEventInfo:Ii(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(d,m),y&&y(d,m)},!cs(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=i,this.distanceThreshold=o,this.contextWindow=r||window;const a=pn(e),l=Ii(a,this.transformPagePoint),{point:c}=l,{timestamp:u}=q;this.history=[{...c,timestamp:u}];const{onSessionStart:h}=n;h&&h(e,Ri(l,this.history)),this.removeListeners=hn(Bt(this.contextWindow,"pointermove",this.handlePointerMove),Bt(this.contextWindow,"pointerup",this.handlePointerUp),Bt(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ae(this.updatePoint)}}function Ii(t,e){return e?{point:e(t.point)}:t}function ra(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Ri({point:t},e){return{point:t,delta:ra(t,bu(e)),offset:ra(t,h_(e)),velocity:d_(e,.1)}}function h_(t){return t[0]}function bu(t){return t[t.length-1]}function d_(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=bu(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>pe(e)));)n--;if(!i)return{x:0,y:0};const s=re(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function f_(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?F(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?F(n,t,i.max):Math.min(t,n)),t}function sa(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function p_(t,{top:e,left:n,bottom:i,right:r}){return{x:sa(t.x,n,r),y:sa(t.y,e,i)}}function oa(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function m_(t,e){return{x:oa(t.x,e.x),y:oa(t.y,e.y)}}function g_(t,e){let n=.5;const i=Z(t),r=Z(e);return r>i?n=Xt(e.min,e.max-i,t.min):i>r&&(n=Xt(t.min,t.max-r,e.min)),Ee(0,1,n)}function y_(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const _r=.35;function __(t=_r){return t===!1?t=0:t===!0&&(t=_r),{x:aa(t,"left","right"),y:aa(t,"top","bottom")}}function aa(t,e,n){return{min:la(t,e),max:la(t,n)}}function la(t,e){return typeof t=="number"?t:t[e]||0}const v_=new WeakMap;class w_{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=$(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:i}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(pn(h).point)},o=(h,d)=>{const{drag:f,dragPropagation:p,onDragStart:y}=this.getProps();if(f&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=xg(f),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=d,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ie(m=>{let _=this.getAxisMotionValue(m).get()||0;if(me.test(_)){const{projection:v}=this.visualElement;if(v&&v.layout){const b=v.layout.layoutBox[m];b&&(_=Z(b)*(parseFloat(_)/100))}}this.originPoint[m]=_}),y&&V.postRender(()=>y(h,d)),gr(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},a=(h,d)=>{this.latestPointerEvent=h,this.latestPanInfo=d;const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:y,onDrag:g}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:m}=d;if(p&&this.currentDirection===null){this.currentDirection=b_(m),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",d.point,m),this.updateAxis("y",d.point,m),this.visualElement.render(),g&&g(h,d)},l=(h,d)=>{this.latestPointerEvent=h,this.latestPanInfo=d,this.stop(h,d),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>ie(h=>this.getAnimationState(h)==="paused"&&this.getAxisMotionValue(h).animation?.play()),{dragSnapToOrigin:u}=this.getProps();this.panSession=new wu(e,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:i,contextWindow:vu(this.visualElement)})}stop(e,n){const i=e||this.latestPointerEvent,r=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!r||!i)return;const{velocity:o}=r;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&V.postRender(()=>a(i,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!An(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=f_(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;e&&dt(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=p_(i.layoutBox,e):this.constraints=!1,this.elastic=__(n),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&ie(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=y_(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!dt(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=Ty(i,r.root,this.visualElement.getTransformPagePoint());let o=m_(r.layout.layoutBox,s);if(n){const a=n(vy(o));this.hasMutatedConstraints=!!a,a&&(o=ru(a))}return o}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=ie(u=>{if(!An(u,n,this.currentDirection))return;let h=l&&l[u]||{};o&&(h={min:0,max:0});const d=r?200:1e6,f=r?40:1e7,p={type:"inertia",velocity:i?e[u]:0,bounceStiffness:d,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(u,p)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return gr(this.visualElement,e),i.start(_s(e,i,0,n,this.visualElement,!1))}stopAnimation(){ie(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ie(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){ie(n=>{const{drag:i}=this.getProps();if(!An(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(n);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[n];s.set(e[n]-F(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!dt(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};ie(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();r[o]=g_({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),ie(o=>{if(!An(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(F(l,c,r[o]))})}addListeners(){if(!this.visualElement.current)return;v_.set(this.visualElement,this);const e=this.visualElement.current,n=Bt(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();dt(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),V.read(i);const o=en(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(ie(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=l[u].translate,h.set(h.get()+l[u].translate))}),this.visualElement.render())}));return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=_r,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function An(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function b_(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class T_ extends Ge{constructor(e){super(e),this.removeGroupControls=ae,this.removeListeners=ae,this.controls=new w_(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ae}unmount(){this.removeGroupControls(),this.removeListeners()}}const ca=t=>(e,n)=>{t&&V.postRender(()=>t(e,n))};class S_ extends Ge{constructor(){super(...arguments),this.removePointerDownListener=ae}onPointerDown(e){this.session=new wu(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:vu(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:ca(e),onStart:ca(n),onMove:i,onEnd:(s,o)=>{delete this.session,r&&V.postRender(()=>r(s,o))}}}mount(){this.removePointerDownListener=Bt(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ln={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ua(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Dt={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(P.test(t))t=parseFloat(t);else return t;const n=ua(t,e.target.x),i=ua(t,e.target.y);return`${n}% ${i}%`}},E_={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=We.parse(t);if(r.length>5)return i;const s=We.createTransformer(t),o=typeof r[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const c=F(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=c),typeof r[3+o]=="number"&&(r[3+o]/=c),s(r)}};let Mi=!1;class x_ extends se{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;Kg(A_),s&&(n.group&&n.group.add(s),i&&i.register&&r&&i.register(s),Mi&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Ln.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:s}=this.props,{projection:o}=i;return o&&(o.isPresent=s,Mi=!0,r||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||V.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),ls.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;Mi=!0,r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Tu(t){const[e,n]=Wc(),i=I(Br);return He(x_,{...t,layoutGroup:i,switchLayoutGroup:I(nu),isPresent:e,safeToRemove:n})}const A_={borderRadius:{...Dt,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Dt,borderTopRightRadius:Dt,borderBottomLeftRadius:Dt,borderBottomRightRadius:Dt,boxShadow:E_};function P_(t,e,n){const i=Y(t)?t:ot(t);return i.start(_s("",i,e,n)),i.animation}const C_=(t,e)=>t.depth-e.depth;class I_{constructor(){this.children=[],this.isDirty=!1}add(e){Hr(this.children,e),this.isDirty=!0}remove(e){Wr(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(C_),this.isDirty=!1,this.children.forEach(e)}}function R_(t,e){const n=ee.now(),i=({timestamp:r})=>{const s=r-n;s>=e&&(Ae(i),t(s-e))};return V.setup(i,!0),()=>Ae(i)}const Su=["TopLeft","TopRight","BottomLeft","BottomRight"],M_=Su.length,ha=t=>typeof t=="string"?parseFloat(t):t,da=t=>typeof t=="number"||P.test(t);function k_(t,e,n,i,r,s){r?(t.opacity=F(0,n.opacity??1,D_(i)),t.opacityExit=F(e.opacity??1,0,L_(i))):s&&(t.opacity=F(e.opacity??1,n.opacity??1,i));for(let o=0;o<M_;o++){const a=`border${Su[o]}Radius`;let l=fa(e,a),c=fa(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||da(l)===da(c)?(t[a]=Math.max(F(ha(l),ha(c),i),0),(me.test(c)||me.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=F(e.rotate||0,n.rotate||0,i))}function fa(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const D_=Eu(0,.5,cc),L_=Eu(.5,.95,ae);function Eu(t,e,n){return i=>i<t?0:i>e?1:n(Xt(t,e,i))}function pa(t,e){t.min=e.min,t.max=e.max}function ne(t,e){pa(t.x,e.x),pa(t.y,e.y)}function ma(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function ga(t,e,n,i,r){return t-=e,t=Gn(t,1/n,i),r!==void 0&&(t=Gn(t,1/r,i)),t}function O_(t,e=0,n=1,i=.5,r,s=t,o=t){if(me.test(e)&&(e=parseFloat(e),e=F(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=F(s.min,s.max,i);t===s&&(a-=e),t.min=ga(t.min,e,n,a,r),t.max=ga(t.max,e,n,a,r)}function ya(t,e,[n,i,r],s,o){O_(t,e[n],e[i],e[r],e.scale,s,o)}const N_=["x","scaleX","originX"],V_=["y","scaleY","originY"];function _a(t,e,n,i){ya(t.x,e,N_,n?n.x:void 0,i?i.x:void 0),ya(t.y,e,V_,n?n.y:void 0,i?i.y:void 0)}function va(t){return t.translate===0&&t.scale===1}function xu(t){return va(t.x)&&va(t.y)}function wa(t,e){return t.min===e.min&&t.max===e.max}function F_(t,e){return wa(t.x,e.x)&&wa(t.y,e.y)}function ba(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Au(t,e){return ba(t.x,e.x)&&ba(t.y,e.y)}function Ta(t){return Z(t.x)/Z(t.y)}function Sa(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class U_{constructor(){this.members=[]}add(e){Hr(this.members,e),e.scheduleRender()}remove(e){if(Wr(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function B_(t,e,n){let i="";const r=t.x.translate/e.x,s=t.y.translate/e.y,o=n?.z||0;if((r||s||o)&&(i=`translate3d(${r}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:h,rotateY:d,skewX:f,skewY:p}=n;c&&(i=`perspective(${c}px) ${i}`),u&&(i+=`rotate(${u}deg) `),h&&(i+=`rotateX(${h}deg) `),d&&(i+=`rotateY(${d}deg) `),f&&(i+=`skewX(${f}deg) `),p&&(i+=`skewY(${p}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(i+=`scale(${a}, ${l})`),i||"none"}const ki=["","X","Y","Z"],$_=1e3;let j_=0;function Di(t,e,n,i){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),i&&(i[t]=0))}function Pu(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=du(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",V,!(r||s))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&Pu(i)}function Cu({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=e?.()){this.id=j_++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(z_),this.nodes.forEach(X_),this.nodes.forEach(Y_),this.nodes.forEach(G_)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new I_)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Kr),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=Hc(o)&&!Mg(o),this.instance=o;const{layoutId:a,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),t){let u,h=0;const d=()=>this.root.updateBlockedByResize=!1;V.read(()=>{h=window.innerWidth}),t(o,()=>{const f=window.innerWidth;f!==h&&(h=f,this.root.updateBlockedByResize=!0,u&&u(),u=R_(d,250),Ln.hasAnimatedSinceResize&&(Ln.hasAnimatedSinceResize=!1,this.nodes.forEach(Aa)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&c&&(a||l)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:h,hasRelativeLayoutChanged:d,layout:f})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||c.getDefaultTransition()||t0,{onLayoutAnimationStart:y,onLayoutAnimationComplete:g}=c.getProps(),m=!this.targetLayout||!Au(this.targetLayout,f),_=!h&&d;if(this.options.layoutRoot||this.resumeFrom||_||h&&(m||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const v={...os(p,"layout"),onPlay:y,onComplete:g};(c.shouldReduceMotion||this.options.layoutRoot)&&(v.delay=0,v.type=!1),this.startAnimation(v),this.setAnimationOrigin(u,_)}else h||Aa(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=f})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ae(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(J_),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Pu(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ea);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(xa);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(q_),this.nodes.forEach(H_),this.nodes.forEach(W_)):this.nodes.forEach(xa),this.clearAllSnapshots();const a=ee.now();q.delta=Ee(0,1e3/60,a-q.timestamp),q.timestamp=a,q.isProcessing=!0,bi.update.process(q),bi.preRender.process(q),bi.render.process(q),q.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ls.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(K_),this.sharedNodes.forEach(Z_)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,V.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){V.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Z(this.snapshot.measuredBox.x)&&!Z(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=$(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!xu(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&this.instance&&(a||Ye(this.latestValues)||u)&&(r(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),n0(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return $();const a=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(i0))){const{scroll:c}=this.root;c&&(ft(a.x,c.offset.x),ft(a.y,c.offset.y))}return a}removeElementScroll(o){const a=$();if(ne(a,o),this.scroll?.wasRoot)return a;for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:u,options:h}=c;c!==this.root&&u&&h.layoutScroll&&(u.wasRoot&&ne(a,o),ft(a.x,u.offset.x),ft(a.y,u.offset.y))}return a}applyTransform(o,a=!1){const l=$();ne(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&pt(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Ye(u.latestValues)&&pt(l,u.latestValues)}return Ye(this.latestValues)&&pt(l,this.latestValues),l}removeTransform(o){const a=$();ne(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Ye(c.latestValues))continue;dr(c.latestValues)&&c.updateSnapshot();const u=$(),h=c.measurePageBox();ne(u,h),_a(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Ye(this.latestValues)&&_a(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==q.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:h}=this.options;if(!(!this.layout||!(u||h))){if(this.resolvedRelativeTargetAt=q.timestamp,!this.targetDelta&&!this.relativeTarget){const d=this.getClosestProjectingParent();d&&d.layout&&this.animationProgress!==1?(this.relativeParent=d,this.forceRelativeParentToResolveTarget(),this.relativeTarget=$(),this.relativeTargetOrigin=$(),jt(this.relativeTargetOrigin,this.layout.layoutBox,d.layout.layoutBox),ne(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=$(),this.targetWithTransforms=$()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),c_(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ne(this.target,this.layout.layoutBox),ou(this.target,this.targetDelta)):ne(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const d=this.getClosestProjectingParent();d&&!!d.resumingFrom==!!this.resumingFrom&&!d.options.layoutScroll&&d.target&&this.animationProgress!==1?(this.relativeParent=d,this.forceRelativeParentToResolveTarget(),this.relativeTarget=$(),this.relativeTargetOrigin=$(),jt(this.relativeTargetOrigin,this.target,d.target),ne(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||dr(this.parent.latestValues)||su(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===q.timestamp&&(l=!1),l)return;const{layout:c,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||u))return;ne(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,d=this.treeScale.y;by(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=$());const{target:f}=o;if(!f){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ma(this.prevProjectionDelta.x,this.projectionDelta.x),ma(this.prevProjectionDelta.y,this.projectionDelta.y)),$t(this.projectionDelta,this.layoutCorrected,f,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==d||!Sa(this.projectionDelta.x,this.prevProjectionDelta.x)||!Sa(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",f))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=mt(),this.projectionDelta=mt(),this.projectionDeltaWithTransform=mt()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},h=mt();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const d=$(),f=l?l.source:void 0,p=this.layout?this.layout.source:void 0,y=f!==p,g=this.getStack(),m=!g||g.members.length<=1,_=!!(y&&!m&&this.options.crossfade===!0&&!this.path.some(e0));this.animationProgress=0;let v;this.mixTargetDelta=b=>{const w=b/1e3;Pa(h.x,o.x,w),Pa(h.y,o.y,w),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(jt(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Q_(this.relativeTarget,this.relativeTargetOrigin,d,w),v&&F_(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=$()),ne(v,this.relativeTarget)),y&&(this.animationValues=u,k_(u,c,this.latestValues,w,_,m)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Ae(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=V.update(()=>{Ln.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ot(0)),this.currentAnimation=P_(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta($_),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&Iu(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||$();const h=Z(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const d=Z(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+d}ne(a,l),pt(a,u),$t(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new U_),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&Di("z",o,c,this.animationValues);for(let u=0;u<ki.length;u++)Di(`rotate${ki[u]}`,o,c,this.animationValues),Di(`skew${ki[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Dn(a?.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Dn(a?.pointerEvents)||""),this.hasProjected&&!Ye(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const u=c.animationValues||c.latestValues;this.applyTransformsToTarget();let h=B_(this.projectionDeltaWithTransform,this.treeScale,u);l&&(h=l(u,h)),o.transform=h;const{x:d,y:f}=this.projectionDelta;o.transformOrigin=`${d.origin*100}% ${f.origin*100}% 0`,c.animationValues?o.opacity=c===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:o.opacity=c===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const p in Qt){if(u[p]===void 0)continue;const{correct:y,applyTo:g,isCSSVariable:m}=Qt[p],_=h==="none"?u[p]:y(u[p],c);if(g){const v=g.length;for(let b=0;b<v;b++)o[g[b]]=_}else m?this.options.visualElement.renderState.vars[p]=_:o[p]=_}this.options.layoutId&&(o.pointerEvents=c===this?Dn(a?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(Ea),this.root.sharedNodes.clear()}}}function H_(t){t.updateLayout()}function W_(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=t.layout,{animationType:r}=t.options,s=e.source!==t.layout.source;r==="size"?ie(u=>{const h=s?e.measuredBox[u]:e.layoutBox[u],d=Z(h);h.min=n[u].min,h.max=h.min+d}):Iu(r,e.layoutBox,n)&&ie(u=>{const h=s?e.measuredBox[u]:e.layoutBox[u],d=Z(n[u]);h.max=h.min+d,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[u].max=t.relativeTarget[u].min+d)});const o=mt();$t(o,n,e.layoutBox);const a=mt();s?$t(a,t.applyTransform(i,!0),e.measuredBox):$t(a,n,e.layoutBox);const l=!xu(o);let c=!1;if(!t.resumeFrom){const u=t.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:h,layout:d}=u;if(h&&d){const f=$();jt(f,e.layoutBox,h.layoutBox);const p=$();jt(p,n,d.layoutBox),Au(f,p)||(c=!0),u.options.layoutRoot&&(t.relativeTarget=p,t.relativeTargetOrigin=f,t.relativeParent=u)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:a,layoutDelta:o,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function z_(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function G_(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function K_(t){t.clearSnapshot()}function Ea(t){t.clearMeasurements()}function xa(t){t.isLayoutDirty=!1}function q_(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Aa(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function X_(t){t.resolveTargetDelta()}function Y_(t){t.calcProjection()}function J_(t){t.resetSkewAndRotation()}function Z_(t){t.removeLeadSnapshot()}function Pa(t,e,n){t.translate=F(e.translate,0,n),t.scale=F(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Ca(t,e,n,i){t.min=F(e.min,n.min,i),t.max=F(e.max,n.max,i)}function Q_(t,e,n,i){Ca(t.x,e.x,n.x,i),Ca(t.y,e.y,n.y,i)}function e0(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const t0={duration:.45,ease:[.4,0,.1,1]},Ia=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Ra=Ia("applewebkit/")&&!Ia("chrome/")?Math.round:ae;function Ma(t){t.min=Ra(t.min),t.max=Ra(t.max)}function n0(t){Ma(t.x),Ma(t.y)}function Iu(t,e,n){return t==="position"||t==="preserve-aspect"&&!l_(Ta(e),Ta(n),.2)}function i0(t){return t!==t.root&&t.scroll?.wasRoot}const r0=Cu({attachResizeListener:(t,e)=>en(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Li={current:void 0},Ru=Cu({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Li.current){const t=new r0({});t.mount(window),t.setOptions({layoutScroll:!0}),Li.current=t}return Li.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),s0={pan:{Feature:S_},drag:{Feature:T_,ProjectionNode:Ru,MeasureLayout:Tu}};function ka(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,s=i[r];s&&V.postRender(()=>s(e,pn(e)))}class o0 extends Ge{mount(){const{current:e}=this.node;e&&(this.unmount=Ag(e,(n,i)=>(ka(this.node,i,"Start"),r=>ka(this.node,r,"End"))))}unmount(){}}class a0 extends Ge{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=hn(en(this.node.current,"focus",()=>this.onFocus()),en(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Da(t,e,n){const{props:i}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),s=i[r];s&&V.postRender(()=>s(e,pn(e)))}class l0 extends Ge{mount(){const{current:e}=this.node;e&&(this.unmount=Rg(e,(n,i)=>(Da(this.node,i,"Start"),(r,{success:s})=>Da(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const vr=new WeakMap,Oi=new WeakMap,c0=t=>{const e=vr.get(t.target);e&&e(t)},u0=t=>{t.forEach(c0)};function h0({root:t,...e}){const n=t||document;Oi.has(n)||Oi.set(n,{});const i=Oi.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(u0,{root:t,...e})),i[r]}function d0(t,e,n){const i=h0(e);return vr.set(t,n),i.observe(t),()=>{vr.delete(t),i.unobserve(t)}}const f0={some:0,all:1};class p0 extends Ge{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:f0[r]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),d=c?u:h;d&&d(l)};return d0(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(m0(e,n))&&this.startObserver()}unmount(){}}function m0({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const g0={inView:{Feature:p0},tap:{Feature:l0},focus:{Feature:a0},hover:{Feature:o0}},y0={layout:{ProjectionNode:Ru,MeasureLayout:Tu}},_0={...n_,...g0,...s0,...y0},yb=_y(_0,My);function v0(t){const e=un(()=>ot(t)),{isStatic:n}=I(si);if(n){const[,i]=st(t);je(()=>e.on("change",i),[])}return e}function Mu(t,e){const n=v0(e()),i=()=>n.set(e());return i(),jr(()=>{const r=()=>V.preRender(i,!1,!0),s=t.map(o=>o.on("change",r));return()=>{s.forEach(o=>o()),Ae(i)}}),n}function w0(t){Ut.current=[],t();const e=Mu(Ut.current,t);return Ut.current=void 0,e}function _b(t,e,n,i){if(typeof t=="function")return w0(t);const r=typeof e=="function"?e:kg(e,n,i);return Array.isArray(t)?La(t,r):La([t],([s])=>r(s))}function La(t,e){const n=un(()=>[]);return Mu(t,()=>{n.length=0;const i=t.length;for(let r=0;r<i;r++)n[r]=t[r].get();return e(n)})}const b0=()=>{};var Oa={};const ku=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},T0=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Du={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,c=l?t[r+2]:0,u=s>>2,h=(s&3)<<4|a>>4;let d=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(d=64)),i.push(n[u],n[h],n[d],n[f])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ku(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):T0(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const h=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||c==null||h==null)throw new S0;const d=s<<2|a>>4;if(i.push(d),c!==64){const f=a<<4&240|c>>2;if(i.push(f),h!==64){const p=c<<6&192|h;i.push(p)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class S0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const E0=function(t){const e=ku(t);return Du.encodeByteArray(e,!0)},Lu=function(t){return E0(t).replace(/\./g,"")},Ou=function(t){try{return Du.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function x0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const A0=()=>x0().__FIREBASE_DEFAULTS__,P0=()=>{if(typeof process>"u"||typeof Oa>"u")return;const t=Oa.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},C0=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ou(t[1]);return e&&JSON.parse(e)},vs=()=>{try{return b0()||A0()||P0()||C0()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},I0=t=>vs()?.emulatorHosts?.[t],Nu=()=>vs()?.config,Vu=t=>vs()?.[`_${t}`];class R0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}function ci(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function M0(t){return(await fetch(t,{credentials:"include"})).ok}const Ht={};function k0(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ht))Ht[e]?t.emulator.push(e):t.prod.push(e);return t}function D0(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Na=!1;function L0(t,e){if(typeof window>"u"||typeof document>"u"||!ci(window.location.host)||Ht[t]===e||Ht[t]||Na)return;Ht[t]=e;function n(d){return`__firebase__banner__${d}`}const i="__firebase__banner",s=k0().prod.length>0;function o(){const d=document.getElementById(i);d&&d.remove()}function a(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function l(d,f){d.setAttribute("width","24"),d.setAttribute("id",f),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function c(){const d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{Na=!0,o()},d}function u(d,f){d.setAttribute("id",f),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function h(){const d=D0(i),f=n("text"),p=document.getElementById(f)||document.createElement("span"),y=n("learnmore"),g=document.getElementById(y)||document.createElement("a"),m=n("preprendIcon"),_=document.getElementById(m)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){const v=d.element;a(v),u(g,y);const b=c();l(_,m),v.append(_,p,g,b),document.body.appendChild(v)}s?(p.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,p.innerText="Preview backend running in this workspace."),p.setAttribute("id",f)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}function Q(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function O0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Q())}function N0(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function V0(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function F0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function U0(){const t=Q();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function B0(){try{return typeof indexedDB=="object"}catch{return!1}}function $0(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(n){e(n)}})}const j0="FirebaseError";class Ke extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=j0,Object.setPrototypeOf(this,Ke.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mn.prototype.create)}}class mn{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?H0(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Ke(r,a,i)}}function H0(t,e){return t.replace(W0,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const W0=/\{\$([^}]+)}/g;function z0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Tt(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],o=e[r];if(Va(s)&&Va(o)){if(!Tt(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Va(t){return t!==null&&typeof t=="object"}function gn(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function G0(t,e){const n=new K0(t,e);return n.subscribe.bind(n)}class K0{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");q0(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Ni),r.error===void 0&&(r.error=Ni),r.complete===void 0&&(r.complete=Ni);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function q0(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ni(){}function ct(t){return t&&t._delegate?t._delegate:t}class St{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Je="[DEFAULT]";class X0{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new R0;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(J0(e))try{this.getOrInitializeService({instanceIdentifier:Je})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Je){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Je){return this.instances.has(e)}getOptions(e=Je){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Y0(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Je){return this.component?this.component.multipleInstances?e:Je:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Y0(t){return t===Je?void 0:t}function J0(t){return t.instantiationMode==="EAGER"}class Z0{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new X0(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var O;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(O||(O={}));const Q0={debug:O.DEBUG,verbose:O.VERBOSE,info:O.INFO,warn:O.WARN,error:O.ERROR,silent:O.SILENT},ev=O.INFO,tv={[O.DEBUG]:"log",[O.VERBOSE]:"log",[O.INFO]:"info",[O.WARN]:"warn",[O.ERROR]:"error"},nv=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=tv[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Fu{constructor(e){this.name=e,this._logLevel=ev,this._logHandler=nv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in O))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Q0[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,O.DEBUG,...e),this._logHandler(this,O.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,O.VERBOSE,...e),this._logHandler(this,O.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,O.INFO,...e),this._logHandler(this,O.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,O.WARN,...e),this._logHandler(this,O.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,O.ERROR,...e),this._logHandler(this,O.ERROR,...e)}}const iv=(t,e)=>e.some(n=>t instanceof n);let Fa,Ua;function rv(){return Fa||(Fa=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sv(){return Ua||(Ua=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Uu=new WeakMap,wr=new WeakMap,Bu=new WeakMap,Vi=new WeakMap,ws=new WeakMap;function ov(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ue(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Uu.set(n,t)}).catch(()=>{}),ws.set(e,t),e}function av(t){if(wr.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});wr.set(t,e)}let br={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return wr.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Bu.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ue(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function lv(t){br=t(br)}function cv(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Fi(this),e,...n);return Bu.set(i,e.sort?e.sort():[e]),Ue(i)}:sv().includes(t)?function(...e){return t.apply(Fi(this),e),Ue(Uu.get(this))}:function(...e){return Ue(t.apply(Fi(this),e))}}function uv(t){return typeof t=="function"?cv(t):(t instanceof IDBTransaction&&av(t),iv(t,rv())?new Proxy(t,br):t)}function Ue(t){if(t instanceof IDBRequest)return ov(t);if(Vi.has(t))return Vi.get(t);const e=uv(t);return e!==t&&(Vi.set(t,e),ws.set(e,t)),e}const Fi=t=>ws.get(t);function hv(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=Ue(o);return i&&o.addEventListener("upgradeneeded",l=>{i(Ue(o.result),l.oldVersion,l.newVersion,Ue(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const dv=["get","getKey","getAll","getAllKeys","count"],fv=["put","add","delete","clear"],Ui=new Map;function Ba(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ui.get(e))return Ui.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=fv.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||dv.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&l.done]))[0]};return Ui.set(e,s),s}lv(t=>({...t,get:(e,n,i)=>Ba(e,n)||t.get(e,n,i),has:(e,n)=>!!Ba(e,n)||t.has(e,n)}));class pv{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(mv(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function mv(t){return t.getComponent()?.type==="VERSION"}const Tr="@firebase/app",$a="0.14.6";const Pe=new Fu("@firebase/app"),gv="@firebase/app-compat",yv="@firebase/analytics-compat",_v="@firebase/analytics",vv="@firebase/app-check-compat",wv="@firebase/app-check",bv="@firebase/auth",Tv="@firebase/auth-compat",Sv="@firebase/database",Ev="@firebase/data-connect",xv="@firebase/database-compat",Av="@firebase/functions",Pv="@firebase/functions-compat",Cv="@firebase/installations",Iv="@firebase/installations-compat",Rv="@firebase/messaging",Mv="@firebase/messaging-compat",kv="@firebase/performance",Dv="@firebase/performance-compat",Lv="@firebase/remote-config",Ov="@firebase/remote-config-compat",Nv="@firebase/storage",Vv="@firebase/storage-compat",Fv="@firebase/firestore",Uv="@firebase/ai",Bv="@firebase/firestore-compat",$v="firebase",jv="12.6.0";const Sr="[DEFAULT]",Hv={[Tr]:"fire-core",[gv]:"fire-core-compat",[_v]:"fire-analytics",[yv]:"fire-analytics-compat",[wv]:"fire-app-check",[vv]:"fire-app-check-compat",[bv]:"fire-auth",[Tv]:"fire-auth-compat",[Sv]:"fire-rtdb",[Ev]:"fire-data-connect",[xv]:"fire-rtdb-compat",[Av]:"fire-fn",[Pv]:"fire-fn-compat",[Cv]:"fire-iid",[Iv]:"fire-iid-compat",[Rv]:"fire-fcm",[Mv]:"fire-fcm-compat",[kv]:"fire-perf",[Dv]:"fire-perf-compat",[Lv]:"fire-rc",[Ov]:"fire-rc-compat",[Nv]:"fire-gcs",[Vv]:"fire-gcs-compat",[Fv]:"fire-fst",[Bv]:"fire-fst-compat",[Uv]:"fire-vertex","fire-js":"fire-js",[$v]:"fire-js-all"};const Kn=new Map,Wv=new Map,Er=new Map;function ja(t,e){try{t.container.addComponent(e)}catch(n){Pe.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function tn(t){const e=t.name;if(Er.has(e))return Pe.debug(`There were multiple attempts to register component ${e}.`),!1;Er.set(e,t);for(const n of Kn.values())ja(n,t);for(const n of Wv.values())ja(n,t);return!0}function $u(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function de(t){return t==null?!1:t.settings!==void 0}const zv={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Be=new mn("app","Firebase",zv);class Gv{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new St("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Be.create("app-deleted",{appName:this._name})}}const yn=jv;function Kv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:Sr,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw Be.create("bad-app-name",{appName:String(r)});if(n||(n=Nu()),!n)throw Be.create("no-options");const s=Kn.get(r);if(s){if(Tt(n,s.options)&&Tt(i,s.config))return s;throw Be.create("duplicate-app",{appName:r})}const o=new Z0(r);for(const l of Er.values())o.addComponent(l);const a=new Gv(n,i,o);return Kn.set(r,a),a}function qv(t=Sr){const e=Kn.get(t);if(!e&&t===Sr&&Nu())return Kv();if(!e)throw Be.create("no-app",{appName:t});return e}function Wt(t,e,n){let i=Hv[t]??t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),s=e.match(/\s|\//);if(r||s){const o=[`Unable to register library "${i}" with version "${e}":`];r&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pe.warn(o.join(" "));return}tn(new St(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Xv="firebase-heartbeat-database",Yv=1,nn="firebase-heartbeat-store";let Bi=null;function ju(){return Bi||(Bi=hv(Xv,Yv,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(nn)}catch(n){console.warn(n)}}}}).catch(t=>{throw Be.create("idb-open",{originalErrorMessage:t.message})})),Bi}async function Jv(t){try{const n=(await ju()).transaction(nn),i=await n.objectStore(nn).get(Hu(t));return await n.done,i}catch(e){if(e instanceof Ke)Pe.warn(e.message);else{const n=Be.create("idb-get",{originalErrorMessage:e?.message});Pe.warn(n.message)}}}async function Ha(t,e){try{const i=(await ju()).transaction(nn,"readwrite");await i.objectStore(nn).put(e,Hu(t)),await i.done}catch(n){if(n instanceof Ke)Pe.warn(n.message);else{const i=Be.create("idb-set",{originalErrorMessage:n?.message});Pe.warn(i.message)}}}function Hu(t){return`${t.name}!${t.options.appId}`}const Zv=1024,Qv=30;class e1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new n1(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Wa();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>Qv){const r=i1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Pe.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Wa(),{heartbeatsToSend:n,unsentEntries:i}=t1(this._heartbeatsCache.heartbeats),r=Lu(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return Pe.warn(e),""}}}function Wa(){return new Date().toISOString().substring(0,10)}function t1(t,e=Zv){const n=[];let i=t.slice();for(const r of t){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),za(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),za(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class n1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return B0()?$0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Jv(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Ha(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Ha(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function za(t){return Lu(JSON.stringify({version:2,heartbeats:t})).length}function i1(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}function r1(t){tn(new St("platform-logger",e=>new pv(e),"PRIVATE")),tn(new St("heartbeat",e=>new e1(e),"PRIVATE")),Wt(Tr,$a,t),Wt(Tr,$a,"esm2020"),Wt("fire-js","")}r1("");function Wu(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const s1=Wu,zu=new mn("auth","Firebase",Wu());const qn=new Fu("@firebase/auth");function o1(t,...e){qn.logLevel<=O.WARN&&qn.warn(`Auth (${yn}): ${t}`,...e)}function On(t,...e){qn.logLevel<=O.ERROR&&qn.error(`Auth (${yn}): ${t}`,...e)}function ye(t,...e){throw Ts(t,...e)}function ue(t,...e){return Ts(t,...e)}function bs(t,e,n){const i={...s1(),[e]:n};return new mn("auth","Firebase",i).create(e,{appName:t.name})}function rt(t){return bs(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function a1(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&ye(t,"argument-error"),bs(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ts(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return zu.create(t,...e)}function A(t,e,...n){if(!t)throw Ts(e,...n)}function ve(t){const e="INTERNAL ASSERTION FAILED: "+t;throw On(e),new Error(e)}function Ce(t,e){t||ve(e)}function xr(){return typeof self<"u"&&self.location?.href||""}function l1(){return Ga()==="http:"||Ga()==="https:"}function Ga(){return typeof self<"u"&&self.location?.protocol||null}function c1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(l1()||V0()||"connection"in navigator)?navigator.onLine:!0}function u1(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class _n{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ce(n>e,"Short delay should be less than long delay!"),this.isMobile=O0()||F0()}get(){return c1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ss(t,e){Ce(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Gu{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ve("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ve("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ve("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const h1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const d1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],f1=new _n(3e4,6e4);function Es(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Rt(t,e,n,i,r={}){return Ku(t,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=gn({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...s};return N0()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&ci(t.emulatorConfig.host)&&(c.credentials="include"),Gu.fetch()(await qu(t,t.config.apiHost,n,a),c)})}async function Ku(t,e,n){t._canInitEmulator=!1;const i={...h1,...e};try{const r=new m1(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Pn(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pn(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Pn(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Pn(t,"user-disabled",o);const u=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw bs(t,u,c);ye(t,u)}}catch(r){if(r instanceof Ke)throw r;ye(t,"network-request-failed",{message:String(r)})}}async function p1(t,e,n,i,r={}){const s=await Rt(t,e,n,i,r);return"mfaPendingCredential"in s&&ye(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function qu(t,e,n,i){const r=`${e}${n}?${i}`,s=t,o=s.config.emulator?Ss(t.config,r):`${t.config.apiScheme}://${r}`;return d1.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}class m1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(ue(this.auth,"network-request-failed")),f1.get())})}}function Pn(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=ue(t,e,i);return r.customData._tokenResponse=n,r}async function g1(t,e){return Rt(t,"POST","/v1/accounts:delete",e)}async function Xn(t,e){return Rt(t,"POST","/v1/accounts:lookup",e)}function zt(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function y1(t,e=!1){const n=ct(t),i=await n.getIdToken(e),r=xs(i);A(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:zt($i(r.auth_time)),issuedAtTime:zt($i(r.iat)),expirationTime:zt($i(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function $i(t){return Number(t)*1e3}function xs(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return On("JWT malformed, contained fewer than 3 sections"),null;try{const r=Ou(n);return r?JSON.parse(r):(On("Failed to decode base64 JWT payload"),null)}catch(r){return On("Caught error parsing JWT payload as JSON",r?.toString()),null}}function Ka(t){const e=xs(t);return A(e,"internal-error"),A(typeof e.exp<"u","internal-error"),A(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function rn(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Ke&&_1(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function _1({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class v1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Ar{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zt(this.lastLoginAt),this.creationTime=zt(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Yn(t){const e=t.auth,n=await t.getIdToken(),i=await rn(t,Xn(e,{idToken:n}));A(i?.users.length,e,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const s=r.providerUserInfo?.length?Xu(r.providerUserInfo):[],o=b1(t.providerData,s),a=t.isAnonymous,l=!(t.email&&r.passwordHash)&&!o?.length,c=a?l:!1,u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Ar(r.createdAt,r.lastLoginAt),isAnonymous:c};Object.assign(t,u)}async function w1(t){const e=ct(t);await Yn(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function b1(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function Xu(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function T1(t,e){const n=await Ku(t,{},async()=>{const i=gn({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=await qu(t,r,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:i};return t.emulatorConfig&&ci(t.emulatorConfig.host)&&(l.credentials="include"),Gu.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function S1(t,e){return Rt(t,"POST","/v2/accounts:revokeToken",Es(t,e))}class yt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){A(e.idToken,"internal-error"),A(typeof e.idToken<"u","internal-error"),A(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ka(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){A(e.length!==0,"internal-error");const n=Ka(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(A(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await T1(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new yt;return i&&(A(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(A(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(A(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new yt,this.toJSON())}_performRefresh(){return ve("not implemented")}}function ke(t,e){A(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ce{constructor({uid:e,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new v1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Ar(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await rn(this,this.stsTokenManager.getToken(this.auth,e));return A(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return y1(this,e)}reload(){return w1(this)}_assign(e){this!==e&&(A(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ce({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){A(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Yn(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(de(this.auth.app))return Promise.reject(rt(this.auth));const e=await this.getIdToken();return await rn(this,g1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,r=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:h,emailVerified:d,isAnonymous:f,providerData:p,stsTokenManager:y}=n;A(h&&y,e,"internal-error");const g=yt.fromJSON(this.name,y);A(typeof h=="string",e,"internal-error"),ke(i,e.name),ke(r,e.name),A(typeof d=="boolean",e,"internal-error"),A(typeof f=="boolean",e,"internal-error"),ke(s,e.name),ke(o,e.name),ke(a,e.name),ke(l,e.name),ke(c,e.name),ke(u,e.name);const m=new ce({uid:h,auth:e,email:r,emailVerified:d,displayName:i,isAnonymous:f,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:g,createdAt:c,lastLoginAt:u});return p&&Array.isArray(p)&&(m.providerData=p.map(_=>({..._}))),l&&(m._redirectEventId=l),m}static async _fromIdTokenResponse(e,n,i=!1){const r=new yt;r.updateFromServerResponse(n);const s=new ce({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Yn(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];A(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?Xu(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,a=new yt;a.updateFromIdToken(i);const l=new ce({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Ar(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(l,c),l}}const qa=new Map;function we(t){Ce(t instanceof Function,"Expected a class definition");let e=qa.get(t);return e?(Ce(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,qa.set(t,e),e)}class Yu{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Yu.type="NONE";const Xa=Yu;function Nn(t,e,n){return`firebase:${t}:${e}:${n}`}class _t{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Nn(this.userKey,r.apiKey,s),this.fullPersistenceKey=Nn("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Xn(this.auth,{idToken:e}).catch(()=>{});return n?ce._fromGetAccountInfoResponse(this.auth,n,e):null}return ce._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new _t(we(Xa),e,i);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||we(Xa);const o=Nn(i,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){let h;if(typeof u=="string"){const d=await Xn(e,{idToken:u}).catch(()=>{});if(!d)break;h=await ce._fromGetAccountInfoResponse(e,d,u)}else h=ce._fromJSON(e,u);c!==s&&(a=h),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new _t(s,e,i):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new _t(s,e,i))}}function Ya(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(eh(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ju(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(nh(e))return"Blackberry";if(ih(e))return"Webos";if(Zu(e))return"Safari";if((e.includes("chrome/")||Qu(e))&&!e.includes("edge/"))return"Chrome";if(th(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if(i?.length===2)return i[1]}return"Other"}function Ju(t=Q()){return/firefox\//i.test(t)}function Zu(t=Q()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Qu(t=Q()){return/crios\//i.test(t)}function eh(t=Q()){return/iemobile/i.test(t)}function th(t=Q()){return/android/i.test(t)}function nh(t=Q()){return/blackberry/i.test(t)}function ih(t=Q()){return/webos/i.test(t)}function As(t=Q()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function E1(t=Q()){return As(t)&&!!window.navigator?.standalone}function x1(){return U0()&&document.documentMode===10}function rh(t=Q()){return As(t)||th(t)||ih(t)||nh(t)||/windows phone/i.test(t)||eh(t)}function sh(t,e=[]){let n;switch(t){case"Browser":n=Ya(Q());break;case"Worker":n=`${Ya(Q())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${yn}/${i}`}class A1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function P1(t,e={}){return Rt(t,"GET","/v2/passwordPolicy",Es(t,e))}const C1=6;class I1{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??C1,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class R1{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ja(this),this.idTokenSubscription=new Ja(this),this.beforeStateQueue=new A1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zu,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=we(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await _t.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Xn(this,{idToken:e}),i=await ce._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(de(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=this.redirectUser?._redirectEventId,o=i?._redirectEventId,a=await this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(i=a.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return A(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Yn(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=u1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(de(this.app))return Promise.reject(rt(this));const n=e?ct(e):null;return n&&A(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&A(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return de(this.app)?Promise.reject(rt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return de(this.app)?Promise.reject(rt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(we(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await P1(this),n=new I1(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new mn("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await S1(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&we(e)||this._popupRedirectResolver;A(n,this,"argument-error"),this.redirectPersistenceManager=await _t.create(this,[we(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(A(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return A(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sh(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(de(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&o1(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ui(t){return ct(t)}class Ja{constructor(e){this.auth=e,this.observer=null,this.addObserver=G0(n=>this.observer=n)}get next(){return A(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ps={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function M1(t){Ps=t}function k1(t){return Ps.loadJS(t)}function D1(){return Ps.gapiScript}function L1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function O1(t,e){const n=$u(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(Tt(s,e??{}))return r;ye(r,"already-initialized")}return n.initialize({options:e})}function N1(t,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(we);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e?.popupRedirectResolver)}function V1(t,e,n){const i=ui(t);A(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=oh(e),{host:o,port:a}=F1(e),l=a===null?"":`:${a}`,c={url:`${s}//${o}${l}/`},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){A(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),A(Tt(c,i.config.emulator)&&Tt(u,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=c,i.emulatorConfig=u,i.settings.appVerificationDisabledForTesting=!0,ci(o)?(M0(`${s}//${o}${l}`),L0("Auth",!0)):U1()}function oh(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function F1(t){const e=oh(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:Za(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:Za(o)}}}function Za(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function U1(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class ah{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ve("not implemented")}_getIdTokenResponse(e){return ve("not implemented")}_linkToIdToken(e,n){return ve("not implemented")}_getReauthenticationResolver(e){return ve("not implemented")}}async function vt(t,e){return p1(t,"POST","/v1/accounts:signInWithIdp",Es(t,e))}const B1="http://localhost";class Ie extends ah{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ie(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ye("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...s}=n;if(!i||!r)return null;const o=new Ie(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return vt(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,vt(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,vt(e,n)}buildRequest(){const e={requestUri:B1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=gn(n)}return e}}class Cs{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Mt extends Cs{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Vn extends Mt{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return A("providerId"in n&&"signInMethod"in n,"argument-error"),Ie._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return A(e.idToken||e.accessToken,"argument-error"),Ie._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return Vn.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Vn.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i,oauthTokenSecret:r,pendingToken:s,nonce:o,providerId:a}=e;if(!i&&!r&&!n&&!s||!a)return null;try{return new Vn(a)._credential({idToken:n,accessToken:i,nonce:o,pendingToken:s})}catch{return null}}}class Le extends Mt{constructor(){super("facebook.com")}static credential(e){return Ie._fromParams({providerId:Le.PROVIDER_ID,signInMethod:Le.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Le.credentialFromTaggedObject(e)}static credentialFromError(e){return Le.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Le.credential(e.oauthAccessToken)}catch{return null}}}Le.FACEBOOK_SIGN_IN_METHOD="facebook.com";Le.PROVIDER_ID="facebook.com";class Oe extends Mt{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ie._fromParams({providerId:Oe.PROVIDER_ID,signInMethod:Oe.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Oe.credentialFromTaggedObject(e)}static credentialFromError(e){return Oe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Oe.credential(n,i)}catch{return null}}}Oe.GOOGLE_SIGN_IN_METHOD="google.com";Oe.PROVIDER_ID="google.com";class Ne extends Mt{constructor(){super("github.com")}static credential(e){return Ie._fromParams({providerId:Ne.PROVIDER_ID,signInMethod:Ne.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ne.credentialFromTaggedObject(e)}static credentialFromError(e){return Ne.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ne.credential(e.oauthAccessToken)}catch{return null}}}Ne.GITHUB_SIGN_IN_METHOD="github.com";Ne.PROVIDER_ID="github.com";class Ve extends Mt{constructor(){super("twitter.com")}static credential(e,n){return Ie._fromParams({providerId:Ve.PROVIDER_ID,signInMethod:Ve.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ve.credentialFromTaggedObject(e)}static credentialFromError(e){return Ve.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Ve.credential(n,i)}catch{return null}}}Ve.TWITTER_SIGN_IN_METHOD="twitter.com";Ve.PROVIDER_ID="twitter.com";class Et{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await ce._fromIdTokenResponse(e,i,r),o=Qa(i);return new Et({user:s,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=Qa(i);return new Et({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function Qa(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Jn extends Ke{constructor(e,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Jn.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Jn(e,n,i,r)}}function lh(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Jn._fromErrorAndOperation(t,s,e,i):s})}async function $1(t,e,n=!1){const i=await rn(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Et._forOperation(t,"link",i)}async function j1(t,e,n=!1){const{auth:i}=t;if(de(i.app))return Promise.reject(rt(i));const r="reauthenticate";try{const s=await rn(t,lh(i,r,e,t),n);A(s.idToken,i,"internal-error");const o=xs(s.idToken);A(o,i,"internal-error");const{sub:a}=o;return A(t.uid===a,i,"user-mismatch"),Et._forOperation(t,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&ye(i,"user-mismatch"),s}}async function H1(t,e,n=!1){if(de(t.app))return Promise.reject(rt(t));const i="signIn",r=await lh(t,i,e),s=await Et._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}function W1(t,e,n,i){return ct(t).onIdTokenChanged(e,n,i)}function z1(t,e,n){return ct(t).beforeAuthStateChanged(e,n)}function vb(t,e,n,i){return ct(t).onAuthStateChanged(e,n,i)}const Zn="__sak";class ch{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Zn,"1"),this.storage.removeItem(Zn),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const G1=1e3,K1=10;class uh extends ch{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rh(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);x1()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,K1):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},G1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}uh.type="LOCAL";const q1=uh;class hh extends ch{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}hh.type="SESSION";const dh=hh;function X1(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class hi{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new hi(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await X1(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}hi.receivers=[];function Is(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}class Y1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Is("",20);r.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(h){const d=h;if(d.data.eventId===c)switch(d.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function ge(){return window}function J1(t){ge().location.href=t}function fh(){return typeof ge().WorkerGlobalScope<"u"&&typeof ge().importScripts=="function"}async function Z1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Q1(){return navigator?.serviceWorker?.controller||null}function ew(){return fh()?self:null}const ph="firebaseLocalStorageDb",tw=1,Qn="firebaseLocalStorage",mh="fbase_key";class vn{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function di(t,e){return t.transaction([Qn],e?"readwrite":"readonly").objectStore(Qn)}function nw(){const t=indexedDB.deleteDatabase(ph);return new vn(t).toPromise()}function Pr(){const t=indexedDB.open(ph,tw);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Qn,{keyPath:mh})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Qn)?e(i):(i.close(),await nw(),e(await Pr()))})})}async function el(t,e,n){const i=di(t,!0).put({[mh]:e,value:n});return new vn(i).toPromise()}async function iw(t,e){const n=di(t,!1).get(e),i=await new vn(n).toPromise();return i===void 0?null:i.value}function tl(t,e){const n=di(t,!0).delete(e);return new vn(n).toPromise()}const rw=800,sw=3;class gh{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pr(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>sw)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fh()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hi._getInstance(ew()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Z1(),!this.activeServiceWorker)return;this.sender=new Y1(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Q1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pr();return await el(e,Zn,"1"),await tl(e,Zn),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>el(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>iw(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>tl(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=di(r,!1).getAll();return new vn(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gh.type="LOCAL";const ow=gh;new _n(3e4,6e4);function yh(t,e){return e?we(e):(A(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Rs extends ah{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vt(e,this._buildIdpRequest())}_linkToIdToken(e,n){return vt(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return vt(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function aw(t){return H1(t.auth,new Rs(t),t.bypassAuthState)}function lw(t){const{auth:e,user:n}=t;return A(n,e,"internal-error"),j1(n,new Rs(t),t.bypassAuthState)}async function cw(t){const{auth:e,user:n}=t;return A(n,e,"internal-error"),$1(n,new Rs(t),t.bypassAuthState)}class _h{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return aw;case"linkViaPopup":case"linkViaRedirect":return cw;case"reauthViaPopup":case"reauthViaRedirect":return lw;default:ye(this.auth,"internal-error")}}resolve(e){Ce(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ce(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const uw=new _n(2e3,1e4);async function wb(t,e,n){if(de(t.app))return Promise.reject(ue(t,"operation-not-supported-in-this-environment"));const i=ui(t);a1(t,e,Cs);const r=yh(i,n);return new tt(i,"signInViaPopup",e,r).executeNotNull()}class tt extends _h{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,tt.currentPopupAction&&tt.currentPopupAction.cancel(),tt.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return A(e,this.auth,"internal-error"),e}async onExecution(){Ce(this.filter.length===1,"Popup operations only handle one event");const e=Is();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ue(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ue(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,tt.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ue(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,uw.get())};e()}}tt.currentPopupAction=null;const hw="pendingRedirect",Fn=new Map;class dw extends _h{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Fn.get(this.auth._key());if(!e){try{const i=await fw(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Fn.set(this.auth._key(),e)}return this.bypassAuthState||Fn.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function fw(t,e){const n=gw(e),i=mw(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function pw(t,e){Fn.set(t._key(),e)}function mw(t){return we(t._redirectPersistence)}function gw(t){return Nn(hw,t.config.apiKey,t.name)}async function yw(t,e,n=!1){if(de(t.app))return Promise.reject(rt(t));const i=ui(t),r=yh(i,e),o=await new dw(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}const _w=600*1e3;class vw{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ww(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!vh(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";n.onError(ue(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_w&&this.cachedEventUids.clear(),this.cachedEventUids.has(nl(e))}saveEventToCache(e){this.cachedEventUids.add(nl(e)),this.lastProcessedEventTime=Date.now()}}function nl(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function vh({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function ww(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vh(t);default:return!1}}async function bw(t,e={}){return Rt(t,"GET","/v1/projects",e)}const Tw=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Sw=/^https?/;async function Ew(t){if(t.config.emulator)return;const{authorizedDomains:e}=await bw(t);for(const n of e)try{if(xw(n))return}catch{}ye(t,"unauthorized-domain")}function xw(t){const e=xr(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!Sw.test(n))return!1;if(Tw.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const Aw=new _n(3e4,6e4);function il(){const t=ge().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Pw(t){return new Promise((e,n)=>{function i(){il(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{il(),n(ue(t,"network-request-failed"))},timeout:Aw.get()})}if(ge().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ge().gapi?.load)i();else{const r=L1("iframefcb");return ge()[r]=()=>{gapi.load?i():n(ue(t,"network-request-failed"))},k1(`${D1()}?onload=${r}`).catch(s=>n(s))}}).catch(e=>{throw Un=null,e})}let Un=null;function Cw(t){return Un=Un||Pw(t),Un}const Iw=new _n(5e3,15e3),Rw="__/auth/iframe",Mw="emulator/auth/iframe",kw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Dw=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Lw(t){const e=t.config;A(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ss(e,Mw):`https://${t.config.authDomain}/${Rw}`,i={apiKey:e.apiKey,appName:t.name,v:yn},r=Dw.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${gn(i).slice(1)}`}async function Ow(t){const e=await Cw(t),n=ge().gapi;return A(n,t,"internal-error"),e.open({where:document.body,url:Lw(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kw,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=ue(t,"network-request-failed"),a=ge().setTimeout(()=>{s(o)},Iw.get());function l(){ge().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{s(o)})}))}const Nw={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Vw=500,Fw=600,Uw="_blank",Bw="http://localhost";class rl{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $w(t,e,n,i=Vw,r=Fw){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l={...Nw,width:i.toString(),height:r.toString(),top:s,left:o},c=Q().toLowerCase();n&&(a=Qu(c)?Uw:n),Ju(c)&&(e=e||Bw,l.scrollbars="yes");const u=Object.entries(l).reduce((d,[f,p])=>`${d}${f}=${p},`,"");if(E1(c)&&a!=="_self")return jw(e||"",a),new rl(null);const h=window.open(e||"",a,u);A(h,t,"popup-blocked");try{h.focus()}catch{}return new rl(h)}function jw(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}const Hw="__/auth/handler",Ww="emulator/auth/handler",zw=encodeURIComponent("fac");async function sl(t,e,n,i,r,s){A(t.config.authDomain,t,"auth-domain-config-required"),A(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:yn,eventId:r};if(e instanceof Cs){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",z0(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries({}))o[u]=h}if(e instanceof Mt){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${zw}=${encodeURIComponent(l)}`:"";return`${Gw(t)}?${gn(a).slice(1)}${c}`}function Gw({config:t}){return t.emulator?Ss(t,Ww):`https://${t.authDomain}/${Hw}`}const ji="webStorageSupport";class Kw{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dh,this._completeRedirectFn=yw,this._overrideRedirectResult=pw}async _openPopup(e,n,i,r){Ce(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const s=await sl(e,n,i,xr(),r);return $w(e,s,Is())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await sl(e,n,i,xr(),r);return J1(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Ce(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await Ow(e),i=new vw(e);return n.register("authEvent",r=>(A(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ji,{type:ji},r=>{const s=r?.[0]?.[ji];s!==void 0&&n(!!s),ye(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Ew(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return rh()||Zu()||As()}}const qw=Kw;var ol="@firebase/auth",al="1.11.1";class Xw{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){A(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Yw(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Jw(t){tn(new St("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;A(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sh(t)},c=new R1(i,r,s,l);return N1(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),tn(new St("auth-internal",e=>{const n=ui(e.getProvider("auth").getImmediate());return(i=>new Xw(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wt(ol,al,Yw(t)),Wt(ol,al,"esm2020")}const Zw=300,Qw=Vu("authIdTokenMaxAge")||Zw;let ll=null;const eb=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>Qw)return;const r=n?.token;ll!==r&&(ll=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function bb(t=qv()){const e=$u(t,"auth");if(e.isInitialized())return e.getImmediate();const n=O1(t,{popupRedirectResolver:qw,persistence:[ow,q1,dh]}),i=Vu("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const o=eb(s.toString());z1(n,o,()=>o(n.currentUser)),W1(n,a=>o(a))}}const r=I0("auth");return r&&V1(n,`http://${r}`),n}function tb(){return document.getElementsByTagName("head")?.[0]??document}M1({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=ue("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",tb().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Jw("Browser");const Tb=(function t(e){function n(r,s,o){var a,l={};if(Array.isArray(r))return r.concat(s);for(a in r)l[o?a.toLowerCase():a]=r[a];for(a in s){var c=o?a.toLowerCase():a,u=s[a];l[c]=c in l&&typeof u=="object"?n(l[c],u,c=="headers"):u}return l}function i(r,s,o,a,l){var c=typeof r!="string"?(s=r).url:r,u={config:s},h=n(e,s),d={};a=a||h.data,(h.transformRequest||[]).map(function(f){a=f(a,h.headers)||a}),h.auth&&(d.authorization=h.auth),a&&typeof a=="object"&&typeof a.append!="function"&&typeof a.text!="function"&&(a=JSON.stringify(a),d["content-type"]="application/json");try{d[h.xsrfHeaderName]=decodeURIComponent(document.cookie.match(RegExp("(^|; )"+h.xsrfCookieName+"=([^;]*)"))[2])}catch{}return h.baseURL&&(c=c.replace(/^(?!.*\/\/)\/?/,h.baseURL+"/")),h.params&&(c+=(~c.indexOf("?")?"&":"?")+(h.paramsSerializer?h.paramsSerializer(h.params):new URLSearchParams(h.params))),(h.fetch||fetch)(c,{method:(o||h.method||"get").toUpperCase(),body:a,headers:n(h.headers,d,!0),credentials:h.withCredentials?"include":l}).then(function(f){for(var p in f)typeof f[p]!="function"&&(u[p]=f[p]);return h.responseType=="stream"?(u.data=f.body,u):f[h.responseType||"text"]().then(function(y){u.data=y,u.data=JSON.parse(y)}).catch(Object).then(function(){return(h.validateStatus?h.validateStatus(f.status):f.ok)?u:Promise.reject(u)})})}return e=e||{},i.request=i,i.get=function(r,s){return i(r,s,"get")},i.delete=function(r,s){return i(r,s,"delete")},i.head=function(r,s){return i(r,s,"head")},i.options=function(r,s){return i(r,s,"options")},i.post=function(r,s,o){return i(r,o,"post",s)},i.put=function(r,s,o){return i(r,o,"put",s)},i.patch=function(r,s,o){return i(r,o,"patch",s)},i.all=Promise.all.bind(Promise),i.spread=function(r){return r.apply.bind(r,r)},i.CancelToken=typeof AbortController=="function"?AbortController:Object,i.defaults=e,i.create=t,i})();export{oe as A,rb as C,Oe as G,lb as H,db as M,Al as O,pi as P,ab as R,X as T,ei as _,Nd as a,ub as b,ob as c,st as d,pb as e,cb as f,fb as g,v0 as h,_b as i,bd as j,sb as k,J as l,yb as m,mb as n,bb as o,Kv as p,vb as q,Tb as r,wb as s,Vn as t,He as u,hb as v,Df as w,je as y,ib as z};
